##########
###Vanilla###
##########
# add_trait_ambitious_effect
# add_trait_arbitrary_effect
# add_trait_brave_effect
# add_trait_charitable_effect
# add_trait_chaste_effect
# add_trait_craven_effect
# add_trait_cruel_effect
# add_trait_cynical_effect
# add_trait_deceitful_effect
# add_trait_depressed_effect
# add_trait_diligent_effect
# add_trait_envious_effect
# add_trait_gluttonous_effect
# add_trait_greedy_effect
# add_trait_gregarious_effect
# add_trait_kind_effect
# add_trait_lustful_effect
# add_trait_one_eyed_effect
# add_trait_one_handed_effect
# add_trait_paranoid_effect
# add_trait_patient_effect
# add_trait_possessed_effect
# add_trait_proud_effect
# add_trait_severely_injured_effect
# add_trait_shy_effect
# add_trait_slothful_effect
# add_trait_temperate_effect
# add_trait_trusting_effect
# add_trait_wounded_effect
# add_trait_wroth_effect
# add_trait_zealous_effect

# add_trait_silently_ambitious_effect
# add_trait_silently_arbitrary_effect
# add_trait_silently_brave_effect
# add_trait_silently_charitable_effect
# add_trait_silently_chaste_effect
# add_trait_silently_craven_effect
# add_trait_silently_cruel_effect
# add_trait_silently_cynical_effect
# add_trait_silently_deceitful_effect
# add_trait_silently_depressed_effect
# add_trait_silently_diligent_effect
# add_trait_silently_envious_effect
# add_trait_silently_gluttonous_effect
# add_trait_silently_greedy_effect
# add_trait_silently_gregarious_effect
# add_trait_silently_honest_effect
# add_trait_silently_humble_effect
# add_trait_silently_kind_effect
# add_trait_silently_lustful_effect
# add_trait_silently_one_eyed_effect
# add_trait_silently_one_handed_effect
# add_trait_silently_patient_effect
# add_trait_silently_possessed_effect
# add_trait_silently_proud_effect
# add_trait_silently_severely_injured_effect
# add_trait_silently_shy_effect
# add_trait_silently_slothful_effect
# add_trait_silently_temperate_effect
# add_trait_silently_wounded_effect
# add_trait_silently_wroth_effect

# remove_trait_charitable_effect
# remove_trait_chaste_effect
# remove_trait_content_effect
# remove_trait_craven_effect
# remove_trait_cruel_effect
# remove_trait_diligent_effect
# remove_trait_envious_effect
# remove_trait_gregarious_effect
# remove_trait_honest_effect
# remove_trait_humble_effect
# remove_trait_just_effect
# remove_trait_kind_effect
# remove_trait_patient_effect
# remove_trait_proud_effect
# remove_trait_shy_effect
# remove_trait_slothful_effect
# remove_trait_temperate_effect
# remove_trait_trusting_effect
# remove_trait_wroth_effect
# remove_trait_zealous_effect

# remove_trait_silently_charitable_effect
# remove_trait_silently_chaste_effect
# remove_trait_silently_content_effect
# remove_trait_silently_craven_effect
# remove_trait_silently_cruel_effect
# remove_trait_silently_diligent_effect
# remove_trait_silently_gluttonous_effect
# remove_trait_silently_greedy_effect
# remove_trait_silently_gregarious_effect
# remove_trait_silently_honest_effect
# remove_trait_silently_humble_effect
# remove_trait_silently_just_effect
# remove_trait_silently_kind_effect
# remove_trait_silently_lustful_effect
# remove_trait_silently_patient_effect
# remove_trait_silently_proud_effect
# remove_trait_silently_shy_effect
# remove_trait_silently_slothful_effect
# remove_trait_silently_temperate_effect
# remove_trait_silently_trusting_effect
# remove_trait_silently_wroth_effect
# remove_trait_silently_zealous_effect

# remove_patrons_effect

# increase_mercenary_troop_support_effect
# increase_mercenary_ambition_level_effect
# decrease_mercenary_ambition_level_effect

# add_symptom_effect
# add_maimed_trait_effect
# add_crippled_trait_effect
# add_plague_symptom_effect
# add_pneumonia_symptom_effect
# add_syphilis_symptom_effect
# add_tuberculosis_symptom_effect
# add_typhoid_symptom_effect
# add_typhus_symptom_effect
# add_measles_symptom_effect
# add_smallpox_symptom_effect
# add_flu_symptom_effect
# add_dysentery_symptom_effect
# add_gout_symptom_effect
# add_food_poisoning_symptom_effect
# add_rabies_symptom_effect
# add_cancer_symptom_effect
# add_scourge_symptom_effect
# add_red_death_symptom_effect
# add_butterfly_fever_symptom_effect

# increase_depopulation_effect
# decrease_depopulation_effect

# prisoner_mutilate_effect
# jailor_mutilate_effect
# prisoner_torture_effect
# prisoner_torture_confession_effect
# jailor_torture_effect
# jailor_humiliation_effect
# prisoner_humiliation_effect
# maim_hand_effect
# mangle_effect
# remove_treatment_modifiers_effect
# remove_disease_flags_effect

# leave_court_effect
# leave_court_and_die_effect
# give_epidemic_disease_effect
# blessing_removes_disease_effect
# deaths_gift_removes_disease_effect
# remove_disease_trait_effect
# resolve_severely_injured_effect
# leave_council_position_effect
# increase_prosperity_effect
# add_disease_level_effect
# clear_disease_level_effect
# end_inaccessibility_effect

# give_pneumonic_effect
# give_has_tuberculosis_effect
# give_has_typhoid_fever_effect
# give_has_bubonic_plague_effect
# give_has_measles_effect
# give_has_small_pox_effect
# give_has_aztec_disease_effect
# give_syphilitic_effect
# give_flu_effect
# give_dysentery_effect
# give_gout_effect
# give_food_poisoning_effect
# give_rabies_effect
# give_cancer_effect
# give_ill_effect

# unprotected_sex_effect_event_target
# venereal_disease_effect_event_target
# impregnate_effect_event_target
# unprotected_sex_effect
# venereal_disease_effect
# impregnate_effect
# will_not_marry_effect
# female_councilor_effect_3
# remove_prison_reason_effect
# add_cat_effect

###MONKS & MYSTICS###

# remove_assassins_debt_effect
# remove_secret_religion_trait_effect
# pay_back_assassins_effect
# major_soul_corruption_effect
# minor_soul_corruption_effect

# add_society_currency_trivial_effect
# add_society_currency_minor_effect
# add_society_currency_medium_effect
# add_society_currency_major_effect
# add_society_currency_massive_effect
# detract_society_currency_trivial_effect
# detract_society_currency_tiny_effect
# detract_society_currency_minor_effect
# detract_society_currency_medium_effect
# detract_society_currency_major_effect
# add_society_influence_minor_effect
# add_society_influence_medium_effect
# add_society_influence_major_effect
# detract_society_influence_minor_effect
# detract_society_influence_medium_effect
# detract_society_influence_major_effect

# remove_random_maimed_effect
# remove_random_disease_effect
# remove_random_epidemic_disease_effect
# remove_symptoms_effect
# remove_random_negative_congenital_effect

# join_from_devil_worshiper_society_effect
# add_prolong_life_effect
# join_prev_devil_worshiper_society

# remove_education_effect
# remove_lifestyle_trait_effect

# monastic_order_purity_effect
# join_prev_monastic_order_society

# clr_artifact_flagsmodifiers_effect
# clr_artifact_searcher_effect
# add_artifact_search_payment_effect

# random_accident_death_effect

# spawn_peasant_army_effect
# spawn_peasant_reinforcements_effect
# spawn_heretic_army_effect
# spawn_heretic_reinforcements_effect
# spawn_nationalist_army_effect
# spawn_nationalist_reinforcements_effect
# spawn_religious_army_effect
# spawn_religious_reinforcements_effect

# add_ascetic_trait_effect
# print_scope_effect

# add_sympathy_for_prevs_true_religion_effect
# add_trait_for_prevs_secret_religion_society_effect
# flip_to_secret_religion_effect
# add_prevs_secret_religion_trait_effect
# add_secret_religion_trait_trigger_is_religion_or_old_religion_flag_clear_flag_after_effect_is_run_this_name_is_a_tribute_to_m_effect
# add_religion_char_flag_effect
# clr_religion_char_flag_effect
# event_target_old_religion_from_flag_effect
# increase_visibility_effect
# increase_visibility_minor_effect
# decrease_visibility_effect

# hermetic_add_herbal_ingredient_effect
# hermetic_add_animal_ingredient_effect
# hermetic_add_misc_ingredient_effect
# remove_scrying_omen_modifiers_effect
# calculate_scrying_outcome_effect
# upgrade_seer_modifier_effect
# downgrade_seer_modifier_effect
# scrying_omen_fulfilled_by_gaining_disease_effect
# scrying_omen_fulfilled_by_removing_disease_effect

# add_pet_owl_effect
# add_mission_succeed_influence_effect
# add_mission_fail_influence_effect
# add_mission_decline_influence_effect

# clean_up_horoscope_effect
# upgrade_education_effect
# set_horoscope_modifier_effect
# increase_astronomical_insights_modifier_effect
# remove_astronomical_insight_modifier_effect
# add_Aries_sign_trait_effect
# add_Taurus_sign_trait_effect
# add_Gemini_sign_trait_effect
# add_Cancer_sign_trait_effect
# add_Leo_sign_trait_effect
# add_Virgo_sign_trait_effect
# add_Libra_sign_trait_effect
# add_Scorpius_sign_trait_effect
# add_Sagittarius_sign_trait_effect
# add_Capricorn_sign_trait_effect
# add_Aquarius_sign_trait_effect
# add_Pisces_sign_trait_effect
# add_western_zodiac_trait_effect

# flip_secret_religious_community_provinces
# clean_up_after_leaving_society_effect

# increase_council_power_effect
# increase_vassal_freedom_effect

# spawn_good_commander_effect
# raiding_adventurer_war_declaration_effect

# add_grace_trivial_effect
# add_grace_minor_effect
# add_grace_medium_effect
# add_grace_major_effect
# add_grace_massive_effect
# detract_grace_trivial_effect
# detract_grace_minor_effect
# detract_grace_medium_effect
# detract_grace_major_effect
# detract_grace_massive_effect

# set_china_boon_cd_effect
# set_china_tribute_cd_effect
# leave_court_for_china_effect

# add_kinslayer_trait_effect
# remove_kinslayer_trait_effect

# set_higher_quality_of_book_flags_effect
# set_lower_quality_of_book_flags_effect
# send_final_book_outcome_event_effect

##########
###AGOT###
##########
# knight_character_effect
# increase_warlock_magic
# child_fertility_debuff
# appoint_KG_lord_commander_effect
# murder_success_calulator_effect
# increase_holding_base_value_effect
# set_unsullied_name_effect

# plot_murder_undiscovered_effect
# plot_murder_discovered_effect
# cm_plot_murder_undiscovered_effect
# cm_plot_murder_discovered_effect
# FROM_murder_red_god_resurrect_effect
# ROOT_murder_red_god_resurrect_effect
# red_god_resurrect_effect

# legitimise_newborn_FROM_effect
# acknowledge_newborn_FROM_effect
# denounce_newborn_FROM_effect

# bastard_nickname_mother_effect
# bastard_nickname_father_effect
# bastard_nickname_ROOT_effect

# set_mega_war_empire_variable_ROOT_effect
# set_mega_war_kingdom_variable_ROOT_effect

# extrajudicial_action_tyranny_effect
# add_sympathy_trait_effect
# slave_raid_gain_slaves_effect
# add_priest_trait_effect
# heal_basic_effect
# heal_advanced_effect
# increase_red_god_magic

# shattered_realms_effect
# symmetrical_start_effect
# startup_prosperity_effect

# gain_regency_effect
# find_ship_name_effect
# add_fear_execution_effect
# add_fear_torture_effect
# add_fear_torture_execution_effect
# enslave_effect

# get_education_level_effect
# decrease_education_level_effect
# increase_education_level_effect
# add_random_leadership_trait_effect
# add_education_leadership_traits_effect

# spawn_native_army_effect
# spawn_slave_army_effect
# spawn_slave_reinforcements_effect
# spawn_pirate_army_effect
# spawn_wildling_army_effect
# spawn_rebels_effect

# calculate_dragon_team_strength_effect
# calculate_dragon_preference_effect

# calculate_trial_strength_effect
# war_lost_lose_authority_effect
# excommunication_chance_effect
# excommunicate_effect

# mega_war_rebel_leader_resolution_effect
# mega_war_emperor_rebels_resolution_effect

# FROM_joins_ROOTS_factions_effect

# mega_war_merchant_republic_check_effect
# stillbirth_chance_effect
# seek_treatment_from_physician_effect
# abdicate_effect
# inherit_debt_effect
# make_province_ruin_effect
# province_andal_culture_effect

# remove_all_job_titles

###TRAIT ADDING EFFECTS###
#Add new ones in alphabetical order.

#With notification
add_trait_ambitious_effect = {
	if = {
		limit = {
			NOR = {
				trait = ambitious
				trait = content
			}
		}
		add_trait = ambitious
		hidden_tooltip = { character_event = { id = 38278 } }
	}
}

add_trait_arbitrary_effect = {
	if = {
		limit = {
			NOR = {
				trait = arbitrary
				trait = just
			}
		}
		add_trait = arbitrary
		hidden_tooltip = { character_event = { id = 38266 } }
	}
}

add_trait_brave_effect  = {
	if = {
		limit = { 
			NOR = { 
				trait = brave 
				trait = craven
			}
		} 
		add_trait = brave
		hidden_tooltip = { character_event = { id = 38270 } }
	}
}


add_trait_charitable_effect = {
	if = {
		limit = { 
			NOR = { 
				trait = charitable
				trait = greedy
			}
		} 
		add_trait = charitable
		hidden_tooltip = { character_event = { id = 38273 } } # Notify Charitable
	}
}

add_trait_chaste_effect = {
	if = {
		limit = { 
			NOR = { 
				trait = chaste 
				trait = lustful
			}
		} 
		add_trait = chaste
		hidden_tooltip = { character_event = { id = 38274 } }
	}
}

add_trait_craven_effect  = {
	if = {
		limit = { 
			NOR = { 
				trait = brave 
				trait = craven
			}
		} 
		add_trait = craven
		hidden_tooltip = { character_event = { id = 38257 } }
	}
}

add_trait_cruel_effect  = {
	if = {
		limit = { 
			NOR = { 
				trait = cruel 
				trait = kind
			}
		} 
		add_trait = cruel
		hidden_tooltip = { character_event = { id = 38259 } }
	}
}

add_trait_cynical_effect = {
	if = {
		limit = {
			NOR = {
				trait = cynical
				trait = zealous
			}
		}
		add_trait = cynical
		hidden_tooltip = { character_event = { id = 38258 } } #notify cynical
	}
}

add_trait_deceitful_effect = {
	if = {
		limit = { 
			NOR = { 
				trait = deceitful 
				trait = honest
				trait = honorable
			} 
		}
		add_trait = deceitful
		hidden_tooltip = { character_event = { id = 38255 } }
	}
}

add_trait_depressed_effect = {
	if = {
		limit = { NOT = { trait = depressed } }
		add_trait = depressed
		hidden_tooltip = { character_event = { id = 38288 } }
	}
}

add_trait_diligent_effect = {
	if = {
		limit = {
			NOR = {
				trait = diligent
				trait = slothful
			}
		}
		add_trait = diligent
		hidden_tooltip = { character_event = { id = 38256 } } #notify diligent
	}
}

add_trait_envious_effect = {
	if = {
		limit = {
			NOR = {
				trait = kind
				trait = envious
			}
		}
		add_trait = envious
		hidden_tooltip = { character_event = { id = 38271 } }
	}	
}

add_trait_gluttonous_effect = {
	if = {
		limit = {
			NOR = {
				trait = temperate
				trait = gluttonous
			}
		}
		add_trait = gluttonous
		gain_weight_medium_effect = yes
		weight_trait_check_effect = yes
		hidden_tooltip = { character_event = { id = 38277 } } #Notify Gluttonous
	}
}


add_trait_greedy_effect = {
	if = {
		limit = { 
			NOR = { 
				trait = greedy 
				trait = charitable
			}
		} 
		add_trait = greedy
		hidden_tooltip = { character_event = { id = 38252 } }
	}
}

add_trait_gregarious_effect = {
	if = {
		limit = {
			NOR = {
				trait = gregarious
				trait = shy
			}
		}
		add_trait = gregarious
		hidden_tooltip = { character_event = { id = 38265 } }
	}
}

add_trait_honest_effect = {
	if = {
		limit = {
			NOR = {
				trait = honest
				trait = deceitful
			}
		}
		add_trait = honest
		hidden_tooltip = { character_event = { id = 38262 } } #Notify Honest
	}
}
add_trait_humble_effect = {
	if = {
		limit = {
			NOR = {
				trait = humble
				trait = proud
			}
		}
		add_trait = humble
		hidden_tooltip = { character_event = { id = 38260 } } #Notify Humble
	}
}

add_trait_kind_effect = {
	if = {
		limit = {
			NOR = {
				trait = kind
				trait = envious
				trait = cruel
			}
		}
		add_trait = kind
		hidden_tooltip = { character_event = { id = 38268 } }
	}	
}

add_trait_lustful_effect = {
	if = {
		limit = {
			NOR = {
				trait = lustful
				trait = chaste
			}
		}
		add_trait = lustful
		hidden_tooltip = { character_event = { id = 38272 } }
	}
}

add_trait_one_eyed_effect = {
	if = {
		limit = {
			NOR = {
				trait = one_eyed
				trait = blinded
			}
		}
		add_trait = one_eyed
		hidden_tooltip = { character_event = { id = RIP.11501 } }
		add_trait_severely_injured_effect = yes
		
	}
}

add_trait_one_handed_effect = {
	if = {
		limit = { NOT = { trait = one_handed } }
		add_trait = one_handed
		hidden_tooltip = { character_event = { id = RIP.11502 } }
		add_trait_severely_injured_effect = yes
	}
}

add_trait_paranoid_effect = {
	if = {
		limit = {
			NOR = {
				trait = trusting
				trait = paranoid
			}
		}
		add_trait = paranoid
		hidden_tooltip = { character_event = { id = 38275 } } #Notify Paranoid
	}
}

add_trait_patient_effect = {
	if = {
		limit = {
			NOR = {
				trait = patient
				trait = wroth
			}
		}
		add_trait = patient
		hidden_tooltip = { character_event = { id = 38264 } }
	}
}

add_trait_possessed_effect = {
	if = {
		limit = {
			NOT = {
				trait = possessed
			}
		}
		add_trait = possessed
		hidden_tooltip = { character_event = { id = 38315 } } # Notify Possessed
	}
}

add_trait_proud_effect = {
	if = {
		limit = {
			NOR = {
				trait = proud
				trait = humble
			}
		}
		add_trait = proud
		hidden_tooltip = { character_event = { id = 38261 } } # Notify Proud
	}
}

add_trait_severely_injured_effect = {
	if = {
		limit = { NOT = { trait = severely_injured } }
		add_trait = severely_injured

		hidden_tooltip = {
			random_list = {
				75 = { #Get rid of severely_injured
					character_event = { id = RIP.11000 days = 90 random = 275}
				}
				25 = { #Get rid of severely_injured but develop infection
					set_character_flag = pending_infection
					character_event = { id = RIP.11000 days = 90 random = 275}
				}
			}
		}
	}
}

add_trait_shy_effect = {
	if = {
		limit = {
			NOR = {
				trait = gregarious
				trait = shy
			}
		}
		add_trait = shy
		hidden_tooltip = { character_event = { id = 38295 } }
	}
}

add_trait_slothful_effect = {
	if = {
		limit = {
			NOR = {
				trait = diligent
				trait = slothful
			}
		}
		add_trait = slothful
		hidden_tooltip = { character_event = { id = 38251 } } #notify slothful
	}
}

add_trait_stressed_effect = {
	if = {
		limit = {
			NOR = {
				trait = stressed
			}
		}
		add_trait = stressed
		hidden_tooltip = { character_event = { id = 38282 } } #notify stressed
	}
}

add_trait_temperate_effect = {
	if = {
		limit = {
			NOR = {
				trait = temperate
				trait = gluttonous
			}
		}
		add_trait = temperate
		hidden_tooltip = { character_event = { id = 38276 } } #Notify Temperate
	}
}

add_trait_trusting_effect = {
	if = {
		limit = {
			NOR = {
				trait = trusting
				trait = paranoid
			}
		}
		add_trait = trusting
		hidden_tooltip = { character_event = { id = 38250 } } #Notify Trusting
	}
}

add_trait_wounded_effect = {
	if = {
		limit = { NOT = { trait = wounded } }
		add_trait = wounded
		add_blood_splatter_effect = yes
		hidden_tooltip = { character_event = { id = 38280 } }
	}
}

add_trait_wroth_effect = {
	if = {
		limit = { 
			NOR = { 
				trait = wroth 
				trait = patient
			}
		} 
		add_trait = wroth
		hidden_tooltip = { character_event = { id = 38254 } }
	}
}
add_trait_zealous_effect = {
	if = {
		limit = {
			NOR = {
				trait = cynical
				trait = zealous
			}
		}
		add_trait = zealous
		hidden_tooltip = { character_event = { id = 38269 } }
	}
}

#Without notification
add_trait_silently_ambitious_effect = {
	if = {
		limit = {
			NOR = {
				trait = ambitious
				trait = content
			}
		}
		add_trait = ambitious
	}
}

add_trait_silently_arbitrary_effect = {
	if = {
		limit = {
			NOR = {
				trait = arbitrary
				trait = just
			}
		}
		add_trait = arbitrary
	}
}

add_trait_silently_brave_effect  = {
	if = {
		limit = { 
			NOR = { 
				trait = brave 
				trait = craven
			}
		} 
		add_trait = brave
	}
}


add_trait_silently_charitable_effect = {
	if = {
		limit = { 
			NOR = { 
				trait = charitable
				trait = greedy
			}
		} 
		add_trait = charitable
	}
}

add_trait_silently_chaste_effect = {
	if = {
		limit = { 
			NOR = { 
				trait = chaste 
				trait = lustful
			}
		} 
		add_trait = chaste
	}
}

add_trait_silently_craven_effect  = {
	if = {
		limit = { 
			NOR = { 
				trait = brave 
				trait = craven
			}
		} 
		add_trait = craven
	}
}

add_trait_silently_cruel_effect  = {
	if = {
		limit = { 
			NOR = { 
				trait = cruel 
				trait = kind
			}
		} 
		add_trait = cruel
	}
}

add_trait_silently_cynical_effect = {
	if = {
		limit = {
			NOR = {
				trait = cynical
				trait = zealous
			}
		}
		add_trait = cynical
	}
}

add_trait_silently_content_effect = {
	if = {
		limit = {
			NOR = {
				trait = content
				trait = ambitious
			}
		}
		add_trait = content
	}
}

add_trait_silently_deceitful_effect = {
	if = {
		limit = { 
			NOR = { 
				trait = deceitful 
				trait = honest
				trait = honorable
			} 
		}
		add_trait = deceitful
	}
}

add_trait_silently_depressed_effect = {
	if = {
		limit = { NOT = { trait = depressed } }
		add_trait = depressed
	}
}

add_trait_silently_diligent_effect = {
	if = {
		limit = {
			NOR = {
				trait = diligent
				trait = slothful
			}
		}
		add_trait = diligent
	}
}

add_trait_silently_envious_effect = {
	if = {
		limit = {
			NOR = {
				trait = kind
				trait = envious
			}
		}
		add_trait = envious

	}	
}

add_trait_silently_gluttonous_effect = {
	if = {
		limit = {
			NOR = {
				trait = temperate
				trait = gluttonous
			}
		}
		add_trait = gluttonous
		gain_weight_medium_effect = yes
		weight_trait_check_effect = yes
	}
}

add_trait_silently_greedy_effect = {
	if = {
		limit = { 
			NOR = { 
				trait = greedy 
				trait = charitable
			}
		} 
		add_trait = greedy
	}
}

add_trait_silently_gregarious_effect = {
	if = {
		limit = {
			NOR = {
				trait = gregarious
				trait = shy
			}
		}
		add_trait = gregarious
	}
}
add_trait_silently_honest_effect = {
	if = {
		limit = {
			NOR = {
				trait = honest
				trait = deceitful
			}
		}
		add_trait = honest
	}
}

add_trait_silently_humble_effect = {
	if = {
		limit = {
			NOR = {
				trait = humble
				trait = proud
			}
		}
		add_trait = humble
	}
}

add_trait_silently_kind_effect = {
	if = {
		limit = {
			NOR = {
				trait = kind
				trait = envious
				trait = cruel
			}
		}
		add_trait = kind

	}	
}

add_trait_silently_lustful_effect = {
	if = {
		limit = {
			NOR = {
				trait = lustful
				trait = chaste
			}
		}
		add_trait = lustful
	}
}

add_trait_silently_one_eyed_effect = {
	if = {
		limit = {
			NOR = {
				trait = one_eyed
				trait = blinded
			}
		}
		add_trait = one_eyed

		add_trait_silently_severely_injured_effect = yes
		
	}
}

add_trait_silently_one_handed_effect = {
	if = {
		limit = { NOT = { trait = one_handed } }
		add_trait = one_handed

		add_trait_silently_severely_injured_effect = yes
	}
}

add_trait_silently_patient_effect = {
	if = {
		limit = {
			NOR = {
				trait = patient
				trait = wroth
			}
		}
		add_trait = patient
	}
}

add_trait_silently_possessed_effect = {
	if = {
		limit = {
			NOT = {
				trait = possessed
			}
		}
		add_trait = possessed
	}
}

add_trait_silently_proud_effect = {
	if = {
		limit = {
			NOR = {
				trait = proud
				trait = humble
			}
		}
		add_trait = proud
	}
}

add_trait_silently_severely_injured_effect = {
	if = {
		limit = { NOT = { trait = severely_injured } }
		add_trait = severely_injured

		hidden_tooltip = {
			random_list = {
				75 = { #Get rid of severely_injured
					character_event = { id = RIP.11000 days = 90 random = 275}
				}
				25 = { #Get rid of severely_injured but develop infection
					set_character_flag = pending_infection
					character_event = { id = RIP.11000 days = 90 random = 275}
				}
			}
		}
	}
}

add_trait_silently_shy_effect = {
	if = {
		limit = {
			NOR = {
				trait = gregarious
				trait = shy
			}
		}
		add_trait = shy
	}
}

add_trait_silently_slothful_effect = {
	if = {
		limit = {
			NOR = {
				trait = diligent
				trait = slothful
			}
		}
		add_trait = slothful
	}
}

add_trait_silently_temperate_effect = {
	if = {
		limit = {
			NOR = {
				trait = temperate
				trait = gluttonous
			}
		}
		add_trait = temperate
	}
}

add_trait_silently_wounded_effect = {
	add_trait = wounded
	add_blood_splatter_effect = yes
}

add_trait_silently_wroth_effect = {
	if = {
		limit = { 
			NOR = { 
				trait = wroth 
				trait = patient
			}
		} 
		add_trait = wroth
	}
}

#TRAIT REMOVAL EFFECTS
#Add new ones in alphabetical order.

#Add with notification
remove_trait_brave_effect = {
	if = {
		limit = { trait = brave }
		remove_trait = brave
		hidden_tooltip = { character_event = { id = 38320 } }
	}
}
remove_trait_charitable_effect = {
	if = {
		limit = { trait = charitable }
		remove_trait = charitable
		hidden_tooltip = { character_event = { id = 38321 } }
	}
}

remove_trait_chaste_effect = {
	if = {
		limit = { trait = chaste }
		remove_trait = chaste
		hidden_tooltip = { character_event = {	id = 38303 } } #Notify Removed Chaste
	}
}

remove_trait_content_effect = {
	if = {
		limit = { trait = content }
		remove_trait = content
		hidden_tooltip = { character_event = {	id = 38299 } }
	}
}

remove_trait_craven_effect = {
	if = {
		limit = { trait = craven }
		remove_trait = craven
		hidden_tooltip = { character_event = { id = 38296 } }
	}	
}

remove_trait_cruel_effect = {
	if = {
		limit = { trait = cruel }
		remove_trait = cruel
	}	
}

remove_trait_depressed_effect = {
	if = {
		limit = { trait = depressed }
		remove_trait = depressed
		hidden_tooltip = { character_event = { id = 38314 } }
	}
}

remove_trait_diligent_effect = {
	if = {
		limit = { trait = diligent }
		remove_trait = diligent
		hidden_tooltip = { character_event = { id = 38319 } }
	}
}

remove_trait_envious_effect = {
	if = {
		limit = { trait = envious }
		remove_trait = envious
	}
}

remove_trait_greedy_effect = {
	if = {
		limit = { trait = greedy }
		remove_trait = greedy
		hidden_tooltip = { character_event = { id = 38322 } }
	}
}

remove_trait_gregarious_effect = {
	if = {
		limit = { trait = gregarious }
		remove_trait = gregarious
		hidden_tooltip = { character_event = { id = 38297 } }
	}
}

remove_trait_honest_effect = {
	if = {
		limit = { trait = honest }
		remove_trait = honest
		hidden_tooltip = { character_event = { id = 38311 } }
	}
}

remove_trait_humble_effect = {
	if = {
		limit = { trait = humble }
		remove_trait = humble
	}
}

remove_trait_just_effect = {
	if = {
		limit = { trait = just }
		remove_trait = just
		hidden_tooltip = { character_event = { id = 38317 } }
	}
}

remove_trait_kind_effect = {
	if = {
		limit = { trait = kind }
		remove_trait = kind
	}	
}

remove_trait_patient_effect = {
	if = {
		limit = { trait = patient }
		remove_trait = patient
	}	
}

remove_trait_proud_effect = {
	if = {
		limit = { trait = proud }
		remove_trait = proud
	}	
}

remove_trait_shy_effect = {
	if = {
		limit = { trait = shy }
		remove_trait = shy
		hidden_tooltip = { character_event = { id = 38295 } }
	}
}
remove_trait_slothful_effect = {
	if = {
		limit = { trait = slothful }
		remove_trait = slothful
		hidden_tooltip = {
			character_event = {
				id = 38298 #Notify Remove Slothful
			}
		}
	}
}

remove_trait_temperate_effect = {
	if = {
		limit = { trait = temperate }
		remove_trait = temperate
		hidden_tooltip = { character_event = { id = 38311 } }
	}
}

remove_trait_trusting_effect = {
	if = {
		limit = { trait = trusting }
		remove_trait = trusting
	}
}

remove_trait_wroth_effect = {
	if = {
		limit = { trait = wroth }
		remove_trait = wroth
	}
}

remove_trait_zealous_effect = {
	if = {
		limit = { trait = zealous }
		remove_trait = zealous
		hidden_tooltip = { character_event = { id = 38310 } }
	}	
}

#Silently
remove_trait_silently_ambitious_effect = {
	if = {
		limit = { trait = ambitious }
		remove_trait = ambitious
	}
}
remove_trait_silently_brave_effect = {
	if = {
		limit = { trait = brave }
		remove_trait = brave
	}
}
remove_trait_silently_charitable_effect = {
	if = {
		limit = { trait = charitable }
		remove_trait = charitable
	}
}

remove_trait_silently_chaste_effect = {
	if = {
		limit = { trait = chaste }
		remove_trait = chaste
	}
}

remove_trait_silently_content_effect = {
	if = {
		limit = { trait = content }
		remove_trait = content
	}
}

remove_trait_silently_craven_effect = {
	if = {
		limit = { trait = craven }
		remove_trait = craven
	}	
}

remove_trait_silently_cruel_effect = {
	if = {
		limit = { trait = cruel }
		remove_trait = cruel
	}	
}

remove_trait_silently_diligent_effect = {
	if = {
		limit = { trait = diligent }
		remove_trait = diligent
	}
}

remove_trait_silently_gluttonous_effect = {
	if = {
		limit = { trait = gluttonous }
		remove_trait = gluttonous
	}
}

remove_trait_silently_greedy_effect = {
	if = {
		limit = { trait = greedy }
		remove_trait = greedy
	}
}

remove_trait_silently_gregarious_effect = {
	if = {
		limit = { trait = gregarious }
		remove_trait = gregarious
	}
}

remove_trait_silently_honest_effect = {
	if = {
		limit = { trait = honest }
		remove_trait = honest
	}
}

remove_trait_silently_humble_effect = {
	if = {
		limit = { trait = humble }
		remove_trait = humble
	}
}

remove_trait_silently_just_effect = {
	if = {
		limit = { trait = just }
		remove_trait = just
	}
}

remove_trait_silently_kind_effect = {
	if = {
		limit = { trait = kind }
		remove_trait = kind
	}	
}

remove_trait_silently_lustful_effect = {
	if = {
		limit = { trait = lustful }
		remove_trait = lustful
	}
}

remove_trait_silently_patient_effect = {
	if = {
		limit = { trait = patient }
		remove_trait = patient
	}	
}

remove_trait_silently_proud_effect = {
	if = {
		limit = { trait = proud }
		remove_trait = proud
	}	
}

remove_trait_silently_shy_effect = {
	if = {
		limit = { trait = shy }
		remove_trait = shy
	}
}

remove_trait_silently_slothful_effect = {
	if = {
		limit = { trait = slothful }
		remove_trait = slothful
	}
}

remove_trait_silently_temperate_effect = {
	if = {
		limit = { trait = temperate }
		remove_trait = temperate
	}
}

remove_trait_silently_trusting_effect = {
	if = {
		limit = { trait = trusting }
		remove_trait = trusting
	}
}

remove_trait_silently_wroth_effect = {
	if = {
		limit = { trait = wroth }
		remove_trait = wroth
	}
}

remove_trait_silently_zealous_effect = {
	if = {
		limit = { trait = zealous }
		remove_trait = zealous
	}	
}

###REAPER's DUE###

remove_patrons_effect = {
	remove_character_modifier = patron_shiva
	remove_character_modifier = patron_vishnu
	remove_character_modifier = patron_brahma
	remove_character_modifier = patron_kali
	remove_character_modifier = patron_ganesha
	remove_character_modifier = patron_ganga
}

increase_mercenary_troop_support_effect = {
	if = {
		limit = {
			has_mercenary_maintenance_modifier = maintaining_mercenary_band_6
		}
		set_mercenary_maintenance_modifier = maintaining_mercenary_band_7
		change_title_army_size = 0.3
	}
	if = {
		limit = {
			has_mercenary_maintenance_modifier = maintaining_mercenary_band_5
		}
		set_mercenary_maintenance_modifier = maintaining_mercenary_band_6
		change_title_army_size = 0.3
	}
	if = {
		limit = {
			has_mercenary_maintenance_modifier = maintaining_mercenary_band_4
		}
		set_mercenary_maintenance_modifier = maintaining_mercenary_band_5
		change_title_army_size = 0.3
	}
	if = {
		limit = {
			has_mercenary_maintenance_modifier = maintaining_mercenary_band_3
		}
		set_mercenary_maintenance_modifier = maintaining_mercenary_band_4
		change_title_army_size = 0.3
	}
	if = {
		limit = {
			has_mercenary_maintenance_modifier = maintaining_mercenary_band_2
		}
		set_mercenary_maintenance_modifier = maintaining_mercenary_band_3
		change_title_army_size = 0.3
	}
	if = {
		limit = {
			has_mercenary_maintenance_modifier = maintaining_mercenary_band
		}
		set_mercenary_maintenance_modifier = maintaining_mercenary_band_2
		change_title_army_size = 0.3
	}
}

increase_mercenary_ambition_level_effect = {
	if = {
		limit = {
			has_character_flag = mercenary_ambition_8
		}
		clr_character_flag = mercenary_ambition_8
		set_character_flag = mercenary_ambition_9
	}
	if = {
		limit = {
			has_character_flag = mercenary_ambition_7
		}
		clr_character_flag = mercenary_ambition_7
		set_character_flag = mercenary_ambition_8
	}
	if = {
		limit = {
			has_character_flag = mercenary_ambition_6
		}
		clr_character_flag = mercenary_ambition_6
		set_character_flag = mercenary_ambition_7
	}
	if = {
		limit = {
			has_character_flag = mercenary_ambition_5
		}
		clr_character_flag = mercenary_ambition_5
		set_character_flag = mercenary_ambition_6
	}
	if = {
		limit = {
			has_character_flag = mercenary_ambition_4
		}
		clr_character_flag = mercenary_ambition_4
		set_character_flag = mercenary_ambition_5
	}
	if = {
		limit = {
			has_character_flag = mercenary_ambition_3
		}
		clr_character_flag = mercenary_ambition_3
		set_character_flag = mercenary_ambition_4
	}
	if = {
		limit = {
			has_character_flag = mercenary_ambition_2
		}
		clr_character_flag = mercenary_ambition_2
		set_character_flag = mercenary_ambition_3
	}
	if = {
		limit = {
			has_character_flag = mercenary_ambition_1
		}
		clr_character_flag = mercenary_ambition_1
		set_character_flag = mercenary_ambition_2
	}
}

decrease_mercenary_ambition_level_effect = {
	if = {
		limit = {
			has_character_flag = mercenary_ambition_2
		}
		clr_character_flag = mercenary_ambition_2
		set_character_flag = mercenary_ambition_1
	}
	if = {
		limit = {
			has_character_flag = mercenary_ambition_3
		}
		clr_character_flag = mercenary_ambition_3
		set_character_flag = mercenary_ambition_2
	}
	if = {
		limit = {
			has_character_flag = mercenary_ambition_4
		}
		clr_character_flag = mercenary_ambition_4
		set_character_flag = mercenary_ambition_3
	}
	if = {
		limit = {
			has_character_flag = mercenary_ambition_5
		}
		clr_character_flag = mercenary_ambition_5
		set_character_flag = mercenary_ambition_4
	}
	if = {
		limit = {
			has_character_flag = mercenary_ambition_6
		}
		clr_character_flag = mercenary_ambition_6
		set_character_flag = mercenary_ambition_5
	}
	if = {
		limit = {
			has_character_flag = mercenary_ambition_7
		}
		clr_character_flag = mercenary_ambition_7
		set_character_flag = mercenary_ambition_6
	}
	if = {
		limit = {
			has_character_flag = mercenary_ambition_8
		}
		clr_character_flag = mercenary_ambition_8
		set_character_flag = mercenary_ambition_7
	}
	if = {
		limit = {
			has_character_flag = mercenary_ambition_9
		}
		clr_character_flag = mercenary_ambition_9
		set_character_flag = mercenary_ambition_8
	}
}
add_symptom_effect = {
	custom_tooltip = {
		text = add_symptom_tooltip
		hidden_tooltip = {
			random_list = {
				10 = {
					modifier = {
						factor = 0
							trait = cough
					}
					character_event = { id = RIP.5000 days = 1 }
				}
				10 = {
					modifier = {
						factor = 0
							trait = fever

					}
					character_event = { id = RIP.5001 days = 1 }
				}
				10 = {
					modifier = {
						factor = 0
							trait = diarrhea

					}
					character_event = { id = RIP.5002 days = 1 }
				}
				10 = {
					modifier = {
						factor = 0
							trait = vomiting
					}
					character_event = { id = RIP.5003 days = 1 }
				}
				10 = {
					modifier = {
						factor = 0
							trait = headache
					}
					character_event = { id = RIP.5004 days = 1 }
				}
				10 = {
					modifier = {
						factor = 0
							trait = chest_pain
					}
					character_event = { id = RIP.5005 days = 1 }
				}
				10 = {
					modifier = {
						factor = 0
							trait = cramps
					}
					character_event = { id = RIP.5006 days = 1 }
				}
				10 = {
					modifier = {
						factor = 0
							trait = rash
					}
					character_event = { id = RIP.5007 days = 1 }
				}
				10 = {
					modifier = {
						factor = 0
							trait = abdominal_pain
					}
					character_event = { id = RIP.5008 days = 1 }
				}
				10 = {
					modifier = {
						factor = 0
							trait = fatigue
					}
					character_event = { id = RIP.5009 days = 1 }
				}
				10 = {
					modifier = {
						factor = 0
							trait = malaise
					}
					character_event = { id = RIP.5010 days = 1 }
				}
			}
		}
	}
}

add_maimed_trait_effect = {
	custom_tooltip = {
		text = maimed_effect_tooltip
		hidden_tooltip = {
			if = {
				limit = { NOT = { has_dlc = "Reapers" } }
				add_trait = maimed
				character_event = { id = 38281 }
			}
			if = {
				limit = { has_dlc = "Reapers" }
				random_list = {
					15 = {
						modifier = {
							factor = 0
							OR = {
								trait = one_eyed
								trait = blinded								
							}
						}
						add_trait = one_eyed
						character_event = { id = RIP.11501 }
					}
					10 = {
						modifier = {
							factor = 0
							trait = one_legged
						}
						add_trait = one_legged
						character_event = { id = RIP.11503 }
					}
					20 = {
						modifier = {
							factor = 0
							trait = one_handed
						}
						add_trait = one_handed
						character_event = { id = RIP.11502 }
					}
					10 = {
						modifier = {
							factor = 0
							trait = disfigured
						}
						add_trait = disfigured
						character_event = { id = RIP.11504 }
					}
					5 = {
						modifier = {
							factor = 0
							trait = mangled
						}
						add_trait = mangled
						character_event = { id = RIP.11505 }
					}
				}
			}	
		}
	}
	if = {
		limit = {
			has_dlc = "Reapers"
			NOT = { trait = severely_injured }
		}
		add_trait = severely_injured
		hidden_tooltip = {
			random_list = {
				75 = { #Get rid of severely_injured
					character_event = { id = RIP.11000 days = 90 random = 275}
				}
				25 = { #Get rid of severely_injured but develop infection
					set_character_flag = pending_infection
					character_event = { id = RIP.11000 days = 90 random = 275}
				}
			}
		}
	}
}


add_crippled_trait_effect = {
	if = {
		limit = { NOT = { has_dlc = "Reapers" } }
		add_trait = crippled
		hidden_tooltip = { character_event = { id = trait_notification.12 } }
	}
	if = {
		limit = { has_dlc = "Reapers" }
		add_trait = mangled
		hidden_tooltip = { character_event = { id = RIP.11505 } }
		if = {
			limit = { NOT = { trait = severely_injured } }
			add_trait = severely_injured
			hidden_tooltip = {
				random_list = {
					75 = { #Get rid of severely_injured
						character_event = { id = RIP.11000 days = 90 random = 275}
					}
					25 = { #Get rid of severely_injured but develop infection
						set_character_flag = pending_infection
						character_event = { id = RIP.11000 days = 90 random = 275}
					}
				}
			}
		}
	}	
}

add_plague_symptom_effect = {
	random_list = {
		10 = {
			modifier = {
				factor = 0
				trait = malaise
			}
			character_event = { id = RIP.5010 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = fever
			}
			character_event = { id = RIP.5001 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = cramps
			}
			character_event = { id = RIP.5006 }
		}
	}
}

add_pneumonia_symptom_effect = {
	random_list = {
		10 = {
			modifier = {
				factor = 0
				trait = cough
			}
			character_event = { id = RIP.5000 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = fever
			}
			character_event = { id = RIP.5001 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = chest_pain
			}
			character_event = { id = RIP.5005 }
		}
	}
}

add_syphilis_symptom_effect = {
	random_list = {
		10 = {
			modifier = {
				factor = 0
				trait = rash
			}
			character_event = { id = RIP.5007 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = fever
			}
			character_event = { id = RIP.5001 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = headache
			}
			character_event = { id = RIP.5004 }
		}
	}
}

add_tuberculosis_symptom_effect = {
	random_list = {
		10 = {
			modifier = {
				factor = 0
				trait = cough
			}
			character_event = { id = RIP.5000 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = fever
			}
			character_event = { id = RIP.5001 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = chest_pain
			}
			character_event = { id = RIP.5005 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = fatigue
			}
			character_event = { id = RIP.5009 }
		}
	}
}

add_typhoid_symptom_effect = {
	random_list = {
		10 = {
			modifier = {
				factor = 0
				trait = diarrhea
			}
			character_event = { id = RIP.5002 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = fever
			}
			character_event = { id = RIP.5001 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = abdominal_pain
			}
			character_event = { id = RIP.5008 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = malaise
			}
			character_event = { id = RIP.5010 }
		}
	}
}

add_typhus_symptom_effect = {
	random_list = {
		10 = {
			modifier = {
				factor = 0
				trait = diarrhea
			}
			character_event = { id = RIP.5002 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = fever
			}
			character_event = { id = RIP.5001 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = abdominal_pain
			}
			character_event = { id = RIP.5008 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = fatigue
			}
			character_event = { id = RIP.5009 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = rash
			}
			character_event = { id = RIP.5007 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = headache
			}
			character_event = { id = RIP.5004 }
		}
	}
}

add_measles_symptom_effect = {
	random_list = {
		10 = {
			modifier = {
				factor = 0
				trait = rash
			}
			character_event = { id = RIP.5007 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = fever
			}
			character_event = { id = RIP.5001 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = cough
			}
			character_event = { id = RIP.5000 }
		}
	}
}

add_smallpox_symptom_effect = {
	random_list = {
		10 = {
			modifier = {
				factor = 0
				trait = rash
			}
			character_event = { id = RIP.5007 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = fever
			}
			character_event = { id = RIP.5001 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = headache
			}
			character_event = { id = RIP.5004 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = malaise
			}
			character_event = { id = RIP.5010 }
		}
	}
}

add_flu_symptom_effect = {
	random_list = {
		10 = {
			modifier = {
				factor = 0
				trait = fatigue
			}
			character_event = { id = RIP.5009 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = fever
			}
			character_event = { id = RIP.5001 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = headache
			}
			character_event = { id = RIP.5004 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = malaise
			}
			character_event = { id = RIP.5010 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = cough
			}
			character_event = { id = RIP.5000 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = abdominal_pain
			}
			character_event = { id = RIP.5008 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = diarrhea
			}
			character_event = { id = RIP.5002 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = vomiting
			}
			character_event = { id = RIP.5003 }
		}
	}
}

add_dysentery_symptom_effect = {
	random_list = {
		10 = {
			modifier = {
				factor = 0
				trait = diarrhea
			}
			character_event = { id = RIP.5002 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = fever
			}
			character_event = { id = RIP.5001 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = abdominal_pain
			}
			character_event = { id = RIP.5008 }
		}
	}
}

add_gout_symptom_effect = {
	random_list = {
		10 = {
			modifier = {
				factor = 0
				trait = fatigue 
			}
			character_event = { id = RIP.5009 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = fever
			}
			character_event = { id = RIP.5001 }
		}
	}
}

add_food_poisoning_symptom_effect = {
	random_list = {
		10 = {
			modifier = {
				factor = 0
				trait = diarrhea
			}
			character_event = { id = RIP.5002 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = fever
			}
			character_event = { id = RIP.5001 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = cramps
			}
			character_event = { id = RIP.5006 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = vomiting
			}
			character_event = { id = RIP.5003 }
		}
	}
}

add_rabies_symptom_effect = {
	random_list = {
		10 = {
			modifier = {
				factor = 0
				trait = malaise
			}
			character_event = { id = RIP.5010 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = fever
			}
			character_event = { id = RIP.5001 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = fatigue
			}
			character_event = { id = RIP.5009 }
		}
	}
}

add_cancer_symptom_effect = {
	random_list = {
		10 = {
			modifier = {
				factor = 0
				trait = fatigue
			}
			character_event = { id = RIP.5009 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = chest_pain
			}
			character_event = { id = RIP.5005 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = headache
			}
			character_event = { id = RIP.5004 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = malaise
			}
			character_event = { id = RIP.5010 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = cough
			}
			character_event = { id = RIP.5000 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = abdominal_pain
			}
			character_event = { id = RIP.5008 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = diarrhea
			}
			character_event = { id = RIP.5002 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = vomiting
			}
			character_event = { id = RIP.5003 }
		}
	}
}
add_scourge_symptom_effect = {
	random_list = {
		10 = {
			modifier = {
				factor = 0
				trait = fatigue
			}
			character_event = { id = RIP.5009 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = fever
			}
			character_event = { id = RIP.5001 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = headache
			}
			character_event = { id = RIP.5004 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = malaise
			}
			character_event = { id = RIP.5010 }
		}
	}
}
add_red_death_symptom_effect = {
	random_list = {
		10 = {
			modifier = {
				factor = 0
				trait = cough
			}
			character_event = { id = RIP.5000 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = diarrhea
			}
			character_event = { id = RIP.5002 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = fever
			}
			character_event = { id = RIP.5001 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = malaise
			}
			character_event = { id = RIP.5010 }
		}	
		10 = {
			modifier = {
				factor = 0
				trait = vomiting
			}
			character_event = { id = RIP.5003 }
		}
	}
}
add_butterfly_fever_symptom_effect = {
	random_list = {
		50 = {
			modifier = {
				factor = 0
				trait = fever
			}
			character_event = { id = RIP.5001 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = vomiting
			}
			character_event = { id = RIP.5003 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = cramps
			}
			character_event = { id = RIP.5006 }
		}
		10 = {
			modifier = {
				factor = 0
				trait = abdominal_pain
			}
			character_event = { id = RIP.5008 }
		}		
	}
}

increase_depopulation_effect = {
	if = {
		limit = {
			has_province_modifier = depopulated_2
		}
		random_list = {		
			40 = {
				modifier = {
					factor = 1.5
					any_province_holding = {
						OR = {
							holding_type = nomad
							holding_type = tribal
						}
					}
					NOT = { num_of_settlements = 3 }
				}
				modifier = {
					factor = 1.2
					hospital_level = 1
				}
				modifier = {
					factor = 1.2
					hospital_level = 2
				}
				modifier = {
					factor = 1.2
					hospital_level = 3
				}
				modifier = {
					factor = 1.2
					hospital_level = 4
				}
				modifier = {
					factor = 1.2
					hospital_level = 5
				}
				modifier = {
					factor = 1.2
					hospital_level = 6
				}
				modifier = {
					factor = 0.8
					has_province_modifier = asoiaf_mild_winter
				}
				modifier = {
					factor = 0.65
					has_province_modifier = asoiaf_normal_winter
				}
				modifier = {
					factor = 0.5
					has_province_modifier = asoiaf_harsh_winter
				}
			}
			60 = {
				modifier = {
					factor = 0
					NOT = {
						any_province_holding = {
							OR = {
								holding_type = city
								holding_type = temple
								holding_type = castle
								holding_type = tribal
							}
						}
					}	
				}
				remove_province_modifier = depopulated_2
				add_province_modifier = {
					name = depopulated_3
					duration = -1
				}
				clr_province_flag = recent_depopulation_2
				set_province_flag = recent_depopulation_3
			}
		}
	}
	if = {
		limit = {
			has_province_modifier = depopulated_1
		}
		random_list = {		
			20 = {
				modifier = {
					factor = 4
					any_province_holding = {
						OR = {
							holding_type = nomad
							holding_type = tribal
						}
					}
					NOT = { num_of_settlements = 3 }
				}
				modifier = {
					factor = 1.4
					hospital_level = 1
				}
				modifier = {
					factor = 1.4
					hospital_level = 2
				}
				modifier = {
					factor = 1.4
					hospital_level = 3
				}
				modifier = {
					factor = 1.4
					hospital_level = 4
				}
				modifier = {
					factor = 1.4
					hospital_level = 5
				}
				modifier = {
					factor = 1.4
					hospital_level = 6
				}
			}
			80 = {
				modifier = {
					factor = 0
					NOT = {
						any_province_holding = {
							OR = {
								holding_type = city
								holding_type = temple
								holding_type = castle
								holding_type = tribal
							}
						}
					}
				}
				remove_province_modifier = depopulated_1
				add_province_modifier = {
					name = depopulated_2
					duration = -1
				}
				clr_province_flag = recent_depopulation_1
				set_province_flag = recent_depopulation_2
			}
		}
		
	}
	if = {
		limit = {
			NOR = {
				has_province_modifier = depopulated_1
				has_province_modifier = depopulated_2
				has_province_modifier = depopulated_3
			}
		}
		random_list = {		
			5 = {
				modifier = {
					factor = 15
					any_province_holding = {
						OR = {
							holding_type = nomad
							holding_type = tribal
						}
					}
					NOT = { num_of_settlements = 3 }
				}
				modifier = {
					factor = 1.5
					hospital_level = 1
				}
				modifier = {
					factor = 1.5
					hospital_level = 2
				}
				modifier = {
					factor = 1.5
					hospital_level = 3
				}
				modifier = {
					factor = 1.5
					hospital_level = 4
				}
				modifier = {
					factor = 1.5
					hospital_level = 5
				}
				modifier = {
					factor = 1.5
					hospital_level = 6
				}
			}
			95 = {
				modifier = {
					factor = 0
					NOT = {
						any_province_holding = {
							OR = {
								holding_type = city
								holding_type = temple
								holding_type = castle
								holding_type = tribal
							}
						}
					}
				}
				set_variable = { which = prosperity_value value = 0 }
				remove_province_modifier = prosperity_modifier_1
				remove_province_modifier = prosperity_modifier_2
				remove_province_modifier = prosperity_modifier_3
				add_province_modifier = {
					name = depopulated_1
					duration = -1
				}
				set_province_flag = recent_depopulation_1
			}
		}
	}
}

decrease_depopulation_effect = {
	if = {
		limit = {
			has_province_modifier = depopulated_1
		}
		remove_province_modifier = depopulated_1
	}
	if = {
		limit = {
			has_province_modifier = depopulated_2
		}
		remove_province_modifier = depopulated_2
		add_province_modifier = {
			name = depopulated_1
			duration = -1
		}
	}
	if = {
		limit = {
			has_province_modifier = depopulated_3
		}
		remove_province_modifier = depopulated_3
		add_province_modifier = {
			name = depopulated_2
			duration = -1
		}
	}
}

prisoner_mutilate_effect = {
	if = {
		limit = { 
			NOR = { 
				trait = craven 
				trait = brave
				trait = berserker 
				personality_traits = 6
			} 
		}
		random = {
			chance = 20		
			add_trait = craven
			hidden_tooltip = { character_event = { id = 38257 } }
		}
	}	
	if = {
		limit = { 
			trait = brave 
		}
		random = {
			chance = 20		
			remove_trait = brave
		}
	}
	random_list = {
		80 = {
			trigger = { NOT = { trait = stressed } }
			add_trait = stressed
			hidden_tooltip = { character_event = { id = 38282 } }
		}
		10 = {
			trigger = { NOT = { trait = lunatic } }
			add_trait = lunatic
			hidden_tooltip = { character_event = { id = 38304 } }
		}
		10 = {
			#no effect
		}
	}

	add_trait = severely_injured
	hidden_tooltip = {
		random_list = {
			75 = { #Get rid of severely_injured
				character_event = { id = RIP.11000 days = 90 random = 275}
			}
			25 = { #Get rid of severely_injured but develop infection
				set_character_flag = pending_infection
				character_event = { id = RIP.11000 days = 90 random = 275}
			}
		}
	}	
}

jailor_mutilate_effect = {
	if = {
		limit = { 
			NOR = { 
				trait = craven 
				trait = brave
				trait = berserker 
				personality_traits = 6
			} 
		}
		random = {
			chance = 20		
			add_trait = craven
			hidden_tooltip = { character_event = { id = 38257 } }
		}
	}	
	if = {
		limit = { 
			trait = brave 
		}
		random = {
			chance = 20		
			remove_trait = brave
		}
	}
	
	add_trait = severely_injured
	hidden_tooltip = {
		random_list = {
			75 = { #Get rid of severely_injured
				character_event = { id = RIP.11000 days = 90 random = 275}
			}
			25 = { #Get rid of severely_injured but develop infection
				set_character_flag = pending_infection
				character_event = { id = RIP.11000 days = 90 random = 275}
			}
		}
	}
	
	custom_tooltip = { text = might_affect_mental_health_tt }
	hidden_effect = {
		random_list = {
			80 = {
				trigger = { NOT = { trait = stressed } }
				add_trait = stressed
				hidden_tooltip = { character_event = { id = 38282 } }
			}
			10 = {
				trigger = { NOT = { trait = lunatic } }
				add_trait = lunatic
				hidden_tooltip = { character_event = { id = 38304 } }
			}
			10 = {
				#no effect
			}
		}
	}
}

prisoner_torture_effect = {
	random_list = {
		70 = { 
			add_character_modifier = { 
				name = tortured
				duration = 180
			}
		}
		15 = { 
			trigger = {
				NOT = { is_maimed_trigger = yes } 
				NOT = { trait = wounded } 
			}
			add_trait_silently_wounded_effect = yes
			hidden_tooltip = { character_event = { id = 38280 } }
		}
		5 = { 
			trigger = {
				NOT = { is_maimed_trigger = yes } 
			}
			add_maimed_trait_effect = yes
			hidden_tooltip = { 
				remove_trait = wounded
			}	
		}								
		5 = { 
			trigger = {
				NOT = { is_crippled_trigger = yes }
			}
			add_crippled_trait_effect = yes	
		}
		5 = { 
			hidden_tooltip = {
				event_target:torturer = {
					set_character_flag = unjust_execution 
					#set_character_flag = special_execution_found
					save_event_target_as = executioner 
				}
				character_event = { id = 45342 } #Universal execution event	
			}
			death = {
				death_reason = death_execution_torture
				killer = event_target:torturer
			}
		}				
	}
	random_list = {
		15 = {
			trigger = { NOT = { trait = craven } }
			if = {
				limit = { 
					NOT = { trait = brave }
					NOT = { trait = craven }
					NOT = { trait = berserker }
				}
				add_trait = craven
				hidden_tooltip = { character_event = { id = 38257 } }
			}
			if = {
				limit = { trait = brave }
				remove_trait = brave
			}				
		}
		15 = { 
			trigger = { NOT = { trait = stressed } }
			add_trait = stressed 
			hidden_tooltip = { character_event = { id = 38282 } }
		}
		15 = { 
			trigger = { NOT = { trait = depressed } }
			add_trait = depressed 
			hidden_tooltip = { character_event = { id = 38288 } }
		}
		5 = { 
			trigger = { NOT = { trait = lunatic } }
			add_trait = lunatic 
			hidden_tooltip = { character_event = { id = 38304 } }
		}
		50 = { }
	}
	lose_weight_small_effect = yes
	weight_trait_check_effect = yes
	clr_character_flag = torture_confession
}


prisoner_torture_confession_effect = {
	random_list = {
		85 = { 
			add_character_modifier = { 
				name = tortured
				duration = 90
			}
		}
		10 = { 
			trigger = {
				NOT = { is_maimed_trigger = yes } 
				NOT = { trait = wounded } 
			}
			add_trait_silently_wounded_effect = yes
			hidden_tooltip = { character_event = { id = 38280 } }
		}
		3 = { 
			trigger = {
				NOT = { is_maimed_trigger = yes } 
			}
			add_maimed_trait_effect = yes
			hidden_tooltip = { 
				remove_trait = wounded
			}	
		}								
		2 = { 
			trigger = {
				NOT = { is_crippled_trigger = yes }
			}
			add_crippled_trait_effect = yes	
		}				
	}
	random_list = {
		10 = {
			trigger = { NOT = { trait = craven } }
			if = {
				limit = { 
					NOT = { trait = brave }
					NOT = { trait = craven }
					NOT = { trait = berserker }
				}
				add_trait = craven
				hidden_tooltip = { character_event = { id = 38257 } }
			}
			if = {
				limit = { trait = brave }
				remove_trait = brave
			}				
		}
		10 = { 
			trigger = { NOT = { trait = stressed } }
			add_trait = stressed 
			hidden_tooltip = { character_event = { id = 38282 } }
		}
		5 = { 
			trigger = { NOT = { trait = depressed } }
			add_trait = depressed 
			hidden_tooltip = { character_event = { id = 38288 } }
		}
		75 = { }
	}	
	event_target:torturer = {
		custom_tooltip = {
			text = TOOLTIPEVT_OPTB_50052
			hidden_tooltip = {
				opinion = { who = PREV modifier = opinion_confessed }
				character_event = { id = imprisoned.200 days = 4 }
			}	
		}	
	}
	lose_weight_small_effect = yes
	weight_trait_check_effect = yes
	clr_character_flag = torture_confession
}

jailor_torture_effect = {
	random_list = {
		70 = { 
			add_character_modifier = { 
				name = tortured
				duration = 180
			}
		}
		15 = { 
			trigger = {
				NOT = { is_maimed_trigger = yes } 
				NOT = { trait = wounded } 
			}
			add_trait_silently_wounded_effect = yes
			hidden_tooltip = { character_event = { id = 38280 } }
		}
		5 = { 
			trigger = {
				NOT = { is_maimed_trigger = yes } 
			}
			add_maimed_trait_effect = yes
			hidden_tooltip = { 
				remove_trait = wounded
			}	
		}								
		5 = { 
			trigger = {
				NOT = { is_crippled_trigger = yes }
			}
			add_crippled_trait_effect = yes	
		}
		5 = { 
			hidden_tooltip = {
				event_target:torturer = {
					set_character_flag = unjust_execution 
					#set_character_flag = special_execution_found
					save_event_target_as = executioner 
				}
				character_event = { id = 45342 } #Universal execution event	
			}
			death = {
				death_reason = death_execution_torture
				killer = event_target:torturer
			}
		}				
	}
	random_list = {
		15 = {
			trigger = { NOT = { trait = craven } }
			if = {
				limit = { 
					NOT = { trait = brave }
					NOT = { trait = craven }
					NOT = { trait = berserker }
				}
				add_trait = craven
				hidden_tooltip = { character_event = { id = 38257 } }
			}
			if = {
				limit = { trait = brave }
				remove_trait = brave
			}				
		}
		15 = { 
			trigger = { NOT = { trait = stressed } }
			add_trait = stressed 
			hidden_tooltip = { character_event = { id = 38282 } }
		}
		15 = { 
			trigger = { NOT = { trait = depressed } }
			add_trait = depressed 
			hidden_tooltip = { character_event = { id = 38288 } }
		}
		5 = { 
			trigger = { NOT = { trait = lunatic } }
			add_trait = lunatic 
			hidden_tooltip = { character_event = { id = 38304 } }
		}
		50 = { }
	}
}

jailor_humiliation_effect = {
	random_list = {
		15 = {
			trigger = { NOT = { trait = stressed } }
			add_trait = stressed
		}
		30 = {
			trigger = { NOT = { trait = humble } }
			if = {
				limit = { 
					NOR = { 
						trait = humble
						trait = proud
						personality_traits = 6
					} 
				}
				add_trait = humble
				hidden_tooltip = { character_event = { id = 38260 } }
			}	
			if = {
				limit = { 
					trait = proud
				}
				remove_trait = proud
				hidden_tooltip = { character_event = { id = 38300 } }
			}			
		}
		30 = {
			trigger = { NOT = { trait = shy } }
			if = {
				limit = { 
					NOR = { 
						trait = shy
						trait = gregarious
						personality_traits = 6
					} 
				}
				add_trait = shy
				hidden_tooltip = { character_event = { id = 38263 } }
			}	
			if = {
				limit = { 
					trait = gregarious
				}
				remove_trait = gregarious
				hidden_tooltip = { character_event = { id = 38297 } }
			}
		}
		25 = {
			#nothing happens
		}
	}
}

prisoner_humiliation_effect = {
	random_list = {
		15 = {
			trigger = { NOT = { trait = stressed } }
			add_trait = stressed
		}
		30 = {
			trigger = { NOT = { trait = humble } }
			if = {
				limit = { 
					NOR = { 
						trait = humble
						trait = proud
						personality_traits = 6
					} 
				}
				add_trait = humble
				hidden_tooltip = { character_event = { id = 38260 } }
			}	
			if = {
				limit = { 
					trait = proud
				}
				remove_trait = proud
				hidden_tooltip = { character_event = { id = 38300 } }
			}			
		}
		30 = {
			trigger = { NOT = { trait = shy } }
			if = {
				limit = { 
					NOR = { 
						trait = shy
						trait = gregarious
						personality_traits = 6
					} 
				}
				add_trait = shy
				hidden_tooltip = { character_event = { id = 38263 } }
			}	
			if = {
				limit = { 
					trait = gregarious
				}
				remove_trait = gregarious
				hidden_tooltip = { character_event = { id = 38297 } }
			}
		}
		25 = {
			#nothing happens
		}
	}
}

maim_hand_effect = {
	if = {
		limit = {
			NOT = {
				has_dlc = "Reapers"
			}
		}
		add_trait = maimed
	}
	if = {
		limit = {
			has_dlc = "Reapers"
		}
		if = {
			limit = {
				trait = one_handed
				NOT = { trait = mangled }
			}
			add_trait = mangled
			hidden_tooltip = { character_event = { id = RIP.11505 } }
		}
		if = {
			limit = {
				NOT = { trait = one_handed }
			}
			add_trait = one_handed
			hidden_tooltip = { character_event = { id = RIP.11502 } }
		}
	}
	add_trait = severely_injured
	hidden_tooltip = {
		hidden_tooltip = {
			random_list = {
				75 = { #Get rid of severely_injured
					character_event = { id = RIP.11000 days = 90 random = 275}
				}
				25 = { #Get rid of severely_injured but develop infection
					set_character_flag = pending_infection
					character_event = { id = RIP.11000 days = 90 random = 275}
				}
			}
		}
	}
}

mangle_effect = {
	if = {
		limit = {
			NOT = {
				has_dlc = "Reapers"
			}
		}
		add_trait = maimed
	}
	if = {
		limit = {
			has_dlc = "Reapers"
		}
		if = {
			limit = {
				NOT = { trait = mangled }
			}
			add_trait = mangled
			hidden_tooltip = { character_event = { id = RIP.11505 } }
		}
	}
	add_trait = severely_injured
	hidden_tooltip = {
		hidden_tooltip = {
			random_list = {
				75 = { #Get rid of severely_injured
					character_event = { id = RIP.11000 days = 90 random = 275}
				}
				25 = { #Get rid of severely_injured but develop infection
					set_character_flag = pending_infection
					character_event = { id = RIP.11000 days = 90 random = 275}
				}
			}
		}
	}
}

remove_treatment_modifiers_effect = {
	remove_character_modifier = successful_treatment_1
	remove_character_modifier = successful_treatment_2
	remove_character_modifier = successful_treatment_3
	remove_character_modifier = failed_treatment_1
	remove_character_modifier = failed_treatment_2
	remove_character_modifier = mystic_treatment_decent
	remove_character_modifier = mystic_treatment_poor
	remove_character_modifier = mystic_treatment_terrible
	remove_character_modifier = symptom_treatment_1
	remove_character_modifier = symptom_treatment_2
	remove_character_modifier = symptom_treatment_3
	remove_character_modifier = symptom_treatment_4
}

remove_disease_flags_effect = {
	clr_character_flag = developing_illness
	clr_character_flag = got_syphilis
	clr_character_flag = got_tuberculosis
	clr_character_flag = got_typhoid_fever
	clr_character_flag = got_typhus
	clr_character_flag = got_bubonic_plague
	clr_character_flag = got_measles
	clr_character_flag = got_smallpox
	clr_character_flag = got_aztec_disease
	clr_character_flag = got_flu
	clr_character_flag = got_dysentery
	clr_character_flag = got_gout
	clr_character_flag = got_food_poisoning
	clr_character_flag = got_rabies
	clr_character_flag = got_cancer
	clr_character_flag = got_pneumonia
	clr_character_flag = got_old_ones_scourge
	clr_character_flag = got_red_death
	clr_character_flag = got_butterfly_fever
	clr_character_flag = manifest_syphilis
	clr_character_flag = manifest_tuberculosis
	clr_character_flag = manifest_typhoid_fever
	clr_character_flag = manifest_typhus
	clr_character_flag = manifest_bubonic_plague
	clr_character_flag = manifest_measles
	clr_character_flag = manifest_small_pox
	clr_character_flag = manifest_aztec_disease
	clr_character_flag = manifest_flu
	clr_character_flag = manifest_dysentery
	clr_character_flag = manifest_gout
	clr_character_flag = manifest_food_poisoning
	clr_character_flag = manifest_rabies
	clr_character_flag = manifest_cancer
	clr_character_flag = manifest_pneumonia
	clr_character_flag = manifest_red_death
	clr_character_flag = manifest_butterfly_fever
}

leave_court_effect = {
	reverse_opinion = {
		modifier = opinion_leave
		who = ROOT
	}
	random_playable_ruler = {
		limit = {
			demesne_size = 1
			OR = {
				higher_tier_than = DUKE
				culture_group = PREV
			}
			NOT = { character = ROOT }
			NOT = { is_liege_or_above = ROOT }
			NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_de_facto_liege } }
			NOT = { any_liege = { has_opinion_modifier = { who = ROOT modifier = opinion_de_facto_liege } } }
			is_within_diplo_range = ROOT
			
			NOT = { trait = nightswatch }
			NOT = { culture_group = unoccupied_group }
			OR = {
				NOT = { trait = wildling }
				PREV = { trait = wildling }
			}	
			OR = {
				NOT = { culture = old_andal }
				higher_tier_than = DUKE
				PREV = { culture = old_andal }
			}
			OR = {
				NOT = { culture = rhoynar }
				higher_tier_than = DUKE
				PREV = { culture = rhoynar }
			}	
			OR = {
				NOT = { trait = pirate }
				PREV = { trait = pirate }
			}
			OR = {
				NOT = { is_nomadic = yes }
				PREV = { is_nomadic = yes }
			}
			OR = { #slaves flee to non-slavery location
				PREV = { NOT = { trait = slave } }
				crownlaw_title = { has_law = slavery_0 }			
			}			
		}
		reverse_banish = PREV
	}
	reverse_remove_opinion = {
		modifier = opinion_leave
		who = ROOT
	}
}

courtiers_leaving_effect = {
	hidden_effect = { #To get a banishment reason
		if = { #if already kicked out of somehwere, looser conditions for culling
			limit = {
				has_character_flag = kicked_out_of_court
				NOR = {
					is_ruler = yes
					any_close_relative = { higher_tier_than = BARON }
					any_spouse = { higher_tier_than = BARON }
					any_lover = { higher_tier_than = BARON }
					num_of_claims = 1
					immortal = yes
					trait = dragon
					trait = white_walker
					trait = kingsguard
					can_use_dragon_abilities_trigger = yes
					trait = archmaester
					trait = favored_by_rhllor
					trait = chosen_by_rhllor
					trait = resurrected_by_rhllor

					prestige = 250
					martial = 14
					stewardship = 14
					diplomacy = 14
					intrigue = 14
					learning = 14
					is_pregnant = yes
					trait = skilled_warrior
					trait = master_warrior
					trait = dragon_rider
					num_of_artifacts = 1
					is_strong_trigger = yes
					trait = fair
					is_smart_incl_genius_trigger = yes
					trait = tall
				}
			}
			death = { death_reason = death_missing }
		}
		else_if = { #cull
			limit = {
				is_unimportant_trigger = yes
				NOT = { prestige = 250 }
				age = 25
				NOR = {
					martial = 12
					stewardship = 12
					diplomacy = 12
					intrigue = 12
					learning = 12
					is_pregnant = yes
					trait = skilled_warrior
					trait = master_warrior
					trait = dragon_rider
					num_of_artifacts = 1
					is_strong_trigger = yes
					trait = fair
					is_smart_incl_genius_trigger = yes
					trait = tall
				}
			}
			death = { death_reason = death_missing }
		}
		set_character_flag = kicked_out_of_court
		reverse_opinion = {
			modifier = opinion_leave
			who = ROOT
		}

		banish = yes

		reverse_remove_opinion = {
			modifier = opinion_leave
			who = ROOT
		}
	}
	opinion = {
		modifier = opinion_left_court
		who = root
	}
}

leave_court_and_die_effect = {
	death = { death_reason = death_missing }
}

give_epidemic_disease_effect = {
	if = {
		limit = {
			location = { disease = bloody_flux }
			NOT = { has_character_flag = immune_tuberculosis }
		}

		set_character_flag = got_tuberculosis
		set_character_flag = developing_illness

		character_event = { id = RIP.5015 }

		break = yes
	}
	if = {
		limit = {
			location = { disease = typhoid_fever }
			NOT = { has_character_flag = immune_typhoid_fever }
		}

		set_character_flag = got_typhoid_fever
		set_character_flag = developing_illness

		character_event = { id = RIP.5016 }

		break = yes
	}
	if = {
		limit = {
			location = { disease = grey_plague }
			NOT = { has_character_flag = immune_typhus }
		}

		set_character_flag = got_typhus
		set_character_flag = developing_illness

		character_event = { id = RIP.5017 }

		break = yes
	}
	if = {
		limit = { 
			location = { disease = bubonic_plague }
			NOT = { has_character_flag = immune_bubonic_plague }
		}

		set_character_flag = got_bubonic_plague
		set_character_flag = developing_illness

		character_event = { id = RIP.5012 }

		break = yes
	}
	# if = {
		# limit = { 
			# location = { disease = measles }
			# NOT = { has_character_flag = immune_measles }
		# }

		# set_character_flag = got_measles
		# set_character_flag = developing_illness

		# character_event = { id = RIP.5018 }

		# break = yes
	# }
	if = {
		limit = {
			location = { disease = small_pox }
			NOT = { has_character_flag = immune_smallpox }
		}

		set_character_flag = got_small_pox
		set_character_flag = developing_illness

		character_event = { id = RIP.5019 }

		break = yes
	}
	if = {
		limit = { 
			location = { disease = syphilis }
			NOT = { has_character_flag = immune_syphilis }
		}

		set_character_flag = got_syphilis
		set_character_flag = developing_illness

		character_event = { id = RIP.5014 }

		break = yes
	}
	if = {
		limit = { 
			location = { disease = old_ones_scourge }
			NOT = { has_character_flag = immune_old_ones_scourge }
		}

		set_character_flag = got_old_ones_scourge
		set_character_flag = developing_illness

		if = {
			limit = { has_dlc = "Reapers" }
			character_event = { id = essos.157 } #Symptoms
		}
		if = {
			limit = { NOT = { has_dlc = "Reapers" } }
			character_event = { id = essos.158 } #Disease develops
		}

		break = yes
	}
	if = {
		limit = { 
			location = { disease = red_death }
			NOT = { has_character_flag = immune_red_death }
		}

		set_character_flag = got_red_death
		set_character_flag = developing_illness

		character_event = { id = sothoryos.6 }
		
		break = yes
	}
	
	
}

blessing_removes_disease_effect = {
	if = {
		limit = {
			has_dlc = "The Old Gods"
			has_character_flag = old_gods_blessing
			has_character_modifier = blessing_of_health
		}
		hidden_tooltip = { character_event = { id = TOG.7015 days = 30 } }
	}
	# if = {
		# limit = {
			# has_dlc = "Sons of Abraham"
			# has_character_flag = pilgrim_blessing
			# has_character_modifier = blessing_of_health 
		# }
		# hidden_tooltip = { character_event = { id = SoA.5068 days = 30 } }
	# }
}

deaths_gift_removes_disease_effect = {
	if = {
		limit = {
			has_dlc = "Reapers"
			has_character_modifier = deaths_gift 
		}
		hidden_tooltip = { character_event = { id = RIP.30233 days = 30 } }
	}
}

remove_disease_trait_effect = {
	if = {
	 	limit = { trait = ill }
	 	remove_trait = ill
	}
	if = {
	 	limit = { trait = has_bloody_flux }
	 	remove_trait = has_bloody_flux
		set_character_flag = immune_tuberculosis
	}
	if = {
	 	limit = { trait = has_typhoid_fever }
	 	remove_trait = has_typhoid_fever
		set_character_flag = immune_typhoid_fever
	}
	if = {
	 	limit = { trait = has_grey_plague }
	 	remove_trait = has_grey_plague
		set_character_flag = immune_typhus
	}
	if = {
	 	limit = { trait = has_bubonic_plague }
	 	remove_trait = has_bubonic_plague
		set_character_flag = immune_bubonic_plague
	}
	if = {
	 	limit = { trait = has_measles }
	 	remove_trait = has_measles
		set_character_flag = immune_measles
	}
	if = {
	 	limit = { trait = has_small_pox }
	 	remove_trait = has_small_pox
		set_character_flag = immune_small_pox
	}
	if = {
	 	limit = { trait = has_aztec_disease }
	 	remove_trait = has_aztec_disease
		set_character_flag = immune_aztec_disease
	}
	if = {
	 	limit = { trait = syphilitic }
	 	remove_trait = syphilitic
		set_character_flag = immune_syphilitic
	}
	if = {
	 	limit = { trait = flu }
	 	remove_trait = flu
	}
	if = {
	 	limit = { trait = dysentery }
	 	remove_trait = dysentery
	}
	if = {
	 	limit = { trait = gout }
	 	remove_trait = gout
	}
	if = {
	 	limit = { trait = food_poisoning }
	 	remove_trait = food_poisoning
	}
	if = {
	 	limit = { trait = rabies }
	 	remove_trait = rabies
	}
	if = {
	 	limit = { trait = cancer }
	 	remove_trait = cancer
	}
	if = {
	 	limit = { trait = pneumonic }
	 	remove_trait = pneumonic
	}
	if = {
	 	limit = { trait = scurvy }
	 	remove_trait = scurvy
	}
	if = {
	 	limit = { trait = dancing_plague }
	 	remove_trait = dancing_plague
	}
	if = {
	 	limit = { trait = leper }
	 	remove_trait = leper
	}
	if = {
	 	limit = { trait = old_ones_scourge }
	 	remove_trait = old_ones_scourge
		set_character_flag = immune_old_ones_scourge
	}	
	if = {
	 	limit = { trait = has_red_death }
	 	remove_trait = has_red_death
	}
	if = {
	 	limit = { trait = has_butterfly_fever }
	 	remove_trait = has_butterfly_fever
	}	
	clear_disease_level_effect = yes
}

resolve_severely_injured_effect = {
	hidden_tooltip = {
		random_list = {
			70 = { #Get rid of severely_injured
				character_event = { id = RIP.11000 days = 100 random = 300 }
			}
			30 = { #Get rid of severely_injured but develop infection
				set_character_flag = pending_infection
				character_event = { id = RIP.11000 days = 100 random = 300 }
			}
		}
	}
}

#For when you "only" become really injured, but still want the risk of infection...
add_severely_injured_effect = {
	add_trait = severely_injured
	resolve_severely_injured_effect = yes
}

leave_council_position_effect = {
	if = {
		limit = { has_job_title = job_castellan }
		remove_title = job_castellan
		add_character_modifier = {
			modifier = resigned_in_anger
			years = 2
			hidden = yes
		}
	}
	if = {
		limit = { has_job_title = job_chancellor }
		remove_title = job_chancellor
		add_character_modifier = {
			modifier = resigned_in_anger
			years = 2
			hidden = yes
		}
	}
	if = {
		limit = { has_job_title = job_marshal }
		remove_title = job_marshal
		add_character_modifier = {
			modifier = resigned_in_anger
			years = 2
			hidden = yes
		}
	}
	if = {
		limit = { has_job_title = job_treasurer }
		remove_title = job_treasurer
		add_character_modifier = {
			modifier = resigned_in_anger
			years = 2
			hidden = yes
		}
	}
	if = {
		limit = { has_job_title = job_spymaster }
		remove_title = job_spymaster
		add_character_modifier = {
			modifier = resigned_in_anger
			years = 2
			hidden = yes
		}
	}
	if = {
		limit = { has_job_title = job_physician }
		remove_title = job_physician
		add_character_modifier = {
			modifier = resigned_in_anger
			years = 2
			hidden = yes
		}
	}
	if = {
		limit = { has_job_title = job_spiritual }
		remove_title = job_spiritual
		add_character_modifier = {
			modifier = resigned_in_anger
			years = 2
			hidden = yes
		}
	}
	if = {
		limit = { has_minor_title = title_councilmember_king }
		remove_title = title_councilmember_king
		add_character_modifier = {
			modifier = resigned_in_anger
			years = 2
			hidden = yes
		}
	}
	if = {
		limit = { has_minor_title = title_councilmember_emperor }
		remove_title = title_councilmember_emperor
		add_character_modifier = {
			modifier = resigned_in_anger
			years = 2
			hidden = yes
		}
	}
	#if = {
		#limit = { has_minor_title = title_master_of_ships }
		#remove_title = title_master_of_ships
		#add_character_modifier = {
			#modifier = resigned_in_anger
			#years = 2
			#hidden = yes
		#}
	#}
	if = {
		limit = { has_minor_title = title_high_admiral }
		remove_title = title_high_admiral
		add_character_modifier = {
			modifier = resigned_in_anger
			years = 2
			hidden = yes
		}
	}
}

increase_prosperity_effect = {
	if = {
		limit = { 
			NOR = {
				has_province_modifier = prosperity_modifier_1
				has_province_modifier = prosperity_modifier_2
				has_province_modifier = prosperity_modifier_3
				has_province_modifier = depopulated_1
				has_province_modifier = depopulated_2
				has_province_modifier = depopulated_3
			}
		}

		add_province_modifier = { name = prosperity_modifier_1 duration = -1 }
		hidden_tooltip = { set_variable = { which = prosperity_value value = 100 } }
		break = yes
	}

	if = {
		limit = { has_province_modifier = prosperity_modifier_1 }

		hidden_tooltip = { remove_province_modifier = prosperity_modifier_1 }
		add_province_modifier = { name = prosperity_modifier_2 duration = -1 }
		hidden_tooltip = { set_variable = { which = prosperity_value value = 250 } }
		break = yes
	}

	if = {
		limit = { has_province_modifier = prosperity_modifier_2 }

		hidden_tooltip = { remove_province_modifier = prosperity_modifier_2 }
		add_province_modifier = { name = prosperity_modifier_3 duration = -1 }
		hidden_tooltip = { set_variable = { which = prosperity_value value = 500 } }
		break = yes
	}
}

decrease_prosperity_effect = {
	if = {
		limit = {
			has_province_modifier = prosperity_modifier_3
		}
		hidden_tooltip = {
			remove_province_modifier = prosperity_modifier_3
			set_variable = { which = prosperity_value value = 250 }
		}
		add_province_modifier = { name = prosperity_modifier_2 duration = -1 }
	}
}

add_disease_level_effect = {
	random_list = {
		65 = { 
			custom_tooltip = {
				text = become_normal_ill
			}
		}
		20 = { 
			modifier = {
				factor = 2
				trait = strong
			}
			modifier = {
				factor = 2
				trait = robust
			}
			custom_tooltip = {
				text = become_mild_ill
				hidden_tooltip = { 
					add_character_modifier = { name = mild_illness duration = -1 }
				}
			}
		}
		10 = { 
			modifier = {
				factor = 1.5
				trait = feeble
			}
			modifier = {
				factor = 1.5
				trait = weak
			}
			modifier = {
				factor = 0.5
				trait = strong
			}
			modifier = {
				factor = 0.5
				trait = robust
			}
			modifier = {
				factor = 1.5
				age = 50
			}
			modifier = {
				factor = 1.5
				age = 60
			}
			modifier = {
				factor = 1.5
				age = 70
			}
			modifier = {
				factor = 1.5
				age = 80
			}
			custom_tooltip = {
				text = become_severe_ill
				hidden_tooltip = { 
					add_character_modifier = { name = severe_illness duration = -1 }
				}
			}
		}
		5= { 
			modifier = {
				factor = 0
				immortal = yes
			}
			modifier = {
				factor = 2
				trait = feeble
			}
			modifier = {
				factor = 2
				trait = weak
			}
			modifier = {
				factor = 0.5
				trait = strong
			}
			modifier = {
				factor = 0.5
				trait = robust
			}
			 modifier = {
				factor = 2
				age = 50
			}
			modifier = {
				factor = 2
				age = 60
			}
			modifier = {
				factor = 2
				age = 70
			}
			modifier = {
				factor = 2
				age = 80
			}
			custom_tooltip = {
				text = become_bedridden_ill
				hidden_tooltip = { 
					add_character_modifier = { name = bedridden_illness duration = -1 }
					add_trait = sick_incapable
				}
			}
		}
	}
}

clear_disease_level_effect = {
	if = {
		limit = { has_character_modifier = mild_illness }
		remove_character_modifier = mild_illness
	}
	if = {
		limit = { has_character_modifier = severe_illness }
		remove_character_modifier = severe_illness
	}
	if = {
		limit = { has_character_modifier = bedridden_illness }
		remove_character_modifier = bedridden_illness
		hidden_tooltip = {
			remove_trait = sick_incapable
		}
	}
	clear_duel_poisoner_target_effect = yes
}

end_inaccessibility_effect = {
	if = {
		limit = { trait = in_hiding }
		remove_trait = in_hiding

		clr_character_flag = do_not_disturb
		
		add_character_modifier = {
			name = went_out_of_hiding_timer
			duration = 180
			hidden = yes
		}
		hidden_tooltip = { character_event = { id = CM.6400 } } # Notify plotters and family
	}
	if = { 
		limit = { has_character_modifier = in_seclusion }

		remove_character_modifier = in_seclusion

		if = {
			limit = { is_ruler = yes }
			
			clr_character_flag = do_not_disturb
			clr_character_flag = exposed_to_outside
			clr_character_flag = seclusion_piling_corpses
			clr_character_flag = seclusion_lazy_seduction
			clr_character_flag = seclusion_nightmares
			clr_character_flag = seclusion_gained_friend
			clr_character_flag = seclusion_child_has_lover
			clr_character_flag = seclusion_tunnel
			clr_character_flag = seclusion_food_events

			custom_tooltip = { text = open_the_gates_info_tooltip }
			
			add_character_modifier = {
				name = recently_opened_gates
				duration = 365
			}
			hidden_tooltip = {
				clr_character_flag = seclusion_events_on
				character_event = { id = RIP.11557 days = 40 random = 20} #clears starvation modifiers
				any_courtier = {
					clr_character_flag = seclusion_events_on
					remove_character_modifier = in_seclusion
					character_event = { id = RIP.11557 days = 40 random = 20} #clears starvation modifiers
				}
				any_vassal = {
					limit = {
						OR = {
							is_councillor = yes
							has_minor_title = title_councilmember_king
							has_minor_title = title_councilmember_emperor
						}
						is_landed = yes
						liege = { character = ROOT }
						NOT = {
							has_character_modifier = in_seclusion
						}
						host = { NOT = { character = ROOT } }
					}
					force_host = ROOT
				}
			}
			if = { # Rejoin your liege's court if both of you are not in seclusion
				limit = {
					OR = {
						is_councillor = yes
						has_minor_title = title_councilmember_king
						has_minor_title = title_councilmember_emperor
					}
					NOT = {
						liege = {
							has_character_modifier = in_seclusion
						}
					}
				}
				liege = {
					ROOT = {
						force_host = PREV
					}
				}
			}
		}
	}
}
#Effects for adding diseases
give_pneumonic_effect = {
	if = {
		limit = { NOT = { trait = pneumonic } }

		if = {
			limit = { 
				has_dlc = "Reapers"
				NOT = { has_character_flag = developing_illness }
				NOT = { has_character_flag = disease_not_serious } 
			}
			tooltip = { add_trait = pneumonic }
			set_character_flag = got_pneumonia
			set_character_flag = developing_illness
			hidden_tooltip = { character_event = { id = RIP.5011 days = 3 random = 10 } }
		}
		if = {
			limit = { NOT = { has_dlc = "Reapers" } }
			add_trait = pneumonic
		}
	}
}


give_has_tuberculosis_effect = {
	if = {
		limit = { NOT = { trait = has_bloody_flux } }

		if = {
			limit = { 
				has_dlc = "Reapers"
				NOT = { has_character_flag = developing_illness }
				NOT = { has_character_flag = disease_not_serious } 
			}
			set_character_flag = got_tuberculosis
			set_character_flag = developing_illness
			hidden_tooltip = { character_event = { id = RIP.5015 days = 3 random = 40 } }
		}
		if = {
			limit = { NOT = { has_dlc = "Reapers" } }
			add_trait = has_bloody_flux
		}
	}
}

give_has_typhoid_fever_effect = {
	if = {
		limit = { NOT = { trait = has_typhoid_fever } }

		if = {
			limit = { 
				has_dlc = "Reapers"
				NOT = { has_character_flag = developing_illness }
				NOT = { has_character_flag = disease_not_serious } 
			}
			set_character_flag = got_typhoid_fever
			set_character_flag = developing_illness
			hidden_tooltip = { character_event = { id = RIP.5016 days = 3 random = 10 } }
		}
		if = {
			limit = { NOT = { has_dlc = "Reapers" } }
			add_trait = has_typhoid_fever
		}
	}
}

give_has_bubonic_plague_effect = {
	if = {
		limit = { NOT = { trait = has_bubonic_plague } }

		if = {
			limit = { 
				has_dlc = "Reapers"
				NOT = { has_character_flag = developing_illness }
				NOT = { has_character_flag = disease_not_serious } 
			}
			set_character_flag = got_bubonic_plague
			set_character_flag = developing_illness
			hidden_tooltip = { character_event = { id = RIP.5012 days = 3 random = 10 } }
		}
		if = {
			limit = { NOT = { has_dlc = "Reapers" } }
			add_trait = has_bubonic_plague
		}
	}
}

give_has_measles_effect = {
	if = {
		limit = { NOT = { trait = has_measles } }

		if = {
			limit = { 
				has_dlc = "Reapers"
				NOT = { has_character_flag = developing_illness }
				NOT = { has_character_flag = disease_not_serious } 
			}
			set_character_flag = got_measles
			set_character_flag = developing_illness
			hidden_tooltip = { character_event = { id = RIP.5018 days = 3 random = 10 } }
		}
		if = {
			limit = { NOT = { has_dlc = "Reapers" } }
			add_trait = has_measles
		}
	}
}

give_has_small_pox_effect = {
	if = {
		limit = { NOT = { trait = has_small_pox } }

		if = {
			limit = { 
				has_dlc = "Reapers"
				NOT = { has_character_flag = developing_illness }
				NOT = { has_character_flag = disease_not_serious } 
			}
			set_character_flag = got_smallpox
			set_character_flag = developing_illness
			hidden_tooltip = { character_event = { id = RIP.5019 days = 3 random = 10 } }
		}
		if = {
			limit = { NOT = { has_dlc = "Reapers" } }
			add_trait = has_small_pox
		}
	}
}

give_has_aztec_disease_effect = {
	if = {
		limit = { NOT = { trait = has_aztec_disease } }

		if = {
			limit = { 
				has_dlc = "Reapers"
				NOT = { has_character_flag = developing_illness }
				NOT = { has_character_flag = disease_not_serious } 
			}
			set_character_flag = got_aztec_disease
			set_character_flag = developing_illness
			hidden_tooltip = { character_event = { id = RIP.5014 days = 3 random = 40 } }
		}
		if = {
			limit = { NOT = { has_dlc = "Reapers" } }
			add_trait = has_aztec_disease
		}
	}
}

give_syphilitic_effect = {
	if = {
		limit = { 
			NOT = { trait = syphilitic } 
		}

		if = {
			limit = { 
				has_dlc = "Reapers"
				NOT = { has_character_flag = developing_illness }
				NOT = { has_character_flag = disease_not_serious } 
			}
			set_character_flag = got_syphilis
			set_character_flag = developing_illness
			hidden_tooltip = { character_event = { id = RIP.5014 days = 3 random = 40 } }
		}
		if = {
			limit = { NOT = { has_dlc = "Reapers" } }
			add_trait = syphilitic
		}
	}
}

give_flu_effect = {
	if = {
		limit = { 
			NOT = { trait = flu } 
			has_dlc = "Reapers"
			NOT = { has_character_flag = developing_illness }
			NOT = { has_character_flag = disease_not_serious }
		}

		set_character_flag = got_flu
		set_character_flag = developing_illness
		hidden_tooltip = { character_event = { id = RIP.5020 days = 3 random = 3 } }
	}
}

give_dysentery_effect = {
	if = {
		limit = { 
			NOT = { trait = dysentery } 
			has_dlc = "Reapers"
			NOT = { has_character_flag = developing_illness }
			NOT = { has_character_flag = disease_not_serious }
		}

		set_character_flag = got_dysentery
		set_character_flag = developing_illness
		hidden_tooltip = { character_event = { id = RIP.5021 days = 3 random = 10 } }
	}
}

give_gout_effect = {
	if = {
		limit = { 
			NOT = { trait = gout } 
			has_dlc = "Reapers"
			NOT = { has_character_flag = developing_illness }
			NOT = { has_character_flag = disease_not_serious }
		}

		set_character_flag = got_gout
		set_character_flag = developing_illness
		hidden_tooltip = { character_event = { id = RIP.5022 days = 30 random = 60 } }
	}
}

give_food_poisoning_effect = {
	if = {
		limit = { 
			NOT = { trait = food_poisoning } 
			has_dlc = "Reapers"
			NOT = { has_character_flag = developing_illness }
			NOT = { has_character_flag = disease_not_serious }
		}

		set_character_flag = got_food_poisoning
		set_character_flag = developing_illness
		hidden_tooltip = { character_event = { id = RIP.5023 days = 1 random = 2 } }
	}
}

give_rabies_effect = {
	if = {
		limit = { 
			NOT = { trait = rabies } 
			has_dlc = "Reapers"
			NOT = { has_character_flag = developing_illness }
			NOT = { has_character_flag = disease_not_serious }
		}

		set_character_flag = got_rabies
		set_character_flag = developing_illness
		hidden_tooltip = { character_event = { id = RIP.5024 days = 30 random = 60 } }
	}
}

give_cancer_effect = {
	if = {
		limit = { 
			NOT = { trait = cancer } 
			has_dlc = "Reapers"
			NOT = { has_character_flag = developing_illness }
			NOT = { has_character_flag = disease_not_serious }
		}

		set_character_flag = got_cancer
		set_character_flag = developing_illness
		hidden_tooltip = { character_event = { id = RIP.5025 days = 30 random = 60 } }
	}
}

give_ill_effect = {
	if = {
		limit = { 
			NOR = { 
				has_dlc = "Reapers" 
				trait = ill
			} 
		}
		add_trait = ill
		hidden_tooltip = {
			character_event = {
				days = 3
				id = 38290 #Notify Ill
			}
		}
	}
	if = {
		limit = { has_dlc = "Reapers" }
		tooltip = { add_trait = flu }
		give_flu_effect = yes
	}
}

#Impregnation and venereal disease handling
#Impregnation and venereal disease handling between event_target:sex_partner and THIS. Used in THIS scope.
unprotected_sex_effect_event_target = {
	random = {
		chance = 50
		venereal_disease_effect_event_target = yes
	}
	random = {
		chance = 10
		modifier = {
			factor = 2
			is_fertile_trigger = yes
		}
		modifier = {
			factor = 2
			event_target:sex_partner = { is_fertile_trigger = yes }
		}
		modifier = {
			factor = 0
			is_infertile_trigger = yes
		}
		modifier = {
			factor = 0
			event_target:sex_partner = { is_infertile_trigger = yes }
		}
		impregnate_effect_event_target = yes
	}
}

#Transfers venereal diseases between event_target:sex_partner and THIS.
venereal_disease_effect_event_target = {
	#Great pox and aztec disease for sex_partner
	if = {
		limit = {
			NOR = {
				event_target:sex_partner = { has_character_flag = developing_illness }
				event_target:sex_partner = { has_character_flag = disease_not_serious }
			}
		}

		if = {
			limit = { trait = syphilitic }
			event_target:sex_partner = { give_syphilitic_effect = yes }			
		}
		if = {
			limit = { trait = has_aztec_disease }
			event_target:sex_partner = { give_has_aztec_disease_effect = yes }			
		}
	}

	#Great pox and aztec disease for THIS
	if = {
		limit = {
			NOR = {
				has_character_flag = developing_illness
				has_character_flag = disease_not_serious 
			}
		}

		if = {
			limit = { event_target:sex_partner = { trait = syphilitic } }
			give_syphilitic_effect = yes		
		}
		if = {
			limit = { event_target:sex_partner = { trait = has_aztec_disease } }
			give_has_aztec_disease_effect = yes		
		}
	}

	#Lover's pox
	if = {
		limit = { 
			OR = {
				trait = lovers_pox 
				has_character_modifier = minor_disease_herpes 
			}
			NOR = { 
				event_target:sex_partner = { trait = lovers_pox }
				event_target:sex_partner = { has_character_modifier = minor_disease_herpes }
			}
		}
		hidden_tooltip = { event_target:sex_partner = { character_event = { id = 6359 days = 15 random = 5 } } }
	}
	if = {
		limit = { 
			OR = {
				event_target:sex_partner = { trait = lovers_pox }
				event_target:sex_partner = { has_character_modifier = minor_disease_herpes }
			}
			NOR = { 
				trait = lovers_pox
				has_character_modifier = minor_disease_herpes
			}
		}
		hidden_tooltip = { character_event = { id = 6359 days = 15 random = 5 } } 
	}
}

#Tries to impregnate either event_target:sex_partner or THIS if all conditions are met
impregnate_effect_event_target = {
	if = {
		limit = { is_opposite_sex = event_target:sex_partner }

		#If THIS is a female which can get pregnant
		if = {
			limit = {
				is_female = yes
				NOT = { age = 45 }
				is_pregnant = no
				health = 3
				event_target:sex_partner = { NOT = { trait = eunuch } }
			}

			#THIS is not consort/spouse of anyone or is consort/spouse of event_target:sex_partner
			if = {
				limit = {
					OR = {
						AND = {
							is_married = no
							is_consort = no
						}
						AND = {
							is_consort = yes
							consort = { character = event_target:sex_partner }
						}
						AND = {
							is_married = yes
							spouse = { character = event_target:sex_partner }
						}
					}
				}
				event_target:sex_partner = { impregnate = PREV }
			}

			#THIS is consort/spouse of someone else than event_target:sex_partner
			if = {
				limit = { 
					OR = {
					 	AND = {
					 		is_married = yes
					 		NOT = { spouse = { character = event_target:sex_partner } }
					 	}
					 	AND = {
					 		is_consort = yes
					 		NOT = { consort = { character = event_target:sex_partner } }
					 	}
					}
				}
				event_target:sex_partner = { impregnate_cuckoo = PREV }
			}
		}

		#If event_target:sex_partner is a female which can get pregnant
		if = {
			limit = {
				event_target:sex_partner = {
					is_female = yes
					NOT = { age = 45 }
					is_pregnant = no
					health = 3
					PREV = { NOT = { trait = eunuch } }
				}
			}

			#event_target:sex_partner is not consort/spouse of anyone or is consort/spouse of THIS
			if = {
				limit = {
					event_target:sex_partner = {
						OR = {
							AND = {
								is_married = no
								is_consort = no
							}
							AND = {
								is_consort = yes
								consort = { character = PREVPREV }
							}
							AND = {
								is_married = yes
								spouse = { character = PREVPREV }
							}
						}
					}
				}
				impregnate = event_target:sex_partner
			}

			#event_target:sex_partner is consort/spouse of someone else than THIS
			if = {
				limit = {
					event_target:sex_partner = {
						OR = {
						 	AND = {
						 		is_married = yes
						 		NOT = { spouse = { character = PREVPREV } }
						 	}
						 	AND = {
						 		is_consort = yes
						 		NOT = { consort = { character = PREVPREV } }
						 	}
						}
					}
				}

				impregnate_cuckoo = event_target:sex_partner
			}
		}
	}
}

#Impregnation and venereal disease handling between FROM and ROOT. Used in ROOT scope.
unprotected_sex_effect = {
	random = {
		chance = 50
		venereal_disease_effect = yes
	}
	random = {
		chance = 10
		modifier = {
			factor = 2
			is_fertile_trigger = yes
		}
		modifier = {
			factor = 0
			is_infertile_trigger = yes
		}
		modifier = {
			factor = 2
			FROM = { is_fertile_trigger = yes }
		}
		modifier = {
			factor = 0
			FROM = { is_infertile_trigger = yes }
		}
		impregnate_effect = yes
	}
}
			
#Transfers venereal diseases between FROM and ROOT
venereal_disease_effect = {
	#Great pox and aztec disease for FROM
	if = {
		limit = {
			NOR = {
				FROM = { has_character_flag = developing_illness }
				FROM = { has_character_flag = disease_not_serious }
			}
		}

		if = {
			limit = { trait = syphilitic }
			FROM = { give_syphilitic_effect = yes }			
		}
		if = {
			limit = { trait = has_aztec_disease }
			FROM = { give_has_aztec_disease_effect = yes }			
		}
	}

	#Great pox and aztec disease for ROOT
	if = {
		limit = {
			NOR = {
				has_character_flag = developing_illness
				has_character_flag = disease_not_serious 
			}
		}

		if = {
			limit = { FROM = { trait = syphilitic } }
			give_syphilitic_effect = yes		
		}
		if = {
			limit = { FROM = { trait = has_aztec_disease } }
			give_has_aztec_disease_effect = yes		
		}
	}

	#Lover's pox
	if = {
		limit = { 
			OR = {
				trait = lovers_pox 
				has_character_modifier = minor_disease_herpes 
			}
			NOR = { 
				FROM = { trait = lovers_pox }
				FROM = { has_character_modifier = minor_disease_herpes }
			}
		}
		hidden_tooltip = { FROM = { character_event = { id = 6359 days = 15 random = 5 } } }
	}
	if = {
		limit = { 
			OR = {
				FROM = { trait = lovers_pox }
				FROM = { has_character_modifier = minor_disease_herpes }
			}
			NOR = { 
				trait = lovers_pox
				has_character_modifier = minor_disease_herpes
			}
		}
		hidden_tooltip = { character_event = { id = 6359 days = 15 random = 5 } } 
	}
}

#Tries to impregnate either ROOT or FROM if all conditions are met
impregnate_effect = {
	if = {
		limit = { is_opposite_sex = FROM }

		#If ROOT is a female which can get pregnant
		if = {
			limit = {
				is_female = yes
				NOT = { age = 45 }
				is_pregnant = no
				health = 3
				FROM = { NOT = { trait = eunuch } }
			}

			#ROOT is not consort/spouse of anyone or is consort/spouse of FROM
			if = {
				limit = {
					OR = {
						AND = {
							is_married = no
							is_consort = no
						}
						AND = {
							is_consort = yes
							consort = { character = FROM }
						}
						AND = {
							is_married = yes
							spouse = { character = FROM }
						}
					}
				}
				FROM = { impregnate = ROOT }
			}

			#ROOT is consort/spouse of someone else than FROM
			if = {
				limit = { 
					OR = {
					 	AND = {
					 		is_married = yes
					 		NOT = { spouse = { character = FROM } }
					 	}
					 	AND = {
					 		is_consort = yes
					 		NOT = { consort = { character = FROM } }
					 	}
					}
				}
				FROM = { impregnate_cuckoo = ROOT }
			}
		}

		#If FROM is a female which can get pregnant
		if = {
			limit = {
				FROM = {
					is_female = yes
					NOT = { age = 45 }
					is_pregnant = no
					health = 3
					ROOT = { NOT = { trait = eunuch } }
				}
			}

			#FROM is not consort/spouse of anyone or is consort/spouse of ROOT
			if = {
				limit = {
					FROM = {
						OR = {
							AND = {
								is_married = no
								is_consort = no
							}
							AND = {
								is_consort = yes
								consort = { character = ROOT }
							}
							AND = {
								is_married = yes
								spouse = { character = ROOT }
							}
						}
					}
				}
				impregnate = FROM
			}

			#FROM is consort/spouse of someone else than ROOT
			if = {
				limit = {
					FROM = {
						OR = {
						 	AND = {
						 		is_married = yes
						 		NOT = { spouse = { character = ROOT } }
						 	}
						 	AND = {
						 		is_consort = yes
						 		NOT = { consort = { character = ROOT } }
						 	}
						}
					}
				}

				impregnate_cuckoo = FROM
			}
		}
	}
}

will_not_marry_effect = {
	add_character_modifier = {
		modifier = will_not_marry
		duration = -1
	}
	add_trait = cannot_marry
}

female_councilor_effect_3 = {
	reverse_opinion = { 
		modifier = opinion_given_council_position_3 
		who = FROM 
		years = 5 
	}
	add_character_modifier = {
		name = scandalous_councillor_3
		months = 60
	}
}

#Use to remove any opinion giving a prison reason. Must set appropriate event targets before using this effect.
remove_prison_reason_effect = {
	event_target:remove_prison_reason_effect_accuser = {
		remove_opinion = { who = event_target:remove_prison_reason_effect_accused modifier = opinion_traitor }
		remove_opinion = { who = event_target:remove_prison_reason_effect_accused modifier = opinion_rebel_traitor }
		remove_opinion = { who = event_target:remove_prison_reason_effect_accused modifier = opinion_dishonorable }
		remove_opinion = { who = event_target:remove_prison_reason_effect_accused modifier = opinion_fatwa_target }
		remove_opinion = { who = event_target:remove_prison_reason_effect_accused modifier = opinion_refused_order }
		remove_opinion = { who = event_target:remove_prison_reason_effect_accused modifier = opinion_witch }
		remove_opinion = { who = event_target:remove_prison_reason_effect_accused modifier = opinion_unfaithful_wife }
		remove_opinion = { who = event_target:remove_prison_reason_effect_accused modifier = opinion_cuckolded }
		remove_opinion = { who = event_target:remove_prison_reason_effect_accused modifier = opinion_charge_heresiarch }
		remove_opinion = { who = event_target:remove_prison_reason_effect_accused modifier = opinion_charge_infidel }
		remove_opinion = { who = event_target:remove_prison_reason_effect_accused modifier = opinion_charge_deviant }
		remove_opinion = { who = event_target:remove_prison_reason_effect_accused modifier = opinion_charge_illegitimate }
		remove_opinion = { who = event_target:remove_prison_reason_effect_accused modifier = opinion_charge_traitor }
		remove_opinion = { who = event_target:remove_prison_reason_effect_accused modifier = opinion_charge_slanderer }
	}	
}

add_cat_effect = {
	if = {
		limit =  { NOT = { has_character_modifier = pet_cat } }
		add_character_modifier = {
			name = pet_cat
			duration = -1
		}
		hidden_tooltip = { 
			character_event = { id = 77802 days = 3000 random = 2000 } # Cat dies
			character_event = { id = 77850 days = 100 } #New owner event
			character_event = { id = 77861 days = 30 random = 100 } # Cat & dog todo days
			#Get name
			e_rebels = {
				create_random_steward = {
					random_traits = yes
					dynasty = none
					female = random
					culture = cat
					religion = ROOT
				}
				new_character = {
					ROOT = { save_persistent_event_target = { name = cat_name scope = PREV } }
					if = {
						limit = { PREVPREV = { ai = no } }
						prompt_name = { #player can also rename
							player = PREVPREV
							type = NAME_CAT_MESSAGE
							portrait = PREVPREV
							culture = cat
						}
					}	
					death = yes
				}
			} 			
		} 
	}
}

add_dog_effect = {
	if = {
		limit =  { NOT = { has_character_modifier = pet_hunting_dog } }
		add_character_modifier = {
			name = pet_hunting_dog
			duration = -1
		}
		hidden_tooltip = { 
			character_event = { id = WoL.5290 days = 2555 random = 1000 } # Dog dies
			character_event = { id = 77861 days = 30 random = 100 } # Cat & dog todo days
			random_list = {
				90 = { set_character_flag = good_dog }  # Decide dog's personality...
				10 = { set_character_flag = bad_dog }
			}
			character_event = { id = WoL.5204 days = 150 }
			#Get name
			e_rebels = {
				create_random_steward = {
					random_traits = yes
					dynasty = none
					female = random
					culture = dog_culture
					religion = ROOT
				}
				new_character = {
					ROOT = { save_persistent_event_target = { name = hunting_dog_name scope = PREV } }
					if = {
						limit = { PREVPREV = { ai = no } }
						prompt_name = { #player can also rename
							player = PREVPREV
							type = NAME_DOG_MESSAGE
							portrait = PREVPREV
							culture = dog_culture
						}
					}	
					death = yes
				}
			} 			
		} 
	}
}

###MONKS & MYSTICS###
# remove_assassins_debt_effect = {
	# if = {
		# limit = { has_character_modifier = assassins_debt }
		# remove_character_modifier = assassins_debt
		# hidden_tooltip = {
			# set_variable = { which = assassins_debt value = 0 } 
		# }
		# clr_character_flag = assassins_target_debt
	# }
# }

remove_secret_religion_trait_effect = {
	clear_secret_religion = yes
}

# pay_back_assassins_effect = {
	# if = {
		# limit = { is_variable_equal = { which = assassins_debt value = 50 } }
		# wealth = -50
		# hidden_tooltip = {
			# event_target:grand_master  = {
				# if = {
					# limit = {
						# ai = yes
						# primary_title = { title = d_hashshashin } 
					# }
					# wealth = 50
				# }
			# }
		# }
	# }
	# if = {
		# limit = { is_variable_equal = { which = assassins_debt value = 250 } }
		# wealth = -250	
		# hidden_tooltip = {
			# event_target:grand_master  = {
				# if = {
					# limit = {
						# ai = yes
						# primary_title = { title = d_hashshashin } 
					# }
					# wealth = 250
				# }
			# }
		# }
	# }
	# if = {
		# limit = { is_variable_equal = { which = assassins_debt value = 300 } }
		# wealth = -300
		# hidden_tooltip = {
			# event_target:grand_master  = {
				# if = {
					# limit = {
						# ai = yes
						# primary_title = { title = d_hashshashin } 
					# }
					# wealth = 300
				# }
			# }
		# }
	# }
	# if = {
		# limit = { is_variable_equal = { which = assassins_debt value = 500 } }
		# wealth = -500
		# hidden_tooltip = {
			# event_target:grand_master = {
				# if = {
					# limit = {
						# ai = yes
						# primary_title = { title = d_hashshashin } 
					# }
					# wealth = 500
				# }
			# }
		# }
	# }
# }

major_soul_corruption_effect = {
	custom_tooltip = { 
		text = major_soul_corruption_effect_tooltip
	}
	hidden_effect = {
		if = {
			limit = {
				NAND = {
					trait = cruel
					trait = arbitrary
					trait = deceitful
					trait = possessed
				}
			}
			random_list = {
				20 = {
					modifier = {
						factor = 0
						OR = {
							NOT = { trait = kind }
							trait = cruel
							has_character_flag = corruption_remove_kind 
						}
					}
					set_character_flag = corruption_remove_kind
					character_event = { id = MNM.7050 days = 3 random = 27 }
				}
				20 = {
					modifier = {
						factor = 0
						OR = {
							trait = kind
							trait = cruel
							has_character_flag = corruption_add_cruel 
						}
					}
					set_character_flag = corruption_add_cruel
					character_event = { id = MNM.7050 days = 3 random = 27 }
				}
				15 = {
					modifier = {
						factor = 0
						OR = {
							NOT = { trait = just }
							trait = arbitrary
							has_character_flag = corruption_remove_just
						} 
					}
					set_character_flag = corruption_remove_just
					character_event = { id = MNM.7050 days = 3 random = 27 }
				}
				15 = {
					modifier = {
						factor = 0
						OR = {
							trait = just
							trait = arbitrary
							has_character_flag = corruption_add_arbitrary
						} 
					}
					set_character_flag = corruption_add_arbitrary
					character_event = { id = MNM.7050 days = 3 random = 27 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							NOT = { trait = honest }
							trait = deceitful
							has_character_flag = corruption_remove_honest
						} 
					}
					set_character_flag = corruption_remove_honest	
					character_event = { id = MNM.7050 days = 3 random = 27 }		
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							trait = honest
							trait = deceitful
							has_character_flag = corruption_add_deceitful
						} 
					}
					set_character_flag = corruption_add_deceitful
					character_event = { id = MNM.7050 days = 3 random = 27 }
				}
				5 = { 
					trigger = { magic_returned_trigger = yes }
					modifier = {
						factor = 0
						trait = possessed
						has_character_flag = corruption_add_possessed
					}
					set_character_flag = corruption_add_possessed
					character_event = { id = MNM.7050 days = 3 random = 27 }
				}
				50 = { }
			}
		}
		random_list = { #Risk of getting weaker
			10 = {
				trigger = { NOT = { trait = stressed } }
				character_event = { id = MNM.7051 days = 32 random = 5 }
			}
			5 = {
				trigger = { NOT = { trait = lunatic } magic_returned_trigger = yes }
				character_event = { id = MNM.7052 days = 32 random = 5 }
			}
			5 = {
				trigger = { NOR = { trait = stutter } magic_returned_trigger = yes }
				character_event = { id = MNM.7053 days = 32 random = 5 }
			}
			5 = {
				trigger = { NOR = { trait = clubfooted } magic_returned_trigger = yes }
				character_event = { id = MNM.7054 days = 32 random = 5} 
			}
			5 = {
				trigger = { NOR = { trait = hunchback } magic_returned_trigger = yes }
				character_event = { id = MNM.7055 days = 32 random = 5 }
			}
			5 = {
				trigger = { NOR = { trait = ugly } magic_returned_trigger = yes }
				character_event = { id = MNM.7056 days = 32 random = 5 }
			}
			5 = {
				trigger = {
					NOR = {
			    		trait = feeble
			    		trait = weak
			    		trait = strong
			    	}
					magic_returned_trigger = yes
				}
				character_event = { id = MNM.7059 days = 32 random = 5 }
			}
			40 = {
				trigger = { 
					# NOR = { 
						# NOT = { health = 3 }
						# has_character_modifier = corrupting_magic_minor
						# has_character_modifier = corrupting_magic_major
					# }
					magic_returned_trigger = yes
				}
				character_event = { id = MNM.7057 days = 32 random = 5 }
			}
			220 = { # High visibility (ability abuse) increases the risk of getting weaker
				modifier = {
					factor = 0.9
					check_variable = { which = visibility_value value = 10 }
				}
				modifier = {
					factor = 0.9
					check_variable = { which = visibility_value value = 15 }
				}
				modifier = {
					factor = 0.9
					check_variable = { which = visibility_value value = 20 }
				}
				modifier = {
					factor = 0.9
					check_variable = { which = visibility_value value = 25 }
				}
				modifier = {
					factor = 0.9
					check_variable = { which = visibility_value value = 30 }
				}
				modifier = {
					factor = 0.9
					check_variable = { which = visibility_value value = 35 }
				}
				modifier = {
					factor = 0.9
					check_variable = { which = visibility_value value = 40 }
				}
			}
		}
		random = {
			chance = 2
			set_character_flag = has_it_coming
			character_event = { id = MNM.7854 days = 30 random = 50 } #Demon hunters come after you...
		}
	}
}

minor_soul_corruption_effect = {
	custom_tooltip = { 
		text = minor_soul_corruption_effect_tooltip
	}
	hidden_effect = {
		if = {
			limit = {
				NAND = {
					trait = cruel
					trait = arbitrary
					trait = deceitful
					trait = possessed
				}
			}
			random_list = {
				10 = {
					modifier = {
						factor = 0
						OR = {
							NOT = { trait = kind }
							trait = cruel
							has_character_flag = corruption_remove_kind 
						}
					}
					set_character_flag = corruption_remove_kind
					character_event = { id = MNM.7050 days = 3 random = 27 }
				}
				5 = {
					modifier = {
						factor = 0
						OR = {
							trait = kind
							trait = cruel
							has_character_flag = corruption_add_cruel 
						}
					}
					set_character_flag = corruption_add_cruel
					character_event = { id = MNM.7050 days = 3 random = 27 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							NOT = { trait = just }
							trait = arbitrary
							has_character_flag = corruption_remove_just
						}
					}
					set_character_flag = corruption_remove_just
					character_event = { id = MNM.7050 days = 3 random = 27 }
				}
				5 = {
					modifier = {
						factor = 0
						OR = {
							trait = just
							trait = arbitrary
							has_character_flag = corruption_add_arbitrary
						} 
					}
					set_character_flag = corruption_add_arbitrary
					character_event = { id = MNM.7050 days = 3 random = 27 }
				}
				10 = {
					modifier = {
						factor = 0
						OR = {
							NOT = { trait = honest }
							trait = deceitful
							has_character_flag = corruption_remove_honest
						} 
					}
					set_character_flag = corruption_remove_honest
					character_event = { id = MNM.7050 days = 3 random = 27 }			
				}
				5 = {
					modifier = {
						factor = 0
						OR = {
							trait = honest
							trait = deceitful
							has_character_flag = corruption_add_deceitful
						} 
					}
					set_character_flag = corruption_add_deceitful
					character_event = { id = MNM.7050 days = 3 random = 27 }
				}
				5 = { 
					trigger = { magic_returned_trigger = yes }
					modifier = {
						factor = 0
						trait = possessed
						has_character_flag = corruption_add_possessed
					}
					set_character_flag = corruption_add_possessed
					character_event = { id = MNM.7050 days = 3 random = 27 }
				}
				80 = { }
			}
		}	
		random_list = { #Risk of getting weaker
			15 = {
				trigger = { NOT = { trait = stressed } }
				character_event = { id = MNM.7051 days = 32 random = 5 }
			}
			5 = {
				trigger = { NOT = { trait = lunatic } magic_returned_trigger = yes }
				character_event = { id = MNM.7052 days = 32 random = 5 }
			}
			5 = {
				trigger = { NOR = { trait = stutter } magic_returned_trigger = yes }
				character_event = { id = MNM.7053 days = 32 random = 5 }
			}
			5 = {
				trigger = { NOR = { trait = clubfooted } magic_returned_trigger = yes }
				character_event = { id = MNM.7054 days = 32 random = 5 }
			}
			5 = {
				trigger = { NOR = { trait = hunchback } magic_returned_trigger = yes }
				character_event = { id = MNM.7055 days = 32 random = 5 }
			}
			5 = {
				trigger = { NOR = { trait = ugly } magic_returned_trigger = yes }
				character_event = { id = MNM.7056 days = 32 random = 5 }
			}
			5 = {
				trigger = {
					NOR = {
						trait = feeble
						trait = weak
						trait = strong
					}
					magic_returned_trigger = yes 
				}
				character_event = { id = MNM.7059 days = 32 random = 5 }
			}
			50 = {
				trigger = { 
					# NOR = { 
						# NOT = { health = 3 }
						# has_character_modifier = corrupting_magic_minor
						# has_character_modifier = corrupting_magic_major
					# }
					magic_returned_trigger = yes 
				}
				character_event = { id = MNM.7058 days = 32 random = 5 }
			}
			450 = {  # High visibility (ability abuse) increases the risk of getting weaker
				modifier = {
					factor = 0.9
					check_variable = { which = visibility_value value = 10 }
				}
				modifier = {
					factor = 0.9
					check_variable = { which = visibility_value value = 15 }
				}
				modifier = {
					factor = 0.9
					check_variable = { which = visibility_value value = 20 }
				}
				modifier = {
					factor = 0.9
					check_variable = { which = visibility_value value = 25 }
				}
				modifier = {
					factor = 0.9
					check_variable = { which = visibility_value value = 30 }
				}
				modifier = {
					factor = 0.9
					check_variable = { which = visibility_value value = 35 }
				}
				modifier = {
					factor = 0.9
					check_variable = { which = visibility_value value = 40 }
				}
			}
		}
	}
}

add_society_currency_trivial_effect = {
	if = {
		limit = { is_in_society = yes }
		change_society_currency = 10
	}
}

add_society_currency_tiny_effect = {
	if = {
		limit = { is_in_society = yes }
		change_society_currency = 50
	}
} 

add_society_currency_minor_effect = {
	if = {
		limit = { is_in_society = yes }
		change_society_currency = 100
	}
}

add_society_currency_medium_effect = {
	if = {
		limit = { is_in_society = yes }
		change_society_currency = 200
	}
}

add_society_currency_major_effect = {
	if = {
		limit = { is_in_society = yes }
		change_society_currency = 300
	}
}

add_society_currency_large_effect = {
	if = {
		limit = { is_in_society = yes }
		change_society_currency = 500
	}
}

add_society_currency_massive_effect = {
	if = {
		limit = { is_in_society = yes }
		change_society_currency = 1000
	}
}

detract_society_currency_trivial_effect = {
	if = {
		limit = { is_in_society = yes }
		change_society_currency = -15
	}
}

detract_society_currency_tiny_effect = {
	if = {
		limit = { is_in_society = yes }
		change_society_currency = -50
	}
}

detract_society_currency_minor_effect = {
	if = {
		limit = { is_in_society = yes }
		change_society_currency = -150
	}
}

detract_society_currency_medium_effect = {
	if = {
		limit = { is_in_society = yes }
		change_society_currency = -300
	}
}

detract_society_currency_major_effect = {
	if = {
		limit = { is_in_society = yes }
		change_society_currency = -500
	}
}

remove_random_maimed_effect = { #remember to clear flags if using this effect :D
	random_list = {
		40 = {
			modifier = {
				NOT = { trait = maimed }
				factor = 0
			}
			set_character_flag = removed_maimed
		}
		40 = {
			modifier = {
				NOT = {trait = mangled}
				factor = 0
			}
			set_character_flag = removed_mangled
		}
		10 = {
			modifier = {
				NOT = {trait = one_eyed}
				factor = 0
			}
			set_character_flag = removed_one_eyed
		}
		10 = {
			modifier = {
				NOT = {trait = one_handed}
				factor = 0
			}
			set_character_flag = removed_one_handed
		}
		10 = {
			modifier = {
				NOT = {trait = one_legged}
				factor = 0
			}
			set_character_flag = removed_one_legged
		}
		5 = {
			modifier = {
				NOT = {trait = disfigured}
				factor = 0
			}
			set_character_flag = removed_disfigured
		}
		5 = {
			modifier = {
				NOT = {trait = disfigured_AGOT}
				factor = 0
			}
			set_character_flag = removed_disfigured_AGOT
		}
		5 = {
			modifier = {
				NOT = {trait = crippled}
				factor = 0
			}
			set_character_flag = removed_crippled
		}
	}
}

remove_random_disease_effect = { # Do actual trait removal in event. This is a clunky solution, but communication to player has been prioritised for the sake of event MNM.7119
	random_list = {
		40 = {
			modifier = {
				NOT = { trait = flu }
				factor = 0
			}
			set_character_flag = removing_flu
		}
		20 = {
			modifier = {
				NOT = { trait = has_measles }
				factor = 0
			}
			set_character_flag = removing_has_measles
		}
		40 = {
			modifier = {
				NOT = {
					trait = food_poisoning
				}
				factor = 0
			}
			set_character_flag = removing_food_poisoning
		}
		20 = {
			modifier = {
				NOT = { trait = gout }
				factor = 0
			}
			set_character_flag = removing_gout
		}
		40 = {
			modifier = {
				NOT = { trait = scurvy }
				factor = 0
			}
			set_character_flag = removing_scurvy
		}
		20 = {
			modifier = {
				NOT = { trait = lovers_pox }
				factor = 0
			}
			set_character_flag = removing_lovers_pox
		}
		5 = {
			modifier = {
				NOT = { trait = cancer }
				factor = 0
			}
			set_character_flag = removing_cancer
		}
		10 = {
			modifier = {
				NOT = { trait = pneumonic }
				factor = 0
			}
			set_character_flag = removing_pneumonic
		}
		10 = {
			modifier = {
				NOT = { trait = syphilitic }
				factor = 0
			}
			set_character_flag = removing_syphilitic
		}
		5 = {
			modifier = {
				NOT = { trait = leper }
				factor = 0
			}
			set_character_flag = removing_leper
		}
		10 = {
			modifier = {
				NOT = { trait = has_butterfly_fever }
				factor = 0
			}
			set_character_flag = removing_has_butterfly_fever
		}
	}
}

remove_random_epidemic_disease_effect = {
	random_list = {
		10 = {
			modifier = {
				NOT = { trait = has_bloody_flux}
				factor = 0
			}
			set_character_flag = removing_has_bloody_flux
		}
		10 = {
			modifier = {
				NOT = { trait = has_aztec_disease}
				factor = 0
			}
			set_character_flag = removing_has_aztec_disease
		}
		10 = {
			modifier = {
				NOT = { trait = has_small_pox}
				factor = 0
			}
			set_character_flag = removing_has_small_pox
		}
		10 = {
			modifier = {
				NOT = { trait = has_bubonic_plague}
				factor = 0
			}
			set_character_flag = removing_has_bubonic_plague
		}
		10 = {
			modifier = {
				NOT = { trait = has_grey_plague}
				factor = 0
			}
			set_character_flag = removing_has_grey_plague
		}
		10 = {
			modifier = {
				NOT = { trait = has_typhoid_fever}
				factor = 0
			}
			set_character_flag = removing_has_typhoid_fever
		}
		10 = {
			modifier = {
				NOT = { trait = has_measles}
				factor = 0
			}
			set_character_flag = removing_has_measles
		}
		10 = {
			modifier = {
				NOT = { trait = old_ones_scourge}
				factor = 0
			}
			set_character_flag = removing_old_ones_scourge
		}
		10 = {
			modifier = {
				NOT = { trait = has_red_death}
				factor = 0
			}
			set_character_flag = removing_has_red_death
		}
	}
}

remove_symptoms_effect = {
	if = {
		limit = { trait = cough}
		remove_trait = cough
	}
	if = {
		limit = { trait = fever}
		remove_trait = fever
	}
	if = {
		limit = { trait = diarrhea}
		remove_trait = diarrhea
	}
	if = {
		limit = { trait = vomiting}
		remove_trait = vomiting
	}
	if = {
		limit = { trait = chest_pain}
		remove_trait = chest_pain
	}
	if = {
		limit = { trait = cramps}
		remove_trait = cramps
	}
	if = {
		limit = { trait = rash}
		remove_trait = rash
	}
	if = {
		limit = { trait = headache}
		remove_trait = headache
	}
	if = {
		limit = { trait = abdominal_pain}
		remove_trait = abdominal_pain
	}
	if = {
		limit = { trait = fatigue}
		remove_trait = fatigue
	}
	if = {
		limit = { trait = malaise}
		remove_trait = malaise
	}
}

remove_random_negative_congenital_effect = {
	random_list = {
		10 = {
			modifier = {
				NOT = { trait = clubfooted }
				factor = 0
			}
			remove_trait = clubfooted
		}
		10 = {
			modifier = {
				NOT = { trait = harelip }
				factor = 0
			}
			remove_trait = harelip
		}
		10 = {
			modifier = {
				NOT = { trait = hunchback }
				factor = 0
			}
			remove_trait = hunchback
		}
		10 = {
			modifier = {
				NOT = { trait = lisp }
				factor = 0
			}
			remove_trait = lisp
		}
		10 = {
			modifier = {
				NOT = { trait = stutter }
				factor = 0
			}
			remove_trait = stutter
		}
		10 = {
			modifier = {
				NOT = { trait = ugly }
				factor = 0
			}
			remove_trait = ugly
		}
		10 = {
			modifier = {
				NOT = { trait = dwarf }
				factor = 0
			}
			remove_trait = dwarf
		}
		10 = {
			modifier = {
				NOT = { trait = slow }
				factor = 0
			}
			remove_trait = slow
		}
		10 = {
			modifier = {
				NOT = { trait = imbecile }
				factor = 0
			}
			remove_trait = imbecile
		}
		10 = {
			modifier = {
				NOT = { trait = inbred }
				factor = 0
			}
			remove_trait = inbred
		}
		10 = {
			modifier = {
				NOT = { trait = weak }
				factor = 0
			}
			remove_trait = weak
		}
	}
}

remove_all_negative_congenital_traits_effect = {
	if = {
		limit = { trait = ugly }
		remove_trait = ugly
	}
	if = {
		limit = { trait = clubfooted }
		remove_trait = clubfooted
	}
	if = {
		limit = { trait = hunchback }
		remove_trait = hunchback
	}
	if = {
		limit = { trait = dwarf }
		remove_trait = dwarf
	}
	if = {
		limit = { trait = giant }
		remove_trait = giant
	}
	if = {
		limit = { trait = harelip }
		remove_trait = harelip
	}
	if = {
		limit = { trait = stutter }
		remove_trait = stutter
	}
	if = {
		limit = { trait = lisp }
		remove_trait = lisp
	}
	if = {
		limit = { trait = slow }
		remove_trait = slow
	}
	if = {
		limit = { trait = inbred }
		remove_trait = inbred
	}
	if = {
		limit = { trait = weak }
		remove_trait = weak
	}
	if = {
		limit = { trait = imbecile }
		remove_trait = imbecile
	}
}

join_from_devil_worshiper_society_effect = {
	FROM = {
		if = {
			limit = {
				society_member_of = the_satanists
			}
			ROOT = {
				join_society = the_satanists
			}
		}
		if = {
			limit = {
				society_member_of = the_cold_ones
			}
			ROOT = {
				join_society = the_cold_ones
			}
		}
		if = {
			limit = {
				society_member_of = the_plaguebringers
			}
			ROOT = {
				join_society = the_plaguebringers
			}
		}
		if = {
			limit = {
				society_member_of = the_cult_of_kali
			}
			ROOT = {
				join_society = the_cult_of_kali
			}
		}
		if = {
			limit = {
				society_member_of = the_trollcrafters
			}
			ROOT = {
				join_society = the_trollcrafters
			}
		}
	}
}

remove_demonic_blessing_effect = {
	if = { limit = { has_character_modifier = blessing_of_azazel }
		remove_character_modifier = blessing_of_azazel
	}
	if = { limit = { has_character_modifier = blessing_of_avnas }
		remove_character_modifier = blessing_of_avnas
	}
	if = { limit = { has_character_modifier = blessing_of_belial }
		remove_character_modifier = blessing_of_belial
	}
	if = { limit = { has_character_modifier = blessing_of_mammon }
		remove_character_modifier = blessing_of_mammon
	}
	if = { limit = { has_character_modifier = blessing_of_vetis }
		remove_character_modifier = blessing_of_vetis
	}
}

add_prolong_life_effect = {
	if = {
		limit = {
			NOR = {
				has_character_modifier = stolen_life_minor
				has_character_modifier = stolen_life_medium
				has_character_modifier = stolen_life_major
			}
		}
		random_list = {
			10 = {
				add_character_modifier = {
					name = stolen_life_minor
					days = 3650
				}			
			}
			10 = {
				add_character_modifier = {
					name = stolen_life_medium
					days = 3650
				}
			}
			10 = {
				add_character_modifier = {
					name = stolen_life_major
					days = 3650
				}
			}
		}
		break = yes
	}
	if = {
		limit = {
			OR = {
				has_character_modifier = stolen_life_minor
				has_character_modifier = stolen_life_medium
			}
		}
		hidden_effect = {
			remove_character_modifier = stolen_life_minor
			remove_character_modifier = stolen_life_medium
		}
		add_character_modifier = {
			name = stolen_life_major
			days = 3650
		}
		break = yes
	}
	add_character_modifier = {
		name = stolen_life_major
		days = 3650
	}
}

join_prev_devil_worshiper_society_effect = {
	if = {
		limit = { PREV = { society_member_of = the_satanists } }
		join_society = the_satanists
	}
	if = {
		limit = { PREV = { society_member_of = the_cold_ones } }
		join_society = the_cold_ones
	}
	if = {
		limit = { PREV = { society_member_of = the_plaguebringers } }
		join_society = the_plaguebringers
	}
	if = {
		limit = { PREV = { society_member_of = the_cult_of_kali } }
		join_society = the_cult_of_kali
	}
	if = {
		limit = { PREV = { society_member_of = the_trollcrafters } }
		join_society = the_trollcrafters
	}
}
join_prev_warrior_lodge_society_effect = {
	if = {
		limit = { PREV = { society_member_of = warrior_lodge_norse } }
		join_society = warrior_lodge_norse
	}
	if = {
		limit = { PREV = { society_member_of = warrior_lodge_tengri } }
		join_society = warrior_lodge_tengri
	}
	if = {
		limit = { PREV = { society_member_of = warrior_lodge_baltic } }
		join_society = warrior_lodge_baltic
	}
	if = {
		limit = { PREV = { society_member_of = warrior_lodge_finnish } }
		join_society = warrior_lodge_finnish
	}
	if = {
		limit = { PREV = { society_member_of = warrior_lodge_slavic } }
		join_society = warrior_lodge_slavic
	}
	if = {
		limit = { PREV = { society_member_of = warrior_lodge_west_african } }
		join_society = warrior_lodge_west_african
	}
	if = {
		limit = { PREV = { society_member_of = warrior_lodge_zun } }
		join_society = warrior_lodge_zun
	}
	if = {
		limit = { PREV = { society_member_of = warrior_lodge_bon } }
		join_society = warrior_lodge_bon
	}
	if = {
		limit = { PREV = { society_member_of = warrior_lodge_hellenic } }
		join_society = warrior_lodge_hellenic
	}
}
give_this_warrior_lodge_religion_effect = { #Mostly for spawned characters.
	# if = {
		# limit = { 
			# society_member_of = warrior_lodge_norse 
			# NOT = { has_global_flag = norse_reformation }
		# }
		# religion = norse_pagan
	# }
	# if = {
		# limit = { 
			# society_member_of = warrior_lodge_norse 
			# has_global_flag = norse_reformation
		# }
		# religion = norse_pagan_reformed
	# }
	# if = {
		# limit = { 
			# society_member_of = warrior_lodge_tengri 
			# NOT = { has_global_flag = tengri_reformation }
		# }
		# religion = tengri_pagan
	# }
	# if = {
		# limit = { 
			# society_member_of = warrior_lodge_tengri 
			# has_global_flag = tengri_reformation
		# }
		# religion = tengri_pagan_reformed
	# }
	# if = {
		# limit = { 
			# society_member_of = warrior_lodge_baltic 
			# NOT = { has_global_flag = baltic_reformation }
		# }
		# religion = baltic_pagan
	# }
	# if = {
		# limit = { 
			# society_member_of = warrior_lodge_baltic 
			# has_global_flag = baltic_reformation
		# }
		# religion = baltic_pagan_reformed
	# }
	# if = {
		# limit = { 
			# society_member_of = warrior_lodge_finnish 
			# NOT = { has_global_flag = finnish_reformation }
		# }
		# religion = finnish_pagan
	# }
	# if = {
		# limit = { 
			# society_member_of = warrior_lodge_finnish 
			# has_global_flag = finnish_reformation
		# }
		# religion = finnish_pagan_reformed
	# }
	# if = {
		# limit = { 
			# society_member_of = warrior_lodge_slavic 
			# NOT = { has_global_flag = slavic_reformation }
		# }
		# religion = slavic_pagan
	# }
	# if = {
		# limit = { 
			# society_member_of = warrior_lodge_slavic 
			# has_global_flag = slavic_reformation
		# }
		# religion = slavic_pagan_reformed
	# }
	# if = {
		# limit = { 
			# society_member_of = warrior_lodge_west_african 
			# NOT = { has_global_flag = west_african_reformation }
		# }
		# religion = west_african_pagan
	# }
	# if = {
		# limit = { 
			# society_member_of = warrior_lodge_west_african 
			# has_global_flag = west_african_reformation
		# }
		# religion = west_african_pagan_reformed
	# }
	# if = {
		# limit = { 
			# society_member_of = warrior_lodge_zun 
			# NOT = { has_global_flag = zun_reformation }
		# }
		# religion = zun_pagan
	# }
	# if = {
		# limit = { 
			# society_member_of = warrior_lodge_zun 
			# has_global_flag = zun_reformation
		# }
		# religion = zun_pagan_reformed
	# }
	# if = {
		# limit = { 
			# society_member_of = warrior_lodge_bon 
			# NOT = { has_global_flag = bon_reformation }
		# }
		# religion = bon
	# }
	# if = {
		# limit = { 
			# society_member_of = warrior_lodge_bon 
			# has_global_flag = bon_reformation
		# }
		# religion = bon_reformed
	# }
	# if = {
		# limit = { 
			# society_member_of = warrior_lodge_hellenic 
			# NOT = { has_global_flag = hellenic_reformation }
		# }
		# religion = hellenic_pagan
	# }
	# if = {
		# limit = { 
			# society_member_of = warrior_lodge_hellenic 
			# has_global_flag = hellenic_reformation
		# }
		# religion = hellenic_pagan_reformed
	# }
}
remove_education_effect = {
	remove_trait = naive_appeaser
	remove_trait = underhanded_rogue
	remove_trait = charismatic_negotiator
	remove_trait = grey_eminence
	remove_trait = misguided_warrior
	remove_trait = tough_soldier
	remove_trait = skilled_tactician
	remove_trait = brilliant_strategist
	remove_trait = indulgent_wastrel
	remove_trait = thrifty_clerk
	remove_trait = fortune_builder
	remove_trait = midas_touched
	remove_trait = amateurish_plotter
	remove_trait = flamboyant_schemer
	remove_trait = intricate_webweaver
	remove_trait = elusive_shadow
	remove_trait = detached_priest
	remove_trait = martial_cleric
	remove_trait = scholarly_theologian
	remove_trait = mastermind_theologian
}

remove_lifestyle_trait_effect = {
	remove_trait = hedonist
	remove_trait = scholar
	remove_trait = gardener
	remove_trait = mystic
	remove_trait = impaler
	remove_trait = duelist
	remove_trait = seducer
	remove_trait = seductress
	remove_trait = administrator
	remove_trait = architect
	remove_trait = strategist
	remove_trait = socializer
	remove_trait = schemer
	remove_trait = theologian
	remove_trait = gamer
	remove_trait = hunter
	remove_trait = astronomer
	remove_trait = time_keeper
	remove_trait = cartographer
	remove_trait = traveller
	remove_trait = linguist
	remove_trait = justiciar
	remove_trait = metallurgist
	remove_trait = herbologist
}

monastic_order_purity_effect = {
	if = {
		limit = {
			is_monastic_member_trigger = yes
			OR = {
				trait = cynical
				trait = gluttonous
				trait = greedy
				trait = slothful
				trait = envious
				trait = wroth
				trait = proud
				trait = deceitful
				trait = cruel
				trait = ruthless
				AND = {
					trait = lustful
					NOT = { is_summer_rel_trigger = yes }
				}
				trait = ambitious
				NOT = { trait = humble }
				NOT = { trait = charitable }
				NOT = { trait = kind }
				NOT = { trait = temperate }
				NOT = { trait = honest }
				NAND = {
					trait = chaste
					NOT = { is_summer_rel_trigger = yes }
				}
				NOT = { trait = patient }
				NOT = { trait = diligent }
				NOT = { trait = content }
				NOT = { trait = honorable }
			}
		}

		random = {
			chance = 5
			modifier = {
				factor = 0.7
				is_wicked = yes
			}
			modifier = {
				factor = 1.3
				is_virtous = yes
			}
			modifier = {
				factor = 1.3
				society_rank >= 3
			}
			modifier = {
				factor = 1.3
				society_rank >= 2
			}
			modifier = {
				factor = 1.3
				society_rank >= 3
			}
			modifier = {
				factor = 1.3
				society_rank >= 4
			}
			modifier = {
				factor = 1.1
				piety = 100
			}
			modifier = {
				factor = 1.3
				piety = 300
			}
			modifier = {
				factor = 1.5
				piety = 500
			}
			modifier = {
				factor = 2
				piety = 1000
			}
			character_event = { id = MNM.4400 days = 10 random = 10 }
		}
	}
}

join_prev_monastic_order_society = {
	# if = {
		# limit = { PREV = { society_member_of = monastic_order_orthodox } }
		# join_society = monastic_order_orthodox
	# }
	# if = {
		# limit = { PREV = { society_member_of = monastic_order_benedictine } }
		# join_society = monastic_order_benedictine
	# }
	# if = {
		# limit = { PREV = { society_member_of = monastic_order_dominican } }
		# join_society = monastic_order_dominican
	# }
	# if = {
		# limit = { PREV = { society_member_of = monastic_order_nestorian } }
		# join_society = monastic_order_nestorian
	# }
	# if = {
		# limit = { PREV = { society_member_of = monastic_order_monophysite } }
		# join_society = monastic_order_monophysite
	# }
	# if = {
		# limit = { PREV = { society_member_of = monastic_order_hindu } }
		# join_society = monastic_order_hindu
	# }
	# if = {
		# limit = { PREV = { society_member_of = monastic_order_buddhist } }
		# join_society = monastic_order_buddhist
	# }
	# if = {
		# limit = { PREV = { society_member_of = monastic_order_jain } }
		# join_society = monastic_order_jain
	# }
}

clr_artifact_flagsmodifiers_effect = {
	event_target:relic_ruler = { 
		if = {
			limit = { has_character_modifier = relic_rumor_minor }
			remove_character_modifier = relic_rumor_minor
		}
		if = {
			limit = { has_character_modifier = relic_rumor_medium }
			remove_character_modifier = relic_rumor_medium
		}
		if = {
			limit = { has_character_modifier = relic_rumor_major }
			remove_character_modifier = relic_rumor_major
		}	
	}
	clr_artifact_searcher_effect = yes
}

clr_artifact_searcher_effect = {
	event_target:relic_ruler = { 
		if = {
			limit = { has_character_modifier = pays_for_artifact_hunt_minor }
			remove_character_modifier = pays_for_artifact_hunt_minor
		}
		if = {
			limit = { has_character_modifier = pays_for_artifact_hunt_medium }
			remove_character_modifier = pays_for_artifact_hunt_medium
		}
		if = {
			limit = { has_character_modifier = pays_for_artifact_hunt_major }
			remove_character_modifier = pays_for_artifact_hunt_major
		}
	}
	hidden_effect = {
		event_target:relic_hunter = { clr_character_flag = relic_hunter }
	}
}

add_artifact_search_payment_effect = {
	if = {
		limit = { has_character_modifier = relic_rumor_minor }
		add_character_modifier =  { name = pays_for_artifact_hunt_minor duration = -1 }
	}
	if = {
		limit = { has_character_modifier = relic_rumor_medium }
		add_character_modifier =  { name = pays_for_artifact_hunt_medium duration = -1 }
	}
	if = {
		limit = { has_character_modifier = relic_rumor_major }
		add_character_modifier =  { name = pays_for_artifact_hunt_major duration = -1 }
	}
}

random_accident_death_effect = {
	tooltip = { death = { death_reason = death_accident } }
	hidden_effect = {
		random_list = {
			10 = { 
				modifier = { 
					factor = 0 
					host = { capital_scope = { region = world_dothraki } } 
				}
				death = { death_reason = death_accident_drowning }
			}
			10 = { 
				modifier = { 
					factor = 0 
					host = { 
						capital_scope = {
							OR = {
								region = world_summer_sea
								region = world_jade_sea
							}
						}	
					} 
				}
				death = { death_reason = death_accident_bear }
			}
			10 = { 
				death = { death_reason = death_accident_boar }
			}
			10 = {
				death = { death_reason = death_accident_fall }
			}
			10 = {
				death = { death_reason = death_accident_arrow }
			}
			10 = {
				death = { death_reason = death_accident_snakes }
			}
			10 = {
				modifier = { 
					factor = 0 
					host = { 
						capital_scope = {
							NOT = { region = world_jade_sea }
						}	
					} 
				}
				death = { death_reason = death_accident_tiger }
			}
		}
	}
}

spawn_peasant_army_effect = {
	random_list = {
		17 = {
			spawn_unit = {
				province = event_target:rebel_spawn_location
				home = ROOT
				owner = THIS
				#leader = THIS
				scaled_by_biggest_garrison = 0.4
				troops = {
					archers = { 6 6 }
					light_cavalry = { 4 4 }
					light_infantry = { 10 10 }
				}
				attrition = 1.0
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = event_target:rebel_spawn_location
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.4
					troops = {
						archers = { 6 6 }
						light_cavalry = { 4 4 }
						light_infantry = { 10 10 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = event_target:rebel_spawn_location
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.4
					troops = {
						archers = { 6 6 }
						light_cavalry = { 4 4 }
						light_infantry = { 10 10 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
		}
		17 = {
			spawn_unit = {
				province = event_target:rebel_spawn_location
				home = ROOT
				owner = THIS
				#leader = THIS
				scaled_by_biggest_garrison = 0.3
				troops = {
					archers = { 6 6 }
					light_cavalry = { 4 4 }
					light_infantry = { 10 10 }
				}
				attrition = 1.0
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = event_target:rebel_spawn_location
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_cavalry = { 4 4 }
						light_infantry = { 10 10 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = event_target:rebel_spawn_location
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_cavalry = { 4 4 }
						light_infantry = { 10 10 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
		}
		16 = {
			spawn_unit = {
				province = event_target:rebel_spawn_location
				home = ROOT
				owner = THIS
				#leader = THIS
				scaled_by_biggest_garrison = 0.4
				troops = {
					archers = { 6 6 }
					light_cavalry = { 3 3 }
					light_infantry = { 11 11 }
				}
				attrition = 1.0
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = event_target:rebel_spawn_location
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.4
					troops = {
						archers = { 6 6 }
						light_cavalry = { 3 3 }
						light_infantry = { 11 11 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = event_target:rebel_spawn_location
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.4
					troops = {
						archers = { 6 6 }
						light_cavalry = { 3 3 }
						light_infantry = { 11 11 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
		}
		17 = {
			spawn_unit = {
				province = event_target:rebel_spawn_location
				home = ROOT
				owner = THIS
				#leader = THIS
				scaled_by_biggest_garrison = 0.3
				troops = {
					archers = { 6 6 }
					light_cavalry = { 3 3 }
					light_infantry = { 11 11 }
				}
				attrition = 1.0
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = event_target:rebel_spawn_location
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_cavalry = { 3 3 }
						light_infantry = { 11 11 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = event_target:rebel_spawn_location
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_cavalry = { 3 3 }
						light_infantry = { 11 11 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
		}
		16 = {
			spawn_unit = {
				province = event_target:rebel_spawn_location
				home = ROOT
				owner = THIS
				#leader = THIS
				scaled_by_biggest_garrison = 0.4
				troops = {
					archers = { 6 6 }
					light_infantry = { 14 14 }
				}
				attrition = 1.0
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = event_target:rebel_spawn_location
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.4
					troops = {
						archers = { 6 6 }
						light_infantry = { 14 14 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = event_target:rebel_spawn_location
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.4
					troops = {
						archers = { 6 6 }
						light_infantry = { 14 14 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
		}
		17 = {
			spawn_unit = {
				province = event_target:rebel_spawn_location
				home = ROOT
				owner = THIS
				#leader = THIS
				scaled_by_biggest_garrison = 0.3
				troops = {
					archers = { 6 6 }
					light_infantry = { 14 14 }
				}
				attrition = 1.0
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = event_target:rebel_spawn_location
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_infantry = { 14 14 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = event_target:rebel_spawn_location
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_infantry = { 14 14 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
		}
	}
}

spawn_peasant_reinforcements_effect = {
	random_list = {
		17 = {
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.4
					troops = {
						archers = { 6 6 }
						light_cavalry = { 4 4 }
						light_infantry = { 10 10 }
					}
					attrition = 1.0
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.4
					troops = {
						archers = { 6 6 }
						light_cavalry = { 4 4 }
						light_infantry = { 10 10 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.4
					troops = {
						archers = { 6 6 }
						light_cavalry = { 4 4 }
						light_infantry = { 10 10 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
		}
		17 = {
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_cavalry = { 4 4 }
						light_infantry = { 10 10 }
					}
					attrition = 1.0
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_cavalry = { 4 4 }
						light_infantry = { 10 10 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_cavalry = { 4 4 }
						light_infantry = { 10 10 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
		}
		16 = {
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.4
					troops = {
						archers = { 6 6 }
						light_cavalry = { 3 3 }
						light_infantry = { 11 11 }
					}
					attrition = 1.0
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.4
					troops = {
						archers = { 6 6 }
						light_cavalry = { 3 3 }
						light_infantry = { 11 11 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.4
					troops = {
						archers = { 6 6 }
						light_cavalry = { 3 3 }
						light_infantry = { 11 11 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
		}
		17 = {
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_cavalry = { 3 3 }
						light_infantry = { 11 11 }
					}
					attrition = 1.0
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_cavalry = { 3 3 }
						light_infantry = { 11 11 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_cavalry = { 3 3 }
						light_infantry = { 11 11 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
		}
		16 = {
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.4
					troops = {
						archers = { 6 6 }
						light_infantry = { 14 14 }
					}
					attrition = 1.0
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.4
					troops = {
						archers = { 6 6 }
						light_infantry = { 14 14 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.4
					troops = {
						archers = { 6 6 }
						light_infantry = { 14 14 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
		}
		17 = {
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_infantry = { 14 14 }
					}
					attrition = 1.0
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_infantry = { 14 14 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				trait = peasant_leader
				
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { PREV = { trait = nightswatch } }
					add_trait = nightswatch
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_infantry = { 14 14 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
		}
	}
}

spawn_heretic_army_effect = {
	random_list = {
		34 = {
			spawn_unit = {
				province = ROOT
				home = ROOT
				owner = THIS
				#leader = THIS
				scaled_by_biggest_garrison = 0.3
				troops = {
					archers = { 6 6 }
					light_cavalry = { 4 4 }
					light_infantry = { 10 10 }
				}
				attrition = 1.0
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				age = 30
				trait = peasant_leader
				trait = tough_soldier
			}
			new_character = {
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_cavalry = { 4 4 }
						light_infantry = { 10 10 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				age = 23
				trait = peasant_leader
				trait = tough_soldier
			}
			new_character = {
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_cavalry = { 4 4 }
						light_infantry = { 10 10 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
		}
		33 = {
			spawn_unit = {
				province = ROOT
				home = ROOT
				owner = THIS
				#leader = THIS
				scaled_by_biggest_garrison = 0.3
				troops = {
					archers = { 6 6 }
					light_cavalry = { 2 2 }
					light_infantry = { 12 12 }
				}
				attrition = 1.0
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				age = 30
				trait = peasant_leader
				trait = tough_soldier
			}
			new_character = {
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_cavalry = { 2 2 }
						light_infantry = { 12 12 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				age = 23
				trait = peasant_leader
				trait = tough_soldier
			}
			new_character = {
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_cavalry = { 2 2 }
						light_infantry = { 12 12 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
		}
		33 = {
			spawn_unit = {
				province = ROOT
				home = ROOT
				owner = THIS
				#leader = THIS
				scaled_by_biggest_garrison = 0.3
				troops = {
					archers = { 6 6 }
					light_infantry = { 14 14 }
				}
				attrition = 1.0
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				age = 30
				trait = peasant_leader
				trait = tough_soldier
			}
			new_character = {
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_infantry = { 14 14 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				age = 23
				trait = peasant_leader
				trait = tough_soldier
			}
			new_character = {
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_infantry = { 14 14 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
		}
	}
}

spawn_heretic_reinforcements_effect = {
	random_list = {
		34 = {
			create_character = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				age = 25
				trait = peasant_leader
				trait = tough_soldier
			}
			new_character = {
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_cavalry = { 4 4 }
						light_infantry = { 10 10 }
					}
					attrition = 1.0
				}
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				age = 30
				trait = peasant_leader
				trait = tough_soldier
			}
			new_character = {
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_cavalry = { 4 4 }
						light_infantry = { 10 10 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				age = 23
				trait = peasant_leader
				trait = tough_soldier
			}
			new_character = {
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_cavalry = { 4 4 }
						light_infantry = { 10 10 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
		}
		33 = {
			create_character = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				age = 25
				trait = peasant_leader
				trait = tough_soldier
			}
			new_character = {
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_cavalry = { 2 2 }
						light_infantry = { 12 12 }
					}
					attrition = 1.0
				}
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				age = 30
				trait = peasant_leader
				trait = tough_soldier
			}
			new_character = {
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_cavalry = { 2 2 }
						light_infantry = { 12 12 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				age = 23
				trait = peasant_leader
				trait = tough_soldier
			}
			new_character = {
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_cavalry = { 2 2 }
						light_infantry = { 12 12 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
		}
		33 = {
			create_character = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				age = 25
				trait = peasant_leader
				trait = tough_soldier
			}
			new_character = {
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_infantry = { 14 14 }
					}
					attrition = 1.0
				}
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				age = 30
				trait = peasant_leader
				trait = tough_soldier
			}
			new_character = {
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_infantry = { 14 14 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				age = 23
				trait = peasant_leader
				trait = tough_soldier
			}
			new_character = {
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.3
					troops = {
						archers = { 6 6 }
						light_infantry = { 14 14 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
		}
	}
}

spawn_nationalist_army_effect = {
	spawn_unit = {
		province = event_target:nationalist_revolt_spawn_province
		home = ROOT
		owner = THIS
		#leader = THIS
		match_character = PREV
		match_mult = 0.4
		match_min = 1000
		match_max = 7000
		attrition = 1.0
	}		
	spawn_unit = {
		province = event_target:nationalist_revolt_spawn_province
		home = ROOT
		owner = THIS
		#leader = THIS
		match_character = PREV
		match_mult = 0.4
		match_min = 1000
		match_max = 7000
		attrition = 1.0
	}	
	spawn_unit = {
		province = event_target:nationalist_revolt_spawn_province
		home = ROOT
		owner = THIS
		#leader = THIS
		match_character = PREV
		match_mult = 0.4
		match_min = 1000
		match_max = 7000
		attrition = 1.0
	}	
}

spawn_nationalist_reinforcements_effect = {
	spawn_unit = {
		province = ROOT
		home = ROOT
		owner = THIS
		leader = event_target:nationalist_rebel
		match_character = PREVPREV
		match_mult = 0.15
		match_min = 1000
		match_max = 5000
		attrition = 1.0
	}
	
	create_random_soldier = {
		random_traits = yes
		dynasty = none
		religion = ROOT
		culture = ROOT
		female = no
	}
	new_character = {
		remove_trait = craven
		remove_trait = content
		remove_trait = slothful
		remove_trait = slow
		remove_trait = imbecile
		remove_trait = inbred
		remove_trait = weak
		random_list = {
			20 = { add_trait = skilled_warrior }
			40 = { add_trait = trained_warrior }
			40 = { add_trait = poor_warrior }
		}
		if = {
			limit = { has_knighthood_religion_trigger = yes }
			knight_character_effect = yes
		}
		if = { #If a Stepstones revolt make rebels pirates
			limit = {
				ROOT = { region = world_stepstones }
			}
			religion = pirate
			add_trait = pirate
		}
		if = { #If a Basilisk Isle revolt make rebels pirates
			limit = {
				ROOT = { region = world_basilisk_isles }
			}
			religion = corsair
			add_trait = pirate
		}
		change_martial = 3
		spawn_unit = {
			province = ROOT
			home = ROOT
			owner = PREV
			leader = THIS
			match_character = PREVPREVPREV
			match_mult = 0.15
			match_min = 1000
			match_max = 5000
			attrition = 1.0
		}
	}
	create_random_soldier = {
		random_traits = yes
		dynasty = none
		religion = ROOT
		culture = ROOT
		female = no
	}
	new_character = {
		remove_trait = craven
		remove_trait = content
		remove_trait = slothful
		remove_trait = slow
		remove_trait = imbecile
		remove_trait = inbred
		remove_trait = weak
		random_list = {
			20 = { add_trait = skilled_warrior }
			40 = { add_trait = trained_warrior }
			40 = { add_trait = poor_warrior }
		}
		if = {
			limit = { has_knighthood_religion_trigger = yes }
			knight_character_effect = yes
		}
		if = { #If a Stepstones revolt make rebels pirates
			limit = {
				ROOT = { region = world_stepstones }
			}
			religion = pirate
			add_trait = pirate
		}
		if = { #If a Basilisk Isle revolt make rebels pirates
			limit = {
				ROOT = { region = world_basilisk_isles }
			}
			religion = corsair
			add_trait = pirate
		}
		change_martial = 3
		spawn_unit = {
			province = ROOT
			home = ROOT
			owner = PREV
			leader = THIS
			match_character = PREVPREVPREV
			match_mult = 0.15
			match_min = 1000
			match_max = 5000
			attrition = 1.0
		}
	}
}

spawn_religious_army_effect = {
	random_list = {
		34 = {
			spawn_unit = {
				province = ROOT
				home = ROOT
				owner = THIS
				#leader = THIS
				scaled_by_biggest_garrison = 0.8
				match_min = 150
				match_max = 6666
				troops = {
					archers = { 6 6 }
					light_cavalry = { 4 4 }
					light_infantry = { 10 10 }
				}
				attrition = 1.0
			}
			random_list = {
				10 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = none
						religion = THIS
						culture = THIS
						female = no
						trait = peasant_leader
					}
				}
				10 = {
					create_random_priest = {
						random_traits = yes
						dynasty = none
						religion = THIS
						culture = THIS
						female = no
						trait = zealous
					}
				}	
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { has_education_learning_trigger = yes }
					change_martial = 4
					add_priest_trait_effect = yes
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.8
					match_min = 150
					match_max = 6666
					troops = {
						archers = { 6 6 }
						light_cavalry = { 4 4 }
						light_infantry = { 10 10 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
			random_list = {
				10 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = none
						religion = THIS
						culture = THIS
						female = no
						trait = peasant_leader
					}
				}
				10 = {
					create_random_priest = {
						random_traits = yes
						dynasty = none
						religion = THIS
						culture = THIS
						female = no
						trait = zealous
					}
				}	
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { has_education_learning_trigger = yes }
					change_martial = 4
					add_priest_trait_effect = yes
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.8
					match_min = 150
					match_max = 6666
					troops = {
						archers = { 6 6 }
						light_cavalry = { 4 4 }
						light_infantry = { 10 10 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
		}
		33 = {
			spawn_unit = {
				province = ROOT
				home = ROOT
				owner = THIS
				#leader = THIS
				scaled_by_biggest_garrison = 0.8
				match_min = 150
				match_max = 6666
				troops = {
					archers = { 6 6 }
					light_cavalry = { 2 2 }
					light_infantry = { 12 12 }
				}
				attrition = 1.0
			}
			random_list = {
				10 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = none
						religion = THIS
						culture = THIS
						female = no
						trait = peasant_leader
					}
				}
				10 = {
					create_random_priest = {
						random_traits = yes
						dynasty = none
						religion = THIS
						culture = THIS
						female = no
						trait = zealous
					}
				}	
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { has_education_learning_trigger = yes }
					change_martial = 4
					add_priest_trait_effect = yes
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.8
					match_min = 150
					match_max = 6666
					troops = {
						archers = { 6 6 }
						light_cavalry = { 2 2 }
						light_infantry = { 12 12 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
			random_list = {
				10 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = none
						religion = THIS
						culture = THIS
						female = no
						trait = peasant_leader
					}
				}
				10 = {
					create_random_priest = {
						random_traits = yes
						dynasty = none
						religion = THIS
						culture = THIS
						female = no
						trait = zealous
					}
				}	
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { has_education_learning_trigger = yes }
					change_martial = 4
					add_priest_trait_effect = yes
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.8
					match_min = 150
					match_max = 6666
					troops = {
						archers = { 6 6 }
						light_cavalry = { 2 2 }
						light_infantry = { 12 12 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
		}
		33 = {
			spawn_unit = {
				province = ROOT
				home = ROOT
				owner = THIS
				#leader = THIS
				scaled_by_biggest_garrison = 0.8
				match_min = 150
				match_max = 6666
				troops = {
					archers = { 6 6 }
					light_infantry = { 14 14 }
				}
				attrition = 1.0
			}
			random_list = {
				10 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = none
						religion = THIS
						culture = THIS
						female = no
						trait = peasant_leader
					}
				}
				10 = {
					create_random_priest = {
						random_traits = yes
						dynasty = none
						religion = THIS
						culture = THIS
						female = no
						trait = zealous
					}
				}	
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { has_education_learning_trigger = yes }
					change_martial = 4
					add_priest_trait_effect = yes
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.8
					match_min = 150
					match_max = 6666
					troops = {
						archers = { 6 6 }
						light_infantry = { 14 14 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
			random_list = {
				10 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = none
						religion = THIS
						culture = THIS
						female = no
						trait = peasant_leader
					}
				}
				10 = {
					create_random_priest = {
						random_traits = yes
						dynasty = none
						religion = THIS
						culture = THIS
						female = no
						trait = zealous
					}
				}	
			}
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { has_education_learning_trigger = yes }
					change_martial = 4
					add_priest_trait_effect = yes
				}
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.8
					match_min = 150
					match_max = 6666
					troops = {
						archers = { 6 6 }
						light_infantry = { 14 14 }
					}
					attrition = 1.0
					disband_on_peace = yes
				}
			}
		}
	}
}

spawn_religious_reinforcements_effect = {
	random_list = {
		34 = {
			random_list = {
				10 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = none
						religion = event_target:reinforcements_location
						culture = event_target:reinforcements_location
						female = no
						trait = peasant_leader
					}
				}
				10 = {
					create_random_priest = {
						random_traits = yes
						dynasty = none
						religion = event_target:reinforcements_location
						culture = event_target:reinforcements_location
						female = no
						trait = zealous
					}
				}	
			}	
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { has_education_learning_trigger = yes }
					change_martial = 4
					add_priest_trait_effect = yes
				}
				spawn_unit = {
					province = event_target:reinforcements_location
					home = event_target:reinforcements_location
					owner = PREV
					scaled_by_biggest_garrison = 0.6
					match_min = 150
					match_max = 6666
					troops = {
						archers = { 6 6 }
						light_cavalry = { 4 4 }
						light_infantry = { 10 10 }
					}
					attrition = 1.0
				}
			}
			spawn_unit = {
				province = event_target:reinforcements_location
				home = event_target:reinforcements_location
				owner = THIS
				scaled_by_biggest_garrison = 0.6
				match_min = 150
				match_max = 6666
				troops = {
					archers = { 6 6 }
					light_cavalry = { 4 4 }
					light_infantry = { 10 10 }
				}
				attrition = 1.0
				disband_on_peace = yes
			}
			spawn_unit = {
				province = event_target:reinforcements_location
				home = event_target:reinforcements_location
				owner = THIS
				scaled_by_biggest_garrison = 0.6
				match_min = 150
				match_max = 6666
				troops = {
					archers = { 6 6 }
					light_cavalry = { 4 4 }
					light_infantry = { 10 10 }
				}
				attrition = 1.0
				disband_on_peace = yes
			}
		}
		33 = {
			random_list = {
				10 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = none
						religion = event_target:reinforcements_location
						culture = event_target:reinforcements_location
						female = no
						trait = peasant_leader
					}
				}
				10 = {
					create_random_priest = {
						random_traits = yes
						dynasty = none
						religion = event_target:reinforcements_location
						culture = event_target:reinforcements_location
						female = no
						trait = zealous
					}
				}	
			}	
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { has_education_learning_trigger = yes }
					change_martial = 4
					add_priest_trait_effect = yes
				}
				spawn_unit = {
					province = event_target:reinforcements_location
					home = event_target:reinforcements_location
					owner = PREV
					scaled_by_biggest_garrison = 0.6
					match_min = 150
					match_max = 6666
					troops = {
						archers = { 6 6 }
						light_cavalry = { 2 2 }
						light_infantry = { 12 12 }
					}
					attrition = 1.0
				}
			}
			spawn_unit = {
				province = event_target:reinforcements_location
				home = event_target:reinforcements_location
				owner = THIS
				scaled_by_biggest_garrison = 0.6
				match_min = 150
				match_max = 6666
				troops = {
					archers = { 6 6 }
					light_cavalry = { 2 2 }
					light_infantry = { 12 12 }
				}
				attrition = 1.0
				disband_on_peace = yes
			}
			spawn_unit = {
				province = event_target:reinforcements_location
				home = event_target:reinforcements_location
				owner = THIS
				scaled_by_biggest_garrison = 0.6
				match_min = 150
				match_max = 6666
				troops = {
					archers = { 6 6 }
					light_cavalry = { 2 2 }
					light_infantry = { 12 12 }
				}
				attrition = 1.0
				disband_on_peace = yes
			}
		}
		33 = {
			random_list = {
				10 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = none
						religion = event_target:reinforcements_location
						culture = event_target:reinforcements_location
						female = no
						trait = peasant_leader
					}
				}
				10 = {
					create_random_priest = {
						random_traits = yes
						dynasty = none
						religion = event_target:reinforcements_location
						culture = event_target:reinforcements_location
						female = no
						trait = zealous
					}
				}	
			}	
			new_character = {
				remove_trait = craven
				remove_trait = content
				remove_trait = slothful
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = weak
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				if = {
					limit = { has_education_learning_trigger = yes }
					change_martial = 4
					add_priest_trait_effect = yes
				}
				spawn_unit = {
					province = event_target:reinforcements_location
					home = event_target:reinforcements_location
					owner = PREV
					scaled_by_biggest_garrison = 0.6
					match_min = 150
					match_max = 6666
					troops = {
						archers = { 6 6 }
						light_infantry = { 14 14 }
					}
					attrition = 1.0
				}
			}
			spawn_unit = {
				province = event_target:reinforcements_location
				home = event_target:reinforcements_location
				owner = THIS
				scaled_by_biggest_garrison = 0.6
				match_min = 150
				match_max = 6666
				troops = {
					archers = { 6 6 }
					light_infantry = { 14 14 }
				}
				attrition = 1.0
				disband_on_peace = yes
			}
			spawn_unit = {
				province = event_target:reinforcements_location
				home = event_target:reinforcements_location
				owner = THIS
				scaled_by_biggest_garrison = 0.6
				match_min = 150
				match_max = 6666
				troops = {
					archers = { 6 6 }
					light_infantry = { 14 14 }
				}
				attrition = 1.0
				disband_on_peace = yes
			}
		}
	}	
}
add_ascetic_trait_effect = {
	if = {
		limit = { is_drowned_god_religion_trigger = yes }
		add_trait = drowned
	}
	else_if = {
		limit = { religion = the_seven }
		if = {
			limit = { is_female = no }
			add_trait = septon
			set_special_character_title = title_septon
		}
		if = {
			limit = { is_female = yes }
			add_trait = silent_sister
		}
	}
	else_if = {
		limit = { religion = rhllor }
		add_trait = red_priest
	}
	else_if = {
		limit = { religion = qarth_warlocks }
		add_trait = warlock
		add_trait = mystic
	}
	else_if = {
		limit = { religion = bearded_priests }
		add_trait = bearded_priest
	}
	else_if = {
		limit = { 
			OR = {
				religion = harpy 
				religion = harpy_reformed
			}	
		}
		if = {
			limit = { is_female = yes }
			add_trait = grace
		}	
	}
	else_if = {
		limit = { 
			OR = {
				religion = shadowbinders 
				religion = shadowbinders_reformed
			}	
		}
		if = {
			limit = { is_female = yes }
			add_trait = shadowbinder
			add_trait = mystic
		}	
	}
	else_if = {
		limit = { is_summer_rel_trigger = yes }
		add_trait = love_priest
	}
	else_if = {
		limit = { 
			OR = {
				religion = boash 
				religion = boash_reformed
			}	
		}
		add_trait = blinded
		if = {
			limit = { is_female = no }
			add_trait = eunuch
		}	
	}
}

print_scope_effect = {
	log = "------------------------------"
	log = "- Printing the current scope -"
	log = "- This: [This.GetName][This.GetBestName]"
	log = "- Root: [Root.GetName][Root.GetBestName]"
	log = "- Prev: [Prev.GetName][Prev.GetBestName]"
	log = "- PrevPrev: [PrevPrev.GetName][PrevPrev.GetBestName]"
	log = "- PrevPrevPrev: [PrevPrevPrev.GetName][PrevPrevPrev.GetBestName]"
	log = "- PrevPrevPrevPrev: [PrevPrevPrevPrev.GetName][PrevPrevPrevPrev.GetBestName]"
	log = "- From: [From.GetName][From.GetBestName]"
	log = "- FromFrom: [FromFrom.GetName][FromFrom.GetBestName]"
	log = "- FromFromFrom: [FromFromFrom.GetName][FromFromFrom.GetBestName]"
	log = "- FromFromFromFrom: [FromFromFromFrom.GetName][FromFromFromFrom.GetBestName]"
	log = "- Event_target:test_target1: [test_target1.GetName][test_target1.GetBestName]"
	log = "- Event_target:test_target2: [test_target2.GetName][test_target2.GetBestName]"
	log = "- Event_target:test_target3: [test_target3.GetName][test_target3.GetBestName]"
	log = "------------------------------"
}

add_sympathy_for_prevs_true_religion_effect = {
	# if = {
		# limit = { PREV = { true_religion_group_christian_trigger = yes } }
		# add_trait = sympathy_christendom
	# }
	
}

add_trait_for_prevs_secret_religion_society_effect = {
	set_secret_religion = PREV
    
}
flip_to_secret_religion_effect = {
	convert_to_secret_religion = yes
}


add_prevs_secret_religion_trait_effect = {
	set_secret_religion = PREV  
}

#Used in different sutiation, there conditions on effect. Flag has precedence over religion.
add_secret_religion_trait_trigger_is_religion_or_old_religion_flag_clear_flag_after_effect_is_run_this_name_is_a_tribute_to_m_effect = {
	# if = {
    	# limit = { 
    		# OR = {
    			# AND = {
    				# NOT = {
    					# OR = {
    						# has_character_flag = character_was_catholic
    						# has_character_flag = character_was_orthodox

    					# }
    				# }
    				# religion = catholic
    			# }
    			# has_character_flag = character_was_catholic
			# }
    	# }
    	# add_trait = secretly_catholic	
    	# clr_character_flag = character_was_catholic
    # }
   
}

add_religion_char_flag_effect = {
	# if = {
    	# limit = { religion = catholic }
    	# set_character_flag = character_was_catholic
    # }
   
}

clr_religion_char_flag_effect = {
    # clr_character_flag = character_was_catholic
    # clr_character_flag = character_was_orthodox
   
}

event_target_old_religion_from_flag_effect = {
	# if = {
    	# limit = { has_character_flag = character_was_catholic }
    	# random_character = {
    		# limit = { religion = catholic }
    		# save_event_target_as = old_religion
    	# }
    # }
   
}
increase_visibility_effect = {
	#custom_tooltip = { text = debug_vis }
	hidden_effect = {
		change_variable = { which = visibility_value value = 5 } 
		if = {
			limit = {
				check_variable = { which = visibility_value value = 15 }
				NOR = {
					has_character_modifier = under_suspicion
					has_character_modifier = highly_suspect
				}
			}
			add_character_modifier = {
				name = under_suspicion
				duration = -1
			}
			character_event = { id = MNM.6662 days = 1 }
		}
		if = {
			limit = {
				check_variable = { which = visibility_value value = 25 }
				NOT = {
					has_character_modifier = highly_suspect
				}
			}
			remove_character_modifier = under_suspicion
			add_character_modifier = {
				name = highly_suspect duration = -1 
			}
			character_event = { id = MNM.6663 days = 1 }
			liege = {
				set_character_flag = secret_societies_interference
				character_event = { id = MNM.6661 days = 1095 random = 1095 }
			}
		}
		if = { # Too visible? You auto-reveal yourself if you are independent
			limit = {
				independent = yes
				is_ruler = yes
				check_variable = { which = visibility_value value = 40 }
				NOT = {
					has_character_flag = self_reveal
				}
			}
			set_character_flag = self_reveal
			character_event = { id = MNM.6668 days = 1 }
		}
	}
}

increase_visibility_minor_effect = {
	#custom_tooltip = { text = debug_vis }
	hidden_effect = {
		change_variable = { which = visibility_value value = 2 } 
		if = {
			limit = {
				check_variable = { which = visibility_value value = 15 }
				NOR = {
					has_character_modifier = under_suspicion
					has_character_modifier = highly_suspect
				}
			}
			add_character_modifier = {
				name = under_suspicion
				duration = -1
			}
			character_event = { id = MNM.6662 days = 1 }
		}
		if = {
			limit = {
				check_variable = { which = visibility_value value = 25 }
				NOT = {
					has_character_modifier = highly_suspect
				}
			}
			remove_character_modifier = under_suspicion
			add_character_modifier = {
				name = highly_suspect duration = -1 
			}
			character_event = { id = MNM.6663 days = 1 }
			liege = {
				set_character_flag = secret_societies_interference
				character_event = { id = MNM.6661 days = 1095 random = 1095 }
			}
		}
		if = { # Too visible? You auto-reveal yourself if you are independent
			limit = {
				independent = yes
				is_ruler = yes
				check_variable = { which = visibility_value value = 40 }
				NOT = {
					has_character_flag = self_reveal
				}
			}
			set_character_flag = self_reveal
			if = {
				limit = {
					is_devil_worshiper_trigger = yes
				}
				add_character_modifier = {
					name = known_satanist
					duration = -1
				}
			}
			if = {
				limit = {
					is_devil_worshiper_trigger = no
				}
				add_character_modifier = {
					name = accused_apostate
					duration = -1
				}
			}
			if = {
				limit = {
					controls_religion = no
					religion = the_seven
				}
				excommunicate_effect = yes
			}
			character_event = { id = MNM.6668 days = 1 }
		}
	}
}

decrease_visibility_effect = {
	hidden_effect = {
		if = {
			limit = {
				check_variable = { which = visibility_value value = 1 }
			}
			random_list = {
				50 = {
					change_variable = { which = visibility_value value = -1 }
				}
				20 = {
					change_variable = { which = visibility_value value = -2 }
					modifier = {
						factor = 1.5
						OR = {
							trait = schemer
							trait = deceitful
							trait = patient
							trait = paranoid
						}
					}
					modifier = {
						factor = 1.25
						intrigue = 12
					}
					modifier = {
						factor = 1.25
						intrigue = 14
					}
					modifier = {
						factor = 1.25
						intrigue = 16
					}
				}
				15 = {
					change_variable = { which = visibility_value value = -3 }
					modifier = {
						factor = 1.5
						OR = {
							trait = schemer
							trait = deceitful
							trait = patient
							trait = paranoid
						}
					}
					modifier = {
						factor = 1.25
						intrigue = 12
					}
					modifier = {
						factor = 1.25
						intrigue = 14
					}
					modifier = {
						factor = 1.25
						intrigue = 16
					}
				}
				10 = {
					change_variable = { which = visibility_value value = -4 }
					modifier = {
						factor = 1.5
						OR = {
							trait = schemer
							trait = deceitful
							trait = patient
							trait = paranoid
						}
					}
					modifier = {
						factor = 1.25
						intrigue = 12
					}
					modifier = {
						factor = 1.25
						intrigue = 14
					}
					modifier = {
						factor = 1.25
						intrigue = 16
					}
				}
				5 = {
					change_variable = { which = visibility_value value = -5 }
					modifier = {
						factor = 1.5
						OR = {
							trait = schemer
							trait = deceitful
							trait = patient
							trait = paranoid
						}
					}
					modifier = {
						factor = 1.25
						intrigue = 12
					}
					modifier = {
						factor = 1.25
						intrigue = 14
					}
					modifier = {
						factor = 1.25
						intrigue = 16
					}
				}
			}
		}
		if = {
			limit = {
				NOT = { check_variable = { which = visibility_value value = 0 } } #safety 
			}
			set_variable = { which = visibility_value value = 0 }
		}
	}
	if = {
		limit = {
			NOT = { check_variable = { which = visibility_value value = 25 } }
			has_character_modifier = highly_suspect
		}
		remove_character_modifier = highly_suspect
		add_character_modifier = {
			name = under_suspicion
			duration = -1
		}
		character_event = { id = MNM.6664 }
	}
	if = {
		limit = {
			NOT = { check_variable = { which = visibility_value value = 15 } }
			has_character_modifier = under_suspicion
		}
		remove_character_modifier = under_suspicion
		character_event = { id = MNM.6665 }
	}
}
hermetic_add_herbal_ingredient_effect = {
	hidden_effect = {
		random_list = {
			50 = {
				add_artifact = ingredient_herb1
			}
			50 = {
				add_artifact = ingredient_herb2
			}
			50 = {
				add_artifact = ingredient_herb3
			}
			50 = {
				add_artifact = ingredient_herb4
			}
			50 = {
				add_artifact = ingredient_herb5
			}
			50 = {
				add_artifact = ingredient_herb6
			}
			50 = {
				add_artifact = ingredient_herb7
			}
			50 = {
				add_artifact = ingredient_herb8
			}
			50 = {
				add_artifact = ingredient_herb9
			}
		}
	}
}

hermetic_add_animal_ingredient_effect = {
	hidden_effect = {
		random_list = {
			50 = {
				add_artifact = ingredient_animal1
			}
			50 = {
				add_artifact = ingredient_animal2
			}
			50 = {
				add_artifact = ingredient_animal3
			}
			50 = {
				add_artifact = ingredient_animal4
			}
			50 = {
				add_artifact = ingredient_animal5
			}
			50 = {
				add_artifact = ingredient_animal6
			}
			50 = {
				add_artifact = ingredient_animal7
			}
			50 = {
				add_artifact = ingredient_animal8
			}
			50 = {
				add_artifact = ingredient_animal9
			}
		}
	}
}

hermetic_add_misc_ingredient_effect = {
	hidden_effect = {
		random_list = {
			50 = {
				add_artifact = ingredient_metal_exotic1
			}
			50 = {
				add_artifact = ingredient_metal_exotic2
			}
			50 = {
				add_artifact = ingredient_metal_exotic3
			}
			50 = {
				add_artifact = ingredient_metal_exotic4
			}
			50 = {
				add_artifact = ingredient_metal_exotic5
			}
			50 = {
				add_artifact = ingredient_metal_exotic6
			}
			50 = {
				add_artifact = ingredient_metal_exotic7
			}
			50 = {
				add_artifact = ingredient_metal_exotic8
			}
			50 = {
				add_artifact = ingredient_metal_exotic9
			}
		}
	}
}

remove_scrying_omen_modifiers_effect = { #For cleaning up end-states of the Hermetics Scrying Power
	if = {
		limit = { has_character_modifier = good_battle_omen }
		remove_character_modifier = good_battle_omen
	}
	if = {
		limit = { has_character_modifier = bad_battle_omen }
		remove_character_modifier = bad_battle_omen
	}
	if = {
		limit = { has_character_modifier = good_relationship_omen }
		remove_character_modifier = good_relationship_omen
	}
	if = {
		limit = { has_character_modifier = bad_relationship_omen }
		remove_character_modifier = bad_relationship_omen
	}
	if = {
		limit = { has_character_modifier = good_power_omen }
		remove_character_modifier = good_power_omen
	}
	if = {
		limit = { has_character_modifier = bad_power_omen }
		remove_character_modifier = bad_power_omen
	}
	hidden_effect = { remove_character_modifier = scrying_cooldown }
	clr_character_flag = positive_reaction_to_scrying_flag
	clr_character_flag = negative_reaction_to_scrying_flag
	clr_character_flag = positive_event_flag
	clr_character_flag = negative_event_flag
	clear_delayed_event = { id = MNM.1225 }
	clear_delayed_event = { id = MNM.1226 }
	clear_delayed_event = { id = MNM.1227 }

}

calculate_scrying_outcome_effect = { # the positive_event_flag/negative_event_flag need to be set somewhere in the target event in order for this to work...
	custom_tooltip = { text = tooltip_info_omen_tt }

	if = {
		limit = {
			OR = {
				AND = {
					has_positive_omen_modifier_trigger = yes
					has_character_flag = positive_event_flag
				}
				AND = {
					has_negative_omen_modifier_trigger = yes
					has_character_flag = negative_event_flag
				}
			}
		}
		upgrade_seer_modifier_effect = yes
	}
	if = {
		limit = {
			OR = {
				AND = {
					has_positive_omen_modifier_trigger = yes
					has_character_flag = negative_event_flag
				}
				AND = {
					has_negative_omen_modifier_trigger = yes
					has_character_flag = positive_event_flag
				}
			}
		}
		downgrade_seer_modifier_effect = yes
	}
	clr_character_flag = positive_event_flag
	clr_character_flag = negative_event_flag
}

upgrade_seer_modifier_effect = { # Modifiers gotten at end-states of the Hermetics Scrying Power
	if = {
		limit = {
			has_a_seer_modifier_trigger = yes
		}
		trigger_switch = {
			on_trigger = has_character_modifier
			fulfilled_vision_worst = {
				remove_character_modifier = fulfilled_vision_worst
				add_character_modifier = {
		    		name = fulfilled_vision_bad
		    		duration = 2555
		    	}
			}
			fulfilled_vision_bad = {
				remove_character_modifier = fulfilled_vision_bad
				add_character_modifier = {
		    		name = fulfilled_vision_ok
		    		duration = 2555
		    	}
			}
			fulfilled_vision_ok = {
				remove_character_modifier = fulfilled_vision_ok
				add_character_modifier = {
		    		name = fulfilled_vision_great
		    		duration = 2555
		    	}
			}
			fulfilled_vision_great = {
				add_character_modifier = {
		    		name = fulfilled_vision_great
		    		duration = 2555
		    	}
			}
		}
	}
	if = {
		limit = {
			has_a_seer_modifier_trigger = no
		}
		add_character_modifier = {
    		name = fulfilled_vision_ok
    		duration = 2555
    	}
	}
}

downgrade_seer_modifier_effect = { # Modifiers gotten at end-states of the Hermetics Scrying Power
	if = {
		limit = {
			has_a_seer_modifier_trigger = yes
		}
		trigger_switch = {
			on_trigger = has_character_modifier
			fulfilled_vision_great = {
				remove_character_modifier = fulfilled_vision_great
				add_character_modifier = {
		    		name = fulfilled_vision_ok
		    		duration = 2555
		    	}
			}
			fulfilled_vision_ok = {
				remove_character_modifier = fulfilled_vision_ok
				add_character_modifier = {
		    		name = fulfilled_vision_bad
		    		duration = 2555
		    	}
			}
			fulfilled_vision_bad = {
				remove_character_modifier = fulfilled_vision_bad
				add_character_modifier = {
		    		name = fulfilled_vision_worst
		    		duration = 2555
		    	}
			}
			fulfilled_vision_worst = {
				add_character_modifier = {
		    		name = fulfilled_vision_worst
		    		duration = 2555
		    	}
			}
		}
	}
	if = {
		limit = {
			has_a_seer_modifier_trigger = no
		}
		add_character_modifier = {
    		name = fulfilled_vision_bad
    		duration = 2555
    	}
	}
}

scrying_omen_fulfilled_by_gaining_disease_effect = { #scrying result are sent if someone gets sick and you are carrying an omen (fired from rip_symptom_events)
	hidden_effect = {
		host = {
			if = {
				limit = {
					OR = {
						is_close_relative = ROOT
						is_friend = ROOT
					}
					OR = {
						has_character_modifier = bad_relationship_omen
						has_character_modifier = good_relationship_omen
					}
				}
				character_event = { id = MNM.1221 days = 5 random = 5 } #to the host of sick character
			}
		}
		father = {
			if = {
				limit = { 
					is_liege_of = ROOT
					OR = {
						has_character_modifier = bad_relationship_omen
						has_character_modifier = good_relationship_omen
					}
				}
				character_event = { id = MNM.1221 days = 5 random = 5 }
			}
		}
		mother = {
			if = {
				limit = { 
					is_liege_of = ROOT
					OR = {
						has_character_modifier = bad_relationship_omen
						has_character_modifier = good_relationship_omen
					}
				}
				character_event = { id = MNM.1221 days = 5 random = 5 }
			}
		}
		spouse = {
			if = {
				limit = {
					is_liege_of = ROOT
					OR = {
						has_character_modifier = bad_relationship_omen
						has_character_modifier = good_relationship_omen
					}
				}
				character_event = { id = MNM.1221 days = 5 random = 5 }
			}
		}
		lover = {
			if = {
				limit = {
					is_liege_of = ROOT
					OR = {
						has_character_modifier = bad_relationship_omen
						has_character_modifier = good_relationship_omen
					}
				}
				character_event = { id = MNM.1221 days = 5 random = 5 }
			}
		}

		if = {
			limit = {
				OR = {
					has_character_modifier = bad_power_omen
					has_character_modifier = good_power_omen
				}
			}
			character_event = { id = MNM.1220 days = 5 random = 5 } #to the sick character themselves
		}
	}
}

scrying_omen_fulfilled_by_removing_disease_effect = { #scrying result are sent if someone gets sick and you are carrying an omen (fired from rip_symptom_events)
	hidden_effect = {
		host = {
			if = {
				limit = {
					OR = {
						is_close_relative = ROOT
						is_friend = ROOT
					}
					OR = {
						has_character_modifier = good_relationship_omen
						has_character_modifier = bad_relationship_omen
					}
				}
				character_event = { id = MNM.1223 days = 5 random = 5 } #to the host of sick character
			}
		}
		father = {
			if = {
				limit = { 
					is_liege_of = ROOT
					OR = {
						has_character_modifier = good_relationship_omen
						has_character_modifier = bad_relationship_omen
					}
				}
				character_event = { id = MNM.1223 days = 5 random = 5 }
			}
		}
		mother = {
			if = {
				limit = { 
					is_liege_of = ROOT
					OR = {
						has_character_modifier = good_relationship_omen
						has_character_modifier = bad_relationship_omen
					}
				}
				character_event = { id = MNM.1223 days = 5 random = 5 }
			}
		}
		spouse = {
			if = {
				limit = {
					is_liege_of = ROOT
					OR = {
						has_character_modifier = good_relationship_omen
						has_character_modifier = bad_relationship_omen
					}
				}
				character_event = { id = MNM.1223 days = 5 random = 5 }
			}
		}
		lover = {
			if = {
				limit = {
					is_liege_of = ROOT
					OR = {
						has_character_modifier = good_relationship_omen
						has_character_modifier = bad_relationship_omen
					}
				}
				character_event = { id = MNM.1223 days = 5 random = 5 }
			}
		}

		if = {
			limit = {
				OR = {
					has_character_modifier = good_power_omen
					has_character_modifier = bad_power_omen
				}
			}
			character_event = { id = MNM.1222 days = 5 random = 5 } #to the sick character themselves
		}
	}
}

add_pet_owl_effect = {
	add_character_modifier = {
		name = pet_owl
		duration = -1
	}
	hidden_tooltip = { character_event = { id = 77800 days = 3500 random = 2000 } } # Owl dies
}

add_mission_succeed_influence_effect = { 
	add_society_modifier = 	{
		modifier = successful_mission
		years = 10
	}
}

add_mission_fail_influence_effect = { 
	add_society_modifier = 	{
		modifier = failed_mission
		years = 10
	}
}

add_mission_decline_influence_effect = { 
	add_society_modifier = 	{
		modifier = declined_mission
		years = 2
	}
}

clean_up_horoscope_effect = {
	clr_character_flag = avoided_destiny
	clr_character_flag = horoscope_maker_died
	clr_character_flag = destined_artist
	clr_character_flag = destined_fighter
	clr_character_flag = destined_diplomat
	clr_character_flag = destined_schemer
	clr_character_flag = destined_scholar
	clr_character_flag = encouraged_horoscope_pattern
	clr_character_flag = discouraged_horoscope_pattern
	clr_character_flag = horoscope_child_evaluate
	remove_character_modifier = horoscope_cooldown
	clr_character_flag = horoscope_path_1
	clr_character_flag = horoscope_maker_is_mother
	clr_character_flag = horoscope_maker_is_father
}

upgrade_education_effect = {
	trigger_switch = {
		on_trigger = trait

		### Intrigue ###
		amateurish_plotter = {
			remove_trait = amateurish_plotter
			add_trait = flamboyant_schemer
		}
		flamboyant_schemer = {
			remove_trait = flamboyant_schemer
			add_trait = intricate_webweaver 
		}
		intricate_webweaver = {
			remove_trait = intricate_webweaver
			add_trait = elusive_shadow 
		}
		elusive_shadow = {
			# already maxed
		}
		
		### Diplomacy ###
		naive_appeaser = {
			remove_trait = naive_appeaser
			add_trait = underhanded_rogue
		}
		underhanded_rogue = {
			remove_trait = underhanded_rogue
			add_trait = charismatic_negotiator 
		}
		charismatic_negotiator = {
			remove_trait = charismatic_negotiator
			add_trait = grey_eminence 
		}
		grey_eminence = {
			# already maxed
		}

		### Stewardship ###
		indulgent_wastrel = {
			remove_trait = indulgent_wastrel
			add_trait = thrifty_clerk
		}
		thrifty_clerk = {
			remove_trait = thrifty_clerk
			add_trait = fortune_builder 
		}
		fortune_builder = {
			remove_trait = fortune_builder
			add_trait = midas_touched 
		}
		midas_touched = {
			# already maxed
		}

		### Martial ###
		misguided_warrior = {
			remove_trait = misguided_warrior
			add_trait = tough_soldier
		}
		tough_soldier = {
			remove_trait = tough_soldier
			add_trait = skilled_tactician 
		}
		skilled_tactician = {
			remove_trait = skilled_tactician
			add_trait = brilliant_strategist 
		}
		brilliant_strategist = {
			# already maxed
		}
		
		### Learning ###
		detached_priest = {
			remove_trait = detached_priest
			add_trait = martial_cleric
		}
		martial_cleric = {
			remove_trait = martial_cleric
			add_trait = scholarly_theologian 
		}
		scholarly_theologian = {
			remove_trait = scholarly_theologian
			add_trait = mastermind_theologian 
		}
		mastermind_theologian = {
			# already maxed
		}
	}
}

set_horoscope_modifier_effect = { # Modifiers received by target during the Hermetics Horoscope Power
	if = {
		limit = {
			has_childhood_horoscope_modifier_trigger = yes
			NOT = { has_character_flag = avoided_destiny }
		}
		trigger_switch = {
			on_trigger = has_character_modifier
			guided_by_horoscope_diplomacy = {
				remove_character_modifier = guided_by_horoscope_diplomacy
				add_character_modifier = {
		    		name = guided_by_horoscope_diplomacy_adult
		    		duration = 2555
		    	}
			}
			guided_by_horoscope_martial = {
				remove_character_modifier = guided_by_horoscope_martial
				add_character_modifier = {
		    		name = guided_by_horoscope_martial_adult
		    		duration = 2555
		    	}
			}
			guided_by_horoscope_stewardship = {
				remove_character_modifier = guided_by_horoscope_stewardship
				add_character_modifier = {
		    		name = guided_by_horoscope_stewardship_adult
		    		duration = 2555
		    	}
			}
			guided_by_horoscope_intrigue = {
				remove_character_modifier = guided_by_horoscope_intrigue
				add_character_modifier = {
		    		name = guided_by_horoscope_intrigue_adult
		    		duration = 2555
		    	}
			}
			guided_by_horoscope_learning = {
				remove_character_modifier = guided_by_horoscope_learning
				add_character_modifier = {
		    		name = guided_by_horoscope_learning_adult
		    		duration = 2555
		    	}
			}
		}
		break = yes
	}

	if = {
		limit = {
			has_childhood_horoscope_modifier_trigger = no
			is_adult = no
			NOT = { has_character_flag = avoided_destiny }
		}
		trigger_switch = {
			on_trigger = has_character_flag
			destined_steward = {
				add_character_modifier = {
    				name = guided_by_horoscope_stewardship
    				duration =-1
    			}
			}
			destined_fighter = {
				add_character_modifier = {
    				name = guided_by_horoscope_martial
    				duration =-1
    			}
			}
			destined_diplomat = {
				add_character_modifier = {
    				name = guided_by_horoscope_diplomacy
    				duration =-1
    			}
			}
			destined_schemer = {
				add_character_modifier = {
    				name = guided_by_horoscope_intrigue
    				duration =-1
    			}
			}
			destined_scholar = {
				add_character_modifier = {
    				name = guided_by_horoscope_learning
    				duration =-1
    			}
			}
		}
		break = yes
	}	

	if = {
		limit = {
			has_childhood_horoscope_modifier_trigger = no
			has_character_flag = avoided_destiny
		}
		trigger_switch = {
			on_trigger = has_character_flag
			destined_steward = {
				add_character_modifier = {
    				name = horoscope_outcome_jittery
    				years = 15
    			}
			}
			destined_fighter = {
				add_character_modifier = {
    				name = horoscope_outcome_brute
					years = 15
    			}
			}
			destined_diplomat = {
				add_character_modifier = {
    				name = horoscope_outcome_artist
    				years = 15
    			}
			}
			destined_schemer = {
				add_character_modifier = {
    				name = horoscope_outcome_arrogant
    				years = 15
    			}
			}
			destined_scholar = {
				add_character_modifier = {
    				name = horoscope_outcome_scatterbrain
    				years = 15
    			}
			}
		}
		break = yes
	}

	if = {
		limit = {
			has_childhood_horoscope_modifier_trigger = yes
			has_character_flag = avoided_destiny
		}
		trigger_switch = {
			on_trigger = has_character_flag
			destined_steward = {
				if = { limit = { has_character_modifier = guided_by_horoscope_stewardship }
					remove_character_modifier = guided_by_horoscope_stewardship
				}
				add_character_modifier = {
    				name = horoscope_outcome_jittery
    				years = 15
    			}
			}
			destined_fighter = {
				if = { limit = { has_character_modifier = guided_by_horoscope_martial }
					remove_character_modifier = guided_by_horoscope_martial
				}
				add_character_modifier = {
    				name = horoscope_outcome_brute
					years = 15
    			}
			}
			destined_diplomat = {
				if = { limit = { has_character_modifier = guided_by_horoscope_diplomacy }
					remove_character_modifier = guided_by_horoscope_diplomacy
				}
				add_character_modifier = {
    				name = horoscope_outcome_artist
    				years = 15
    			}
			}
			destined_schemer = {
				if = { limit = { has_character_modifier = guided_by_horoscope_intrigue }
					remove_character_modifier = guided_by_horoscope_intrigue
				}
				add_character_modifier = {
    				name = horoscope_outcome_arrogant
    				years = 15
    			}
			}
			destined_scholar = {
				if = { limit = { has_character_modifier = guided_by_horoscope_learning }
					remove_character_modifier = guided_by_horoscope_learning
				}
				add_character_modifier = {
    				name = horoscope_outcome_scatterbrain
    				years = 15
    			}
			}
		}
		break = yes
	}
}

increase_astronomical_insights_modifier_effect = {
	custom_tooltip = { text = increase_astronomical_insight_tt }
	trigger_switch = {
		on_trigger = has_character_modifier
		astronomical_insights_1 = { 
			hidden_effect = {
				remove_character_modifier = astronomical_insights_1 
			}
			add_character_modifier = {
				modifier = astronomical_insights_2
				duration = -1
			}
		}
		astronomical_insights_2 = { 
			hidden_effect = {
				remove_character_modifier = astronomical_insights_2
			}
			add_character_modifier = {
				modifier = astronomical_insights_3
				duration = -1
			}
		}
		astronomical_insights_3 = { 
			hidden_effect = {
				remove_character_modifier = astronomical_insights_3
			}
			add_character_modifier = {
				modifier = astronomical_insights_4
				duration = -1
			}
		}
	}
	if = {
		limit = {
			NOR = {
				has_character_modifier = astronomical_insights_1
				has_character_modifier = astronomical_insights_2
				has_character_modifier = astronomical_insights_3
				has_character_modifier = astronomical_insights_4
			}
		}
		add_character_modifier = {
			modifier = astronomical_insights_1
			duration = -1
		}
	}
}

remove_astronomical_insight_modifier_effect = {
	hidden_effect = {
		remove_character_modifier = astronomical_insights_1
		remove_character_modifier = astronomical_insights_2
		remove_character_modifier = astronomical_insights_3
		remove_character_modifier = astronomical_insights_4
	}
}

add_Aries_sign_trait_effect = {
	random_list = {
		10 = {
			add_trait = stubborn
		}
		10 = {
			add_trait = ambitious
		}
	}
}

add_Taurus_sign_trait_effect = {
	random_list = {
		10 = {
			add_trait = content
		}
		10 = {
			add_trait = patient
		}
	}
}
add_Gemini_sign_trait_effect = {
	random_list = {
		10 = {
			add_trait = wroth
		}
		10 = {
			add_trait = diligent
		}
	}
}
add_Cancer_sign_trait_effect = {
	random_list = {
		10 = {
			add_trait = honest
		}
		10 = {
			add_trait = kind
		}
	}
}
add_Leo_sign_trait_effect = {
	random_list = {
		10 = {
			add_trait = cruel
		}
		10 = {
			add_trait = gregarious
		}
	}
}
add_Virgo_sign_trait_effect = {
	random_list = {
		10 = {
			add_trait = shy
		}
		10 = {
			add_trait = humble
		}
	}
}
add_Libra_sign_trait_effect = {
	random_list = {
		10 = {
			add_trait = trusting
		}
		10 = {
			add_trait = temperate
		}
	}
}
add_Scorpius_sign_trait_effect = {
	random_list = {
		10 = {
			add_trait = deceitful
		}
		10 = {
			add_trait = lustful
		}
	}
}
add_Sagittarius_sign_trait_effect = {
	random_list = {
		10 = {
			add_trait = wroth
		}
		10 = {
			add_trait = charitable
		}
	}
}
add_Capricorn_sign_trait_effect = {
	random_list = {
		10 = {
			add_trait = proud
		}
		10 = {
			add_trait = temperate
		}
	}
}
add_Aquarius_sign_trait_effect = {
	random_list = {
		10 = {
			add_trait = slothful
		}
		10 = {
			add_trait = ambitious
		}
	}
}
add_Pisces_sign_trait_effect = {
	random_list = {
		10 = {
			add_trait = trusting
		}
		10 = {
			add_trait = kind
		}
	}
}

add_western_zodiac_trait_effect = {
	custom_tooltip = {
		text = gain_zodiac_trait_effect_tt
	}
	if = { limit = { is_born_under_Aries_trigger = yes }
		add_Aries_sign_trait_effect = yes
	}
	if = { limit = { is_born_under_Taurus_trigger = yes }
		add_Taurus_sign_trait_effect = yes
	}
	if = { limit = { is_born_under_Gemini_trigger = yes }
		add_Gemini_sign_trait_effect = yes
	}
	if = { limit = { is_born_under_Cancer_trigger = yes }
		add_Cancer_sign_trait_effect = yes
	}
	if = { limit = { is_born_under_Leo_trigger = yes }
		add_Leo_sign_trait_effect = yes
	}
	if = { limit = { is_born_under_Virgo_trigger = yes }
		add_Virgo_sign_trait_effect = yes
	}
	if = { limit = { is_born_under_Libra_trigger = yes }
		add_Libra_sign_trait_effect = yes
	}
	if = { limit = { is_born_under_Scorpius_trigger = yes }
		add_Scorpius_sign_trait_effect = yes
	}
	if = { limit = { is_born_under_Sagittarius_trigger = yes }
		add_Sagittarius_sign_trait_effect = yes
	}
	if = { limit = { is_born_under_Capricorn_trigger = yes }
		add_Capricorn_sign_trait_effect = yes
	}
	if = { limit = { is_born_under_Aquarius_trigger = yes }
		add_Aquarius_sign_trait_effect = yes
	}
	if = { limit = { is_born_under_Pisces_trigger = yes }
		add_Pisces_sign_trait_effect = yes
	}
}
flip_secret_religious_community_provinces = {
	trigger_switch = {
		on_trigger = society_member_of
		# secret_religious_society_catholic = {
			# ROOT = {
				# any_demesne_province = {
					# limit = {
						# has_province_modifier = secret_catholic_community
					# }
					# religion = catholic
					# remove_province_modifier = secret_catholic_community
				# }
			# }
		# }
	}
}
clean_up_after_leaving_society_effect = {
	hidden_effect = {
		clr_character_flag = do_not_disturb
		remove_character_modifier = quest_cooldown_timer
		
		# #Powers, Missions and Interactions: the Assassins
		# #quest_the_assassins_assassination
		# #quest_the_assassins_collect_debt
		# #quest_the_assassins_convert_province
		# #quest_the_assassins_occupy_holding
		# #quest_the_assassins_protege
		# clr_character_flag = ongoing_recruitment
		# clr_character_flag = approves_of_shia
		# clr_character_flag = disapproves_of_shia
		# clr_character_flag = willing_to_join
		# clr_character_flag = unwilling_to_join
		# clr_character_flag = assassins_attempted_recruitment
		# clr_character_flag = escape_successful
		# clr_character_flag = escape_injured
		# clr_character_flag = escape_death
		# clr_character_flag = escape_bribe 
		
		#Powers, Missions and Interactions: Devil Worshipers
		clr_character_flag = attempted_corrupt_priest
		clr_character_flag = possessing_courtier
		clr_character_flag = desecration_in_progress
		clr_character_flag = desecration_violent
		clr_character_flag = desecration_at_home
		clr_character_flag = desecration_plotting
		clr_character_flag = approves_of_satanism
		clr_character_flag = disapproves_of_satanism
		clr_character_flag = has_ill_lover_loc
		clr_character_flag = has_ill_spouse_loc
		clr_character_flag = has_ill_child_loc
		clr_character_flag = has_money_troubles_loc
		clr_character_flag = has_some_illness_loc
		clr_character_flag = has_need_of_winning_battles_loc
		clr_character_flag = has_a_rival_loc
		clr_character_flag = is_weak_loc
		clr_character_flag = is_dumb_loc
		clr_character_flag = being_recruited_by_the_satanists
		clr_character_flag = being_recruited_by_the_trollcrafters
		clr_character_flag = being_recruited_by_the_cult_of_kali
		clr_character_flag = being_recruited_by_the_cold_ones
		clr_character_flag = being_recruited_by_the_plaguebringers

		# #Powers, Missions and Interactions: Secret Religious	
		# clr_character_flag = sr_too_honest
	    # clr_character_flag = sr_too_wroth
	    # clr_character_flag = sr_too_slothful
	    # clr_character_flag = sr_too_trusting
	    # clr_character_flag = sr_too_indiscreet
	    # clr_character_flag = free_help
	    # clr_character_flag = help_for_cost
		# clr_character_flag = conduct_secret_ceremony_timer
		# remove_character_modifier = attempting_to_blend_in
		# clr_character_flag = blending_in_timer
		# clr_character_flag = attempting_to_convince_stubborn_courtier
	    # clr_character_flag = attempting_to_convince_concerned_friend
	    # clr_character_flag = blend_in_struggled_with_trait
	    # clr_character_flag = blend_in_attended_house_of_worship
	    # clr_character_flag = blend_in_general_progress
		# #quest_secret_religious_societies_induct_ruler
		# #quest_secret_religious_societies_sympathy_ruler
		
		# #Powers, Missions and Interactions: Monastic orders
		# clr_character_flag = monastic_orders_holy_seclusion
		# clr_character_flag = monastic_orders_mission_charity
		# clr_character_flag = monastic_orders_mission_theology
 		# clr_character_flag = monastic_orders_mission_christian_pilgrimage
		# clr_character_flag = monastic_orders_mission_dharmic_pilgrimage
		# clr_character_flag = monastic_orders_mission_temple
		# clr_character_flag = ascetic_arriving
		# clr_character_flag = monastic_artifact_lover
		# clr_character_flag = monastic_artifact_seamless_robe_of_jesus
		# clr_character_flag = monastic_artifact_crown_of_thorns
		# clr_character_flag = monastic_artifact_fragment_of_true_cross
		# clr_character_flag = monastic_artifact_holy_foreskin
		# clr_character_flag = monastic_artifact_image_of_edessa
		# clr_character_flag = monastic_artifact_elaborate_danda
		# clr_character_flag = monastic_artifact_sariraka_actual_body_part
		# clr_character_flag = monastic_artifact_sarira
		# clr_character_flag = suggestion_A_flag
		# clr_character_flag = suggestion_B_flag
		# clr_character_flag = 3264_deceitful_flag
		# clr_character_flag = 3264_publish_flag
		# clr_character_flag = 3264_depressed_flag
		# clr_character_flag = 3264_deceitful_flag
		# clr_character_flag = 4202_visit_monastery_flag
		# clr_character_flag = 4202_hire_someone_flag
		# clr_character_flag = 4202_send_my_own_samples_flag
		# clr_character_flag = 4212_woke_them_up_flag
		# clr_character_flag = 4212_let_them_sleep_flag
		# clr_character_flag = 4212_pranked_them_flag
		# remove_character_modifier = in_meditation
		# remove_character_modifier = doing_penance
		# clr_character_flag = holy_seclusion_timer
		# clr_character_flag = holy_seclusion_struggled_with_vice
		# clr_character_flag = holy_seclusion_lustful
		# clr_character_flag = holy_seclusion_gluttonous
		# clr_character_flag = holy_seclusion_greedy
		# clr_character_flag = holy_seclusion_slothful
		# clr_character_flag = holy_seclusion_struggled_with_loneliness
		# clr_character_flag = holy_seclusion_scripture_reading
		# clr_character_flag = holy_seclusion_scripture_reading
		# clr_character_flag = holy_seclusion_interrupting_child
		# clr_character_flag = success_seculison_desc_A
		# clr_character_flag = success_seculison_desc_B
		# clr_character_flag = success_seculison_desc_C

		#Powers, Missions and Interactions: Hermetics
		clr_character_flag = power_hungry_scrying_flag
		clr_character_flag = relationship_focused_scrying_flag
		clr_character_flag = battle_focused_scrying_flag
		remove_character_modifier = writing_magnum_opus
		remove_character_modifier = acquire_ingredients_decision_cooldown_timer
		clr_character_flag = building_laboratory
		clr_character_flag = decided_on_glass
		clr_character_flag = decided_on_crucibles
		clr_character_flag = decided_on_tools
		clr_character_flag = decided_on_books
		clr_character_flag = bribed_guards
		clr_character_flag = guards_wake_up
		clr_character_flag = distraction_failed
		clr_character_flag = caught_stealing
		clr_character_flag = caught_destroying
		remove_scrying_omen_modifiers_effect = yes
		clr_character_flag = lab_destruction
		clr_character_flag = lab_damage
		clr_character_flag = lab_explosion_death
		
		#Warrior Lodges: everything
		if = {
			limit = {
				has_character_flag = call_to_legend_active
				has_character_modifier = out_traveling
			}
			remove_character_modifier = out_traveling #Should hopefully only remove this when relevant
		}
		clr_character_flag = call_to_legend_active
		clr_character_flag = call_to_legend_active
		clr_character_flag = do_not_disturb
		clr_character_flag = start_bracket
		clr_character_flag = mid_bracket
		clr_character_flag = top_bracket
		clr_character_flag = call_it_a_day
		clr_character_flag = i_will_survive
		clr_character_flag = bloodline_quality_1
		clr_character_flag = bloodline_quality_2
		clr_character_flag = bloodline_quality_3
		clr_character_flag = player_was_involved
		
		#tombola events...
		clr_character_flag = HF_legend_artifact
		clr_character_flag = HF_legend_feast
		clr_character_flag = HF_legend_skull
		clr_character_flag = HF_legend_eagle
		clr_character_flag = HF_legend_upgrade_weapon
		clr_character_flag = HF_legend_artifact
		clr_character_flag = HF_legend_artifact

		#Duel outcomes...
		clr_character_flag = WL_desc_A
		clr_character_flag = WL_desc_B
		clr_character_flag = WL_desc_C
		clr_character_flag = WL_desc_D
		clr_character_flag = WL_desc_E
		clr_character_flag = WL_desc_F
		clr_character_flag = had_WL_desc_A
		clr_character_flag = had_WL_desc_B
		clr_character_flag = had_WL_desc_C
		clr_character_flag = had_WL_desc_D
		clr_character_flag = had_WL_desc_E
		clr_character_flag = had_WL_desc_F
		clr_character_flag = WL_desc_X
		clr_character_flag = WL_desc_Y
		clr_character_flag = WL_desc_Z
	}
}

increase_council_power_effect = {
	if = {
		limit = { has_law = law_voting_power_1 }
		if = {
			limit = { has_law = diplomacy_voting_power_1 }
			if = {
				limit = { has_law = titles_voting_power_1 }
				if = {
					limit = { has_law = justice_voting_power_0 }
					add_law_w_cooldown = justice_voting_power_1
					break = yes
				}
			}
			if = {
				limit = { has_law = titles_voting_power_0 }
				add_law_w_cooldown = titles_voting_power_1
				break = yes
			}
		}
		if = {
			limit = { has_law = diplomacy_voting_power_0 }
			add_law_w_cooldown = diplomacy_voting_power_1
			break = yes
		}
		break = yes
	}
	if = {
		limit = { has_law = law_voting_power_0 }
		add_law_w_cooldown = law_voting_power_1
		break = yes
	}
}

increase_vassal_freedom_effect = {
	if = {
		limit = {
			has_law = vassal_wars_law_1
		}
		add_law_w_cooldown = vassal_wars_law_0
	}
	if = {
		limit = {
			has_law = vassal_wars_law_2
		}
		add_law_w_cooldown = vassal_wars_law_1
	}
}

spawn_good_commander_effect = {
	capital_scope = {
		if = {
			limit = {
				PREV = {
					female_warrior_culture_trigger = yes
					NOT = { has_religion_feature = religion_patriarchal }
					NOT = { trait = nightswatch }
				}	
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = actually_culture
				female = yes
				culture = THIS
				religion = PREV
			}
		}
		else = {
			create_random_soldier = {
				random_traits = yes
				dynasty = actually_culture
				female = no
				culture = THIS
				religion = PREV
			}
		}	
		new_character = {
			move_character = PREVPREV
			remove_trait = weak
			remove_trait = slow
			remove_trait = imbecile
			remove_trait = dull
			
			remove_trait = mystic
			remove_trait = socializer
			remove_trait = gamer
			remove_trait = hedonist
			remove_trait = duelist
			remove_trait = hunter
			remove_trait = strategist
			remove_trait = administrator
			remove_trait = architect
			remove_trait = gardener
			remove_trait = schemer
			remove_trait = impaler
			remove_trait = seducer
			remove_trait = seductress
			remove_trait = theologian
			remove_trait = scholar
			
			random_list = { # Flavor Randomization
				35 = { 
					# Nothing
				}
				15 = {
					change_martial = 2
				}
				10 = {
					add_trait = robust
				}
				10 = {
					add_trait = duelist
				}
				10 = {
					add_trait = hunter
				}
				5 = {
					add_trait = strategist
				}
				5 = {
					change_martial = 4
				}
				5 = {
					if = {
						limit = {
							has_dlc = "Reapers"
						}
						add_trait = one_eyed
					}
				}
				5 = { 
					add_trait = shrewd
				}
				3 = { 
					add_trait = tall
				}
			}
			random_list = {
				15 = { add_trait = poor_warrior }
				60 = { add_trait = trained_warrior }
				25 = { add_trait = skilled_warrior }
			}
			if = {
				limit = { has_knighthood_religion_trigger = yes }
				knight_character_effect = yes
			}
			if = {
				limit = { 
					PREVPREV = { trait = nightswatch }
				}
				add_trait = nightswatch
			}	
			while = {
				limit = { NOT = { martial = 10 } }
				change_martial = 1
			}
			set_character_flag = invited_soldier
			save_event_target_as = invited_character
		}
	}	
}

spawn_great_commander_effect = {
	capital_scope = {
		if = {
			limit = {
				PREV = {
					female_warrior_culture_trigger = yes
					NOT = { has_religion_feature = religion_patriarchal }
					NOT = { trait = nightswatch }
				}	
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = actually_culture
				female = yes
				culture = THIS
				religion = PREV
			}
		}
		else = {
			create_random_soldier = {
				random_traits = yes
				dynasty = actually_culture
				female = no
				culture = THIS
				religion = PREV
			}
		}
		new_character = {
			remove_trait = weak
			remove_trait = slow
			remove_trait = imbecile
			remove_trait = dull
			remove_trait = dwarf
			remove_trait = giant
			remove_trait = hunchback
			remove_trait = clubfooted
			remove_trait = craven
			
			remove_trait = mystic
			remove_trait = socializer
			remove_trait = gamer
			remove_trait = hedonist
			remove_trait = duelist
			remove_trait = hunter
			remove_trait = strategist
			remove_trait = administrator
			remove_trait = architect
			remove_trait = gardener
			remove_trait = schemer
			remove_trait = impaler
			remove_trait = seducer
			remove_trait = seductress
			remove_trait = theologian
			remove_trait = scholar
			
			remove_trait = misguided_warrior
			remove_trait = tough_soldier
			remove_trait = skilled_tactician
			remove_trait = brilliant_strategist

			random_list = {
				5 = { add_trait = misguided_warrior }
				10 = { add_trait = tough_soldier }
				20 = { add_trait = skilled_tactician }
				30 = { add_trait = brilliant_strategist }
			}
		
			random_list = { # Flavor Randomization
				35 = { 
					# Nothing
				}
				15 = {
					change_martial = 2
				}
				10 = {
					add_trait = robust
				}
				10 = {
					add_trait = duelist
				}
				10 = {
					add_trait = hunter
				}
				5 = {
					add_trait = strategist
				}
				5 = {
					change_martial = 4
				}
				5 = {
					if = {
						limit = {
							has_dlc = "Reapers"
						}
						add_trait = one_eyed
					}
				}
				5 = { 
					add_trait = shrewd
				}
				1 = { 
					add_trait = tall
				}
			}
			random_list = {
				50 = {
					#Nothing
				}
				10 = {
					add_trait = narrow_flank_leader
				}
				10 = {
					add_trait = defensive_leader
				}
				10 = {
					add_trait = experimenter
				}
				10 = {
					add_trait = flanker
				}
				10 = {
					add_trait = heavy_infantry_leader
				}
				10 = {
					add_trait = inspiring_leader
				}
				10 = {
					add_trait = organizer
				}
				10 = {
					add_trait = siege_leader
				}
				10 = {
					add_trait = trickster
				}
				10 = {
					add_trait = aggressive_leader
				}
			}
			hidden_tooltip = {
				random_list = {
					50 = { add_trait = trained_warrior }
					40 = { add_trait = skilled_warrior }
					10 = { add_trait = master_warrior }
				}
				if = {
					limit = { has_knighthood_religion_trigger = yes }
					knight_character_effect = yes
				}
				if = {
					limit = { 
						PREVPREV = { trait = nightswatch }
					}
					add_trait = nightswatch
				}	
				while = {
					limit = { NOT = { martial = 12 } }
					change_martial = 1
				}
			}
			set_character_flag = invited_soldier
			save_event_target_as = invited_character
		}
	}	
}

spawn_fantastic_commander_effect = {

	capital_scope = {
		if = {
			limit = {
				PREV = {
					female_warrior_culture_trigger = yes
					NOT = { has_religion_feature = religion_patriarchal }
					NOT = { trait = nightswatch }
				}	
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = culture
				female = yes
				culture = THIS
				religion = PREV
			}
		}
		else = {
			create_random_soldier = {
				random_traits = yes
				dynasty = culture
				female = no
				culture = THIS
				religion = PREV
			}
		}
		new_character = {
			remove_trait = weak
			remove_trait = slow
			remove_trait = imbecile
			remove_trait = dull
			remove_trait = dwarf
			remove_trait = giant
			remove_trait = hunchback
			remove_trait = clubfooted
			remove_trait = craven
			remove_trait = paranoid
			
			remove_trait = mystic
			remove_trait = socializer
			remove_trait = gamer
			remove_trait = hedonist
			remove_trait = duelist
			remove_trait = hunter
			remove_trait = strategist
			remove_trait = administrator
			remove_trait = architect
			remove_trait = gardener
			remove_trait = schemer
			remove_trait = impaler
			remove_trait = seducer
			remove_trait = seductress
			remove_trait = theologian
			remove_trait = scholar
			
			remove_trait = misguided_warrior
			remove_trait = tough_soldier
			remove_trait = skilled_tactician
			
			add_trait = brilliant_strategist
			
			random_list = {
				20 = {
					add_trait = robust
				}
				10 = {
					add_trait = strong
				}
				5 = {
					health = 1
				}
			}
			
			random_list = {
				10 = {
					add_trait = narrow_flank_leader
				}
				10 = {
					add_trait = defensive_leader
				}
				10 = {
					add_trait = experimenter
				}
				10 = {
					add_trait = flanker
				}
				10 = {
					add_trait = heavy_infantry_leader
				}
				10 = {
					add_trait = inspiring_leader
				}
				10 = {
					add_trait = organizer
				}
				10 = {
					add_trait = siege_leader
				}
				10 = {
					add_trait = trickster
				}
				10 = {
					add_trait = aggressive_leader
				}
			}
			
			random_list = { # Flavor Randomization
				20 = {
					add_trait = tall
					add_trait = robust
					add_trait = hunter
					change_martial = 2
					give_nickname = nick_the_giant
				}
				20 = {
					modifier = {
						factor = 0
						NOT = {
							has_dlc = "Reapers"
						}
					}
					add_trait = tall
					add_trait = robust
					add_trait = strategist
					add_trait = one_eyed
					change_martial = 1
					give_nickname = nick_the_cyclops
				}
				20 = {
					add_trait = holy_warrior
					add_scarred_tiered_effect = yes
					change_martial = 3
					give_nickname = nick_the_hammer
				}
				20 = {
					add_trait = brave
					add_trait = poet
					change_martial = 2
					give_nickname = nick_the_fearless
				}
				20 = {
					add_trait = robust
					remove_trait = temperate
					add_trait = wroth
					add_trait = falconer
					change_martial = 1
					give_nickname = nick_the_ill_tempered
				}
				20 = {
					add_trait = unyielding_leader
					remove_trait = wroth
					add_trait = patient
					change_martial = 2
					give_nickname = nick_the_defender
				}
				20 = {
					add_trait = aggressive_leader
					remove_trait = patient
					add_trait = wroth
					change_martial = 3
					give_nickname = nick_the_destroyer
				}
				20 = {
					add_trait = shrewd
					add_trait = brave
					change_martial = 2
					give_nickname = nick_the_brave
				}
				20 = {
					add_trait = robust
					add_trait = strategist
					change_martial = 1
					give_nickname = nick_the_strong
				}
				20 = {
					add_trait = genius
					add_trait = socializer
					add_trait = poet
					change_martial = 4
					give_nickname = nick_the_noble
				}
				20 = {
					add_trait = blinded
					add_trait = strategist
					add_trait = genius
					change_martial = 4
					give_nickname = nick_the_blind
				}
				20 = {
					remove_trait = humble
					add_trait = proud
					add_trait = duelist
					change_martial = 2
					give_nickname = nick_the_proud
				}
				20 = {
					add_trait = hunter
					add_trait = shrewd
					change_martial = 3
					give_nickname = nick_the_hunter
				}
				20 = {
					modifier = {
						factor = 0
						NOT = {
							has_dlc = "Reapers"
						}
					}
					add_trait = disfigured
					add_scarred_high_effect = yes
					add_trait = genius
					change_martial = 2
					change_intrigue = 12
					give_nickname = nick_of_a_thousand_faces
				}
				20 = {
					add_trait = genius
					add_trait = clubfooted
					change_martial = 1
					give_nickname = nick_the_bear
				}
				20 = {
					add_trait = trusting
					add_trait = quick
					change_martial = 4
					give_nickname = nick_the_loyal
				}
				20 = {
					add_trait = ugly
					add_trait = strong
					add_trait = duelist
					change_martial = 1
					give_nickname = nick_the_boar
				}
				20 = {
					add_trait = fair
					add_trait = strategist
					change_martial = 4
					give_nickname = nick_the_lion
				}
				20 = {
					add_trait = brave
					add_trait = duelist
					change_martial = 3
					give_nickname = nick_the_bold
				}
				20 = {
					add_trait = shrewd
					add_trait = hedonist
					change_martial = 4
					give_nickname = nick_the_quarreller
				}
				20 = {
					add_trait = shrewd
					add_trait = cavalry_leader
					change_martial = 2
					give_nickname = nick_the_wolf
				}
			}
			random_list = {
				25 = { add_trait = trained_warrior }
				50 = { add_trait = skilled_warrior }
				25 = { add_trait = master_warrior }
			}
			if = {
				limit = { has_knighthood_religion_trigger = yes }
				knight_character_effect = yes
			}
			if = {
				limit = { 
					PREVPREV = { trait = nightswatch }
				}
				add_trait = nightswatch
			}	
			while = {
				limit = { NOT = { martial = 14 } }
				change_martial = 1
			}
			set_character_flag = invited_soldier
			save_event_target_as = invited_character
		}
	}	
}
spawn_fantastic_diplomat_effect = {
	capital_scope = {
		if = {
			limit = {
				PREV = {
					female_warrior_culture_trigger = yes
					NOT = { has_religion_feature = religion_patriarchal }
					NOT = { trait = nightswatch }
				}	
			}
			create_random_diplomat = {
				random_traits = yes
				dynasty = culture
				female = no
				culture = THIS
				religion = PREV
			}
		}
		else = {
			create_random_diplomat = {
				random_traits = yes
				dynasty = culture
				female = yes
				culture = THIS
				religion = PREV
			}
		}
		new_character = {
			remove_trait = weak
			remove_trait = slow
			remove_trait = imbecile
			remove_trait = dull
			remove_trait = dwarf
			remove_trait = giant
			remove_trait = hunchback
			remove_trait = clubfooted
			remove_trait = craven
			remove_trait = paranoid
			
			remove_trait = mystic
			remove_trait = socializer
			remove_trait = gamer
			remove_trait = hedonist
			remove_trait = duelist
			remove_trait = hunter
			remove_trait = strategist
			remove_trait = administrator
			remove_trait = architect
			remove_trait = gardener
			remove_trait = schemer
			remove_trait = impaler
			remove_trait = seducer
			remove_trait = seductress
			remove_trait = theologian
			remove_trait = scholar
			
			remove_trait = naive_appeaser
			remove_trait = underhanded_rogue
			remove_trait = charismatic_negotiator
			
			add_trait = grey_eminence

			random_list = {
				27 = {
					add_trait = shrewd
				}
				3 = {
					add_trait = quick
				}
				70 = {
					health = 1
				}
			}
			
			hidden_tooltip = {
				random_list = {
					10 = { }
					40 = { add_trait = poor_warrior }
					40 = { add_trait = trained_warrior }
					10 = { add_trait = skilled_warrior }
				}
				if = {
					limit = { has_knighthood_religion_trigger = yes }
					random = {
						chance = 50
						knight_character_effect = yes
					}	
				}
				if = {
					limit = { 
						PREVPREV = { trait = nightswatch }
					}
					add_trait = nightswatch
				}	
				while = {
					limit = { NOT = { diplomacy = 14 } }
					change_diplomacy = 1
				}
			}
			set_character_flag = invited_soldier
			save_event_target_as = invited_character
		}
	}	
}

spawn_fantastic_scholar_effect = {

	capital_scope = {
		if = {
			limit = {
				PREV = {
					female_warrior_culture_trigger = yes
					NOT = { has_religion_feature = religion_patriarchal }
					NOT = { trait = nightswatch }
				}	
			}
			create_random_priest = {
				random_traits = yes
				dynasty = culture
				female = no
				culture = THIS
				religion = PREV
			}
		}
		else = {
			create_random_priest = {
				random_traits = yes
				dynasty = culture
				female = yes
				culture = THIS
				religion = PREV
			}
		}
		new_character = {
			remove_trait = weak
			remove_trait = slow
			remove_trait = imbecile
			remove_trait = dull
			remove_trait = dwarf
			remove_trait = giant
			remove_trait = hunchback
			remove_trait = clubfooted
			remove_trait = craven
			remove_trait = paranoid
			
			remove_trait = mystic
			remove_trait = socializer
			remove_trait = gamer
			remove_trait = hedonist
			remove_trait = duelist
			remove_trait = hunter
			remove_trait = strategist
			remove_trait = administrator
			remove_trait = architect
			remove_trait = gardener
			remove_trait = schemer
			remove_trait = impaler
			remove_trait = seducer
			remove_trait = seductress
			remove_trait = theologian
			remove_trait = scholar
			
			remove_trait = detached_priest
			remove_trait = martial_cleric
			remove_trait = scholarly_theologian
	
			add_trait = mastermind_theologian

			random_list = {
				27 = {
					add_trait = shrewd
				}
				3 = {
					add_trait = quick
				}
				70 = {
					change_diplomacy = 1
				}
			}
			
			hidden_tooltip = {
				random_list = {
					10 = { }
					40 = { add_trait = poor_warrior }
					40 = { add_trait = trained_warrior }
					10 = { add_trait = skilled_warrior }
				}
				if = {
					limit = { has_knighthood_religion_trigger = yes }
					random = {
						chance = 50
						knight_character_effect = yes
					}	
				}
				if = {
					limit = { 
						PREVPREV = { trait = nightswatch }
					}
					add_trait = nightswatch
				}	
				while = {
					limit = { NOT = { learning = 14 } }
					change_learning = 1
				}
			}
			set_character_flag = invited_soldier
			save_event_target_as = invited_character
		}
	}	
}

spawn_elder_effect = {
	capital_scope = { save_event_target_as = elder_location }
	if = { 
		limit = { has_religion_feature = religion_matriarchal }
		create_random_priest = {
			random_traits = yes
			dynasty = actually_culture
			female = yes
			age = 50
			culture = event_target:elder_location
			religion = THIS
		}
	}
	if = { 
		limit = { NOR = { has_religion_feature = religion_matriarchal has_religion_feature = religion_patriarchal } }
		random_list = {
			50 = {
				create_random_priest = {
					random_traits = yes
					dynasty = actually_culture
					female = no
					age = 50
					culture = event_target:elder_location
					religion = THIS
				}
			}
			50 = {
				create_random_priest = {
					random_traits = yes
					dynasty = actually_culture
					female = yes
					age = 50
					culture = event_target:elder_location
					religion = THIS
				}
			}
		}
	}
	if = { 
		limit = { has_religion_feature = religion_patriarchal }
		create_random_priest = {
			random_traits = yes
			dynasty = actually_culture
			female = no
			age = 50
			culture = event_target:elder_location
			religion = THIS
		}
	}
	new_character = {

		remove_trait = weak
		remove_trait = slow
		remove_trait = imbecile
		remove_trait = dull
		remove_trait = dwarf
		remove_trait = tall
		remove_trait = hunchback
		remove_trait = clubfooted
		remove_trait = craven
		remove_trait = paranoid
		
		remove_lifestyle_trait_effect = yes
		
		remove_trait = detached_priest
		remove_trait = martial_cleric
		remove_trait = scholarly_theologian
		remove_trait = mastermind_theologian
		
		add_character_modifier = { name = elder_long_life_modifier years = 100 }
		give_nickname = nick_the_elder 

		random_list = {
			50 = {
				add_trait = martial_cleric
			}
			25 = {
				add_trait = scholarly_theologian
			}
			10 = {
				add_trait = mastermind_theologian
			}
		}
		random_list = {
			5 = {
				add_trait = stubborn
			}
			1 = {
				add_trait = mystic
			}
			1 = {
				add_trait = hunchback
			}
			1 = {
				add_trait = ugly
			}
			10 = {
				add_scarred_tiered_effect = yes
			}
			70 = {
				change_stewardship = 1
			}
		}
		
		hidden_tooltip = {
		}
		set_character_flag = invited_elder
		save_event_target_as = invited_character
	}
}

select_random_hermetic_ingredient_herb_effect = { # If run once, this will set a flag on ONE herbal ingredient. If run twice, it will set a second flag on another herbal ingredient...
	if = {
		limit = {
			any_artifact = {
				has_artifact_flag = selected_ingredient_1
			}
			NOT = {
				any_artifact = {
					has_artifact_flag = selected_ingredient_2
				}
			}
		}
		random_artifact = {
			limit = {
				is_ingredient_herb_trigger = yes
				NOT = { has_artifact_flag = selected_ingredient_1 }
				NOT = { has_artifact_flag = selected_ingredient_2 }
			}
			set_artifact_flag = selected_ingredient_2
		}
	}
	if = {
		limit = {
			NOT = {
				any_artifact = {
					has_artifact_flag = selected_ingredient_1
				}
			}	
		}
		random_artifact = {
			limit = {
				is_ingredient_herb_trigger = yes
				NOT = { has_artifact_flag = selected_ingredient_1 }
				NOT = { has_artifact_flag = selected_ingredient_2 }
			}
			set_artifact_flag = selected_ingredient_1
		}
	}
}

select_random_hermetic_ingredient_animal_part_effect = { 
	if = {
		limit = {
			any_artifact = {
				has_artifact_flag = selected_ingredient_1
			}
			NOT = {
				any_artifact = {
					has_artifact_flag = selected_ingredient_2
				}
			}
		}
		random_artifact = {
			limit = {
				is_ingredient_animal_part_trigger = yes
				NOT = { has_artifact_flag = selected_ingredient_1 }
				NOT = { has_artifact_flag = selected_ingredient_2 }
			}
			set_artifact_flag = selected_ingredient_2
		}
	}
	if = {
		limit = {
			NOT = {
				any_artifact = {
					has_artifact_flag = selected_ingredient_1
				}
			}	
		}
		random_artifact = {
			limit = {
				is_ingredient_animal_part_trigger = yes
				NOT = { has_artifact_flag = selected_ingredient_1 }
				NOT = { has_artifact_flag = selected_ingredient_2 }
			}
			set_artifact_flag = selected_ingredient_1
		}
	}
}

select_random_hermetic_ingredient_powder_effect = {
	if = {
		limit = {
			any_artifact = {
				has_artifact_flag = selected_ingredient_1
			}
			NOT = {
				any_artifact = {
					has_artifact_flag = selected_ingredient_2
				}
			}
		}
		random_artifact = {
			limit = {
				is_ingredient_powder_trigger = yes
				NOT = { has_artifact_flag = selected_ingredient_1 }
				NOT = { has_artifact_flag = selected_ingredient_2 }
			}
			set_artifact_flag = selected_ingredient_2
		}
	}
	if = {
		limit = {
			NOT = {
				any_artifact = {
					has_artifact_flag = selected_ingredient_1
				}
			}	
		}
		random_artifact = {
			limit = {
				is_ingredient_powder_trigger = yes
				NOT = { has_artifact_flag = selected_ingredient_1 }
				NOT = { has_artifact_flag = selected_ingredient_2 }
			}
			set_artifact_flag = selected_ingredient_1
		}
	}
}

select_random_hermetic_ingredient_liquid_effect = {
	if = {
		limit = {
			any_artifact = {
				has_artifact_flag = selected_ingredient_1
			}
			NOT = {
				any_artifact = {
					has_artifact_flag = selected_ingredient_2
				}
			}
		}
		random_artifact = {
			limit = {
				is_ingredient_liquid_trigger = yes
				NOT = { has_artifact_flag = selected_ingredient_1 }
				NOT = { has_artifact_flag = selected_ingredient_2 }
			}
			set_artifact_flag = selected_ingredient_2
		}
	}
	if = {
		limit = {
			NOT = {
				any_artifact = {
					has_artifact_flag = selected_ingredient_1
				}
			}	
		}
		random_artifact = {
			limit = {
				is_ingredient_liquid_trigger = yes
				NOT = { has_artifact_flag = selected_ingredient_1 }
				NOT = { has_artifact_flag = selected_ingredient_2 }
			}
			set_artifact_flag = selected_ingredient_1
		}
	}
}

select_random_hermetic_ingredient_effect = { #when it doesn't matter if it's a herb/animal part/metal/liquid
	if = {
		limit = {
			has_selected_ingredient_1_trigger = yes
			has_selected_ingredient_2_trigger = no
		}
		random_artifact = {
			limit = {
				NOT = { has_artifact_flag = selected_ingredient_1 }
				NOT = { has_artifact_flag = selected_ingredient_2 }
				has_artifact_flag = ingredient
			}
			set_artifact_flag = selected_ingredient_2
		}
	}
	if = {
		limit = {
			has_selected_ingredient_1_trigger = no
			any_artifact = {
				has_artifact_flag = ingredient
			}
		}
		random_artifact = {
			limit = {
				NOT = { has_artifact_flag = selected_ingredient_1 }
				NOT = { has_artifact_flag = selected_ingredient_2 }
				has_artifact_flag = ingredient
			}
			set_artifact_flag = selected_ingredient_1
		}
	}
}

remove_selection_of_ingredients_effect = { #for clearing selection of ingredients
	hidden_effect = {
		any_artifact = {
			clr_artifact_flag = selected_ingredient_1
			clr_artifact_flag = selected_ingredient_2
		}
	}
}

destroy_selected_ingredient_1_effect = { #for removing the ingredient in question
	custom_tooltip = { text = destroy_selected_ingredient_1_tt }
	hidden_effect = {
		random_artifact = {
			limit = { has_artifact_flag = selected_ingredient_1 }
			destroy_artifact = yes
		}
	}
}

destroy_selected_ingredient_2_effect = { #for removing the ingredient in question
	custom_tooltip = { text = destroy_selected_ingredient_2_tt }
	hidden_effect = {
		random_artifact = {
			limit = { has_artifact_flag = selected_ingredient_2 }
			destroy_artifact = yes
		}
	}
}

destroy_selected_ingredient_1_and_2_effect = { #for removing both selected ingredients
	custom_tooltip = { text = destroy_selected_ingredient_1_and_2_tt }
	hidden_effect = {
		random_artifact = {
			limit = { has_artifact_flag = selected_ingredient_1 }
			destroy_artifact = yes
		}
		random_artifact = {
			limit = { has_artifact_flag = selected_ingredient_2 }
			destroy_artifact = yes
		}
	}
}

destroy_selected_ingredient_1_plus_random_other_ingredient_effect = { #for removing the ingredient in question PLUS a random other one (unnamed in tooltip)
	custom_tooltip = { text = destroy_selected_ingredient_1_plus_random_other_ingredient_tt }
	hidden_effect = {
		random_artifact = {
			limit = { has_artifact_flag = selected_ingredient_1 }
			destroy_artifact = yes
		}
		random_artifact = {
			limit = {
				has_artifact_flag = ingredient
			}
			destroy_artifact = yes
		}
	}
}

destroy_random_herb_ingredient_effect = {
	random_artifact = {
		limit = {
			has_artifact_flag = ingredient
			is_ingredient_herb_trigger = yes
		}
		destroy_artifact = yes
	}
}

destroy_random_animal_part_ingredient_effect = {
	random_artifact = {
		limit = {
			has_artifact_flag = ingredient
			is_ingredient_animal_part_trigger = yes
		}
		destroy_artifact = yes
	}
}

destroy_random_powder_ingredient_effect = {
	random_artifact = {
		limit = {
			has_artifact_flag = ingredient
			is_ingredient_powder_trigger = yes
		}
		destroy_artifact = yes
	}
}

destroy_random_liquid_ingredient_effect = {
	random_artifact = {
		limit = {
			has_artifact_flag = ingredient
			is_ingredient_liquid_trigger = yes
		}
		destroy_artifact = yes
	}
}

destroy_random_herb_or_animal_part_ingredients_effect = {
	hidden_effect = {
		random_list = {
			5 = {
				trigger = { has_a_herb_ingredient_trigger = yes }
				destroy_random_herb_ingredient_effect = yes
			}
			5 = {
				trigger = { has_an_animal_part_ingredient_trigger = yes }
				destroy_random_animal_part_ingredient_effect = yes
			}
			20 = {
				trigger = {
					any_artifact = {
						count = 2
						is_ingredient_herb_trigger = yes
						has_artifact_flag = ingredient
					}
				}
				destroy_random_herb_ingredient_effect = yes
				destroy_random_herb_ingredient_effect = yes
			}
			20 = {
				trigger = {
					any_artifact = {
						count = 2
						is_ingredient_animal_part_trigger = yes
						has_artifact_flag = ingredient
					}
				}
				destroy_random_animal_part_ingredient_effect = yes
				destroy_random_animal_part_ingredient_effect = yes
			}
			20 = {
				trigger = {
					has_a_herb_ingredient_trigger = yes
					has_an_animal_part_ingredient_trigger = yes
				}
				destroy_random_herb_ingredient_effect = yes
				destroy_random_animal_part_ingredient_effect = yes
			}
			20 = {
				trigger = {
					any_artifact = {
						count = 3
						is_ingredient_herb_trigger = yes
						has_artifact_flag = ingredient
					}
				}
				destroy_random_herb_ingredient_effect = yes
				destroy_random_herb_ingredient_effect = yes
				destroy_random_herb_ingredient_effect = yes
			}
			20 = {
				trigger = {
					any_artifact = {
						count = 3
						is_ingredient_animal_part_trigger = yes
						has_artifact_flag = ingredient
					}
				}
				destroy_random_animal_part_ingredient_effect = yes
				destroy_random_animal_part_ingredient_effect = yes
				destroy_random_animal_part_ingredient_effect = yes
			}
			50 = {
				trigger = {
					any_artifact = {
						count = 2
						is_ingredient_herb_trigger = yes
						has_artifact_flag = ingredient
					}
					has_an_animal_part_ingredient_trigger = yes
				}
				destroy_random_herb_ingredient_effect = yes
				destroy_random_herb_ingredient_effect = yes
				destroy_random_animal_part_ingredient_effect = yes
			}
			50 = {
				trigger = {								
					any_artifact = {
						count = 2
						is_ingredient_animal_part_trigger = yes
						has_artifact_flag = ingredient
					}
					has_a_herb_ingredient_trigger = yes
				}
				destroy_random_herb_ingredient_effect = yes
				destroy_random_animal_part_ingredient_effect = yes
				destroy_random_animal_part_ingredient_effect = yes
			}
		}
	}
}

destroy_random_ingredients_effect = {
	custom_tooltip = { text = random_ingredients_are_destroyed_tt }
	hidden_effect = {
		random_list = {
			5 = {
				random_artifact = {
					limit = { has_artifact_flag = ingredient }
					destroy_artifact = yes
				}
			}
			50 = {
				trigger = {
					any_artifact = {
						count = 2
						has_artifact_flag = ingredient
					}
				}
				random_artifact = {
					limit = { has_artifact_flag = ingredient }
					destroy_artifact = yes
				}
				random_artifact = {
					limit = { has_artifact_flag = ingredient }
					destroy_artifact = yes
				}
			}
			100 = {
				trigger = {
					any_artifact = {
						count = 3
						has_artifact_flag = ingredient
					}
				}
				random_artifact = {
					limit = { has_artifact_flag = ingredient }
					destroy_artifact = yes
				}
				random_artifact = {
					limit = { has_artifact_flag = ingredient }
					destroy_artifact = yes
				}
				random_artifact = {
					limit = { has_artifact_flag = ingredient }
					destroy_artifact = yes
				}
			}
			150 = {
				trigger = {
					any_artifact = {
						count = 4
						has_artifact_flag = ingredient
					}
				}
				random_artifact = {
					limit = { has_artifact_flag = ingredient }
					destroy_artifact = yes
				}
				random_artifact = {
					limit = { has_artifact_flag = ingredient }
					destroy_artifact = yes
				}
				random_artifact = {
					limit = { has_artifact_flag = ingredient }
					destroy_artifact = yes
				}
				random_artifact = {
					limit = { has_artifact_flag = ingredient }
					destroy_artifact = yes
				}
			}
		}
	}
}

destroy_all_ingredients_effect = {
	custom_tooltip = { text = destroy_all_ingredients_tt }
	hidden_effect = {
        if = {
        	limit = {
        		any_artifact = {
		    		has_artifact_flag = ingredient
	    		}
        	}
        	any_artifact = {
        		limit = { has_artifact_flag = ingredient }
        		destroy_artifact = yes
        	}
        }
	}
}


calculate_health_level_of_ingredient_1_effect = {
	hidden_effect = {
        set_variable = { # Reset potion quality
    		which = current_potion_quality
    		value = 0
    	}
    	if = {
    		limit = {
    			any_artifact = { has_artifact_flag = selected_ingredient_1 }
    			ingredient_is_perceived_healthy_trigger = yes
    		}
 			ROOT = {
                change_variable = {
                    which = current_potion_quality
                    value = 1
                }
            }
    	}
    	if = {
    		limit = {
    			any_artifact = { has_artifact_flag = selected_ingredient_1 }
    			ingredient_is_unhealthy_trigger = yes
    		}
 			ROOT = {
                change_variable = {
                    which = current_potion_quality
                    value = -1
                }
            }
    	}
    }
}

calculate_health_level_of_ingredient_2_effect = {
	hidden_effect = {
        set_variable = { # Reset potion quality
    		which = current_potion_quality
    		value = 0
    	}
    	if = {
    		limit = {
    			any_artifact = { has_artifact_flag = selected_ingredient_2 }
    			ingredient_is_perceived_healthy_trigger = yes
    		}
 			ROOT = {
                change_variable = {
                    which = current_potion_quality
                    value = 1
                }
            }
    	}
    	if = {
    		limit = {
    			any_artifact = { has_artifact_flag = selected_ingredient_2 }
    			ingredient_is_unhealthy_trigger = yes
    		}
 			ROOT = {
                change_variable = {
                    which = current_potion_quality
                    value = -1
                }
            }
    	}
    }
}

calculate_health_level_of_ingredient_1_and_2_effect = {
	hidden_effect = {
        set_variable = { # Reset potion quality
    		which = current_potion_quality
    		value = 0
    	}
		while = {
			limit = {
				any_artifact = {
		            OR = {
						has_artifact_flag = selected_ingredient_1
						has_artifact_flag = selected_ingredient_2
					}
		            NOT = { has_artifact_flag = ingredient_counted }
		        }
		    }
		    random_artifact = {
		        limit = {
		            OR = {
						has_artifact_flag = selected_ingredient_1
						has_artifact_flag = selected_ingredient_2
					}
		            NOT = { has_artifact_flag = ingredient_counted }
		        }
		        set_artifact_flag = ingredient_counted
		        if = {
		            limit = {
		                ingredient_is_perceived_healthy_trigger = yes
		            }
		            ROOT = {
		                change_variable = {
		                    which = current_potion_quality
		                    value = 1
		                }
		            }
		        }
		        if = {
		            limit = {
		                ingredient_is_unhealthy_trigger = yes
		            }
		            ROOT = {
		                change_variable = {
		                    which = current_potion_quality
		                    value = -1
		                }
		            }
		        }
		    }
		}
		any_artifact = {
			clr_artifact_flag = ingredient_counted
		}
    }
}

calculate_health_level_of_all_ingredients_effect = {
	hidden_effect = {
		while = {
			limit = {
				any_artifact = {
		            has_artifact_flag = ingredient
		            NOT = { has_artifact_flag = ingredient_counted }
		        }
		    }
		    random_artifact = {
		        limit = {
		            has_artifact_flag = ingredient
		            NOT = { has_artifact_flag = ingredient_counted }
		        }
		        set_artifact_flag = ingredient_counted
		        if = {
		            limit = {
		                ingredient_is_perceived_healthy_trigger = yes
		            }
		            ROOT = {
		                change_variable = {
		                    which = current_potion_quality
		                    value = 1
		                }
		            }
		        }
		        if = {
		            limit = {
		                ingredient_is_unhealthy_trigger = yes
		            }
		            ROOT = {
		                change_variable = {
		                    which = current_potion_quality
		                    value = -1
		                }
		            }
		        }
		    }
		}
		any_artifact = {
			clr_artifact_flag = ingredient_counted
		}
    }
}

#Raiding adventurer war declaration effect
raiding_adventurer_war_declaration_effect = {
	custom_tooltip = { text = raiding_adventurer_war_declaration_tooltip }

	event_target:selling_province = {
		event_target:raiding_adventurer = {
			unsafe_war = {
				target = PREVPREV
				casus_belli = duchy_adventure
				thirdparty_title = PREV
				tier = DUKE
			}
			any_army = {
				set_can_toggle_looting = yes
				set_looting = no
			}
		}
	}
	
	clr_character_flag = adventurer_unsafe_duchy_war
	clr_character_flag = adventurer_safe_duchy_war
	clr_character_flag = negotiating_with_adventurer

	hidden_effect = {
		event_target:raiding_adventurer = {
			clr_character_flag = raiding_adventurer
		}
	}
}


#Grace effects
add_grace_trivial_effect = {
	add_offmap_currency = {
		offmap = offmap_china
		value = 100
	}
}

add_grace_minor_effect = {
	add_offmap_currency = {
		offmap = offmap_china
		value = 200
	}
}

add_grace_medium_effect = {
	add_offmap_currency = {
		offmap = offmap_china
		value = 300
	}	
}

add_grace_major_effect = {
	add_offmap_currency = {
		offmap = offmap_china
		value = 500
	}
}

add_grace_massive_effect = {
	add_offmap_currency = {
		offmap = offmap_china
		value = 1000
	}
}

detract_grace_trivial_effect = {
	add_offmap_currency = {
		offmap = offmap_china
		value = -100
	}
}

detract_grace_minor_effect = {
	add_offmap_currency = {
		offmap = offmap_china
		value = -200
	}
}

detract_grace_medium_effect = {
	add_offmap_currency = {
		offmap = offmap_china
		value = -300
	}
}

detract_grace_major_effect = {
	add_offmap_currency = {
		offmap = offmap_china
		value = -500
	}
}

detract_grace_massive_effect = {
	add_offmap_currency = {
		offmap = offmap_china
		value = -1000
	}
}

set_china_boon_cd_effect = {
	add_character_modifier = {
		hidden = yes
		name = jd_china_boon_cd
		days = 365 #If this is changed, edit  china_offmap_boon_decisions_enabled_trigger_cd_tt
	}
}

set_china_tribute_cd_effect = {
	add_character_modifier = {
		hidden = yes
		name = jd_china_tribute_cd
		days = 365
	}
}

leave_court_for_china_effect = { # NOTE: this does not set a "killer", meaning if you want them to be ORDERED to go to China, a killer needs to be set (eg: "killer = ROOT")
	custom_tooltip = {
		text = will_leave_for_china_tt
	}
	set_character_flag = ignore_refund
	hidden_effect = { death = { death_reason = death_went_to_china } }
}

# THIS is getting the trait added, the kinslayer_target target is the person dying
# Save the event target before running this effect any time you publicly kill someone, the effect automatically checks they are a relative so you don't need to
# The event target is cleared after the trait is added so re-save the target and re-run the effect to check for another character in the same event
# The traits will overwrite each other kinslayer > familial_kinslayer > dynastic_kinslayer
add_kinslayer_trait_effect = {
	if = { #Holy Fury Tribal only: any relative
		limit = { 
			NOR = { 
				trait = kinslayer
				trait = familial_kinslayer
				trait = dynastic_kinslayer
				trait = tribal_kinslayer
			}
			is_lowborn = no
			NOT = { has_cutthroat_religion_trigger = yes }
			OR = {
				is_cousin_of = event_target:kinslayer_target
				is_aunt_uncle_of = event_target:kinslayer_target
				is_nibling_of = event_target:kinslayer_target
				dynasty = event_target:kinslayer_target
				is_ancestor_of = event_target:kinslayer_target
				is_descendant_of = event_target:kinslayer_target
				sibling = event_target:kinslayer_target
			}

			has_dlc = "Holy Fury"
			OR = {
				is_tribal = yes
				is_nomadic = yes
				government = wildling_feudal_government
			}	
		}
		add_trait = tribal_kinslayer
		hidden_effect = {
			character_event = {
				id = 38287 #Notify Kinslayer
			}
		}
	}
	else_if = { #Parents, children, direct ancestors or descendants 
		limit = {
			NOT = { trait = kinslayer }
			NOT = { has_cutthroat_religion_trigger = yes }
			OR = {
				is_ancestor_of = event_target:kinslayer_target
				is_descendant_of = event_target:kinslayer_target
				sibling = event_target:kinslayer_target
			}
		}
		add_trait = kinslayer
		hidden_effect = {
			character_event = {
				id = 38287 #Notify Kinslayer
			}
			if = {
				limit = { has_nickname = no }
				random = {
					chance = 15
					give_nickname = nick_the_kinslayer
				}
			}
		}
	}
	else_if = { #Cousins, aunts/uncles (blood ones only), nieces/nephews
		limit = {
			NOR = { 
				trait = kinslayer
				trait = familial_kinslayer
			}
			NOT = { has_cutthroat_religion_trigger = yes }
			OR = {
				is_cousin_of = event_target:kinslayer_target
				is_aunt_uncle_of = event_target:kinslayer_target
				is_nibling_of = event_target:kinslayer_target
			}
		}
		add_trait = familial_kinslayer
		hidden_effect = {
			character_event = {
				id = 38287 #Notify Kinslayer
			}
			if = {
				limit = { has_nickname = no }
				random = {
					chance = 10
					give_nickname = nick_the_kinslayer
				}
			}
		}
	}
	else_if = { #Dynasty members
		limit = { 
			NOR = { 
				trait = kinslayer
				trait = familial_kinslayer
				trait = dynastic_kinslayer
			}
			NOT = { has_cutthroat_religion_trigger = yes }
			is_lowborn = no
			dynasty = event_target:kinslayer_target
		}
		add_trait = dynastic_kinslayer
		hidden_effect = {
			character_event = {
				id = 38287 #Notify Kinslayer
			}
			if = {
				limit = { has_nickname = no }
				random = {
					chance = 5
					give_nickname = nick_the_kinslayer
				}
			}
		}
	}
	
	clear_event_target = kinslayer_target
}
remove_kinslayer_trait_effect = {
	if = {
		limit = { trait = kinslayer }
		remove_trait = kinslayer
	}
	if = {
		limit = { trait = familial_kinslayer }
		remove_trait = familial_kinslayer
	}
	if = {
		limit = { trait = dynastic_kinslayer }
		remove_trait = dynastic_kinslayer
	}
	if = {
		limit = { trait = suspected_kinslayer }
		remove_trait = suspected_kinslayer
	}
}

set_higher_quality_of_book_flags_effect = {
	if = {
		limit = {
			NOT = { has_character_flag = decent_book_potential }
			has_character_flag = good_book_potential
			has_character_flag = great_book_potential
		}
		clr_character_flag = good_book_potential
	}
	if = {
		limit = {
			NOT = { has_character_flag = decent_book_potential }
			has_character_flag = good_book_potential
			NOT = { has_character_flag = great_book_potential }
		}
		set_character_flag = great_book_potential
	}			
	if = {
		limit = {
			has_character_flag = decent_book_potential
			has_character_flag = good_book_potential
			has_character_flag = great_book_potential
		}
		clr_character_flag = decent_book_potential
	}
	if = {
		limit = {
			has_character_flag = decent_book_potential
			has_character_flag = good_book_potential
			NOT = { has_character_flag = great_book_potential }
		}
		set_character_flag = great_book_potential
	}
	if = {
		limit = {
			has_character_flag = decent_book_potential
			NOT = { has_character_flag = good_book_potential }
			NOT = { has_character_flag = great_book_potential }
		}
		set_character_flag = good_book_potential
	}
	#Fallback in case flags have cleared somehow...
	if = {
		limit = {
			NOR = {
				has_character_flag = decent_book_potential
        		has_character_flag = good_book_potential
        		has_character_flag = great_book_potential
			}
		}
		set_character_flag = decent_book_potential
	}
}

set_lower_quality_of_book_flags_effect = {
	if = {
		limit = {
			has_character_flag = decent_book_potential
			has_character_flag = good_book_potential
			NOT = { has_character_flag = great_book_potential }
		}
		clr_character_flag = good_book_potential
	}
	if = {
		limit = {
			NOT = { has_character_flag = decent_book_potential }
			has_character_flag = good_book_potential
			NOT = { has_character_flag = great_book_potential }
		}
		set_character_flag = decent_book_potential
	}
	if = {
		limit = {
			has_character_flag = decent_book_potential
			has_character_flag = good_book_potential
			has_character_flag = great_book_potential
		}
		clr_character_flag = great_book_potential
	}
	if = {
		limit = {
			NOT = { has_character_flag = decent_book_potential }
			has_character_flag = good_book_potential
			has_character_flag = great_book_potential
		}
		set_character_flag = decent_book_potential
	}
	if = {
		limit = {
			NOT = { has_character_flag = decent_book_potential }
			NOT = { has_character_flag = good_book_potential }
			has_character_flag = great_book_potential
		}
		set_character_flag = good_book_potential
	}
	#Fallback in case flags have cleared somehow...
	if = {
		limit = {
			NOR = {
				has_character_flag = decent_book_potential
        		has_character_flag = good_book_potential
        		has_character_flag = great_book_potential
			}
		}
		set_character_flag = decent_book_potential
	}
}

send_final_book_outcome_event_effect = {
	#character_event = { id = JD.10070 days = 5 random = 10 } #Testing values...
	character_event = { id = JD.10070 days = 230 random = 1825 }
}
random_coronation_events_effect = {
	random_list = {
			#King befriends foreign ruler
			#King befriends vassal
			#King's new acquaintances improve his diplomacy/stewardship
			#King's new acquaintances improve his intrigue/learning
			#King's diplomacy helps him improve opinion of all guests
			#King's new resolve makes him lose slothful/content.
			#Proud King's trepidation makes him gain ambitious.
			#Child King's flattered and can become haughty or conscientious.
			#The coronation_priest approves of the ceremony.
			#Temperate/Celibate coronation_priest disapproves of the extravagant ceremony.
			#HRE/Francia Emperor gets a talk from the priest about being the heir of Charlemagne (chance for prestige, learning, diligent)
			#The Pope talks to the King about his duties as protector of Christendom (chance to gain zealous, cynical, learning).
			#Child king is taught by foreign ruler about stewardship.
			#Two foreign Kings (guests) become (or are) rivals, coronation_ruler with high diplomacy can help them lose rivalry and become his friends.
			#Cynical vassal (or wicked priest) annoys the coronation_priest. High diplomacy ruler may help and gain gregarious.
			#A knight comes to pledge his service to the new King/Emperor, if ruler is female/child, chance to become friend/lover or increase martial.
			#A wise priest joins the court.
			#King becomes rival of one of his vassals.

			#King is embarassed of secluded coronation, chance to gain stressed or paranoid.
			#King's vassals are offended by secluded coronation (chance to avoid with high diplomacy).
			#Coronation_priest is disappointed by secluded ceremony.
			#King is disraught by secluded ceremony (chance to lose ambitious, gain content/slothful).
			#King reflects upon secluded coronation (chance to lose proud, gain humble).
			#King's Councillor becomes his rival due to secluded coronation.

		1 = { #No events
			modifier = { 
				factor = 0.1 
				has_character_flag = flag_extravagant_coronation
			}
			event_target:coronation_ruler = { character_event = { id = HF.20366 days = 15 } } #Directly fire coronation
		}
		4 = {
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_foreign_friendship 
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 0 
				num_of_friends = 3
			}
			modifier = { 
				factor = 2 
				NOT = { num_of_friends = 1 }
			}
			modifier = { 
				factor = 1.5
				tier = EMPEROR
			}
			modifier = { 
				factor = 1.5
				trait = gregarious
			}
			modifier = { 
				factor = 1.5 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 0
				NOT = {
					any_independent_ruler = { 
						has_opinion_modifier = { 
							who = ROOT 
							modifier = opinion_coronation_guest 
						}
						NOT = { is_rival = ROOT } 
						NOT = { is_friend = ROOT } 
						NOT = { is_lover = ROOT } 
						NOT = { is_married = ROOT }
						NOT = { num_of_friends = 3 }
						opinion = { who = from value = -20 }
					}
				}
			}
			character_event = { id = HF.20306 } # Frendship with foreign ruler guest.
		}
		4 = { 

			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_vassal_friendship  
			}
			modifier = { 
				factor = 0 
				num_of_friends = 3
			}
			modifier = { 
				factor = 2 
				NOT = { num_of_friends = 1 }
			}
			modifier = { 
				factor = 1.5
				tier = EMPEROR
			}
			modifier = { 
				factor = 1.5
				trait = gregarious
			}
			modifier = { 
				factor = 0.1
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 1.5 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 0
				NOT = {
					any_realm_lord = {
						has_opinion_modifier = { 
							who = ROOT 
							modifier = opinion_coronation_guest 
						}
						NOT = { is_rival = ROOT } 
						NOT = { is_friend = ROOT } 
						NOT = { is_lover = ROOT } 
						NOT = { is_married = ROOT }
						NOT = { num_of_friends = 3 }
						opinion = { who = from value = -20 }
					}
				}
			}

			character_event = { id = HF.20310 } # Frendship with vassal guest.
		}
		4 = { 
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_diplomacy_boost  
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 1.5 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 1.5
				trait = gregarious
			}

			character_event = { id = HF.20311 } # Increase diplomacy/stewardship.
		}
		4 = { 
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_learning_boost  
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 1.5 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 1.5
				trait = shy
			}

			character_event = { id = HF.20314 } # Increase intrigue/learning.
		}
		4 = { 
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_guest_opinions  
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 1.5 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 1.5
				trait = gregarious
			}
			modifier = { 
				factor = 0.75
				NOT = { diplomacy = 10 }
			}

			character_event = { id = HF.20316 } # Improve guests opinion.
		}
		4 = { 
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_gain_diligent  
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 2
				trait = content
				trait = slothful
			}
			modifier = { 
				factor = 0 
				NOR = { 
					trait = content 
					trait = slothful
				}
			}

			character_event = { id = HF.20321 } # Gain diligent.
		}
		4 = { 

			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_gain_ambitious  
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 2
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 0 
				trait = ambitious
			}
			modifier = { 
				factor = 0 
				NOT = { trait = proud }
			}
			character_event = { id = HF.20322 } # Gain ambitious.
		}
		4 = { 
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_haughty_child  
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 2 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 0
				age = 16
			}
			modifier = { 
				factor = 1.5 
				NOR = { 
					trait = haughty 
					trait = conscientious
				}
			}

			character_event = { id = HF.20323 } # Child becomes haughty.
		}
		4 = { 

			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_priest_approves  
			}
			modifier = { 
				factor = 0 #Can't approve and disapprove within the course of the same ceremony.
				has_character_flag = flag_coronation_priest_disapproves  
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 1.5 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 1.75 
				event_target:coronation_priest = { trait = hedonist }
			}
			modifier = { 
				factor = 1.5 
				event_target:coronation_priest = { trait = gluttonous }
			}
			modifier = { 
				factor = 1.5 
				event_target:coronation_priest = { trait = drunkard }
			}
			modifier = { 
				factor = 1.5 
				event_target:coronation_priest = { trait = gregarious }
			}
			character_event = { id = HF.20324 } # Priest approves of ceremony.
		}
		4 = { 

			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_hre_talk  
			}
			modifier = { 
				factor = 0.5
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 1.5 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 0
				NOT = { has_landed_title = e_iron_throne }
			}
			modifier = { 
				factor = 1.5 
				event_target:coronation_priest = { trait = zealous }
			}
			character_event = { id = HF.20326 } # Priest talks about responsibilities of HRE. (Iron Throne)
		}
		4 = { 

			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_pope_talk  
			}
			modifier = { 
				factor = 0.5
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 2 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 0
				NOT = { event_target:coronation_priest = { has_landed_title = k_the_most_devout } }
			}
			character_event = { id = HF.20327 } # Pope talks about responsibilities of Christian King.
		}
		4 = { 
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_foreign_teacher  
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 1.5 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 0
				age = 16
			}
			modifier = { 
				factor = 0 
				NOT = {
					any_independent_ruler = { 
						has_opinion_modifier = { 
							who = ROOT 
							modifier = opinion_coronation_guest 
						}
						NOT = { is_rival = ROOT } 
						stewardship = 8
						opinion = { who = ROOT value = 0 }
					}
				}
			}

			random_independent_ruler = {
				limit = { 
					has_opinion_modifier = { 
						who = ROOT 
						modifier = opinion_coronation_guest 
					}
					NOT = { is_rival = ROOT } 
					stewardship = 8
					opinion = { who = ROOT value = 0 }
				}
				character_event = { id = HF.20328 } # Foreign ruler teaches child statemanship.
			}
		}
		4 = { 

			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_priest_disapproves  
			}
			modifier = { 
				factor = 0 #Can't approve and disapprove within the course of the same ceremony.
				has_character_flag = flag_coronation_priest_approves  
			}
			modifier = { 
				factor = 0 # This event is for disapproving of excess.
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 1.5 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 0.25 
				NOR = { 
					trait = hedonist 
					trait = drunkard
					trait = gluttonous
				}
			}
			modifier = { 
				factor = 1.5 
				trait = hedonist
			}
			modifier = { 
				factor = 1.5 
				trait = gluttonous
			}
			modifier = { 
				factor = 1.5 
				trait = drunkard
			}
			modifier = { 
				factor = 0.1 
				event_target:coronation_priest = { trait = hedonist }
			}
			modifier = { 
				factor = 0.5 
				event_target:coronation_priest = { trait = gluttonous }
			}
			modifier = { 
				factor = 0.5 
				event_target:coronation_priest = { trait = drunkard }
			}
			modifier = { 
				factor = 1.5 
				event_target:coronation_priest = { trait = temperate }
			}
			modifier = { 
				factor = 1.5 
				event_target:coronation_priest = { trait = celibate }
			}
			modifier = { 
				factor = 1.5 
				event_target:coronation_priest = { lower_tier_than = KING }
			}
			character_event = { id = HF.20332 } # Priests disapproves of ceremony.
		}
		4 = { 
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_diplomatic_incident  
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 0.9
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 0 
				NOT = { 
					any_independent_ruler = { 
						has_opinion_modifier = { 
							who = ROOT
							modifier = opinion_coronation_guest 
						}
						OR = { 
							any_rival = { 
								independent = yes
								has_opinion_modifier = { 
									who = event_target:coronation_ruler 
									modifier = opinion_coronation_guest 
								}
							}
							any_independent_ruler = { 
								has_opinion_modifier = { 
									who = event_target:coronation_ruler
									modifier = opinion_coronation_guest 
								}
								NOT = {
									reverse_opinion = { 
										who = PREV
										value = -30 
									}
								}
							}
						}
					}
				}
			}


			random_independent_ruler = { #Check for two potential rivals amongst the foreign guests at the coronation ceremony
				limit = { 
					has_opinion_modifier = { 
						who = ROOT
						modifier = opinion_coronation_guest 
					}
					OR = { 
						any_rival = { 
							independent = yes
							has_opinion_modifier = { 
								who =  event_target:coronation_ruler 
								modifier = opinion_coronation_guest 
							}
						}
						any_independent_ruler = { 
							has_opinion_modifier = { 
								who = event_target:coronation_ruler
								modifier = opinion_coronation_guest 
							}
							NOT = {
								reverse_opinion = { 
									who = PREV
									value = -30 
								}
							}
						}
					}
				}
				character_event = { id = HF.20334 } # Foreign ruler guests are rivals.
			}
		}
		2 = { 
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_cynic_taunts  
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 0.75 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 0
				NOT = { 
					any_independent_ruler = { 
						has_opinion_modifier = { 
							who = ROOT
							modifier = opinion_coronation_guest 
						}
						NOT = { event_target:coronation_priest = { character = PREV } }
						NOT = { event_target:coronation_ruler = { character = PREV } }
						OR = { 
							trait = cynical
							trait = bad_priest_christian
						}
					}
				}
			}
			modifier = { 
				factor = 0.5
				NOT = { 
					any_independent_ruler = { 
						has_opinion_modifier = { 
							who = ROOT
							modifier = opinion_coronation_guest 
						}
						NOT = { event_target:coronation_priest = { character = PREV } }
						NOT = { event_target:coronation_ruler = { character = PREV } }
						OR = { 
							trait = cynical
							trait = bad_priest_christian
						}
					}
					lower_tier_than = DUKE
				}
			}
			random_independent_ruler = { 
				limit = { 
					has_opinion_modifier = { 
						who = ROOT
						modifier = opinion_coronation_guest 
					}
					NOT = { event_target:coronation_priest = { character = PREV } }
					NOT = { event_target:coronation_ruler = { character = PREV } }
					OR = { 
						trait = cynical
						trait = bad_priest_christian
					}
				}
				preferred_limit = { 
					higher_tier_than = DUKE 
					OR = { 
						trait = possessed
						trait = lunatic
					}
				}
				preferred_limit = { higher_tier_than = DUKE }
				character_event = { id = HF.20342 } # Cynic/wicked vassal guest offends the coronation_priest.
			}
		}
		2 = { #One version for vassal guests, one for foreign guests.

			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_cynic_taunts  
			}
			modifier = { 
				factor = 0.75 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 0
				NOT = { 
					any_realm_lord = { 
						has_opinion_modifier = { 
							who = ROOT
							modifier = opinion_coronation_guest 
						}
						NOT = { event_target:coronation_priest = { character = PREV } }
						NOT = { event_target:coronation_ruler = { character = PREV } }
						OR = { 
							trait = cynical
							trait = bad_priest_christian
						}
					}
				}
			}
			random_realm_lord = {
				limit = { 
					has_opinion_modifier = { 
						who = ROOT
						modifier = opinion_coronation_guest 
					}
					NOT = { event_target:coronation_priest = { character = PREV } }
					OR = { 
						trait = cynical
						trait = bad_priest_christian
					}
				}
				character_event = { id = HF.20342 } # Cynic/wicked foreign guest offends the coronation_priest.
			}
		}
		4 = { 

			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_wandering_knight   
			}
			modifier = { 
				factor = 0.25 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 1.5 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 1.25 
				is_female = yes
			}
			modifier = { 
				factor = 1.25 
				NOT = { age = 16 }
			}
			modifier = { 
				factor = 1.5 
				tier = EMPEROR
			}
			character_event = { id = HF.20346 } # Wandering knight reaches court.
		}
		4 = { 

			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_wandering_priest 
			}
			modifier = { 
				factor = 0.5 
				has_character_flag = flag_secluded_coronation
			}
			modifier = { 
				factor = 1.5 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 1.5 
				tier = EMPEROR
			}
			modifier = { 
				factor = 1.5 
				piety = 300
			}
			character_event = { id = HF.20351 } # Wandering priest reaches court.
		}
		4 = { 
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_random_rivalry  
			}
			modifier = { 
				factor = 1.5 
				has_character_flag = flag_extravagant_coronation
			}
			modifier = { 
				factor = 0 
				NOT = {
					any_realm_lord = {
						has_opinion_modifier = { 
							who = ROOT
							modifier = opinion_coronation_guest 
						}
						NOT = { event_target:coronation_priest = { character = PREV } }
						OR = { 
							trait = envious
							is_rival = ROOT
							opinion = { 
								who = ROOT
								value = -30 
							}
						}
					}
				}
			}

			random_realm_lord = {
				limit = { 
					has_opinion_modifier = { 
						who = ROOT
						modifier = opinion_coronation_guest 
					}
					NOT = { event_target:coronation_priest = { character = PREV } }
					OR = { 
						trait = envious
						is_rival = ROOT
						opinion = { 
							who = ROOT
							value = -30 
						}
					}
				}
				character_event = { id = HF.20352 } # Envious/Hateful vassal shows rivalry.
			}
		}
		4 = { 
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_secluded_embarassed  
			}
			modifier = { 
				factor = 0 
				NOT = { has_character_flag = flag_secluded_coronation }
			}
			modifier = { 
				factor = 0 
				trait = stressed
				trait = paranoid
			}

			character_event = { id = HF.20355 } # Secluded coronation: ruler embarassed.
		}
		4 = { 
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_secluded_vassals  
			}
			modifier = { 
				factor = 0 
				NOT = { has_character_flag = flag_secluded_coronation }
			}

			character_event = { id = HF.20356 } # Secluded coronation: uninvited vassals are upset.
		}
		4 = { 
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_secluded_priest  
			}
			modifier = { 
				factor = 0 
				NOT = { has_character_flag = flag_secluded_coronation }
			}

			character_event = { id = HF.20358 } # Secluded coronation: priest is upset of poor ceremony.
		}
		4 = { 
			trigger = { 
				war = no
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_secluded_ambitious  
			}
			modifier = { 
				factor = 0 
				NOT = { has_character_flag = flag_secluded_coronation }
			}
			modifier = { 
				factor = 0.25
				NOT = { trait = ambitious }
			}

			character_event = { id = HF.20360 } # Secluded coronation: ruler loses ambition.
		}
		4 = { 
			trigger = { 
				war = no
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_secluded_proud  
			}
			modifier = { 
				factor = 0 
				NOT = { has_character_flag = flag_secluded_coronation }
			}
			modifier = { 
				factor = 0.25
				NOT = { trait = proud }
			}
			modifier = { 
				factor = 0
				trait = humble
			}

			character_event = { id = HF.20361 } # Secluded coronation: ruler humbled.
		}
		4 = { 
			trigger = { 
				war = no
			}
			modifier = { 
				factor = 0 
				has_character_flag = flag_coronation_secluded_steward  
			}
			modifier = { 
				factor = 0 
				NOT = { has_character_flag = flag_secluded_coronation }
			}
			modifier = { 
				factor = 0 
				NOT = { 
					any_courtier = {
						has_job_title = job_treasurer
					}
				}
			}
			modifier = { 
				factor = 0 
				any_courtier = {
					has_job_title = job_treasurer
					is_rival = ROOT
				}
			}

			character_event = { id = HF.20362 } # Secluded coronation: ruler hates steward for poor ceremony.
		}

	} 

} 

troubled_pregnancy_chance_low_effect = { 
random_list = { 
	70 = { custom_tooltip = { text = tooltip_pregnancy_stable } }
	30 = { custom_tooltip = { text = tooltip_pregnancy_gets_worse }
		modifier = { 
			factor = 0.85
			has_character_modifier = mother_dark_rest
		}
		modifier = { 
			factor = 0.95
			has_character_modifier = mother_chatting
		}
		modifier = { 
			factor = 0.85
			has_character_modifier = mother_fertility_festival_1
		}
		modifier = { 
			factor = 0.75
			has_character_modifier = mother_fertility_festival_2
		}
		modifier = { 
			factor = 0.75
			has_character_modifier = mother_festival_blessing
		}
		modifier = { 
			factor = 0.75
			has_character_modifier = mother_praying_health
		} 
		modifier = { 
			factor = 0.5
			has_character_modifier = mother_resting_health
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_partying_health
		} 
		modifier = { 
			factor = 0.75
			has_character_modifier = mother_minor_rest
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_good_omen
		} 
		modifier = { 
			factor = 1.2
			has_character_modifier = mother_bad_omen
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_vow_chastity
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_vow_humility
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_vow_charity
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_vow_temperance
		} 
		modifier = { 
			factor = 1.75
			has_character_modifier = mother_exposed_to_elements
		} 
		modifier = { 
			factor = 0.8
			has_character_modifier = mother_comforted
		} 
		modifier = { 
			factor = 1.5
			NOT = { age = 19 } #Too young
		} 
		modifier = { 
			factor = 1.25
			age = 27 #Too old
		} 
		modifier = { 
			factor = 1.25
			age = 30 #Too old
		} 
		modifier = { 
			factor = 1.25
			age = 35 #Too old
		} 
		modifier = { 
			factor = 1.5
			age = 40 #Too old
		} 	
		modifier = { 	
			factor = 1.5
			age = 45 #Too old
		} 
		modifier = { 
			factor = 1.75
			age = 50 #Too old
		} 
		modifier = { 
			factor = 1.25
			num_of_children = 2
		} 
		modifier = { 
			factor = 1.25
			num_of_children = 3 #Womb is worn out
		} 
		modifier = { 
			factor = 1.5
			num_of_children = 4 #Womb is worn out
		} 
		modifier = { 
			factor = 2
			num_of_children = 5 #Womb is worn out
		} 
		modifier = { 
			factor = 4
			has_character_flag = survivor_mom		#Should have stopped after last time.
		} 
		modifier = { 
			factor = 1.25
			NOR = {  
				trait = misguided_warrior
				trait = tough_soldier
				trait = skilled_tactician
				trait = brilliant_strategist
			}
		} 
		modifier = { 
			factor = 0.95
			trait = misguided_warrior
		} 
		modifier = { 
			factor = 0.85
			trait = tough_soldier
		} 
		modifier = { 
			factor = 0.75
			trait = skilled_tactician
		} 
		modifier = { 
			factor = 0.65
			trait = brilliant_strategist
		} 
		modifier = { 
			factor = 1.5
			trait = stressed
		} 
		modifier = { 
			factor = 1.75
			trait = depressed
		} 
		modifier = { 
			factor = 1.5
			trait = lunatic
		} 
		modifier = { 
			factor = 1.5
			trait = possessed
		} 
		modifier = { 
			factor = 1.35
			trait = wounded
		} 
		modifier = { 
			factor = 1.75
			trait = maimed
		} 
		modifier = { 
			factor = 1.5
			trait = infirm
		} 
		modifier = { 
			factor = 5
			trait = incapable #Probably going to die.
		} 
		modifier = { 
			factor = 1.25
			trait = drunkard
		} 
		modifier = { 
			factor = 1.15
			has_scarred_trait_trigger = yes
		} 
		modifier = { 
			factor = 1.5
			is_ill = yes
		} 
		modifier = { 
			factor = 1.85
			has_epidemic = yes
		} 
		modifier = { 
			factor = 2
			trait = cancer
		} 
		modifier = { 
			factor = 4
			trait = dancing_plague
		} 
		modifier = { 
			factor = 2
			trait = mangled
		} 
		modifier = { 
			factor = 3
			trait = severely_injured
		} 
		modifier = { 
			factor = 0.75
			is_strong_trigger = yes
		} 
		modifier = { 
			factor = 1.45
			trait = hunchback
		} 
		modifier = { 
			factor = 1.5
			trait = dwarf
		} 
		modifier = { 
			factor = 5
			trait = inbred
		} 
		modifier = { 
			factor = 1.5
			is_weak_trigger = yes
		} 
		modifier = { 
			factor = 1.35
			trait = hedonist
		} 
		modifier = { 
			factor = 0.85
			trait = mystic
		} 	
		modifier = { 	
			factor = 0.85	
			trait = gardener
		} 
		modifier = { 
			factor = 0.85
			trait = duelist
		} 
		modifier = { 
			factor = 0.75
			trait = hunter
		} 
		modifier = { 
			factor = 0.75
			trait = falconer
		} 
		modifier = { 
			factor = 1.35
			trait = gluttonous
		} 
		modifier = { 
			factor = 1.45
			trait = wroth
		} 
		modifier = { 
			factor = 1.45
			trait = slothful
		} 
		modifier = { 
			factor = 0.85
			trait = temperate
		} 
		modifier = { 
			factor = 1.5
			trait = blinded
		} 
		modifier = { 
			factor = 1.5
			trait = berserker
		} 
		modifier = { 
			factor = 1.25
			trait = lovers_pox
		} 
		modifier = { 
			factor = 1.5
			NOT = { health = 1 }
		} 
		modifier = { 
			factor = 1.5
			NOT = { health = 2 }
		} 
		modifier = { 
			factor = 1.5
			NOT = { health = 3 }
		} 
		modifier = { 
			factor = 0.75
			health = 5
		} 
		character_event = { id = HFP.20500  days = 35 random = 75 } #Critical failure: troubled pregnancy begins.
		}
	}
}

troubled_pregnancy_chance_medium_effect = { 
random_list = { 
	50 = { custom_tooltip = { text = tooltip_pregnancy_stable } }
	50 = { custom_tooltip = { text = tooltip_pregnancy_gets_worse }
		modifier = { 
			factor = 0.85
			has_character_modifier = mother_dark_rest
		}
		modifier = { 
			factor = 0.95
			has_character_modifier = mother_chatting
		}
		modifier = { 
			factor = 0.85
			has_character_modifier = mother_fertility_festival_1
		}
		modifier = { 
			factor = 0.75
			has_character_modifier = mother_fertility_festival_2
		}
		modifier = { 
			factor = 0.75
			has_character_modifier = mother_festival_blessing
		}
		modifier = { 
			factor = 0.75
			has_character_modifier = mother_praying_health
		} 
		modifier = { 
			factor = 0.5
			has_character_modifier = mother_resting_health
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_partying_health
		} 
		modifier = { 
			factor = 0.75
			has_character_modifier = mother_minor_rest
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_good_omen
		} 
		modifier = { 
			factor = 1.2
			has_character_modifier = mother_bad_omen
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_vow_chastity
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_vow_humility
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_vow_charity
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_vow_temperance
		} 
		modifier = { 
			factor = 1.75
			has_character_modifier = mother_exposed_to_elements
		} 
		modifier = { 
			factor = 0.8
			has_character_modifier = mother_comforted
		} 
		modifier = { 
			factor = 1.5
			NOT = { age = 19 } #Too young
		} 
		modifier = { 
			factor = 1.25
			age = 27 #Too old
		} 
		modifier = { 
			factor = 1.25
			age = 30 #Too old
		} 
		modifier = { 
			factor = 1.25
			age = 35 #Too old
		} 
		modifier = { 
			factor = 1.5
			age = 40 #Too old
		} 	
		modifier = { 	
			factor = 1.5
			age = 45 #Too old
		} 
		modifier = { 
			factor = 1.75
			age = 50 #Too old
		} 
		modifier = { 
			factor = 1.25
			num_of_children = 2
		} 
		modifier = { 
			factor = 1.25
			num_of_children = 3 #Womb is worn out
		} 
		modifier = { 
			factor = 1.5
			num_of_children = 4 #Womb is worn out
		} 
		modifier = { 
			factor = 2
			num_of_children = 5 #Womb is worn out
		} 
		modifier = { 
			factor = 4
			has_character_flag = survivor_mom		#Should have stopped after last time.
		} 
		modifier = { 
			factor = 1.25
			NOR = {  
				trait = misguided_warrior
				trait = tough_soldier
				trait = skilled_tactician
				trait = brilliant_strategist
			}
		} 
		modifier = { 
			factor = 0.95
			trait = misguided_warrior
		} 
		modifier = { 
			factor = 0.85
			trait = tough_soldier
		} 
		modifier = { 
			factor = 0.75
			trait = skilled_tactician
		} 
		modifier = { 
			factor = 0.65
			trait = brilliant_strategist
		} 
		modifier = { 
			factor = 1.5
			trait = stressed
		} 
		modifier = { 
			factor = 1.75
			trait = depressed
		} 
		modifier = { 
			factor = 1.5
			trait = lunatic
		} 
		modifier = { 
			factor = 1.5
			trait = possessed
		} 
		modifier = { 
			factor = 1.35
			trait = wounded
		} 
		modifier = { 
			factor = 1.75
			trait = maimed
		} 
		modifier = { 
			factor = 1.5
			trait = infirm
		} 
		modifier = { 
			factor = 5
			trait = incapable #Probably going to die.
		} 
		modifier = { 
			factor = 1.25
			trait = drunkard
		} 
		modifier = { 
			factor = 1.15
			has_scarred_trait_trigger = yes
		} 
		modifier = { 
			factor = 1.5
			is_ill = yes
		} 
		modifier = { 
			factor = 1.65
			has_epidemic = yes
		} 
		modifier = { 
			factor = 2
			trait = cancer
		}  
		modifier = { 
			factor = 2
			trait = mangled
		} 
		modifier = { 
			factor = 3
			trait = severely_injured
		} 
		modifier = { 
			factor = 0.75
			trait = strong
		} 
		modifier = { 
			factor = 1.45
			trait = hunchback
		} 
		modifier = { 
			factor = 1.5
			trait = dwarf
		} 
		modifier = { 
			factor = 5
			trait = inbred
		} 
		modifier = { 
			factor = 1.5
			trait = weak
		} 
		modifier = { 
			factor = 0.5
			trait = robust
		} 
		modifier = { 
			factor = 2
			trait = feeble
		} 
		modifier = { 
			factor = 1.35
			trait = hedonist
		} 
		modifier = { 
			factor = 0.85
			trait = mystic
		} 	
		modifier = { 	
			factor = 0.85	
			trait = gardener
		} 
		modifier = { 
			factor = 0.85
			trait = duelist
		} 
		modifier = { 
			factor = 0.75
			trait = hunter
		} 
		modifier = { 
			factor = 0.75
			trait = falconer
		} 
		modifier = { 
			factor = 1.35
			trait = gluttonous
		} 
		modifier = { 
			factor = 1.45
			trait = wroth
		} 
		modifier = { 
			factor = 1.45
			trait = slothful
		} 
		modifier = { 
			factor = 0.85
			trait = temperate
		} 
		modifier = { 
			factor = 1.5
			trait = blinded
		} 
		modifier = { 
			factor = 1.5
			trait = berserker
		} 
		modifier = { 
			factor = 1.25
			trait = lovers_pox
		} 
		modifier = { 
			factor = 1.5
			NOT = { health = 1 }
		} 
		modifier = { 
			factor = 1.5
			NOT = { health = 2 }
		} 
		modifier = { 
			factor = 1.5
			NOT = { health = 3 }
		} 
		modifier = { 
			factor = 0.75
			health = 5
		} 
		character_event = { id = HFP.20500  days = 35 random = 75 } #Critical failure: troubled pregnancy begins.
		}
	}
}

troubled_pregnancy_variable_easy_effect = { 
	random_list = { 
		60 = { 
		modifier = { 
			factor = 1.25
			has_character_modifier = mother_dark_rest
		}
		modifier = { 
			factor = 1.05
			has_character_modifier = mother_chatting
		}
		modifier = { 
			factor = 1.25
			has_character_modifier = mother_fertility_festival_1
		}
		modifier = { 
			factor = 1.5
			has_character_modifier = mother_fertility_festival_2
		}
		modifier = { 
			factor = 1.5
			has_character_modifier = mother_festival_blessing
		}
		modifier = { 
			factor = 0.7
			NOT = { health = 1 }
		}
		modifier = { 
			factor = 0.8
			NOT = { health = 2 }
		}
		modifier = { 
			factor = 0.9
			NOT = { health = 3 }
		}
		modifier = { 
			factor = 0.8
			trait = wounded
		}
		modifier = { 
			factor = 0.8
			trait = maimed
		}
		modifier = { 
			factor = 0.9
			trait = cough
		}
		modifier = { 
			factor = 0.8
			trait = fever
		}
		modifier = { 
			factor = 0.9
			trait = diarrhea
		}
		modifier = { 
			factor = 0.9
			trait = vomiting
		}
		modifier = { 
			factor = 0.7
			trait = chest_pain
		}
		modifier = { 
			factor = 0.8
			trait = cramps
		}
		modifier = { 
			factor = 0.9
			trait = rash
		}
		modifier = { 
			factor = 0.9
			trait = headache
		}
		modifier = { 
			factor = 0.7
			trait = abdominal_pain
		}
		modifier = { 
			factor = 0.9
			trait = fatigue
		}
		modifier = { 
			factor = 0.9
			trait = malaise
		}
		modifier = { 
			factor = 0.8
			trait = infection
		}
		modifier = { 
			factor = 1.1
			has_character_flag = pregnancy_priest_comfort
		}
		modifier = { 
			factor = 1.2
			has_character_flag = pregnancy_shaman_comfort
		}
		modifier = { 
			factor = 1.3
			has_character_flag = pregnancy_spouse_comfort
		}
		modifier = { 
			factor = 1.4
			has_character_flag = pregnancy_healer_help
		}
		modifier = { 
			factor = 0.7
			persistent_event_target:pregnancy_mother_physician_per = { NOT = { learning = 5 } }
		}
		modifier = { 
			factor = 0.8
			persistent_event_target:pregnancy_mother_physician_per = { NOT = { learning = 10 } }
		}
		modifier = { 
			factor = 1.25
			persistent_event_target:pregnancy_mother_physician_per = { trait = herbologist }
		}
		modifier = { 
			factor = 1.5
			persistent_event_target:pregnancy_mother_physician_per = { trait = physician }
		}
		modifier = { 
			factor = 1.25
			persistent_event_target:pregnancy_mother_physician_per = { learning = 10 }
		}
		modifier = { 
			factor = 1.25
			persistent_event_target:pregnancy_mother_physician_per = { learning = 13 }
		}
		modifier = { 
			factor = 1.25
			persistent_event_target:pregnancy_mother_physician_per = { learning = 16 }
		}
		modifier = { 
			factor = 1.5
			persistent_event_target:pregnancy_mother_physician_per = { learning = 20 }
		}
		modifier = { 
			factor = 0.7
			persistent_event_target:pregnancy_spouse_physician_per = { NOT = { learning = 5 } }
		}
		modifier = { 
			factor = 0.8
			persistent_event_target:pregnancy_spouse_physician_per = { NOT = { learning = 10 } }
		}
		modifier = { 
			factor = 1.25
			persistent_event_target:pregnancy_spouse_physician_per = { trait = herbologist }
		}
		modifier = { 
			factor = 1.5
			persistent_event_target:pregnancy_spouse_physician_per = { trait = physician }
		}
		modifier = { 
			factor = 1.25
			persistent_event_target:pregnancy_spouse_physician_per = { learning = 10 }
		}
		modifier = { 
			factor = 1.25
			persistent_event_target:pregnancy_spouse_physician_per = { learning = 13 }
		}
		modifier = { 
			factor = 1.25
			persistent_event_target:pregnancy_spouse_physician_per = { learning = 16 }
		}
		modifier = { 
			factor = 1.5
			persistent_event_target:pregnancy_spouse_physician_per = { learning = 20 }
		}
		modifier = { 
			factor = 0.7
			persistent_event_target:pregnancy_regent_physician_per = { NOT = { learning = 5 } }
		}
		modifier = { 
			factor = 0.8
			persistent_event_target:pregnancy_regent_physician_per = { NOT = { learning = 10 } }
		}
		modifier = { 
			factor = 1.25
			persistent_event_target:pregnancy_regent_physician_per = { trait = herbologist }
		}
		modifier = { 
			factor = 1.5
			persistent_event_target:pregnancy_regent_physician_per = { trait = physician }
		}
		modifier = { 
			factor = 1.25
			persistent_event_target:pregnancy_regent_physician_per = { learning = 10 }
		}
		modifier = { 
			factor = 1.25
			persistent_event_target:pregnancy_regent_physician_per = { learning = 13 }
		}
		modifier = { 
			factor = 1.25
			persistent_event_target:pregnancy_regent_physician_per = { learning = 16 }
		}
		modifier = { 
			factor = 1.5
			persistent_event_target:pregnancy_regent_physician_per = { learning = 20 }
		}
		change_variable =  { which = troubled_pregnancy_variable value = -2 }
	} 
	40 = { 
		modifier = { 
			factor = 0.75
			has_character_modifier = mother_praying_health
		} 
		modifier = { 
			factor = 0.5
			has_character_modifier = mother_resting_health
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_partying_health
		} 
		modifier = { 
			factor = 0.75
			has_character_modifier = mother_minor_rest
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_good_omen
		} 
		modifier = { 
			factor = 1.2
			has_character_modifier = mother_bad_omen
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_vow_chastity
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_vow_humility
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_vow_charity
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_vow_temperance
		} 
		modifier = { 
			factor = 1.75
			has_character_modifier = mother_exposed_to_elements
		} 
		modifier = { 
			factor = 0.8
			has_character_modifier = mother_comforted
		} 
		change_variable =  { which = troubled_pregnancy_variable value = 2 }
	}
	}
}

troubled_pregnancy_variable_hard_effect = { 
	random_list = { 
		30 = { 
		modifier = { 
			factor = 1.25
			has_character_modifier = mother_dark_rest
		}
		modifier = { 
			factor = 1.05
			has_character_modifier = mother_chatting
		}
		modifier = { 
			factor = 1.25
			has_character_modifier = mother_fertility_festival_1
		}
		modifier = { 
			factor = 1.5
			has_character_modifier = mother_fertility_festival_2
		}
		modifier = { 
			factor = 1.5
			has_character_modifier = mother_festival_blessing
		}
		modifier = { 
			factor = 0.7
			NOT = { health = 1 }
		}
		modifier = { 
			factor = 0.8
			NOT = { health = 2 }
		}
		modifier = { 
			factor = 0.9
			NOT = { health = 3 }
		}
		modifier = { 
			factor = 0.8
			trait = wounded
		}
		modifier = { 
			factor = 0.8
			trait = maimed
		}
		modifier = { 
			factor = 0.9
			trait = cough
		}
		modifier = { 
			factor = 0.8
			trait = fever
		}
		modifier = { 
			factor = 0.9
			trait = diarrhea
		}
		modifier = { 
			factor = 0.9
			trait = vomiting
		}
		modifier = { 
			factor = 0.7
			trait = chest_pain
		}
		modifier = { 
			factor = 0.8
			trait = cramps
		}
		modifier = { 
			factor = 0.9
			trait = rash
		}
		modifier = { 
			factor = 0.9
			trait = headache
		}
		modifier = { 
			factor = 0.7
			trait = abdominal_pain
		}
		modifier = { 
			factor = 0.9
			trait = fatigue
		}
		modifier = { 
			factor = 0.9
			trait = malaise
		}
		modifier = { 
			factor = 0.8
			trait = infection
		}
		modifier = { 
			factor = 1.1
			has_character_flag = pregnancy_priest_comfort
		}
		modifier = { 
			factor = 1.2
			has_character_flag = pregnancy_shaman_comfort
		}
		modifier = { 
			factor = 1.3
			has_character_flag = pregnancy_spouse_comfort
		}
		modifier = { 
			factor = 1.4
			has_character_flag = pregnancy_healer_help
		}
		modifier = { 
			factor = 0.7
			persistent_event_target:pregnancy_mother_physician_per = { NOT = { learning = 5 } }
		}
		modifier = { 
			factor = 0.8
			persistent_event_target:pregnancy_mother_physician_per = { NOT = { learning = 10 } }
		}
		modifier = { 
			factor = 1.25
			persistent_event_target:pregnancy_mother_physician_per = { trait = herbologist }
		}
		modifier = { 
			factor = 1.5
			persistent_event_target:pregnancy_mother_physician_per = { trait = physician }
		}
		modifier = { 
			factor = 1.25
			persistent_event_target:pregnancy_mother_physician_per = { learning = 10 }
		}
		modifier = { 
			factor = 1.25
			persistent_event_target:pregnancy_mother_physician_per = { learning = 13 }
		}
		modifier = { 
			factor = 1.25
			persistent_event_target:pregnancy_mother_physician_per = { learning = 16 }
		}
		modifier = { 
			factor = 1.5
			persistent_event_target:pregnancy_mother_physician_per = { learning = 20 }
		}
		modifier = { 
			factor = 0.7
			persistent_event_target:pregnancy_spouse_physician_per = { NOT = { learning = 5 } }
		}
		modifier = { 
			factor = 0.8
			persistent_event_target:pregnancy_spouse_physician_per = { NOT = { learning = 10 } }
		}
		modifier = { 
			factor = 1.25
			persistent_event_target:pregnancy_spouse_physician_per = { trait = herbologist }
		}
		modifier = { 
			factor = 1.5
			persistent_event_target:pregnancy_spouse_physician_per = { trait = physician }
		}
		modifier = { 
			factor = 1.25
			persistent_event_target:pregnancy_spouse_physician_per = { learning = 10 }
		}
		modifier = { 
			factor = 1.25
			persistent_event_target:pregnancy_spouse_physician_per = { learning = 13 }
		}
		modifier = { 
			factor = 1.25
			persistent_event_target:pregnancy_spouse_physician_per = { learning = 16 }
		}
		modifier = { 
			factor = 1.5
			persistent_event_target:pregnancy_spouse_physician_per = { learning = 20 }
		}
		modifier = { 
			factor = 0.7
			persistent_event_target:pregnancy_regent_physician_per = { NOT = { learning = 5 } }
		}
		modifier = { 
			factor = 0.8
			persistent_event_target:pregnancy_regent_physician_per = { NOT = { learning = 10 } }
		}
		modifier = { 
			factor = 1.25
			persistent_event_target:pregnancy_regent_physician_per = { trait = herbologist }
		}
		modifier = { 
			factor = 1.5
			persistent_event_target:pregnancy_regent_physician_per = { trait = physician }
		}
		modifier = { 
			factor = 1.25
			persistent_event_target:pregnancy_regent_physician_per = { learning = 10 }
		}
		modifier = { 
			factor = 1.25
			persistent_event_target:pregnancy_regent_physician_per = { learning = 13 }
		}
		modifier = { 
			factor = 1.25
			persistent_event_target:pregnancy_regent_physician_per = { learning = 16 }
		}
		modifier = { 
			factor = 1.5
			persistent_event_target:pregnancy_regent_physician_per = { learning = 20 }
		}
		change_variable =  { which = troubled_pregnancy_variable value = -3 }
	} 
	70 = { 
		modifier = { 
			factor = 0.75
			has_character_modifier = mother_praying_health
		} 
		modifier = { 
			factor = 0.5
			has_character_modifier = mother_resting_health
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_partying_health
		} 
		modifier = { 
			factor = 0.75
			has_character_modifier = mother_minor_rest
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_good_omen
		} 
		modifier = { 
			factor = 1.2
			has_character_modifier = mother_bad_omen
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_vow_chastity
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_vow_humility
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_vow_charity
		} 
		modifier = { 
			factor = 0.9
			has_character_modifier = mother_vow_temperance
		} 
		modifier = { 
			factor = 1.75
			has_character_modifier = mother_exposed_to_elements
		} 
		modifier = { 
			factor = 0.8
			has_character_modifier = mother_comforted
		} 
		change_variable =  { which = troubled_pregnancy_variable value = 3 }
	}
	} 
}

tiered_prestige_reward_effect = {
	if = {
		limit = {
			tier = EMPEROR
		}
		prestige = 100
	}
	else_if = {
		limit = {
			OR = { 
				tier = KING
				spouse = { tier = EMPEROR } 
				father_even_if_dead = { tier = EMPEROR }
				mother_even_if_dead = { tier = EMPEROR }
			}
		}
		prestige = 75
	}
	else_if = {
		limit = {
			OR = { 
				tier = DUKE
				spouse = { tier = KING } 
				father_even_if_dead = { tier = KING }
				mother_even_if_dead = { tier = KING }
			}
		}
		prestige = 50
	}
	else_if = {
		limit = {
			OR = { 
				tier = COUNT
				spouse = { tier = DUKE } 
				father_even_if_dead = { tier = DUKE }
				mother_even_if_dead = { tier = DUKE }
			}
		}
		prestige = 25
	}
	else_if = {
		limit = {
			OR = { 
				tier = BARON
				spouse = { tier = COUNT } 
				father_even_if_dead = { tier = COUNT }
				mother_even_if_dead = { tier = COUNT }
			}
		}
		prestige = 10
	}
	else = {
		prestige = 5
	}
}

tiered_piety_reward_effect = {
	if = {
		limit = {
			tier = EMPEROR
		}
		piety = 30
	}
	else_if = {
		limit = {
			OR = { 
				tier = KING
				spouse = { tier = EMPEROR } 
				father_even_if_dead = { tier = EMPEROR }
				mother_even_if_dead = { tier = EMPEROR }
			}
		}
		piety = 25
	}
	else_if = {
		limit = {
			OR = { 
				tier = DUKE
				spouse = { tier = KING } 
				father_even_if_dead = { tier = KING }
				mother_even_if_dead = { tier = KING }
			}
		}
		piety = 20
	}
	else_if = {
		limit = {
			OR = { 
				tier = COUNT
				spouse = { tier = DUKE } 
				father_even_if_dead = { tier = DUKE }
				mother_even_if_dead = { tier = DUKE }
			}
		}
		piety = 15
	}
	else_if = {
		limit = {
			OR = { 
				tier = BARON
				spouse = { tier = COUNT } 
				father_even_if_dead = { tier = COUNT }
				mother_even_if_dead = { tier = COUNT }
			}
		}
		piety = 10
	}
	else = {
		piety = 5
	}
}

tiered_prestige_negative_effect = {
	if = {
		limit = {
			tier = EMPEROR
		}
		prestige = -100
	}
	else_if = {
		limit = {
			OR = { 
				tier = KING
				spouse = { tier = EMPEROR } 
				father_even_if_dead = { tier = EMPEROR }
				mother_even_if_dead = { tier = EMPEROR }
			}
		}
		prestige = -75
	}
	else_if = {
		limit = {
			OR = { 
				tier = DUKE
				spouse = { tier = KING } 
				father_even_if_dead = { tier = KING }
				mother_even_if_dead = { tier = KING }
			}
		}
		prestige = -50
	}
	else_if = {
		limit = {
			OR = { 
				tier = COUNT
				spouse = { tier = DUKE } 
				father_even_if_dead = { tier = DUKE }
				mother_even_if_dead = { tier = DUKE }
			}
		}
		prestige = -25
	}
	else_if = {
		limit = {
			OR = { 
				tier = BARON
				spouse = { tier = COUNT } 
				father_even_if_dead = { tier = COUNT }
				mother_even_if_dead = { tier = COUNT }
			}
		}
		prestige = -10
	}
	else = {
		prestige = -5
	}
}

tiered_piety_negative_effect = {
	if = {
		limit = {
			tier = EMPEROR
		}
		piety = -30
	}
	else_if = {
		limit = {
			OR = { 
				tier = KING
				spouse = { tier = EMPEROR } 
				father_even_if_dead = { tier = EMPEROR }
				mother_even_if_dead = { tier = EMPEROR }
			}
		}
		piety = -25
	}
	else_if = {
		limit = {
			OR = { 
				tier = DUKE
				spouse = { tier = KING } 
				father_even_if_dead = { tier = KING }
				mother_even_if_dead = { tier = KING }
			}
		}
		piety = -20
	}
	else_if = {
		limit = {
			OR = { 
				tier = COUNT
				spouse = { tier = DUKE } 
				father_even_if_dead = { tier = DUKE }
				mother_even_if_dead = { tier = DUKE }
			}
		}
		piety = -15
	}
	else_if = {
		limit = {
			OR = { 
				tier = BARON
				spouse = { tier = COUNT } 
				father_even_if_dead = { tier = COUNT }
				mother_even_if_dead = { tier = COUNT }
			}
		}
		piety = -10
	}
	else = {
		piety = -5
	}
}
tiered_high_piety_negative_effect = {
	if = {
		limit = {
			tier = EMPEROR
		}
		piety = -350
	}
	else_if = {
		limit = {
			OR = { 
				tier = KING
				spouse = { tier = EMPEROR } 
				father_even_if_dead = { tier = EMPEROR }
				mother_even_if_dead = { tier = EMPEROR }
			}
		}
		piety = -150
	}
	else_if = {
		limit = {
			OR = { 
				tier = DUKE
				spouse = { tier = KING } 
				father_even_if_dead = { tier = KING }
				mother_even_if_dead = { tier = KING }
			}
		}
		piety = -100
	}
	else_if = {
		limit = {
			OR = { 
				tier = COUNT
				spouse = { tier = DUKE } 
				father_even_if_dead = { tier = DUKE }
				mother_even_if_dead = { tier = DUKE }
			}
		}
		piety = -70
	}
	else_if = {
		limit = {
			OR = { 
				tier = BARON
				spouse = { tier = COUNT } 
				father_even_if_dead = { tier = COUNT }
				mother_even_if_dead = { tier = COUNT }
			}
		}
		piety = -40
	}
	else = {
		piety = -25
	}
}
#Used for gluttonous and hedonistic actions.
gain_weight_small_effect = {
	#custom_tooltip = {
		hidden_tooltip = {
		change_variable = { which = physique_variable value = 4 }
		}
	#}
} 
gain_weight_medium_effect = {
	#custom_tooltip = {
		hidden_tooltip = {
		change_variable = { which = physique_variable value = 8 }
		}
	#}
} 
gain_weight_large_effect = {
	#custom_tooltip = {
		hidden_tooltip = {
		change_variable = { which = physique_variable value = 12 }
		}
	#}
}

#Used for training and balanced lifestyle.
balance_weight_small_effect =  {
	#custom_tooltip = {
		hidden_tooltip = {
			#If variable is above 1, reduce it. If it's below 1 increase it.
			if = { 
				limit = {
					check_variable = { which = physique_variable value = 1 }
				}
				change_variable = { which = physique_variable value = -2 }
			}
			if = { 
				limit = {
					NOT = { check_variable = { which = physique_variable value = -1 } }
				}
				change_variable = { which = physique_variable value = 2 }
			}
		}
	#}
} 
balance_weight_medium_effect = {
	#custom_tooltip = {
		hidden_tooltip = {
			#If variable is above 1, reduce it. If it's below 1 increase it.
			if = { 
				limit = {
					check_variable = { which = physique_variable value = 1 }
				}
				change_variable = { which = physique_variable value = -5 }
			}
			if = { 
				limit = {
					NOT = { check_variable = { which = physique_variable value = -1 } }
				}
				change_variable = { which = physique_variable value = 5 }
			}
		}
	#}
} 

balance_weight_large_effect = { #Should be used rarely.
	#custom_tooltip = {
		hidden_tooltip = {
			#If variable is above 1, reduce it. If it's below 1 increase it.
			if = { 
				limit = {
					check_variable = { which = physique_variable value = 1 }
				}
				change_variable = { which = physique_variable value = -10 }
			}
			if = { 
				limit = {
					NOT = { check_variable = { which = physique_variable value = -1 } }
				}
				change_variable = { which = physique_variable value = 10 }
			}
		}
	#}
} 

#Used for seclusions, fasting, dungeon starvation, etc.
lose_weight_small_effect = {
	#custom_tooltip = {
		hidden_tooltip = {
		change_variable = { which = physique_variable value = -6 } #Because of the way trigger works, checks if you are below -5/-10/-15
		}
	#}
} 
lose_weight_medium_effect = {
	#custom_tooltip = {
		hidden_tooltip = {
	change_variable = { which = physique_variable value = -11 }
		}
	#}
} 
lose_weight_large_effect = {
	#custom_tooltip = {
		hidden_tooltip = {
	change_variable = { which = physique_variable value = -16 }
		}
	#}
}  

#Doesn't change the variable, only checks if the character has the correct trait assigned.
weight_trait_check_effect = { 

	#Debilitating effects are gained by special events, usually later in life (40s), but they can be cleared up if the character's variable goes back towards 0 again.
	if = { 
		limit = {
			NOT = { check_variable = { which = physique_variable value = 30 } }
			has_character_modifier = obese_modifier
		}
		remove_character_modifier = obese_modifier
	}
	if = { 
		limit = {
			check_variable = { which = physique_variable value = -30 }
			has_character_modifier = severely_underweight_modifier
		}
		remove_character_modifier = severely_underweight_modifier
	}

	if = { 
		limit = {
			trait = is_fat
			NOT = { check_variable = { which = physique_variable value = 15 } }
			check_variable = { which = physique_variable value = -15 } 
		}
		remove_trait = is_fat
		hidden_tooltip = { 
			remove_weight_modifier_effect = yes
			character_event = { id = HFP.20601 } #Notification
		} 
	}
	if = { 
		limit = {
			trait = is_fat
			NOT = { check_variable = { which = physique_variable value = -15 } }
		}
		remove_trait = is_fat
		add_trait = is_malnourished
		hidden_tooltip = { 
			remove_weight_modifier_effect = yes
			character_event = { id = HFP.20602 } #Notification
		} 
	}
	if = { 
		limit = {
			trait = is_malnourished
			NOT = { check_variable = { which = physique_variable value = 15 } }
			check_variable = { which = physique_variable value = -15 } 
		}
		remove_trait = is_malnourished
		hidden_tooltip = { 
			remove_weight_modifier_effect = yes
			character_event = { id = HFP.20603 } #Notification
		} 
	}
	if = { 
		limit = {
			trait = is_malnourished
			check_variable = { which = physique_variable value = 15 }
		}
		remove_trait = is_malnourished
		add_trait = is_fat
		hidden_tooltip = { 
			remove_weight_modifier_effect = yes
			character_event = { id = HFP.20600 } #Notification
		} 
	}
	if = { 
		limit = {
			NOR = { 
				trait = is_malnourished 
				trait = is_fat
			}
			check_variable = { which = physique_variable value = 15 }
		}
		#First time try to fire a special event if character meets any of the conditions, otherwise simply notify.
		weight_flavor_conditions_effect = yes
		add_trait = is_fat
		hidden_tooltip = { character_event = { id = HFP.20600 } } #Notification
	}
	if = { 
		limit = {
			NOR = { 
				trait = is_malnourished 
				trait = is_fat
			}
			NOT = { check_variable = { which = physique_variable value = -15 } }
		}
		#First time try to fire a special event if character meets any of the conditions, otherwise simply notify.
		weight_flavor_conditions_effect = yes
		add_trait = is_malnourished
		hidden_tooltip = { character_event = { id = HFP.20602 } } #Notification
	}

}  
apply_weight_modifier_effect = { 
	if = { 
		limit = {
			OR = {
				has_character_flag = flag_fat_for_gluttony
				has_character_flag = flag_fat_for_boredom
			}
		}
		add_character_modifier = {
			name = coping_glutton
			duration = 5000
		}
	}
	if = { 
		limit = {
			OR = {
				has_character_flag = flag_fat_for_sloth
				has_character_flag = flag_malnourished_for_sloth
				has_character_flag = flag_fat_for_stress
				has_character_flag = flag_malnourished_for_stress
				has_character_flag = flag_fat_for_lust
				has_character_flag = flag_fat_for_wroth
				has_character_flag = flag_malnourished_for_craven
			}
		}
		add_character_modifier = {
			name = stress_relief
			duration = 5000
		}
	}
	if = { 
		limit = {
			OR = {
				has_character_flag = flag_fat_for_depression
				has_character_flag = flag_malnourished_for_depression
			}
		}
		add_character_modifier = {
			name = anti_depression
			duration = 5000
		}
	}
	if = { 
		limit = {
			OR = {
				has_character_flag = flag_fat_for_hedonism
				has_character_flag = flag_fat_for_carousing
				has_character_flag = flag_fat_for_drunkard
			}
		}
		add_character_modifier = {
			name = munificent_modifier
			duration = 5000
		}
	}
	if = { 
		limit = {
			OR = {
				has_character_flag = flag_fat_for_family
				has_character_flag = flag_fat_for_content
			}
			is_female = yes
		}
		add_character_modifier = {
			name = jolly_matron_modifier
			duration = 5000
		}
	}
	if = { 
		limit = {
			OR = {
				has_character_flag = flag_fat_for_family
				has_character_flag = flag_fat_for_content
			}
			is_female = no
		}
		add_character_modifier = {
			name = jolly_patriarch_modifier
			duration = 5000
		}
	}
	if = { 
		limit = {
			OR = {
				has_character_flag = flag_malnourished_for_temperance
				has_character_flag = flag_malnourished_for_boredom
			}
		}
		add_character_modifier = {
			name = extremely_temperate
			duration = 5000
		}
	}
	if = { 
		limit = {
			has_character_flag = flag_malnourished_for_study
		}
		add_character_modifier = {
			name = restless_study
			duration = 5000
		}
	}
	if = { 
		limit = {
			has_character_flag = flag_malnourished_for_faith
		}
		add_character_modifier = {
			name = restless_prayer
			duration = 5000
		}
	}
	if = { 
		limit = {
			has_character_flag = flag_malnourished_for_paranoia
		}
		add_character_modifier = {
			name = malnourished_paranoia
			duration = 5000
		}
	}
	if = { 
		limit = {
			has_character_flag = flag_malnourished_for_diligence
		}
		add_character_modifier = {
			name = tireless_worker
			duration = 5000
		}
	}
	if = { 
		limit = {
			has_character_flag = flag_malnourished_for_cannibal
		}
		add_character_modifier = {
			name = refined_palate
			duration = 5000
		}
	}
}
remove_weight_modifier_effect = {
	if = { 
		limit = { 
			has_character_modifier = coping_glutton
		}
		remove_character_modifier = coping_glutton
	}
	if = { 
		limit = {
			has_character_modifier = stress_relief
		}
		remove_character_modifier = stress_relief
	}
	if = { 
		limit = {
			has_character_modifier = anti_depression
		}
		remove_character_modifier = anti_depression
	}
	if = { 
		limit = {
			has_character_modifier = munificent_modifier
		}
		remove_character_modifier = munificent_modifier
	}
	if = { 
		limit = {
			has_character_modifier = jolly_matron_modifier
		}
		remove_character_modifier = jolly_matron_modifier
	}
	if = { 
		limit = {
			has_character_modifier = jolly_patriarch_modifier
		}
		remove_character_modifier = jolly_patriarch_modifier
	}
	if = { 
		limit = {
			has_character_modifier = extremely_temperate
		}
		remove_character_modifier = extremely_temperate
	}
	if = { 
		limit = {
			has_character_modifier = restless_study
		}
		remove_character_modifier = restless_study
	}
	if = { 
		limit = {
			has_character_modifier = restless_prayer
		}
		remove_character_modifier = restless_prayer
	}
	if = { 
		limit = {
			has_character_modifier = malnourished_paranoia
		}
		remove_character_modifier = malnourished_paranoia
	}
	if = { 
		limit = {
			has_character_modifier = tireless_worker
		}
		remove_character_modifier = tireless_worker
	}
}
clear_fat_flags_effect = {
	clr_character_flag = flag_fat_for_gluttony 
	clr_character_flag = flag_fat_for_stress
	clr_character_flag = flag_fat_for_depression
	clr_character_flag = flag_fat_for_sloth
	clr_character_flag = flag_fat_for_hedonism
	clr_character_flag = flag_fat_for_carousing
	clr_character_flag = flag_fat_for_family 
	clr_character_flag = flag_fat_for_content 
	clr_character_flag = flag_fat_for_lust
	clr_character_flag = flag_fat_for_wroth
	clr_character_flag = flag_fat_for_drunkard
	clr_character_flag = flag_fat_for_boredom
}
clear_malnourished_flags_effect = {
	clr_character_flag = flag_malnourished_for_temperance 
	clr_character_flag = flag_malnourished_for_stress
	clr_character_flag = flag_malnourished_for_depression
	clr_character_flag = flag_malnourished_for_sloth
	clr_character_flag = flag_malnourished_for_study
	clr_character_flag = flag_malnourished_for_faith
	clr_character_flag = flag_malnourished_for_paranoia 
	clr_character_flag = flag_malnourished_for_diligence
	clr_character_flag = flag_malnourished_for_cannibal
	clr_character_flag = flag_malnourished_for_craven
	clr_character_flag = flag_malnourished_for_boredom
}
weight_flavor_conditions_effect = {

	if = { #If already about to become fat and fulfilling one of the special conditions, fire the specific event to give more flavor.
		limit = { 
			check_variable = { which = physique_variable value = 12 }
			NOT = { trait = is_fat }
			NOT = { has_character_flag = flag_primed_physique }
			#NOT = { trait = temperate }
			is_incapable = no
			age = 20
			prisoner = no
			is_inaccessible_trigger = no
			NOT = { #Can happen only once
				has_fat_for_flag_trigger = yes
			}
			OR = { 				#Possible reasons
				trait = gluttonous
				trait = stressed 
				trait = depressed
				trait = slothful
				trait = hedonist
				trait = wroth
				trait = drunkard
				has_focus = focus_carousing 
				AND = { #Happy mom
					OR = { 
						trait = kind
						trait = content
						has_focus = focus_family 
						trait = patient
					}
					NOR = { 
						trait = cruel 
						trait = envious
					}
					is_female = yes
					any_child = { 
						is_alive = yes 
						is_adult = no
					}
				}
				AND = { #Content husband
					OR = { 
						trait = kind
						trait = content
						has_focus = focus_family 
						trait = patient
					}
					NOR = { 
						trait = cruel 
						trait = envious
					}
					is_female = no
					is_married = yes
					OR = { 
						num_of_consorts = 2
						num_of_children = 2
						num_of_spouses = 2
					}
				}
				AND = { #Frustrated lustful survivor mom
					has_character_flag = survivor_mom
					trait = celibate
					trait = lustful
				}
				AND = { #Frustrated eunuch
					trait = eunuch
					trait = lustful
				}
				AND = { #Generic fallback
					NOT = { trait = temperate }
					check_variable = { which = physique_variable value = 15 }
				}
			}
		}
		if = { 
			limit = { NOT = { check_variable = { which = physique_variable value = 15 } } }
			gain_weight_small_effect = yes
		}
		set_character_flag = flag_primed_physique
		character_event = { id = HFP.20605 days = 10 }
	}
	if = { #If already about to become malnourished and fulfilling one of the special conditions, fire the specific event to give more flavor.
		limit = { 
			NOT = { check_variable = { which = physique_variable value = -12 } }
			NOT = { trait = is_malnourished }
			#NOT = { trait = gluttonous }
			is_incapable = no
			NOT = { has_character_flag = flag_primed_physique }
			age = 20
			prisoner = no
			is_inaccessible_trigger = no
			NOT = { #Can happen only once
				has_malnourished_for_flag_trigger = yes
			}
			OR = { 				#Possible reasons
				trait = temperate
				trait = stressed
				trait = depressed
				trait = slothful
				trait = scholar
				trait = cannibal_trait
				trait = craven
				has_focus = focus_scholarship
				AND = { 
					NOT = { trait = cynical }
					OR = {
						trait = theologian
						has_focus = focus_theology
					}	
				}
				trait = paranoid
				trait = diligent
				AND = { #Generic fallback
					NOT = { trait = gluttonous }
					NOT = { check_variable = { which = physique_variable value = -15 } }
				}
			}
		}
		if = { 
			limit = { check_variable = { which = physique_variable value = -15 } }
			lose_weight_small_effect = yes
		}
		set_character_flag = flag_primed_physique
		character_event = { id = HFP.20628 days = 10 }
	}	
}

# Referenced by Alternate Start religion feature generation
reset_religion_features_effect = {
	set_peace_piety_gain = 0
	set_pacifist = no
	set_convert_other_groups = 2
	set_convert_same_group = 2
	set_peace_prestige_loss = 0
	set_ai_aggression = 1
	set_unit_modifier = {}
	set_unit_home_modifier = {}
	set_hard_to_convert = no
	set_raised_vassal_opinion_loss = yes
	set_piety_loss_for_attacking_same_religion = no
	set_max_wives = 1
	set_max_consorts = 0
	set_feminist = no
	set_heir_designation = no
	set_short_reign_opinion_year_mult = -1000
	set_jizya_tax = no
	set_can_retire_to_monastery = no
	set_can_excommunicate = no
	set_can_grant_divorce = no
	set_can_grant_invasion_cb = no
	set_can_grant_claim = no
	set_can_call_crusade = no
	set_pc_marriage = no
	set_bs_marriage = no
	set_psc_marriage = yes
	set_cousin_marriage = yes
	set_seafaring = no
	set_allow_looting = no
	set_allow_rivermovement = no
	set_autocephaly = no
	set_pentarchy = no
	set_divine_blood = no
	set_uses_decadence = no
	set_can_have_antipopes = no
	set_priests_can_marry = no
	set_priests_can_inherit = yes
	set_ignores_defensive_attrition = no
	set_defensive_attrition = no
	clear_intermarry = no
	set_character_modifier = {}
	clear_intermarry = yes
}

#Copied to facilitate use elsewhere.
this_post_weight_gain_flavor_effect = { 
	random_list = { 
		25 = { }
		5 = { 
			trigger = { 
				trait = stressed
			}
			character_event = { id = HFP.20607 days = 50 random = 50 } #Lose stressed
		}
		5 = { 
			trigger = { 
				trait = depressed
			}
			character_event = { id = HFP.20608 days = 50 random = 50 } #Lose depressed
		}
		2 = { 
			modifier = { 
				factor = 0.5
				check_variable = { which = physique_variable value = 20 }
			}
			modifier = { 
				factor = 0.5
				NOT = { trait = feeble }
			}
			character_event = { id = HFP.20609 days = 50 random = 50 } #Gain health
		}
		2 = { 
			modifier = { 
				factor = 1.5
				check_variable = { which = physique_variable value = 20 }
			}
			modifier = { 
				factor = 1.75
				trait = sturdy
			}
			character_event = { id = HFP.20610 days = 50 random = 50 } #Lose health
		}
		3 = { 
			trigger = {
				NOT = { personality_traits = 6 }
				NOT = { trait =	greedy }
				NOT = { trait =	charitable }
			}
			modifier = { 
				factor = 0.5
				trait = greedy
			}
			character_event = { id = HFP.20611 days = 50 random = 50 } #become charitable, vassal opinion.
		}
		5 = { 
			trigger = { 
				is_ruler = yes
				NOR = { 
					trait = stressed
					trait = depressed
					trait = wroth
				}
				NOT = { personality_traits = 6 }
				NOT = { trait =	humble }
				NOT = { trait =	proud }
			}
			character_event = { id = HFP.20663 days = 50 random = 50 } #Become proud.
		}
		5 = { 
			trigger = { 
				NOT = { 
					trait = wroth
				}
				NOT = { personality_traits = 6 }
				NOT = { trait = patient }
			}
			character_event = { id = HFP.20664 days = 50 random = 50 } #Become patient.
		}
		1 = { 
			trigger = { 
				NOR = { 
					trait = stressed
					trait = depressed
					trait = wroth
				}
				NOT = { personality_traits = 6 }
				NOT = { trait =	content }
				NOT = { trait =	ambitious }
			}
			character_event = { id = HFP.20665 days = 50 random = 50 } #Become content.
		}
	}
}

this_post_weight_loss_flavor_effect = { 
	random_list = { 
		25 = { }
		5 = { 
			trigger = { 
				trait = stressed
			}
			character_event = { id = HFP.20607 days = 50 random = 50 } #Lose stressed
		}
		5 = { 
			trigger = { 
				trait = depressed
			}
			character_event = { id = HFP.20608 days = 50 random = 50 } #Lose depressed
		}
		2 = { 
			modifier = { 
				factor = 0.5
				check_variable = { which = physique_variable value = 20 }
			}
			modifier = { 
				factor = 0.5
				NOT = { trait = feeble }
			}
			character_event = { id = HFP.20609 days = 50 random = 50 } #Gain health
		}
		2 = { 
			modifier = { 
				factor = 1.5
				check_variable = { which = physique_variable value = 20 }
			}
			modifier = { 
				factor = 1.75
				trait = sturdy
			}
			character_event = { id = HFP.20610 days = 50 random = 50 } #Lose health
		}
		3 = { 
			trigger = {
				NOT = { personality_traits = 6 }
				NOT = { trait =	greedy }
				NOT = { trait =	charitable }
			}
			modifier = { 
				factor = 0.5
				trait = greedy
			}
			character_event = { id = HFP.20611 days = 50 random = 50 } #become charitable, vassal opinion.
		}
		5 = { 
			trigger = { 
				is_ruler = yes
				NOR = { 
					trait = stressed
					trait = depressed
					trait = wroth
				}
				NOT = { personality_traits = 6 }
				NOT = { trait =	humble }
				NOT = { trait =	proud }
			}
			character_event = { id = HFP.20663 days = 50 random = 50 } #Become proud.
		}
		5 = { 
			trigger = { 
				NOT = { 
					trait = wroth
				}
				NOT = { personality_traits = 6 }
				NOT = { trait = patient }
			}
			character_event = { id = HFP.20664 days = 50 random = 50 } #Become patient.
		}
		1 = { 
			trigger = { 
				NOR = { 
					trait = stressed
					trait = depressed
					trait = wroth
				}
				NOT = { personality_traits = 6 }
				NOT = { trait =	content }
				NOT = { trait =	ambitious }
			}
			character_event = { id = HFP.20665 days = 50 random = 50 } #Become content.
		}
	}
}

random_antagonizer_slander_roll_effect = { 
	random_list = { 
		75 = { #Nothing
			modifier = { 
				factor = 0.75
				FROM = { 
					attribute_diff = { character = ROOT attribute = intrigue  value = 4 }
				} 
			}
			modifier = { 
				factor = 0.75
				FROM = { 
					attribute_diff = { character = ROOT attribute = intrigue  value = 6 }
				} 
			}
			modifier = { 
				factor = 0.5
				FROM = { 
					attribute_diff = { character = ROOT attribute = intrigue  value = 8 }
				} 
			}
			modifier = { 
				factor = 0.5
				FROM = { 
					attribute_diff = { character = ROOT attribute = intrigue  value = 10 }
				} 
			}
		}
		25 = { #Bonus event
			modifier = { 
				factor = 0.5
				NOR = { 
					trait = stressed
					trait = depressed
				} 
				opinion = { who = FROM value = 20 } 
			}
			modifier = { 
				factor = 0.1
				FROM = { 
					has_character_flag = flag_antagonize_slander_generic 
				} 
			}
			modifier = { 
				factor = 1.5
				FROM = { 
					has_character_flag = flag_antagonize_slander_intrigue 
				} 
			}
			modifier = { 
				factor = 1.5
				FROM = { 
					intrigue = 15
				} 
			}
			modifier = { 
				factor = 1.5
				FROM = { 
					intrigue = 18
				} 
			}
			modifier = { 
				factor = 1.5
				FROM = { 
					intrigue = 21
				} 
			}
			modifier = { 
				factor = 1.5
				FROM = { 
					intrigue = 25
				} 
			}
			modifier = { 
				factor = 1.75
				FROM = { 
					intrigue = 30
				} 
			}
			random_antagonizer_slander_effect = yes
		}
	}
}
random_antagonizer_slander_effect = { #Chance of this effect firing is tied to the Antagonizer's intrigue.
	#Gain rival.
	#Rival of target becomes friend.
	#Prestige from antagonizing a higher tier ruler.
	#Appeased's Claimant moves to court.
	#Prestige loss.
	#Piety loss.
	#Sanity loss.
	#Evil Antagonized losing depressed. 
	#Evil Antagonized losing Stressed.
	#Evil Antagonized gaining Diplomacy modifier (happy disposition).
	#Evil Antagonized gaining Intrigue.
	#Evil Antagonized gaining Deceitful.
	#Evil Antagonized gaining Patient.





	random_list = { 
		35 = {
			trigger = { 
				NOT = { 
					persistent_event_target:antagonize_target = { 
						opinion = { 
							who = FROM 
							value = 10 
						} 
					} 
				} 
			}
			modifier = { 
				factor = 0
				FROM = { 
					persistent_event_target:antagonize_target = { 
						is_rival = FROM 
					} 
				} 
			}
			modifier = { 
				factor = 1.25
				FROM = { 
					persistent_event_target:antagonize_target = { 
						NOT = { 
							opinion = { 
								who = FROM 
								value = -10 
							} 
						} 
					} 
				} 
			}
			modifier = { 
				factor = 1.5
				FROM = { 
					persistent_event_target:antagonize_target = { 
						NOT = { 
							opinion = { 
								who = FROM 
								value = -30 
							} 
						} 
					} 
				} 
			}
			modifier = { 
				factor = 1.5
				FROM = { 
					persistent_event_target:antagonize_target = { 
						NOT = { 
							opinion = { 
								who = FROM 
								value = -50 
							} 
						} 
					} 
				} 
			}
			modifier = { 
				factor = 1.75
				FROM = { 
					persistent_event_target:antagonize_target = { 
						NOT = { 
							opinion = { 
								who = FROM 
								value = -70 
							} 
						} 
					} 
				} 
			}
			FROM = { persistent_event_target:antagonize_target = { character_event = { id = HF.22030 days = 15 } } } #Antagonized gets the event.
		}
		25 = {
			modifier = { 
				factor = 0
				NOT = { 
					FROM = { 
						persistent_event_target:antagonize_target = { 
							any_realm_character = { 
								age = 14
								NOR = {
									trait = incapable
									is_rival = PREVPREV 
								} 
								NOT = { 
									opinion = { 
										who = PREV 
										value = -20 
									} 
								} 
							} 
						} 
					} 
				} 
			}
			FROM = { 
				persistent_event_target:antagonize_target = { 
					random_realm_character = { 
						limit = { 
							age = 14
							NOR = {
								trait = incapable
								is_rival = PREVPREV 
							}
							NOT = { 
								opinion = { 
									who = PREV 
									value = -20 
								} 
							}
						}
						character_event = { id = HF.22032 days = 15 } #Third party notified.
					} 
				} 
			} 
		}
		25 = {
			modifier = { 
				factor = 0
				FROM = { 
					persistent_event_target:antagonize_target = { 
						lower_tier_than = FROM
					} 
				} 
			}
			modifier = { 
				factor = 1.75
				FROM = { 
					lower_tier_than = KING
					persistent_event_target:antagonize_target = { 
						higher_tier_than = DUKE
					} 
				} 
			}
			FROM = { character_event = { id = HF.22035 days = 15 } } #Antagonizer gets the event.
		}
		5 = {
			FROM = { character_event = { id = HF.22042 days = 15 } } #Antagonizer gets the event. - Prestige loss for Antagonized.
		}
		5 = {
			FROM = { character_event = { id = HF.22044 days = 15 } } #Antagonizer gets the event. - Piety loss for Antagonized.
		}
		5 = {
			FROM = { character_event = { id = HF.22046 days = 15 } } #Antagonizer gets the event. - Opinion loss for Antagonized.
		}
		1 = {
			modifier = { 
				factor = 0
				persistent_event_target:antagonize_target = { 
					NOT = { trait = depressed } 
				} 
			}
			FROM = { character_event = { id = HF.22048 days = 15 } } #Antagonizer gets the event. - Sanity loss for Depressed Antagonized.
		}
		25 = {
			modifier = { 
				factor = 0
				NOT = { 
					age = 14
					is_ruler = no
					any_claim = { holder_scope = { character = ROOT } }
					NOR = {
						any_spouse = { is_ruler = yes }
						host = { character = FROM }
						is_rival = FROM
						trait = incapable
						persistent_event_target:antagonize_target = { current_heir = { character = PREVPREV } }
					}
					NOT = { 
						opinion = { 
							who = ROOT
							value = -20 
						} 
					}
					opinion = { 
						who = FROM
						value = 10 
					} 
				} 
			}
			random_character = {
				limit = { 
					age = 14
					is_ruler = no
					any_claim = { holder_scope = { character = ROOT } }
					NOR = {
						any_spouse = { is_ruler = yes }
						host = { character = FROM }
						is_rival = FROM
						trait = incapable
						persistent_event_target:antagonize_target = { current_heir = { character = PREVPREV } }
					}
					NOT = { 
						opinion = { 
							who = ROOT
							value = -20 
						} 
					}
					opinion = { 
						who = FROM
						value = 10 
					}  
				}
				character_event = { id = HF.22036 days = 15 } #Claimant notified.
			} 
		}
		5 = {
			trigger = { 

				FROM = { 
					OR = { 
						trait = impaler
						trait = cruel 
						trait = arbitrary
						trait = deceitful
						trait = envious
						trait = ruthless
					}  
				} 
				FROM = { trait = depressed }
			}
			FROM = { character_event = { id = HF.22113 days = 15 } } #Evil Antagonized loses depressed.
		}
		5 = {
			trigger = { 

				FROM = { 
					OR = { 
						trait = impaler 
						trait = cruel 
						trait = arbitrary
						trait = deceitful
						trait = envious
						trait = ruthless
					}  
				} 
				FROM = { trait = stressed }
			}
			FROM = { character_event = { id = HF.22114 days = 15 } } #Evil Antagonized loses stressed.
		}
		5 = {
			trigger = { 

				FROM = { 
					OR = { 
						trait = impaler
						trait = cruel 
						trait = arbitrary
						trait = deceitful
						trait = envious
						trait = ruthless
					}  
					NOR = { 
						trait = stressed 
						trait = depressed
					}  
				} 
				FROM = { NOT = { has_character_modifier = antagonizer_good_mood } }
			}
			FROM = { character_event = { id = HF.22115 days = 15 } } #Evil Antagonized gains Diplomacy modifier.
		}
		1 = {
			trigger = { 
				FROM = { 
					OR = { 
						trait = impaler
						trait = cruel 
						trait = arbitrary
						trait = deceitful
						trait = envious
						trait = ruthless
					}  
				} 
			}
			FROM = { character_event = { id = HF.22116 days = 15 } } #Evil Antagonized gains Intrigue.
		}
		3 = {
			trigger = { 
				FROM = { 
					OR = { 
						trait = impaler
						trait = cruel 
						trait = arbitrary
						trait = envious
						trait = ruthless
					}  
					NOT = { 
						trait = deceitful
					}  
				} 
			}
			FROM = { character_event = { id = HF.22117 days = 15 } } #Evil Antagonized gains Deceitful/loses Honest.
		}
		5 = {
			trigger = { 
				FROM = { 
					OR = { 
						trait = impaler
						trait = cruel 
						trait = arbitrary
						trait = deceitful
						trait = envious
						trait = ruthless
					}  
					NOT = { 
						trait = patient
					} 
				} 
				NOR = { 
					trait = patient
					diplomacy = 12
				} 
			}
			FROM = { character_event = { id = HF.22118 days = 15 } } #Evil Antagonized gains Patient/loses Wroth.
		}
	#	5 = {
	#		modifier = { 
	#			factor = 0
	#			FROM = { 
	#				any_claim = { 
	#					holder_scope = { 
	#						character = ROOT
	#					} 
	#				} 
	#			} 
	#		}
	#		modifier = { #Only against dangerous Antagonize targets.
	#			factor = 0
	#			persistent_event_target:antagonize_target = { 
	#				lower_tier_than = FROM 
	#			} 
	#		}
	#		modifier = { #Only against dangerous Antagonize targets.
	#			factor = 0.25
	#			persistent_event_target:antagonize_target = { 
	#				prestige = 500
	#			} 
	#		}
	#		modifier = { #Needs to be hated already. The Antagonizer should receive the claim only if the Antagonized is already mad at him and is a more powerful ruler.
	#			factor = 0
	#			persistent_event_target:antagonize_target = { 
	#				opinion = { 
	#					who = FROM
	#					value = 10 
	#				}  
	#			} 
	#		}
	#		FROM = { character_event = { id = HF.22038 days = 15 } } #Antagonizer gets the claim.
	#	}
	}
}

select_and_save_fellow_society_member_effect = { #[Runs for ROOT]
	### Scripted triggers involved:
	# block_general_event_trigger	- NOTE, if you want to reuse this and allow children be selected, this blocks it
	
	# root_has_terrible_opinion_modifier_of_this_trigger	- To not select folks that have HATRED between them...
	# this_has_terrible_opinion_modifier_of_root_trigger
	
	# root_potentially_platonically_interested_in_this_trigger	- In the best case, selects characters that have shared POSITIVE experiences...
	# potentially_platonically_interested_in_root_trigger
	# current_scope_and_root_make_sense_as_friendlies_trigger

	random_society_member = { #Worst case scenario...
        limit = { 
            same_society_as = ROOT
            NOT = { character = ROOT }
            prisoner = no
        }
        save_event_target_as = fellow_member
    }
    random_society_member = { #Second worst, etc...
        limit = { 
            same_society_as = ROOT
            NOT = { character = ROOT }
            prisoner = no
        }
        save_event_target_as = fellow_member
    }
    random_society_member = {
        limit = { 
            same_society_as = ROOT
            NOT = { character = ROOT }
            block_general_event_trigger = no
            root_has_terrible_opinion_modifier_of_this_trigger = no
        }
        save_event_target_as = fellow_member
    }
    random_society_member = {
        limit = { 
            same_society_as = ROOT
            NOT = { character = ROOT }
            block_general_event_trigger = no
            this_has_terrible_opinion_modifier_of_root_trigger = no
        }
        save_event_target_as = fellow_member
    }
    random_society_member = {
        limit = { 
            same_society_as = ROOT
            NOT = { character = ROOT }
            block_general_event_trigger = no
            root_has_terrible_opinion_modifier_of_this_trigger = no
            this_has_terrible_opinion_modifier_of_root_trigger = no
        }
        save_event_target_as = fellow_member
    }
    random_society_member = {
        limit = { 
            same_society_as = ROOT
            NOT = { character = ROOT }
            block_general_event_trigger = no
            root_potentially_platonically_interested_in_this_trigger = yes
        }
        save_event_target_as = fellow_member
    }
    random_society_member = {
        limit = { 
            same_society_as = ROOT
            NOT = { character = ROOT }
            block_general_event_trigger = no
            potentially_platonically_interested_in_root_trigger = yes
        }
        save_event_target_as = fellow_member
    }
    random_society_member = { #Best case scenario...
        limit = { 
            same_society_as = ROOT
            NOT = { character = ROOT }
            block_general_event_trigger = no
            current_scope_and_root_make_sense_as_friendlies_trigger = yes
        }
        save_event_target_as = fellow_member
    }
}

add_warrior_lodge_leader_trait_effect = {
	trigger_switch = {
		on_trigger = society_member_of
		warrior_lodge_norse = {
			add_trait = norse_leader
		}
		warrior_lodge_tengri = {
			add_trait = tengri_leader
		}
		warrior_lodge_baltic = {
			add_trait = baltic_leader
		}
		warrior_lodge_finnish = {
			add_trait = finnish_leader
		}
		warrior_lodge_slavic = {
			add_trait = slavic_leader
		}
		warrior_lodge_west_african = {
			add_trait = west_african_leader
		}
		warrior_lodge_zun = {
			add_trait = zun_leader
		}
		warrior_lodge_bon = {
			add_trait = bon_leader
		}
		warrior_lodge_hellenic = {
			add_trait = hellenic_leader
		}
	}
}
fire_haruspicy_event_effect = {
	hidden_tooltip = { #Divination.
		if = {
			limit = { 
				attacker = {
					has_religion_feature = religion_haruspicy 
				} 
			}
			attacker = {  
				character_event = { id = HF.23005 }
			}
		}
		if = {
			limit = { 
				defender = { 
					has_religion_feature = religion_haruspicy 
				} 
			}
			defender = {  
				character_event = { id = HF.23005 }
			}
		}
	}
}

remove_opinions_with_prison_reason_effect = {
	#Removes the specified opinion about "who" (PREV), from current scope
	#NOTE: If you add a new opinion with "prison_reason" to the game, add it here, too!
	remove_opinion = { modifier = opinion_dishonorable who = PREV }
	remove_opinion = { modifier = opinion_traitor who = PREV }
	remove_opinion = { modifier = opinion_rebel_traitor who = PREV }
	#remove_opinion = { modifier = opinion_regicide_traitor who = PREV }
	#remove_opinion = { modifier = attempted_murder_of_spouse who = PREV }
	#remove_opinion = { modifier = attempted_murder_of_child who = PREV }
	#remove_opinion = { modifier = attempted_murder_of_parent who = PREV }
	#remove_opinion = { modifier = attempted_murder_of_sibling who = PREV }
	remove_opinion = { modifier = attempted_murder_of_vassal who = PREV }
	#remove_opinion = { modifier = attempted_murder_of_spouse_vassal who = PREV }
	remove_opinion = { modifier = attempted_murder who = PREV }
	remove_opinion = { modifier = opinion_spouse_slayer who = PREV }
	#remove_opinion = { modifier = opinion_murder_attempt who = PREV }
	#remove_opinion = { modifier = opinion_killed_close_kin who = PREV }
	#remove_opinion = { modifier = opinion_killed_father who = PREV }
	#remove_opinion = { modifier = opinion_hajj_attempt_murder who = PREV }
	#remove_opinion = { modifier = opinion_fatwa_target who = PREV }
	remove_opinion = { modifier = opinion_refused_order who = PREV }
	remove_opinion = { modifier = opinion_castrated_me who = PREV }
	remove_opinion = { modifier = opinion_blinded_me who = PREV }
	remove_opinion = { modifier = opinion_castrated_family who = PREV }
	remove_opinion = { modifier = opinion_castrated_close_kin who = PREV }
	remove_opinion = { modifier = opinion_blinded_family who = PREV }
	remove_opinion = { modifier = opinion_blinded_close_kin who = PREV }
	remove_opinion = { modifier = opinion_witch who = PREV }
	#remove_opinion = { modifier = opinion_takfir who = PREV }
	remove_opinion = { modifier = opinion_attempted_abduction who = PREV }
	remove_opinion = { modifier = opinion_unfaithful_wife who = PREV }
	#remove_opinion = { modifier = opinion_unfaithful_husband_crime who = PREV }
	remove_opinion = { modifier = opinion_cuckolded who = PREV }
	remove_opinion = { modifier = opinion_killed_lover who = PREV }
	remove_opinion = { modifier = opinion_charge_heresiarch who = PREV }
	remove_opinion = { modifier = opinion_charge_infidel who = PREV }
	remove_opinion = { modifier = opinion_charge_deviant who = PREV }
	remove_opinion = { modifier = opinion_charge_illegitimate who = PREV }
	remove_opinion = { modifier = opinion_charge_cultist who = PREV }
	remove_opinion = { modifier = opinion_charge_dw who = PREV }
	remove_opinion = { modifier = opinion_charge_traitor who = PREV }
	remove_opinion = { modifier = opinion_charge_slanderer who = PREV }
	remove_opinion = { modifier = abuse_of_office who = PREV }
	remove_opinion = { modifier = opinion_tortured_me who = PREV }
	remove_opinion = { modifier = opinion_tortured_family who = PREV }
	remove_opinion = { modifier = opinion_tortured_close_kin who = PREV }
	remove_opinion = { modifier = opinion_mutilated_me who = PREV }
	remove_opinion = { modifier = opinion_mutilated_family who = PREV }
	remove_opinion = { modifier = opinion_mutilated_close_kin who = PREV }
	remove_opinion = { modifier = opinion_thief who = PREV }
	remove_opinion = { modifier = opinion_outlawed_society who = PREV }
	remove_opinion = { modifier = opinion_accused_apostate who = PREV }
	remove_opinion = { modifier = opinion_looted who = PREV }
	remove_opinion = { modifier = declared_war who = PREV }
	remove_opinion = { modifier = scheming_bastard who = PREV }
	remove_opinion = { modifier = opinion_corrupt who = PREV }
	remove_opinion = { modifier = suspect_of_murder who = PREV }
	remove_opinion = { modifier = accused_of_murder who = PREV }
	remove_opinion = { modifier = opinion_blackmailed who = PREV }
	remove_opinion = { modifier = opinion_forced_consort who = PREV }
	remove_opinion = { modifier = opinion_forced_wife_consort who = PREV }
	remove_opinion = { modifier = opinion_forced_relative_consort who = PREV }
	remove_opinion = { modifier = opinion_slandered who = PREV }
	remove_opinion = { modifier = opinion_humiliated_me who = PREV }
	remove_opinion = { modifier = opinion_humiliated_family who = PREV }
	remove_opinion = { modifier = opinion_humiliated_close_kin who = PREV }
	remove_opinion = { modifier = opinion_unjust_execution who = PREV }
	remove_opinion = { modifier = opinion_murdered_first_ranger who = PREV }
	remove_opinion = { modifier = opinion_flayed_kin who = PREV }
	remove_opinion = { modifier = opinion_flayed_lover who = PREV }
	remove_opinion = { modifier = opinion_flayed_friend who = PREV }
	remove_opinion = { modifier = opinion_flayed_child who = PREV }
	remove_opinion = { modifier = opinion_disinherited_me who = PREV }
	remove_opinion = { modifier = opinion_bastard_spawn who = PREV }
	remove_opinion = { modifier = opinion_disinherited_my_child who = PREV }
	remove_opinion = { modifier = opinion_conspired_against_me who = PREV }
	remove_opinion = { modifier = opinion_conspired_against_child who = PREV }
	remove_opinion = { modifier = opinion_ignored_my_judgement who = PREV }
	remove_opinion = { modifier = opinion_unfaithful_deceiver who = PREV }
	remove_opinion = { modifier = opinion_cuckolded_AGOT who = PREV }
	remove_opinion = { modifier = opinion_murderer who = PREV }
	remove_opinion = { modifier = opinion_prison_break who = PREV }
	remove_opinion = { modifier = opinion_attempted_prison_break who = PREV }
	remove_opinion = { modifier = opinion_vengeance who = PREV }
	remove_opinion = { modifier = opinion_stole_sword who = PREV }
	remove_opinion = { modifier = opinion_slaver who = PREV }
	remove_opinion = { modifier = opinion_castrated_son who = PREV }
	remove_opinion = { modifier = opinion_castrated_kin who = PREV }
	remove_opinion = { modifier = opinion_castrated_spouse who = PREV }
	remove_opinion = { modifier = opinion_blinded_child who = PREV }
	remove_opinion = { modifier = opinion_blinded_kin who = PREV }
	remove_opinion = { modifier = opinion_blinded_spouse who = PREV }
	remove_opinion = { modifier = opinion_tortured_kin who = PREV }
	remove_opinion = { modifier = opinion_tortured_lover who = PREV }
	remove_opinion = { modifier = opinion_tortured_friend who = PREV }
	remove_opinion = { modifier = opinion_forced_upon_me who = PREV }
	remove_opinion = { modifier = opinion_forced_upon_kin who = PREV }
	remove_opinion = { modifier = opinion_forced_upon_spouse who = PREV }
	remove_opinion = { modifier = opinion_forced_upon_lover who = PREV }
	remove_opinion = { modifier = opinion_forced_upon_friend who = PREV }
	remove_opinion = { modifier = opinion_raper who = PREV }
	remove_opinion = { modifier = opinion_scandalised_me who = PREV }
	remove_opinion = { modifier = opinion_scandalised_kin who = PREV }
	remove_opinion = { modifier = opinion_aborted_my_child who = PREV }
	remove_opinion = { modifier = declared_me_insane who = PREV }
	remove_opinion = { modifier = opinion_forced_marriage who = PREV }
	remove_opinion = { modifier = opinion_forced_marriage_child who = PREV }
	remove_opinion = { modifier = opinion_forced_marriage_kin who = PREV }
	remove_opinion = { modifier = opinion_forced_marriage_lover who = PREV }
	remove_opinion = { modifier = opinion_forced_marriage_friend who = PREV }
	remove_opinion = { modifier = opinion_exiled_me who = PREV }
	remove_opinion = { modifier = opinion_peasant_hunting who = PREV }
	remove_opinion = { modifier = opinion_assaulted_me who = PREV }
	remove_opinion = { modifier = opinion_executed_realm_character who = PREV }
	remove_opinion = { modifier = opinion_refused_prisoner_transfer who = PREV }
	remove_opinion = { modifier = opinion_unfaithful_consort who = PREV }
	remove_opinion = { modifier = opinion_slept_with_my_consort who = PREV }
	remove_opinion = { modifier = opinion_oubilette_me who = PREV }
	remove_opinion = { modifier = opinion_oubilette_kin who = PREV }
	remove_opinion = { modifier = opinion_oubilette_friend who = PREV }
	remove_opinion = { modifier = opinion_oubilette_lover who = PREV }
	remove_opinion = { modifier = opinion_fabricated_claim who = PREV }
	remove_opinion = { modifier = opinion_refused_to_marry who = PREV }
	remove_opinion = { modifier = opinion_piracy who = PREV }
	remove_opinion = { modifier = declared_war_on_tributary who = PREV }
	remove_opinion = { modifier = devious_plotter who = PREV }
	remove_opinion = { modifier = attempted_kidnapping who = PREV }
	remove_opinion = { modifier = attempted_kidnapping_of_kin  who = PREV }
	remove_opinion = { modifier = attempted_kidnapping_of_vassal who = PREV }
	remove_opinion = { modifier = attempted_murder_of_close_kin who = PREV }
	remove_opinion = { modifier = killed_vassal who = PREV }
	remove_opinion = { modifier = kidnapped_me who = PREV }
	remove_opinion = { modifier = opinion_kidnapped_kin who = PREV }
	remove_opinion = { modifier = coronation_rejected who = PREV }
	remove_opinion = { modifier = opinion_traitor_AGOT who = PREV }
	remove_opinion = { modifier = opinion_warden_no_defend who = PREV }
	remove_opinion = { modifier = opinion_enslaved_me who = PREV }
	remove_opinion = { modifier = opinion_enslaved_close_relative who = PREV }
	remove_opinion = { modifier = opinion_illegal_slave_trader who = PREV }
	remove_opinion = { modifier = opinion_slave_escaped who = PREV }
	remove_opinion = { modifier = opinion_stole_slave who = PREV }
}
randomize_ABC_desc_flag_effect = {
	# Actually, this is not needed, but won't remove for fear of breaking something.
	# Instead, to randomize descs, simply define (in the event), multiple descs.

	# Example below:
	# desc = text_1
	# desc = text_2
	# desc = text_3
	
	clr_ABC_desc_flag_effect = yes
	random_list = {
		10 = { set_character_flag = desc_A }
		10 = { set_character_flag = desc_B }
		10 = { set_character_flag = desc_C }
	}
}
clr_ABC_desc_flag_effect = {
	clr_character_flag = desc_A
	clr_character_flag = desc_B
	clr_character_flag = desc_C
}

#Find someone to reference... (event_target:my_beloved) 
# NOTE: might be platonic, children, etc
save_beloved_character_effect = {
	if = {
		limit = { #In case you have a spouse outside of your realm...
			is_married = yes
			any_spouse = {
				ROOT_possibly_romantically_interested_trigger = yes
				root_has_terrible_opinion_modifier_of_this_trigger = no
				is_landed = yes
			}
		}
		random_spouse = {
			limit = {
				ROOT_possibly_romantically_interested_trigger = yes
				root_has_terrible_opinion_modifier_of_this_trigger = no
				is_landed = yes
			}
			save_event_target_as = my_beloved
		}
	}
	else = { #In case you do not...
		any_courtier_or_vassal = {
			limit = {
				NOT = { character = event_target:enemy_commander }
				NOT = { character = event_target:enemy_liege }
			}
			score_value = { #Prioritizes selecting some kind of loved person...
                value = 1
                beloved_target_selection_score = yes
            }
			#Effect:
			save_event_target_as = my_beloved
		}
	}
}

child_of_destiny_journey_start_effect = {
	if = {
		limit = {
			has_global_flag = cod_test_values
		}
		character_event = { id = HF.210 days = 1 } # The journey begins... Test Value
	}
	else = {
		character_event = { id = HF.210 days = 200 random = 200 } # The journey begins...
	}
}

child_of_destiny_journey_resume_effect = {
	if = {
		limit = {
			has_global_flag = cod_test_values
		}
		character_event = { id = HF.210 days = 1 }  # Back to the journey tombola! Test Value
	}
	else = {
		character_event = { id = HF.210 days = 365 random = 500 } # Back to the journey tombola!
	}
}


pacifists_lose_piety_effect = {
	if = {
		limit = {
			OR = {
				AND = {
					religion = nath_pagan 
					NOT = {
						has_alternate_start_parameter = { key = religion_names value = random }
					}
				}	
				AND = {
					religion = nath_pagan_reformed
					NOT = { has_dlc = "Holy Fury" }
				}
				has_religion_feature = religion_peaceful
				has_religion_feature = religion_feature_nath_pagan
			}		
		}
		piety = -50
		custom_tooltip = { text = nath_pagan_ahimsa_tooltip }
	}
	else_if = {
		limit = {
			pacifist = yes
		}
		piety = -20
		custom_tooltip = { text = pacifist_alt_tooltip }
	}
}

#Current variable values: Scarred = 1, Very Scarred = 5, Horrifically Scarred = 10. To rebalance how quickly a character moves up from one to the other, just change the variable effects on all the following scripted_effects.
add_scarred_tiered_effect = {
	if = { 
		limit = { has_dlc = "Holy Fury" }
		hidden_tooltip = { change_variable = { which = scarred_variable value = 1 } } 
		if = {
			limit = {
				check_variable = { which = scarred_variable value = 1 }
				NOT = { check_variable = { which = scarred_variable value = 5 } } 
			}
			if = { 
				limit = { trait = scarred_mid } 
				remove_trait = scarred_mid 
			}
			if = { 
				limit = { trait = scarred_high } 
				remove_trait = scarred_high 
			}
			add_trait = scarred
		}
		if = {
			limit = {
				check_variable = { which = scarred_variable value = 5 }
				NOT = { check_variable = { which = scarred_variable value = 10 } } 
			}
			if = { 
				limit = { trait = scarred } 
				remove_trait = scarred
			}
			if = { 
				limit = { trait = scarred_high } 
				remove_trait = scarred_high 
			}
			add_trait = scarred_mid
		}
		if = {
			limit = {
				check_variable = { which = scarred_variable value = 10 }
			}
			if = { 
				limit = { trait = scarred_mid } 
				remove_trait = scarred_mid 
			}
			if = { 
				limit = { trait = scarred } 
				remove_trait = scarred 
			}			
			if = {
				limit = {
					NOT = { trait = scarred_high }
				}
				add_trait = scarred_high
			}
		}
	}
	else_if =  { 
		limit = { NOT = { has_dlc = "Holy Fury" } }
		add_trait = scarred
	}
	hidden_tooltip = {
		if = {
			limit = {
				NOR = { 
					trait = scarred_type_1
					trait = scarred_type_2
					trait = scarred_type_3
					trait = scarred_type_4
					trait = scarred_type_5
					trait = scarred_type_6
					trait = scarred_type_7
					trait = scarred_type_8
					trait = scarred_type_9
					trait = scarred_type_10
				}
			}
			random_list = { 
				10 = { add_trait = scarred_type_1 } 
				10 = { add_trait = scarred_type_2 } 
				10 = { add_trait = scarred_type_3 } 
				10 = { add_trait = scarred_type_4 } 
				10 = { add_trait = scarred_type_5 } 
				10 = { add_trait = scarred_type_6 } 
				10 = { add_trait = scarred_type_7 } 
				10 = { add_trait = scarred_type_8 } 
				10 = { add_trait = scarred_type_9 } 
				10 = { add_trait = scarred_type_10 }
			}
		}
	}
}

add_scarred_medium_effect = {
	if = { 
		limit = { has_dlc = "Holy Fury" }
	hidden_tooltip = { set_variable = { which = scarred_variable value = 5 } }
		if = {
			limit = {
				check_variable = { which = scarred_variable value = 5 }
				NOT = { check_variable = { which = scarred_variable value = 10 } } 
			}
			if = { 
				limit = { trait = scarred_high } 
				remove_trait = scarred_high 
			}
			if = { 
				limit = { trait = scarred } 
				remove_trait = scarred
			}
			add_trait = scarred_mid
		}
	}
	else_if =  { 
		limit = { NOT = { has_dlc = "Holy Fury" } }
		add_trait = scarred
	}
	hidden_tooltip = { 
		if = {
			limit = {
				NOR = { 
					trait = scarred_type_1
					trait = scarred_type_2
					trait = scarred_type_3
					trait = scarred_type_4
					trait = scarred_type_5
					trait = scarred_type_6
					trait = scarred_type_7
					trait = scarred_type_8
					trait = scarred_type_9
					trait = scarred_type_10
				}
			}
			random_list = { 
				10 = { add_trait = scarred_type_1 } 
				10 = { add_trait = scarred_type_2 } 
				10 = { add_trait = scarred_type_3 } 
				10 = { add_trait = scarred_type_4 } 
				10 = { add_trait = scarred_type_5 } 
				10 = { add_trait = scarred_type_6 } 
				10 = { add_trait = scarred_type_7 } 
				10 = { add_trait = scarred_type_8 } 
				10 = { add_trait = scarred_type_9 } 
				10 = { add_trait = scarred_type_10 }
			}
		}
	}
}
add_scarred_high_effect = {
	if = { 
		limit = { has_dlc = "Holy Fury" }
	hidden_tooltip = { set_variable = { which = scarred_variable value = 10 } } 
		if = {
			limit = {
				check_variable = { which = scarred_variable value = 10 }
			}
			if = { 
				limit = { trait = scarred } 
				remove_trait = scarred
			}
			if = { 
				limit = { trait = scarred_mid } 
				remove_trait = scarred_mid
			}
			add_trait = scarred_high
		}
	}
	else_if =  { 
		limit = { NOT = { has_dlc = "Holy Fury" } }
		add_trait = scarred
	}
	hidden_tooltip = { 
		if = {
			limit = {
				NOR = { 
					trait = scarred_type_1
					trait = scarred_type_2
					trait = scarred_type_3
					trait = scarred_type_4
					trait = scarred_type_5
					trait = scarred_type_6
					trait = scarred_type_7
					trait = scarred_type_8
					trait = scarred_type_9
					trait = scarred_type_10
				}
			}
			random_list = { 
				10 = { add_trait = scarred_type_1 } 
				10 = { add_trait = scarred_type_2 } 
				10 = { add_trait = scarred_type_3 } 
				10 = { add_trait = scarred_type_4 } 
				10 = { add_trait = scarred_type_5 } 
				10 = { add_trait = scarred_type_6 } 
				10 = { add_trait = scarred_type_7 } 
				10 = { add_trait = scarred_type_8 } 
				10 = { add_trait = scarred_type_9 } 
				10 = { add_trait = scarred_type_10 }
			}
		}
	}
}

add_scarred_start_effect = {
	if = { 
		limit = { has_dlc = "Holy Fury" }
		if = {
			limit = {
				trait = scarred
			}
			change_variable = { which = scarred_variable value = 1 }
		}
		if = {
			limit = {
				trait = scarred_mid
			}
			change_variable = { which = scarred_variable value = 5 }
		}
		if = {
			limit = {
				trait = scarred_high
			}
			change_variable = { which = scarred_variable value = 10 }
		}
	}
	else_if =  { 
		limit = { NOT = { has_dlc = "Holy Fury" } }
		add_trait = scarred
	}
	hidden_tooltip = { 
		if = {
			limit = {
				NOR = { 
					trait = scarred_type_1
					trait = scarred_type_2
					trait = scarred_type_3
					trait = scarred_type_4
					trait = scarred_type_5
					trait = scarred_type_6
					trait = scarred_type_7
					trait = scarred_type_8
					trait = scarred_type_9
					trait = scarred_type_10
				}
			}
			random_list = { 
				10 = { add_trait = scarred_type_1 } 
				10 = { add_trait = scarred_type_2 } 
				10 = { add_trait = scarred_type_3 } 
				10 = { add_trait = scarred_type_4 } 
				10 = { add_trait = scarred_type_5 } 
				10 = { add_trait = scarred_type_6 } 
				10 = { add_trait = scarred_type_7 } 
				10 = { add_trait = scarred_type_8 } 
				10 = { add_trait = scarred_type_9 } 
				10 = { add_trait = scarred_type_10 }
			}
		}
	}
}

add_blood_splatter_effect = {
	hidden_tooltip = { 
		if = {
			limit = {
				has_character_modifier = blood_splatter_3
			}
			remove_character_modifier = blood_splatter_3
			add_character_modifier = { modifier = blood_splatter_3 months = 5 hidden = yes }
		}
		else_if = {
			limit = {
				OR = { 
					has_character_modifier = blood_splatter_1
					has_character_modifier = blood_splatter_2
				}
			}
			remove_character_modifier = blood_splatter_1
			remove_character_modifier = blood_splatter_2
			add_character_modifier = { modifier = blood_splatter_3 months = 5 hidden = yes }
		}
		else_if = {
			limit = {
				NOR = { 
					has_character_modifier = blood_splatter_1
					has_character_modifier = blood_splatter_2
					has_character_modifier = blood_splatter_3
				}
			}
			random_list = { 
				50 = { add_character_modifier = { modifier = blood_splatter_1 months = 5 hidden = yes } }
				40 = { add_character_modifier = { modifier = blood_splatter_2 months = 5 hidden = yes } }
				10 = { add_character_modifier = { modifier = blood_splatter_3 months = 5 hidden = yes } }
			}
		}
	}
}

reset_flag_lifestyle_sway_event_effect = {
	clr_character_flag = lifestyle_event_successful
	clr_character_flag = lifestyle_event_unsuccessful
	clr_character_flag = sway_hunting
	clr_character_flag = sway_dueling
	clr_character_flag = sway_game
	clr_character_flag = sway_social
	clr_character_flag = sway_scholar
	clr_character_flag = sway_steward
	clr_character_flag = sway_torture
}

apply_cosmopolian_on_start_effect = {
	religion_authority = {
		modifier = cosmopolitan_religion
		years = 1000
	}
	any_playable_ruler = { 
		limit = { NOT = { distance_from_realm = { who = ROOT value = 1000 } } }
		add_intermarry = ROOT
		ROOT = { add_intermarry = PREV }
	}
	any_neighbor_independent_ruler = { 
		add_intermarry = ROOT
		ROOT = { add_intermarry = PREV }
	}
}
apply_dogmatic_on_start_effect = {
	religion_authority = {
		modifier = dogmatic_religion
		years = 1000
	}
	remove_intermarry = the_seven
	remove_intermarry = old_gods_reformed
	remove_intermarry = old_gods
	remove_intermarry = beyond_wall_old_gods_reformed
	remove_intermarry = beyond_wall_old_gods
	remove_intermarry = mountain_old_gods
	remove_intermarry = thenn_rel
	remove_intermarry = drowned_god_reformed
	remove_intermarry = drowned_god
	remove_intermarry = storm_god
	remove_intermarry = rhllor
	remove_intermarry = black_goat_reformed
	remove_intermarry = black_goat
	remove_intermarry = gods_lorath_reformed
	remove_intermarry = gods_lorath
	remove_intermarry = moonsingers_reformed
	remove_intermarry = moonsingers
	remove_intermarry = trios_reformed
	remove_intermarry = trios
	remove_intermarry = bearded_priests
	remove_intermarry = many_faced_god
	remove_intermarry = father_of_waters_reformed
	remove_intermarry = father_of_waters
	remove_intermarry = rhoynar_pagan_reformed
	remove_intermarry = rhoynar_pagan
	remove_intermarry = boash_reformed 
	remove_intermarry = boash
	remove_intermarry = weeping_lady_reformed
	remove_intermarry = weeping_lady
	remove_intermarry = valyrian_rel_reformed
	remove_intermarry = valyrian_rel
	remove_intermarry = dragon_rel
	remove_intermarry = gods_sarnor_reformed
	remove_intermarry = gods_sarnor
	remove_intermarry = qarth_warlocks
	remove_intermarry = harpy_reformed
	remove_intermarry = harpy
	remove_intermarry = lady_of_spears
	remove_intermarry = yiti_gods_reformed
	remove_intermarry = yiti_gods
	remove_intermarry = lion_night_reformed
	remove_intermarry = lion_night
	remove_intermarry = starry_wisdom
	remove_intermarry = old_ones
	remove_intermarry = shadowbinders_reformed
	remove_intermarry = shadowbinders
	remove_intermarry = gods_bone_mountains_reformed
	remove_intermarry = gods_bone_mountains
	remove_intermarry = gods_nghai_reformed
	remove_intermarry = gods_nghai
	remove_intermarry = stone_cow_reformed
	remove_intermarry = stone_cow
	remove_intermarry = gods_ibben
	remove_intermarry = dothraki_pagan
	remove_intermarry = jogos_pagan_reformed
	remove_intermarry = jogos_pagan
	remove_intermarry = great_shepherd_reformed
	remove_intermarry = great_shepherd
	remove_intermarry = pagan
	remove_intermarry = aztec_reformed
	remove_intermarry = aztec
	remove_intermarry = summer_rel_reformed
	remove_intermarry = summer_rel
	remove_intermarry = nath_pagan_reformed
	remove_intermarry = nath_pagan
	remove_intermarry = pirate
	remove_intermarry = lady_of_the_waves_reformed
	remove_intermarry = lady_of_the_waves
	remove_intermarry = corsair
	remove_intermarry = cold_gods
	remove_intermarry = fish_gods
	remove_intermarry = sothoryos_rel
	
	remove_intermarry = westerosi_religion
	remove_intermarry = wildling_religion
	remove_intermarry = drowned_god_group
	remove_intermarry = essos_group
	remove_intermarry = valyrian_rel_group
	remove_intermarry = dragon_rel_group
	remove_intermarry = sarnor_rel
	remove_intermarry = qarth_rel
	remove_intermarry = ghiscar_rel
	remove_intermarry = far_east_group
	remove_intermarry = ibben_rel
	remove_intermarry = dothraki_rel_group
	remove_intermarry = jogos_rel_group
	remove_intermarry = lhazar_rel_group
	remove_intermarry = pagan_group
	remove_intermarry = summer_rel_group
	remove_intermarry = pirate_group
	remove_intermarry = corsair_group
	remove_intermarry = winter_religion
	remove_intermarry = islands_rel
}
bloodthirsty_tiered_traits_effect = {
	hidden_effect = {
		change_variable = { which = burned_hearts_points value = 1 }
		if = { #Tier 1
			limit = {
				check_variable = { which = burned_hearts_points value = 10 }
				NOR = { 
					trait = bloodthirsty_gods_1
					trait = bloodthirsty_gods_2
					trait = bloodthirsty_gods_3
					has_character_modifier = bloodthirsty_gods_exp_cooldown
				}
			}
			character_event = { id = HF.23431 days = 6 } #Notify and assign trait.
			add_character_modifier = { name = bloodthirsty_gods_exp_cooldown days = 12 hidden = yes } #Prevent event cascade.
		}
		if = { #Tier 2
			limit = {
				check_variable = { which = burned_hearts_points value = 50 }
				trait = bloodthirsty_gods_1
				NOR = { 
					trait = bloodthirsty_gods_2
					trait = bloodthirsty_gods_3
					has_character_modifier = bloodthirsty_gods_exp_cooldown
				}
			}
			character_event = { id = HF.23432 days = 6 } #Notify and assign trait.
			add_character_modifier = { name = bloodthirsty_gods_exp_cooldown days = 12 hidden = yes } #Prevent event cascade.
		}
		if = { #Tier 3
			limit = {
				check_variable = { which = burned_hearts_points value = 100 }
				trait = bloodthirsty_gods_2
				NOR = { 
					trait = bloodthirsty_gods_3
					has_character_modifier = bloodthirsty_gods_exp_cooldown
				}
			}
			character_event = { id = HF.23433 days = 6 } #Notify and assign trait.
			add_character_modifier = { name = bloodthirsty_gods_exp_cooldown days = 12 hidden = yes } #Prevent event cascade.
		}
		if = { #Bloodline.
			limit = {
				check_variable = { which = burned_hearts_points value = 200 }
				trait = bloodthirsty_gods_3
				is_ruler = yes
				is_playable = yes
				NOR = { 
					trait = kind 
					trait = honorable
					has_character_modifier = bloodthirsty_gods_exp_cooldown
					any_owned_bloodline = { # Not already has a Bloodthirsty bloodline.
						has_bloodline_flag = bloodline_created_bloodthirsty
					}
				}
			}
			character_event = { id = HF.23434 days = 6 } #Notify and assign trait.
			add_character_modifier = { name = bloodthirsty_gods_exp_cooldown days = 12 hidden = yes } #Prevent event cascade.
		}
	}
}

add_random_tattoo_effect = { #Tied to religion, used only for special events.
	if = { 
		limit = { 
			culture_group = free_folk
			NOR = { 
				trait = african_tattoo_1
				trait = african_tattoo_2
				trait = african_tattoo_3
				trait = african_tattoo_4
				trait = african_tattoo_5
				trait = african_tattoo_6
				trait = african_tattoo_7
				trait = african_tattoo_8
				trait = african_tattoo_9
				trait = african_tattoo_10
				trait = african_tattoo_11
				trait = african_tattoo_12
				trait = slavic_tattoo_1
				trait = slavic_tattoo_2
				trait = slavic_tattoo_3
				trait = slavic_tattoo_4
				trait = slavic_tattoo_5
				trait = slavic_tattoo_6
				trait = norse_tattoo_1
				trait = norse_tattoo_2
				trait = norse_tattoo_3
				trait = norse_tattoo_4
				trait = norse_tattoo_5
				trait = norse_tattoo_6
			}
		}
		random_list = { 
			50 = { add_trait = norse_tattoo_1 }
			50 = { add_trait = norse_tattoo_2 }
			40 = { add_trait = norse_tattoo_3 }
			30 = { add_trait = norse_tattoo_4 }
			20 = { add_trait = norse_tattoo_5 }
			10 = { add_trait = norse_tattoo_6 } 
			50 = { add_trait = african_tattoo_1 }
			40 = { add_trait = african_tattoo_2 }
			40 = { add_trait = african_tattoo_3 }
			30 = { add_trait = african_tattoo_4 }
			30 = { add_trait = african_tattoo_5 }
			20 = { add_trait = african_tattoo_6 }
			20 = { add_trait = african_tattoo_7 }
			10 = { add_trait = african_tattoo_8 } 
			6 = { add_trait = african_tattoo_9 } 
			4 = { add_trait = african_tattoo_10 } 
			2 = { add_trait = african_tattoo_11 } 
			1 = { add_trait = african_tattoo_12 } 
			50 = { add_trait = slavic_tattoo_1 }
			50 = { add_trait = slavic_tattoo_2 }
			40 = { add_trait = slavic_tattoo_3 }
			30 = { add_trait = slavic_tattoo_4 }
			20 = { add_trait = slavic_tattoo_5 }
			10 = { add_trait = slavic_tattoo_6 } 
		}
	}
}

spawn_debutante_effect = {
	if = {
		limit = { 
			NOT = { enatic_culture_trigger = yes }
		}
		create_character = {
			random_traits = yes
			dynasty = culture
			female = yes
			age = 17
			historical = yes
		}
	}
	if = {
		limit = { 
			enatic_culture_trigger = yes
		}
		create_character = {
			random_traits = yes
			dynasty = culture
			female = no
			age = 17
			historical = yes
		}
	}	
	new_character = {	
		set_immune_to_pruning = yes
		set_character_flag = debutante
		remove_trait = slow
		remove_trait = imbecile
		remove_trait = dull
		character_event = { id = wildling.1 } #check for wildling trait
		character_event = { id = pirate.1 } #check for pirate trait
		if = {
			limit = { 
				culture = high_valyrian 
				has_game_rule = { name = high_valyrian_cull value = on }
				ROOT = { has_character_flag = western_valyrian }
			}
			culture = western_valyrian
		}
		if = {
			limit = { 
				culture = high_valyrian 
				has_game_rule = { name = high_valyrian_cull value = on }
				NOT = { ROOT = { has_character_flag = western_valyrian } }
			}
			culture = eastern_valyrian
		}
		if = {
			limit = { 
				culture_group = hyrkoon_group	
			}
			random_list = {
				33 = { 
					add_trait = strong
					remove_trait = weak
				}
				33 = { 
					add_trait = tall
					remove_trait = dwarf						
				}
				33 = { 
					add_trait = fair 
					remove_trait = ugly
				}
			}
		}
		set_character_flag = debutante
		save_event_target_as = invited_character
	}
}

transfer_crown_on_abdication_effect = {
	#Now transfer all other remaining artifacts to the player_heir, who may or may not be the current_heir.
	player_heir = { save_event_target_as = scoped_player_heir }
	any_artifact = { 
		limit = { 
			NOR = {
				artifact_type = crown_hre
				artifact_type = crown_byzantine 
				artifact_type = crown_pahlavi
				artifact_type = crown_fylkir
				artifact_type = crown_tengri_fylkir
				artifact_type = crown_slavic_fylkir
				artifact_type = crown_romuva_fylkir
				artifact_type = crown_finnish_fylkir
				artifact_type = crown_west_african_fylkir
				artifact_type = crown_zun_fylkir
				artifact_type = scepter_bon_fylkir 
				artifact_type = crown_aztec_fylkir
				artifact_type = scepter_hellenic_fylkir 
			}
		}
		transfer_artifact = {
			from = PREV
			to = event_target:scoped_player_heir
		}
	}
}

# Referenced by the "button_rename" button in the character view 
rename_character_effect = {
	prompt_name = {
		player = FROM
		type = RENAME_CHARACTER_MESSAGE
	}
}

warrior_lodge_pay_dice_debt_effect = {
	if = { 
		limit = { has_character_flag = flag_betting_money_1000 } 
		wealth = -1000
		if = { 
			limit = { event_target:random_society_winner = { is_alive = yes } } 
			event_target:random_society_winner = { wealth = 1000 }
		}
	}
	if = { 
		limit = { has_character_flag = flag_betting_money_500 } 
		wealth = -500
		if = { 
			limit = { event_target:random_society_winner = { is_alive = yes } } 
			event_target:random_society_winner = { wealth = 500 }
		}
	}
	if = { 
		limit = { has_character_flag = flag_betting_money_250 } 
		wealth = -250
		if = { 
			limit = { event_target:random_society_winner = { is_alive = yes } } 
			event_target:random_society_winner = { wealth = 250 }
		}
	}
	if = { 
		limit = { has_character_flag = flag_betting_money_200 } 
		wealth = -200
		if = { 
			limit = { event_target:random_society_winner = { is_alive = yes } } 
			event_target:random_society_winner = { wealth = 200 }
		}
	}
	if = { 
		limit = { has_character_flag = flag_betting_money_100 } 
		wealth = -100
		if = { 
			limit = { event_target:random_society_winner = { is_alive = yes } } 
			event_target:random_society_winner = { wealth = 100 }
		}
	}
	if = { 
		limit = { has_character_flag = flag_betting_money_50 } 
		wealth = -50
		if = { 
			limit = { event_target:random_society_winner = { is_alive = yes } } 
			event_target:random_society_winner = { wealth = 50 }
		}
	}
	if = { 
		limit = { has_character_flag = flag_betting_money_25 } 
		wealth = -25
		if = { 
			limit = { event_target:random_society_winner = { is_alive = yes } } 
			event_target:random_society_winner = { wealth = 25 }
		}
	}
	if = { 
		limit = { has_character_flag = flag_betting_money_20 } 
		wealth = -20
		if = { 
			limit = { event_target:random_society_winner = { is_alive = yes } } 
			event_target:random_society_winner = { wealth = 20 }
		}
	}
	if = { 
		limit = { has_character_flag = flag_betting_money_10 } 
		wealth = -10
		if = { 
			limit = { event_target:random_society_winner = { is_alive = yes } } 
			event_target:random_society_winner = { wealth = 10 }
		}
	}
}

warrior_lodge_get_dice_bet_effect = {
	if = { 
		limit = { has_character_flag = flag_betting_money_1000 } 
		wealth = 1000
	}
	if = { 
		limit = { has_character_flag = flag_betting_money_500 } 
		wealth = 500
	}
	if = { 
		limit = { has_character_flag = flag_betting_money_250 } 
		wealth = 250
	}
	if = { 
		limit = { has_character_flag = flag_betting_money_200 } 
		wealth = 200
	}
	if = { 
		limit = { has_character_flag = flag_betting_money_100 } 
		wealth = 100
	}
	if = { 
		limit = { has_character_flag = flag_betting_money_50 } 
		wealth = 50
	}
	if = { 
		limit = { has_character_flag = flag_betting_money_25 } 
		wealth = 25
	}
	if = { 
		limit = { has_character_flag = flag_betting_money_20 } 
		wealth = 20
	}
	if = { 
		limit = { has_character_flag = flag_betting_money_10 } 
		wealth = 10
	}
}

warrior_lodge_double_dice_bet_effect = {
	if = { 
		limit = { has_character_flag = flag_betting_money_500 } 
		clr_character_flag = flag_betting_money_500
		set_character_flag = flag_betting_money_1000
		custom_tooltip = { text = tooltip_betting_1000_gold } 
	}
	else_if = { 
		limit = { has_character_flag = flag_betting_money_250 } 
		clr_character_flag = flag_betting_money_250
		set_character_flag = flag_betting_money_500
		custom_tooltip = { text = tooltip_betting_500_gold }
	}
	else_if = { 
		limit = { has_character_flag = flag_betting_money_100 } 
		clr_character_flag = flag_betting_money_100
		set_character_flag = flag_betting_money_200
		custom_tooltip = { text = tooltip_betting_200_gold }
	}
	else_if = { 
		limit = { has_character_flag = flag_betting_money_50 } 
		clr_character_flag = flag_betting_money_50
		set_character_flag = flag_betting_money_100
		custom_tooltip = { text = tooltip_betting_100_gold }
	}
	else_if = { 
		limit = { has_character_flag = flag_betting_money_25 } 
		clr_character_flag = flag_betting_money_25
		set_character_flag = flag_betting_money_50
		custom_tooltip = { text = tooltip_betting_50_gold }
	}
	else_if = { 
		limit = { has_character_flag = flag_betting_money_10 } 
		clr_character_flag = flag_betting_money_10
		set_character_flag = flag_betting_money_20
		custom_tooltip = { text = tooltip_betting_20_gold }
	}
}
warrior_lodge_dice_game_cleanup_effect = {
	clr_character_flag = flag_betting_money_1000
	clr_character_flag = flag_betting_money_500
	clr_character_flag = flag_betting_money_250
	clr_character_flag = flag_betting_money_200
	clr_character_flag = flag_betting_money_100
	clr_character_flag = flag_betting_money_50
	clr_character_flag = flag_betting_money_25
	clr_character_flag = flag_betting_money_20
	clr_character_flag = flag_betting_money_10
	clr_character_flag = flag_betting_on_krita
	clr_character_flag = flag_betting_on_treta
	clr_character_flag = flag_betting_on_dwapara
	clr_character_flag = flag_betting_on_kali
	clr_character_flag = flag_warrior_lodge_die_is_krita
	clr_character_flag = flag_warrior_lodge_die_is_treta
	clr_character_flag = flag_warrior_lodge_die_is_dwapara
	clr_character_flag = flag_warrior_lodge_die_is_kali
}

this_is_becoming_grand_mistress_effect = { 
	custom_tooltip = { 
		text = tooltip_becoming_grand_mistress 
		hidden_tooltip = { change_variable = { which = becoming_grand_mistress value = 2 } }
	} 
}
this_is_becoming_iron_matron_effect = {
	custom_tooltip = { 
		text = tooltip_becoming_iron_matron 
		hidden_tooltip = { change_variable = { which = becoming_iron_matron value = 2 } }
	} 
}
this_is_becoming_virago_effect = {
	custom_tooltip = { 
		text = tooltip_becoming_virago 
		hidden_tooltip = { change_variable = { which = becoming_virago value = 2 } }
	}  
}

this_is_becoming_atoner_effect = {
	custom_tooltip = { 
		text = tooltip_becoming_atoner
		hidden_tooltip = { change_variable = { which = becoming_atoner value = 2 } }
	}  
}
this_is_becoming_manservant_effect = {
	custom_tooltip = { 
		text = tooltip_becoming_manservant 
		hidden_tooltip = { change_variable = { which = becoming_manservant value = 2 } }
	}  
}
this_is_becoming_stud_effect = {
	custom_tooltip = { 
		text = tooltip_becoming_stud
		hidden_tooltip = { change_variable = { which = becoming_stud value = 2 } }
	}  
}

this_is_becoming_grand_paramour_effect = {
	custom_tooltip = { 
		text = tooltip_becoming_grand_paramour 
		hidden_tooltip = { change_variable = { which = becoming_grand_paramour value = 2 } }
	} 
}
this_is_becoming_judicator_effect = {
	custom_tooltip = { 
		text = tooltip_becoming_judicator 
		hidden_tooltip = { change_variable = { which = becoming_judicator value = 2 } }
	} 
}
this_is_becoming_subjugator_effect = {
	custom_tooltip = { 
		text = tooltip_becoming_subjugator 
		hidden_tooltip = { change_variable = { which = becoming_subjugator value = 2 } }
	} 
}

this_is_becoming_prim_effect = {
	custom_tooltip = { 
		text = tooltip_becoming_prim
		hidden_tooltip = { change_variable = { which = becoming_prim value = 2 } }
	} 
}
this_is_becoming_doll_effect = {
	custom_tooltip = { 
		text = tooltip_becoming_doll
		hidden_tooltip = { change_variable = { which = becoming_doll value = 2 } }
	} 
}
this_is_becoming_breeder_effect = {
	custom_tooltip = { 
		text = tooltip_becoming_breeder
		hidden_tooltip = { change_variable = { which = becoming_breeder value = 2 } }
	} 
}
add_lots_thralls_capital_effect = { #MUST be used in a province scope.
	if = {
		limit = { 
			NOR = {
				has_province_modifier = capital_thrall_workers_01
				has_province_modifier = capital_thrall_workers_02
				has_province_modifier = capital_thrall_workers_03
				has_province_modifier = capital_thrall_workers_04
				has_province_modifier = capital_thrall_workers_05
				has_province_modifier = capital_thrall_workers_06
			}
		}
		hidden_tooltip = {
			remove_province_modifier = capital_thrall_workers_01
			remove_province_modifier = capital_thrall_workers_02
			remove_province_modifier = capital_thrall_workers_03
			remove_province_modifier = capital_thrall_workers_04
			remove_province_modifier = capital_thrall_workers_05
			remove_province_modifier = capital_thrall_workers_06
		}
		add_province_modifier = { modifier = capital_thrall_workers_03 years = 5 }
	}
	else_if = {
		limit = { 
			has_province_modifier = capital_thrall_workers_01
		}
		hidden_tooltip = {
			remove_province_modifier = capital_thrall_workers_01
			remove_province_modifier = capital_thrall_workers_02
			remove_province_modifier = capital_thrall_workers_03
			remove_province_modifier = capital_thrall_workers_04
			remove_province_modifier = capital_thrall_workers_05
			remove_province_modifier = capital_thrall_workers_06
		}
		add_province_modifier = { modifier = capital_thrall_workers_04 years = 5 }
	}
	else_if = {
		limit = { 
			has_province_modifier = capital_thrall_workers_02
		}
		hidden_tooltip = {
			remove_province_modifier = capital_thrall_workers_01
			remove_province_modifier = capital_thrall_workers_02
			remove_province_modifier = capital_thrall_workers_03
			remove_province_modifier = capital_thrall_workers_04
			remove_province_modifier = capital_thrall_workers_05
			remove_province_modifier = capital_thrall_workers_06
		}
		add_province_modifier = { modifier = capital_thrall_workers_05 years = 5 }
	}
	else_if = {
		limit = { 
			OR = { 
				has_province_modifier = capital_thrall_workers_03
				has_province_modifier = capital_thrall_workers_04
				has_province_modifier = capital_thrall_workers_05
				has_province_modifier = capital_thrall_workers_06
			}
		}
		hidden_tooltip = {
			remove_province_modifier = capital_thrall_workers_01
			remove_province_modifier = capital_thrall_workers_02
			remove_province_modifier = capital_thrall_workers_03
			remove_province_modifier = capital_thrall_workers_04
			remove_province_modifier = capital_thrall_workers_05
			remove_province_modifier = capital_thrall_workers_06
		}
		add_province_modifier = { modifier = capital_thrall_workers_06 years = 5 }
	}
}

add_some_thralls_capital_effect = { #MUST be used in a province scope.
	if = {
		limit = { 
			NOR = {
				has_province_modifier = capital_thrall_workers_01
				has_province_modifier = capital_thrall_workers_02
				has_province_modifier = capital_thrall_workers_03
				has_province_modifier = capital_thrall_workers_04
				has_province_modifier = capital_thrall_workers_05
				has_province_modifier = capital_thrall_workers_06
			}
		}
		hidden_tooltip = {
			remove_province_modifier = capital_thrall_workers_01
			remove_province_modifier = capital_thrall_workers_02
			remove_province_modifier = capital_thrall_workers_03
			remove_province_modifier = capital_thrall_workers_04
			remove_province_modifier = capital_thrall_workers_05
			remove_province_modifier = capital_thrall_workers_06
		}
		add_province_modifier = { modifier = capital_thrall_workers_02 years = 5 }
	}
	else_if = {
		limit = { 
			has_province_modifier = capital_thrall_workers_01
		}
		hidden_tooltip = {
			remove_province_modifier = capital_thrall_workers_01
			remove_province_modifier = capital_thrall_workers_02
			remove_province_modifier = capital_thrall_workers_03
			remove_province_modifier = capital_thrall_workers_04
			remove_province_modifier = capital_thrall_workers_05
			remove_province_modifier = capital_thrall_workers_06
		}
		add_province_modifier = { modifier = capital_thrall_workers_03 years = 5 }
	}
	else_if = {
		limit = { 
			has_province_modifier = capital_thrall_workers_02
		}
		hidden_tooltip = {
			remove_province_modifier = capital_thrall_workers_01
			remove_province_modifier = capital_thrall_workers_02
			remove_province_modifier = capital_thrall_workers_03
			remove_province_modifier = capital_thrall_workers_04
			remove_province_modifier = capital_thrall_workers_05
			remove_province_modifier = capital_thrall_workers_06
		}
		add_province_modifier = { modifier = capital_thrall_workers_04 years = 5 }
	}
	else_if = {
		limit = { 
			has_province_modifier = capital_thrall_workers_03
		}
		hidden_tooltip = {
			remove_province_modifier = capital_thrall_workers_01
			remove_province_modifier = capital_thrall_workers_02
			remove_province_modifier = capital_thrall_workers_03
			remove_province_modifier = capital_thrall_workers_04
			remove_province_modifier = capital_thrall_workers_05
			remove_province_modifier = capital_thrall_workers_06
		}
		add_province_modifier = { modifier = capital_thrall_workers_05 years = 5 }
	}
	else_if = {
		limit = { 
			OR = { 
				has_province_modifier = capital_thrall_workers_04
				has_province_modifier = capital_thrall_workers_05
				has_province_modifier = capital_thrall_workers_06
			}
		}
		hidden_tooltip = {
			remove_province_modifier = capital_thrall_workers_01
			remove_province_modifier = capital_thrall_workers_02
			remove_province_modifier = capital_thrall_workers_03
			remove_province_modifier = capital_thrall_workers_04
			remove_province_modifier = capital_thrall_workers_05
			remove_province_modifier = capital_thrall_workers_06
		}
		add_province_modifier = { modifier = capital_thrall_workers_06 years = 5 }
	}
}

add_few_thralls_capital_effect = { #MUST be used in a province scope.
	if = {
		limit = { 
			NOR = {
				has_province_modifier = capital_thrall_workers_01
				has_province_modifier = capital_thrall_workers_02
				has_province_modifier = capital_thrall_workers_03
				has_province_modifier = capital_thrall_workers_04
				has_province_modifier = capital_thrall_workers_05
				has_province_modifier = capital_thrall_workers_06
			}
		}
		hidden_tooltip = {
			remove_province_modifier = capital_thrall_workers_01
			remove_province_modifier = capital_thrall_workers_02
			remove_province_modifier = capital_thrall_workers_03
			remove_province_modifier = capital_thrall_workers_04
			remove_province_modifier = capital_thrall_workers_05
			remove_province_modifier = capital_thrall_workers_06
		}
		add_province_modifier = { modifier = capital_thrall_workers_01 years = 5 }
	}
	else_if = {
		limit = { 
			has_province_modifier = capital_thrall_workers_01
		}
		hidden_tooltip = {
			remove_province_modifier = capital_thrall_workers_01
			remove_province_modifier = capital_thrall_workers_02
			remove_province_modifier = capital_thrall_workers_03
			remove_province_modifier = capital_thrall_workers_04
			remove_province_modifier = capital_thrall_workers_05
			remove_province_modifier = capital_thrall_workers_06
		}
		add_province_modifier = { modifier = capital_thrall_workers_02 years = 5 }
	}
	else_if = {
		limit = { 
			has_province_modifier = capital_thrall_workers_02
		}
		hidden_tooltip = {
			remove_province_modifier = capital_thrall_workers_01
			remove_province_modifier = capital_thrall_workers_02
			remove_province_modifier = capital_thrall_workers_03
			remove_province_modifier = capital_thrall_workers_04
			remove_province_modifier = capital_thrall_workers_05
			remove_province_modifier = capital_thrall_workers_06
		}
		add_province_modifier = { modifier = capital_thrall_workers_03 years = 5 }
	}
	else_if = {
		limit = { 
			has_province_modifier = capital_thrall_workers_03
		}
		hidden_tooltip = {
			remove_province_modifier = capital_thrall_workers_01
			remove_province_modifier = capital_thrall_workers_02
			remove_province_modifier = capital_thrall_workers_03
			remove_province_modifier = capital_thrall_workers_04
			remove_province_modifier = capital_thrall_workers_05
			remove_province_modifier = capital_thrall_workers_06
		}
		add_province_modifier = { modifier = capital_thrall_workers_04 years = 5 }
	}
	else_if = {
		limit = { 
			has_province_modifier = capital_thrall_workers_04
		}
		hidden_tooltip = {
			remove_province_modifier = capital_thrall_workers_01
			remove_province_modifier = capital_thrall_workers_02
			remove_province_modifier = capital_thrall_workers_03
			remove_province_modifier = capital_thrall_workers_04
			remove_province_modifier = capital_thrall_workers_05
			remove_province_modifier = capital_thrall_workers_06
		}
		add_province_modifier = { modifier = capital_thrall_workers_05 years = 5 }
	}
	else_if = {
		limit = { 
			has_province_modifier = capital_thrall_workers_05
		}
		hidden_tooltip = {
			remove_province_modifier = capital_thrall_workers_01
			remove_province_modifier = capital_thrall_workers_02
			remove_province_modifier = capital_thrall_workers_03
			remove_province_modifier = capital_thrall_workers_04
			remove_province_modifier = capital_thrall_workers_05
			remove_province_modifier = capital_thrall_workers_06
		}
		add_province_modifier = { modifier = capital_thrall_workers_06 years = 5 }
	}
	else_if = {
		limit = { 
			has_province_modifier = capital_thrall_workers_06
		}
		hidden_tooltip = {
			remove_province_modifier = capital_thrall_workers_01
			remove_province_modifier = capital_thrall_workers_02
			remove_province_modifier = capital_thrall_workers_03
			remove_province_modifier = capital_thrall_workers_04
			remove_province_modifier = capital_thrall_workers_05
			remove_province_modifier = capital_thrall_workers_06
		}
		add_province_modifier = { modifier = capital_thrall_workers_06 years = 5 }
	}
}


WL_ritual_hunt_cleanup_effect = {
	clr_character_flag = do_not_disturb
	hidden_tooltip = { set_variable = { which = wl_ritual_hunting value = 0 } }

	clr_character_flag = flag_hunting_wolf_norse
	clr_character_flag = flag_hunting_wolf_baltic
	clr_character_flag = flag_hunting_wolf_hellenic

	clr_character_flag = flag_hunting_eagle_slavic
	clr_character_flag = flag_hunting_eagle_tengri
	clr_character_flag = flag_hunting_eagle_bon

	clr_character_flag = flag_hunting_bear_finnish

	clr_character_flag = flag_hunting_lion_west_african
	clr_character_flag = flag_hunting_lion_zun
}

WL_ritual_hunt_flavor_events_effect = {
	hidden_tooltip = { 
		#Flavor events: (increasing/decreasing hunt variable)
		## Character is about to fall/drown/random. (might result in Friendship/Rivalry/Love)
		## Co-hunter is about to fall/drown/random. (might result in Friendship/Rivalry/Love)
		## Characters looking for tracks. (intrigue) - paranoid
		## Characters need to examine carcass killed by target. (martial) - cruel
		## Characters reflect upon their target. (learning) - scholar
		## Characters find hermit, ask info on target. (diplomacy) - charitable
		## Characters need to interpret old map and pathways. (stewardship) - administrator

		## Characters see a bad omen. (low piety triggers) - theologian
		## Characters see a good omen. (high piety triggers) - theologian

		## Lunatic/Possessed character goes on a Wild Hunt and kills partner.

		random_list = { 
			15 = { #Character is in trouble.
				trigger = { event_target:scoped_WL_co_hunter = { is_alive = yes } }
				modifier = { 
					factor = 1.5
					trait = craven
				}
				modifier = { 
					factor = 1.5
					trait = dull
				}
				modifier = { 
					factor = 1.5
					trait = slow
				}
				modifier = { 
					factor = 1.5
					trait = imbecile
				}
				modifier = { 
					factor = 1.5
					trait = inbred
				}
				modifier = { 
					factor = 1.5
					trait = slothful
				}
				character_event = { id = HF.25603 days = 10 random = 5 }
			}
			15 = { #Co-hunter is in trouble.
				trigger = { event_target:scoped_WL_co_hunter = { is_alive = yes } }
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { trait = craven }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { trait = dull }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { trait = slow }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { trait = imbecile }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { trait = inbred }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { trait = slothful }
				}
				character_event = { id = HF.25606 days = 10 random = 5 }
			}
			25 = { #Characters looking for tracks.
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { intrigue = 10 }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { intrigue = 14 }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { intrigue = 18 }
				}
				character_event = { id = HF.25608 days = 10 random = 5 }
			}
			25 = { #Characters need to examine carcass.
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { martial = 10 }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { martial = 14 }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { martial = 18 }
				}
				character_event = { id = HF.25609 days = 10 random = 5 }

			}
			25 = { #Characters reflect upon target.
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { learning = 10 }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { learning = 14 }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { learning = 18 }
				}
				character_event = { id = HF.25610 days = 10 random = 5 }

			}
			25 = { #Characters persuade hermit for directions.
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { diplomacy = 10 }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { diplomacy = 14 }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { diplomacy = 18 }
				}
				character_event = { id = HF.25611 days = 10 random = 5 }

			}
			25 = { #Characters need to interpret old map.
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { stewardship = 10 }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { stewardship = 14 }
				}
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { stewardship = 18 }
				}
				modifier = { 
					factor = 1.5
					has_character_flag = flag_picked_ritual_co_hunter_smart
				}
				character_event = { id = HF.25612 days = 10 random = 5 }

			}
			25 = { #Characters see bad omen.
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { learning = 10 }
				}
				modifier = { 
					factor = 1.5
					NOT = { piety = 50 }
				}
				modifier = { 
					factor = 1.5
					NOT = { piety = 100 }
				}
				modifier = { 
					factor = 1.5
					NOT = { piety = 150 }
				}
				character_event = { id = HF.25613 days = 10 random = 5 }
			}
			5 = { #Characters see good omen.
				modifier = { 
					factor = 1.5
					event_target:scoped_WL_co_hunter = { learning = 10 }
				}
				modifier = { 
					factor = 1.5
					piety = 250
				}
				modifier = { 
					factor = 1.5
					piety = 350
				}
				modifier = { 
					factor = 1.5
					piety = 450
				}
				modifier = { 
					factor = 1.5
					piety = 550
				}
				character_event = { id = HF.25614 days = 10 random = 5 }

			}

			100 = {  #Lunatic/Possessed ruler starts a Wild Hunt.
				trigger = { 
					OR = { 
						trait = possessed
						trait = lunatic
						AND = { 
							has_character_modifier = lycanthropy 
							OR = { 
								has_character_flag = flag_hunting_wolf_norse
								has_character_flag = flag_hunting_wolf_baltic
								has_character_flag = flag_hunting_wolf_hellenic
							} 
						}
					} 
					event_target:scoped_WL_co_hunter = { is_alive = yes }
				}
				character_event = { id = HF.25615 days = 10 random = 5 }
			}
		} 
	}
}

stable_attribute_improvement_effect = {
	hidden_tooltip = { #Chance of Education trait improvement or burnout case.
		if = { 
			limit = {
				event_target:scoped_improvement_target = { 
					has_character_flag = flag_training_diplomacy_attribute 
				} 
			}
			event_target:scoped_improvement_target = { 
				random_list = { 
					20 = { #Education improvement.
						trigger = { #Education Improvement only unlocked by synergy.
							OR = { 
								has_religion_feature = religion_meritocratic
								has_religion_feature = religion_equal
								has_religion_feature = religion_feature_rhoynar_pagan
							}
							OR = { 
								trait = naive_appeaser
								trait = underhanded_rogue
								trait = charismatic_negotiator
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								NOT = { character = event_target:scoped_improvement_target }
								attribute_diff = { attribute = diplomacy character = event_target:scoped_improvement_target value = 3 } 
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								NOT = { character = event_target:scoped_improvement_target }
								attribute_diff = { attribute = diplomacy character = event_target:scoped_improvement_target value = 6 } 
							}
						}
						modifier = { 
							factor = 1.75
							event_target:scoped_improvement_ruler = { 
								NOT = { character = event_target:scoped_improvement_target }
								attribute_diff = { attribute = diplomacy character = event_target:scoped_improvement_target value = 9 } 
							}
						}
						character_event = { id = HF.23761 days = 15 random = 15 } 
					}
					20 = { #Burnout
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 1 }
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 2 }
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 3 }
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 4 }
							}
						}
						modifier = { 
							factor = 1.75
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 5 }
							}
						}
						modifier = { 
							factor = 2
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 8 }
							}
						}
						modifier = { 
							factor = 2
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 12 }
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								trait = slothful
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								trait = stressed
							}
						}
						modifier = { 
							factor = 1.75
							event_target:scoped_improvement_ruler = { 
								trait = depressed
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								is_ill = yes
							}
						}
						modifier = { 
							factor = 0.75
							event_target:scoped_improvement_ruler = { 
								trait = diligent
							}
						}
						character_event = { id = HF.23762 days = 15 random = 15 } 
					}
					80 = { #Nothing.
					}
				}
			}
		}
		if = { 
			limit = {
				event_target:scoped_improvement_target = { 
					OR = { 
						has_character_flag = flag_training_martial_attribute 
						has_character_flag = flag_training_combat_rating
					}
				} 
			}
			event_target:scoped_improvement_target = { 
				random_list = { 
					20 = { #Education improvement.
						trigger = { #Education Improvement only unlocked by synergy.
							OR = { 
								has_religion_feature = religion_meritocratic
								has_religion_feature = religion_equal
								has_religion_feature = religion_feature_rhoynar_pagan
							}
							OR = { 
								trait = misguided_warrior
								trait = tough_soldier
								trait = skilled_tactician
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								NOT = { character = event_target:scoped_improvement_target }
								attribute_diff = { attribute = martial character = event_target:scoped_improvement_target value = 3 } 
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								NOT = { character = event_target:scoped_improvement_target }
								attribute_diff = { attribute = martial character = event_target:scoped_improvement_target value = 6 } 
							}
						}
						modifier = { 
							factor = 1.75
							event_target:scoped_improvement_ruler = { 
								NOT = { character = event_target:scoped_improvement_target }
								attribute_diff = { attribute = martial character = event_target:scoped_improvement_target value = 9 } 
							}
						}
						character_event = { id = HF.23761 days = 15 random = 15 } 
					}
					20 = { #Burnout
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 1 }
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 2 }
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 3 }
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 4 }
							}
						}
						modifier = { 
							factor = 1.75
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 5 }
							}
						}
						modifier = { 
							factor = 2
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 8 }
							}
						}
						modifier = { 
							factor = 2
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 12 }
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								trait = slothful
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								trait = stressed
							}
						}
						modifier = { 
							factor = 1.75
							event_target:scoped_improvement_ruler = { 
								trait = depressed
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								is_ill = yes
							}
						}
						modifier = { 
							factor = 0.75
							event_target:scoped_improvement_ruler = { 
								trait = diligent
							}
						}
						modifier = { 
							factor = 1.25
							event_target:scoped_improvement_ruler = { 
								age = 30
							}
						}
						modifier = { 
							factor = 1.25
							event_target:scoped_improvement_ruler = { 
								age = 35
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								age = 40
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								age = 45
							}
						}
						modifier = { 
							factor = 1.75
							event_target:scoped_improvement_ruler = { 
								age = 50
							}
						}
						modifier = { 
							factor = 1.25
							event_target:scoped_improvement_ruler = { 
								trait = slow
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								trait = imbecile
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								trait = inbred
							}
						}
						modifier = { 
							factor = 1.25
							event_target:scoped_improvement_ruler = { 
								trait = dull
							}
						}
						modifier = { 
							factor = 0.85
							event_target:scoped_improvement_ruler = { 
								trait = shrewd
							}
						}
						modifier = { 
							factor = 0.85
							event_target:scoped_improvement_ruler = { 
								trait = quick
							}
						}
						modifier = { 
							factor = 0.75
							event_target:scoped_improvement_ruler = { 
								trait = genius
							}
						}
						character_event = { id = HF.23762 days = 15 random = 15 } 
					}
					80 = { #Nothing.
					}
				}
			}
		}
		if = { 
			limit = {
				event_target:scoped_improvement_target = { 
					has_character_flag = flag_training_stewardship_attribute 
				} 
			}
			event_target:scoped_improvement_target = { 
				random_list = { 
					20 = { #Education improvement.
						trigger = { #Education Improvement only unlocked by synergy.
							OR = { 
								has_religion_feature = religion_meritocratic
								has_religion_feature = religion_equal
								has_religion_feature = religion_feature_rhoynar_pagan
							}
							OR = { 
								trait = indulgent_wastrel
								trait = thrifty_clerk
								trait = fortune_builder
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								NOT = { character = event_target:scoped_improvement_target }
								attribute_diff = { attribute = stewardship character = event_target:scoped_improvement_target value = 3 } 
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								NOT = { character = event_target:scoped_improvement_target }
								attribute_diff = { attribute = stewardship character = event_target:scoped_improvement_target value = 6 } 
							}
						}
						modifier = { 
							factor = 1.75
							event_target:scoped_improvement_ruler = { 
								NOT = { character = event_target:scoped_improvement_target }
								attribute_diff = { attribute = stewardship character = event_target:scoped_improvement_target value = 9 } 
							}
						}
						character_event = { id = HF.23761 days = 15 random = 15 } 
					}
					20 = { #Burnout
						trigger = { 
							event_target:scoped_improvement_ruler = { #Never first time.
								check_variable = { which = burnout_count value = 1 }
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 2 }
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 3 }
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 4 }
							}
						}
						modifier = { 
							factor = 1.75
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 5 }
							}
						}
						modifier = { 
							factor = 2
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 8 }
							}
						}
						modifier = { 
							factor = 2
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 12 }
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								trait = slothful
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								trait = stressed
							}
						}
						modifier = { 
							factor = 1.75
							event_target:scoped_improvement_ruler = { 
								trait = depressed
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								is_ill = yes
							}
						}
						modifier = { 
							factor = 0.75
							event_target:scoped_improvement_ruler = { 
								trait = diligent
							}
						}
						modifier = { 
							factor = 1.25
							event_target:scoped_improvement_ruler = { 
								age = 30
							}
						}
						modifier = { 
							factor = 1.25
							event_target:scoped_improvement_ruler = { 
								age = 35
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								age = 40
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								age = 45
							}
						}
						modifier = { 
							factor = 1.75
							event_target:scoped_improvement_ruler = { 
								age = 50
							}
						}
						modifier = { 
							factor = 1.25
							event_target:scoped_improvement_ruler = { 
								trait = slow
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								trait = imbecile
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								trait = inbred
							}
						}
						modifier = { 
							factor = 1.25
							event_target:scoped_improvement_ruler = { 
								trait = dull
							}
						}
						modifier = { 
							factor = 0.85
							event_target:scoped_improvement_ruler = { 
								trait = shrewd
							}
						}
						modifier = { 
							factor = 0.85
							event_target:scoped_improvement_ruler = { 
								trait = quick
							}
						}
						modifier = { 
							factor = 0.75
							event_target:scoped_improvement_ruler = { 
								trait = genius
							}
						}
						character_event = { id = HF.23762 days = 15 random = 15 } 
					}
					80 = { #Nothing.
					}
				}
			}
		}
		if = { 
			limit = {
				event_target:scoped_improvement_target = { 
					has_character_flag = flag_training_intrigue_attribute 
				} 
			}
			event_target:scoped_improvement_target = { 
				random_list = { 
					20 = { #Education improvement.
						trigger = { #Education Improvement only unlocked by synergy.
							OR = { 
								has_religion_feature = religion_meritocratic
								has_religion_feature = religion_equal
								has_religion_feature = religion_feature_rhoynar_pagan
							}
							OR = { 
								trait = amateurish_plotter
								trait = flamboyant_schemer
								trait = intricate_webweaver
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								NOT = { character = event_target:scoped_improvement_target }
								attribute_diff = { attribute = intrigue character = event_target:scoped_improvement_target value = 3 } 
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								NOT = { character = event_target:scoped_improvement_target }
								attribute_diff = { attribute = intrigue character = event_target:scoped_improvement_target value = 6 } 
							}
						}
						modifier = { 
							factor = 1.75
							event_target:scoped_improvement_ruler = { 
								NOT = { character = event_target:scoped_improvement_target }
								attribute_diff = { attribute = intrigue character = event_target:scoped_improvement_target value = 9 } 
							}
						}
						character_event = { id = HF.23761 days = 15 random = 15 } 
					}
					20 = { #Burnout
						trigger = { 
							event_target:scoped_improvement_ruler = { #Never first time.
								check_variable = { which = burnout_count value = 1 }
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 2 }
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 3 }
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 4 }
							}
						}
						modifier = { 
							factor = 1.75
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 5 }
							}
						}
						modifier = { 
							factor = 2
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 8 }
							}
						}
						modifier = { 
							factor = 2
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 12 }
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								trait = slothful
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								trait = stressed
							}
						}
						modifier = { 
							factor = 1.75
							event_target:scoped_improvement_ruler = { 
								trait = depressed
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								is_ill = yes
							}
						}
						modifier = { 
							factor = 0.75
							event_target:scoped_improvement_ruler = { 
								trait = diligent
							}
						}
						modifier = { 
							factor = 1.25
							event_target:scoped_improvement_ruler = { 
								age = 30
							}
						}
						modifier = { 
							factor = 1.25
							event_target:scoped_improvement_ruler = { 
								age = 35
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								age = 40
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								age = 45
							}
						}
						modifier = { 
							factor = 1.75
							event_target:scoped_improvement_ruler = { 
								age = 50
							}
						}
						modifier = { 
							factor = 1.25
							event_target:scoped_improvement_ruler = { 
								trait = slow
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								trait = imbecile
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								trait = inbred
							}
						}
						modifier = { 
							factor = 1.25
							event_target:scoped_improvement_ruler = { 
								trait = dull
							}
						}
						modifier = { 
							factor = 0.85
							event_target:scoped_improvement_ruler = { 
								trait = shrewd
							}
						}
						modifier = { 
							factor = 0.85
							event_target:scoped_improvement_ruler = { 
								trait = quick
							}
						}
						modifier = { 
							factor = 0.75
							event_target:scoped_improvement_ruler = { 
								trait = genius
							}
						}
						character_event = { id = HF.23762 days = 15 random = 15 } 
					}
					80 = { #Nothing.
					}
				}
			}
		}
		if = { 
			limit = {
				event_target:scoped_improvement_target = { 
					has_character_flag = flag_training_learning_attribute 
				} 
			}
			event_target:scoped_improvement_target = { 
				random_list = { 
					20 = { #Education improvement.
						trigger = { #Education Improvement only unlocked by synergy.
							OR = { 
								has_religion_feature = religion_meritocratic
								has_religion_feature = religion_equal
								has_religion_feature = religion_feature_rhoynar_pagan
							}
							OR = { 
								trait = detached_priest
								trait = martial_cleric
								trait = scholarly_theologian
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								has_religion_feature = religion_meritocratic #More pressure.
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								NOT = { character = event_target:scoped_improvement_target }
								attribute_diff = { attribute = learning character = event_target:scoped_improvement_target value = 3 } 
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								NOT = { character = event_target:scoped_improvement_target }
								attribute_diff = { attribute = learning character = event_target:scoped_improvement_target value = 6 } 
							}
						}
						modifier = { 
							factor = 1.75
							event_target:scoped_improvement_ruler = { 
								NOT = { character = event_target:scoped_improvement_target }
								attribute_diff = { attribute = learning character = event_target:scoped_improvement_target value = 9 } 
							}
						}
						character_event = { id = HF.23761 days = 15 random = 15 } 
					}
					20 = { #Burnout
						trigger = { 
							event_target:scoped_improvement_ruler = { #Never first time.
								check_variable = { which = burnout_count value = 1 }
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 2 }
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 3 }
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 4 }
							}
						}
						modifier = { 
							factor = 1.75
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 5 }
							}
						}
						modifier = { 
							factor = 2
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 8 }
							}
						}
						modifier = { 
							factor = 2
							event_target:scoped_improvement_ruler = { 
								check_variable = { which = burnout_count value = 12 }
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								trait = slothful
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								trait = stressed
							}
						}
						modifier = { 
							factor = 1.75
							event_target:scoped_improvement_ruler = { 
								trait = depressed
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								is_ill = yes
							}
						}
						modifier = { 
							factor = 0.75
							event_target:scoped_improvement_ruler = { 
								trait = diligent
							}
						}
						modifier = { 
							factor = 1.25
							event_target:scoped_improvement_ruler = { 
								age = 30
							}
						}
						modifier = { 
							factor = 1.25
							event_target:scoped_improvement_ruler = { 
								age = 35
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								age = 40
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								age = 45
							}
						}
						modifier = { 
							factor = 1.75
							event_target:scoped_improvement_ruler = { 
								age = 50
							}
						}
						modifier = { 
							factor = 1.25
							event_target:scoped_improvement_ruler = { 
								trait = slow
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								trait = imbecile
							}
						}
						modifier = { 
							factor = 1.5
							event_target:scoped_improvement_ruler = { 
								trait = inbred
							}
						}
						modifier = { 
							factor = 1.25
							event_target:scoped_improvement_ruler = { 
								trait = dull
							}
						}
						modifier = { 
							factor = 0.85
							event_target:scoped_improvement_ruler = { 
								trait = shrewd
							}
						}
						modifier = { 
							factor = 0.85
							event_target:scoped_improvement_ruler = { 
								trait = quick
							}
						}
						modifier = { 
							factor = 0.75
							event_target:scoped_improvement_ruler = { 
								trait = genius
							}
						}
						character_event = { id = HF.23762 days = 15 random = 15 } 
					}
					80 = { #Nothing.
					}
				}
			}
		}
	}
}

add_sympathy_for_religion_effect = {
	trigger_switch = {
		on_trigger = religion_group
		westerosi_religion = { ROOT = { add_trait = sympathy_westerosi } }
		drowned_god_group = { ROOT = {add_trait = sympathy_drowned_god } }
		essos_group = { ROOT = {add_trait = sympathy_essos_group } }
		ghiscar_rel = { ROOT = {add_trait = sympathy_ghiscar_rel } }
		valyrian_rel_group	= { ROOT = {add_trait = sympathy_valyrian_rel_group } }
		wildling_religion = { ROOT = {add_trait = sympathy_wildling_religion } }
		sarnor_rel = { ROOT = {add_trait = sympathy_sarnor_rel } }
		qarth_rel = { ROOT = {add_trait = sympathy_qarth_rel } }
		far_east_group = { ROOT = {add_trait = sympathy_far_east_group } }
		ibben_rel	= { ROOT = {add_trait = sympathy_ibben_rel } }
		dothraki_rel_group = { ROOT = {add_trait = sympathy_dothraki_rel_group } }
		jogos_rel_group = { ROOT = {add_trait = sympathy_jogos_rel_group } }
		lhazar_rel_group = { ROOT = {add_trait = sympathy_lhazar_rel_group } }
		summer_rel_group	= { ROOT = {add_trait = sympathy_summer_rel_group } }
		sothoryos_rel_group = { ROOT = {add_trait = sympathy_sothoryos_rel_group } }
		pirate_group	= { ROOT = {add_trait = sympathy_pirate_group } }
		pagan_group = { ROOT = {add_trait = sympathy_pagans } }
	}
}

add_random_commander_trait_effect = {
	random_list = {
		1 = {
			trigger = {
				NOT = {
					trait = aggressive_leader
				}
			}
			add_trait = aggressive_leader
		}
		1 = {
			trigger = {
				NOT = {
					trait = narrow_flank_leader
				}
			}
			add_trait = narrow_flank_leader
		}
		1 = {
			trigger = {
				NOT = {
					trait = cavalry_leader
				}
			}
			add_trait = cavalry_leader
		}
		1 = {
			trigger = {
				NOT = {
					trait = defensive_leader
				}
			}
			add_trait = defensive_leader
		}
		1 = {
			trigger = {
				NOT = {
					trait = desert_terrain_leader
				}
			}
			add_trait = desert_terrain_leader
		}
		1 = {
			trigger = {
				NOT = {
					trait = experimenter
				}
			}
			add_trait = experimenter
		}
		1 = {
			trigger = {
				NOT = {
					trait = flanker
				}
			}
			add_trait = flanker
		}
		1 = {
			trigger = {
				NOT = {
					trait = flat_terrain_leader
				}
			}
			add_trait = flat_terrain_leader
		}
		1 = {
			trigger = {
				NOT = {
					trait = heavy_infantry_leader
				}
			}
			add_trait = heavy_infantry_leader
		}
		1 = {
			trigger = {
				NOT = {
					trait = holy_warrior
				}
			}
			add_trait = holy_warrior
		}
		1 = {
			trigger = {
				NOT = {
					trait = inspiring_leader
				}
			}
			add_trait = inspiring_leader
		}
		1 = {
			trigger = {
				NOT = {
					trait = jungle_terrain_leader
				}
			}
			add_trait = jungle_terrain_leader
		}
		1 = {
			trigger = {
				NOT = {
					trait = light_foot_leader
				}
			}
			add_trait = light_foot_leader
		}
		1 = {
			trigger = {
				NOT = {
					trait = mountain_terrain_leader
				}
			}
			add_trait = mountain_terrain_leader
		}
		1 = {
			trigger = {
				NOT = {
					trait = organizer
				}
			}
			add_trait = organizer
		}
		1 = {
			trigger = {
				NOT = {
					trait = rough_terrain_leader
				}
			}
			add_trait = rough_terrain_leader
		}
		1 = {
			trigger = {
				NOT = {
					trait = siege_leader
				}
			}
			add_trait = siege_leader
		}
		1 = {
			trigger = {
				NOT = {
					trait = trickster
				}
			}
			add_trait = trickster
		}
		1 = {
			trigger = {
				NOT = {
					trait = unyielding_leader
				}
			}
			add_trait = unyielding_leader
		}
		1 = {
			trigger = {
				NOT = {
					trait = war_elephant_leader
				}
				location = {
					region = world_india
				}
			}
			add_trait = war_elephant_leader
		}
		1 = {
			trigger = {
				NOT = {
					trait = winter_soldier
				}
			}
			add_trait = winter_soldier
		}
		1 = {
			trigger = {
				NOT = {
					trait = logistics_expert
				}
				culture_group = chinese_group
			}
			add_trait = logistics_expert
		}
		1 = {
			trigger = {
				NOT = {
					trait = master_of_flame
				}
				culture_group = chinese_group
			}
			add_trait = master_of_flame
		}
		1 = {
			trigger = {
				NOT = {
					trait = sapper
				}
				culture_group = chinese_group
			}
			add_trait = sapper
		}
		1 = {
			trigger = {
				NOT = {
					trait = levy_coordinator
				}
				culture_group = chinese_group
			}
			add_trait = levy_coordinator
		}
		1 = {
			trigger = {
				NOT = {
					trait = back_seat_leader
				}
			}
			add_trait = back_seat_leader
		}
	}
}

add_same_commander_trait_as_FROM = {
	#random_list = {
		if = {
			limit = {
				NOT = {
					trait = aggressive_leader
				}
				FROM = { trait = aggressive_leader }
			}
			add_trait = aggressive_leader
		}
		if = {
			limit = {
				NOT = {
					trait = narrow_flank_leader
				}
				FROM = { trait = narrow_flank_leader }
			}
			add_trait = narrow_flank_leader
		}
		if = {
			limit = {
				NOT = {
					trait = cavalry_leader
				}
				FROM = { trait = cavalry_leader }
			}
			add_trait = cavalry_leader
		}
		if = {
			limit = {
				NOT = {
					trait = defensive_leader
				}
				FROM = { trait = defensive_leader }
			}
			add_trait = defensive_leader
		}
		if = {
			limit = {
				NOT = {
					trait = desert_terrain_leader
				}
				FROM = { trait = desert_terrain_leader }
			}
			add_trait = desert_terrain_leader
		}
		if = {
			limit = {
				NOT = {
					trait = experimenter
				}
				FROM = { trait = experimenter }
			}
			add_trait = experimenter
		}
		if = {
			limit = {
				NOT = {
					trait = flanker
				}
				FROM = { trait = flanker }
			}
			add_trait = flanker
		}
		if = {
			limit = {
				NOT = {
					trait = flat_terrain_leader
				}
				FROM = { trait = flat_terrain_leader }
			}
			add_trait = flat_terrain_leader
		}
		if = {
			limit = {
				NOT = {
					trait = heavy_infantry_leader
				}
				FROM = { trait = heavy_infantry_leader }
			}
			add_trait = heavy_infantry_leader
		}
		if = {
			limit = {
				NOT = {
					trait = holy_warrior
				}
				FROM = { trait = holy_warrior }
			}
			add_trait = holy_warrior
		}
		if = {
			limit = {
				NOT = {
					trait = inspiring_leader
				}
				FROM = { trait = inspiring_leader }
			}
			add_trait = inspiring_leader
		}
		if = {
			limit = {
				NOT = {
					trait = jungle_terrain_leader
				}
				FROM = { trait = jungle_terrain_leader }
			}
			add_trait = jungle_terrain_leader
		}
		if = {
			limit = {
				NOT = {
					trait = light_foot_leader
				}
				FROM = { trait = light_foot_leader }
			}
			add_trait = light_foot_leader
		}
		if = {
			limit = {
				NOT = {
					trait = mountain_terrain_leader
				}
				FROM = { trait = mountain_terrain_leader }
			}
			add_trait = mountain_terrain_leader
		}
		if = {
			limit = {
				NOT = {
					trait = organizer
				}
				FROM = { trait = organizer }
			}
			add_trait = organizer
		}
		if = {
			limit = {
				NOT = {
					trait = rough_terrain_leader
				}
				FROM = { trait = rough_terrain_leader }
			}
			add_trait = rough_terrain_leader
		}
		if = {
			limit = {
				NOT = {
					trait = siege_leader
				}
				FROM = { trait = siege_leader }
			}
			add_trait = siege_leader
		}
		if = {
			limit = {
				NOT = {
					trait = trickster
				}
				FROM = { trait = trickster }
			}
			add_trait = trickster
		}
		if = {
			limit = {
				NOT = {
					trait = unyielding_leader
				}
				FROM = { trait = unyielding_leader }
			}
			add_trait = unyielding_leader
		}
		if = {
			limit = {
				NOT = {
					trait = war_elephant_leader
				}
				FROM = { trait = war_elephant_leader }
				location = {
					region = world_india
				}
			}
			add_trait = war_elephant_leader
		}
		if = {
			limit = {
				NOT = {
					trait = winter_soldier
				}
				FROM = { trait = winter_soldier }
			}
			add_trait = winter_soldier
		}
		if = {
			limit = {
				NOT = {
					trait = logistics_expert
				}
				culture_group = chinese_group
				FROM = { trait = logistics_expert }
			}
			add_trait = logistics_expert
		}
		if = {
			limit = {
				NOT = {
					trait = master_of_flame
				}
				culture_group = chinese_group
				FROM = { trait = master_of_flame }
			}
			add_trait = master_of_flame
		}
		if = {
			limit = {
				NOT = {
					trait = sapper
				}
				culture_group = chinese_group
				FROM = { trait = sapper }
			}
			add_trait = sapper
		}
		if = {
			limit = {
				NOT = {
					trait = levy_coordinator
				}
				culture_group = chinese_group
				FROM = { trait = levy_coordinator }
			}
			add_trait = levy_coordinator
		}
		if = {
			limit = {
				NOT = {
					trait = back_seat_leader
				}
				FROM = { trait = back_seat_leader }
			}
			add_trait = back_seat_leader
		}
		
		#10 = {
			#add_trait_wounded_effect = yes
		#}
	#}
}


# Used for rains in African regions...
remove_rain_modifiers_effect = {
	remove_province_modifier = africa_heavy_rain
    remove_province_modifier = africa_light_rain
    remove_province_modifier = africa_drought_risk
    remove_province_modifier = africa_drought
}

set_weather_change_cooldown_effect = {
	add_province_modifier = {
		name = africa_weather_updated
		duration = 300 # Just for safety
		hidden = yes
	}
}

set_rain_flag_heavy_effect = {
	if = {
		limit = { NOT = { has_province_flag = africa_heavy_rain_flag } } #So it's not overwritten and can be checked for time...
		set_province_flag = africa_heavy_rain_flag
		clr_province_flag = africa_light_rain_flag
		clr_province_flag = africa_drought_risk_flag
		clr_province_flag = africa_drought_flag
	}
}
set_rain_flag_light_effect = {
	if = {
		limit = { NOT = { has_province_flag = africa_light_rain_flag } } #So it's not overwritten and can be checked for time...
		clr_province_flag = africa_heavy_rain_flag
		set_province_flag = africa_light_rain_flag
		clr_province_flag = africa_drought_risk_flag
		clr_province_flag = africa_drought_flag
	}
}
set_rain_flag_drought_risk_effect = {
	if = {
		limit = { NOT = { has_province_flag = africa_drought_risk_flag } } #So it's not overwritten and can be checked for time...
		clr_province_flag = africa_heavy_rain_flag
		clr_province_flag = africa_light_rain_flag
		set_province_flag = africa_drought_risk_flag
		clr_province_flag = africa_drought_flag
	}
}
set_rain_flag_drought_effect = {
	if = {
		limit = { NOT = { has_province_flag = africa_drought_flag } } #So it's not overwritten and can be checked for time...
		clr_province_flag = africa_heavy_rain_flag
		clr_province_flag = africa_light_rain_flag
		clr_province_flag = africa_drought_risk_flag
		set_province_flag = africa_drought_flag
	}
}

change_rain_effect = { # Needs a province scope...
	if = {
		limit = { has_province_modifier = africa_heavy_rain }
		random_list = {
			10 = { # Make it worse (risk for drought)...
				modifier = { # There is no nearby light rain...
					factor = 2
					any_neighbor_province_has_light_rain_trigger = no
				}
				modifier = {
					factor = 2 # There is more heavy rain nearby...
					any_neighbor_province_has_heavy_rain_trigger = yes
				}
				modifier = {
					factor = 2 # There is nearby dry weather...
					any_neighbor_province_has_dry_weather_trigger = yes
				}
				remove_rain_modifiers_effect = yes
				if = {
					limit = { has_province_modifier = africa_rain_dance_successful }
					remove_province_modifier = africa_rain_dance_successful
				}
				add_province_modifier = {
					name = africa_drought_risk
					duration = -1
				}
				set_rain_flag_drought_risk_effect = yes
			}
			10 = { # Make it better (light rain)...
				modifier = { #There is no nearby drought...
					factor = 2
					any_neighbor_province_has_dry_weather_trigger = no
				}
				modifier = {
					factor = 2 # There is more heavy rain nearby...
					any_neighbor_province_has_heavy_rain_trigger = yes
				}
				modifier = {
					factor = 2 # There is light rain nearby...
					any_neighbor_province_has_light_rain_trigger = no
				}
				remove_rain_modifiers_effect = yes
				add_province_modifier = {
					name = africa_light_rain
					duration = -1
				}
				set_rain_flag_light_effect = yes
			}
			10 = { # Keep weather (heavy rain)...
				set_rain_flag_heavy_effect = yes
			}
		}
	}
	else_if = {
		limit = {
			has_province_modifier = africa_light_rain
		}
		random_list = {
			10 = { # Make it worse (drought risk)...
				modifier = { #More likely if have enjoyed it long enough...
					factor = 2
					had_province_flag = {
						flag = africa_light_rain_flag
						days = 3600 # almost 10 years...
					}
				}
				modifier = { #More likely if have enjoyed it long enough...
					factor = 2
					had_province_flag = {
						flag = africa_light_rain_flag
						days = 6000 # 16,5 years...
					}
				}
				modifier = { # There is no nearby great weather...
					factor = 2
					any_neighbor_province_has_light_rain_trigger = no
				}
				modifier = {
					factor = 2
					any_neighbor_province_has_heavy_rain_trigger = yes
				}
				modifier = {
					factor = 2
					any_neighbor_province_has_dry_weather_trigger = yes
				}
				remove_rain_modifiers_effect = yes
				if = {
					limit = { has_province_modifier = africa_rain_dance_successful }
					remove_province_modifier = africa_rain_dance_successful
				}
				add_province_modifier = {
					name = africa_drought_risk
					duration = -1
				}
				set_rain_flag_drought_risk_effect = yes
			}
			10 = { # Make it better (heavy rain)...
				modifier = { #There is no nearby drought...
					factor = 3
					any_neighbor_province_has_dry_weather_trigger = no
				}
				modifier = {
					factor = 2
					any_neighbor_province_has_heavy_rain_trigger = yes
				}
				modifier = {
					factor = 2
					any_neighbor_province_has_light_rain_trigger = no
				}
				remove_rain_modifiers_effect = yes
				add_province_modifier = {
					name = africa_heavy_rain
					duration = -1
				}
				set_rain_flag_heavy_effect = yes
			}
			10 = { # Keep weather (light rain)...
				set_rain_flag_light_effect = yes
			}
		}
	}
	else_if = {
		limit = { has_province_modifier = africa_drought_risk }
		random_list = {
			10 = { # Make it worse (actual drought)...
				modifier = { # There is no nearby rain...
					factor = 2
					any_neighbor_province_has_light_rain_trigger = no
				}
				modifier = {
					factor = 2
					any_neighbor_province_has_heavy_rain_trigger = no
				}
				remove_rain_modifiers_effect = yes
				if = {
					limit = { has_province_modifier = africa_rain_dance_successful }
					remove_province_modifier = africa_rain_dance_successful
				}
				add_province_modifier = {
					name = africa_drought_risk
					duration = -1
				}
				set_rain_flag_drought_effect = yes
			}
			10 = { # Make it better (light rain)...
				modifier = { #There is no nearby drought...
					factor = 3
					any_neighbor_province_has_dry_weather_trigger = no
				}
				modifier = {
					factor = 2
					any_neighbor_province_has_heavy_rain_trigger = yes
				}
				modifier = {
					factor = 2
					any_neighbor_province_has_light_rain_trigger = no
				}
				remove_rain_modifiers_effect = yes
				add_province_modifier = {
					name = africa_light_rain
					duration = -1
				}
				set_rain_flag_light_effect = yes
			}
			10 = { # Keep weather (drought risk)...
				set_rain_flag_drought_risk_effect = yes
			}
		}
	}
	else = {
		limit = { has_province_modifier = africa_drought }
		random_list = {
			10 = { # Make it better (heavy rain)...
				modifier = { #More likely if have suffered long enough...
					factor = 2
					had_province_flag = {
						flag = africa_drought_flag
						days = 3600 # almost 10 years...
					}
				}
				modifier = { #More likely if have suffered long enough...
					factor = 2
					had_province_flag = {
						flag = africa_drought_flag
						days = 6000 # 16,5 years...
					}
				}
				modifier = { #There is no nearby drought...
					factor = 3
					any_neighbor_province_has_dry_weather_trigger = no
				}
				modifier = {
					factor = 2
					any_neighbor_province_has_heavy_rain_trigger = yes
				}
				modifier = {
					factor = 2
					any_neighbor_province_has_light_rain_trigger = no
				}
				remove_rain_modifiers_effect = yes
				add_province_modifier = {
					name = africa_heavy_rain
					duration = -1
				}
				set_rain_flag_heavy_effect = yes
			}
			15 = { # Make it better (drought risk)...
				modifier = { #More likely if have suffered long enough...
					factor =2
					had_province_flag = {
						flag = africa_drought_flag
						days = 3600 # almost 10 years...
					}
				}
				modifier = { #More likely if have suffered long enough...
					factor = 2
					had_province_flag = {
						flag = africa_drought_flag
						days = 6000 # 16,5 years...
					}
				}
				modifier = { #There is no nearby drought...
					factor = 3
					any_neighbor_province_has_dry_weather_trigger = no
				}
				modifier = {
					factor = 2
					any_neighbor_province_has_heavy_rain_trigger = yes
				}
				modifier = {
					factor = 2
					any_neighbor_province_has_light_rain_trigger = no
				}
				remove_rain_modifiers_effect = yes
				if = {
					limit = { has_province_modifier = africa_rain_dance_successful }
					remove_province_modifier = africa_rain_dance_successful
				}
				add_province_modifier = {
					name = africa_drought_risk
					duration = -1
				}
				set_rain_flag_drought_risk_effect = yes
			}
			10 = { # Keep weather (actual drought)...
				modifier = { # There is no nearby great weather...
					factor = 2
					any_neighbor_province_has_light_rain_trigger = no
				}
				modifier = {
					factor = 2
					any_neighbor_province_has_heavy_rain_trigger = no
				}
				modifier = {
					factor = 2
					any_neighbor_province_has_dry_weather_trigger = yes
				}
				set_rain_flag_drought_effect = yes
			}
		}
	}
	set_weather_change_cooldown_effect = yes #sets a hidden modifier...
}

clone_weather_to_prev_effect = {
	if = {
		limit = { has_province_modifier = africa_heavy_rain }
		PREV = {
			remove_rain_modifiers_effect = yes
			add_province_modifier = {
				name = africa_heavy_rain
				duration = -1
			}
			set_rain_flag_heavy_effect = yes
		}
	}
	else_if = {
		limit = { has_province_modifier = africa_light_rain }
		PREV = {
			remove_rain_modifiers_effect = yes
			add_province_modifier = {
				name = africa_light_rain
				duration = -1
			}
			set_rain_flag_light_effect = yes
		}
	}
	else_if = {
		limit = { has_province_modifier = africa_drought_risk }
		PREV = {
			remove_rain_modifiers_effect = yes
			add_province_modifier = {
				name = africa_drought_risk
				duration = -1
			}
			set_rain_flag_drought_risk_effect = yes
		}
	}
	else = {
		limit = { has_province_modifier = africa_drought }
		PREV = {
			remove_rain_modifiers_effect = yes
			add_province_modifier = {
				name = africa_drought
				duration = -1
			}
			set_rain_flag_drought_effect = yes
		}
	}
	PREV = { set_weather_change_cooldown_effect = yes } #sets a hidden modifier...
}

calculate_weather_status_in_demesne_effect = {
	### Find out what had the most impact...
	set_variable = {
		which = light_rain_count
		value = 0
	}
	set_variable = {
		which = heavy_rain_count
		value = 0
	}
	set_variable = {
		which = drought_risk_count
		value = 0
	}
	set_variable = {
		which = drought_count
		value = 0
	}
	# Light rain...?
	while = {
		limit = {
	    	any_demesne_province = {
	    		has_province_modifier = africa_light_rain
	    		NOT = { has_province_flag = has_been_counted }
	    	}
		}
		random_demesne_province = {
			limit = {
				has_province_modifier = africa_light_rain
	    		NOT = { has_province_flag = has_been_counted }
			}
			PREV = {
		    	change_variable = {
					which = light_rain_count
					value = 1
				}
			}
			set_province_flag = has_been_counted
		}
	}
	# Heavy rain...?
	while = {
		limit = {
	    	any_demesne_province = {
	    		has_province_modifier = africa_heavy_rain
	    		NOT = { has_province_flag = has_been_counted }
	    	}
		}
		random_demesne_province = {
			limit = {
				has_province_modifier = africa_heavy_rain
	    		NOT = { has_province_flag = has_been_counted }
			}
			PREV = {
		    	change_variable = {
					which = heavy_rain_count
					value = 1
				}
			}
			set_province_flag = has_been_counted
		}
	}
	# Drought risk...?
	while = {
		limit = {
	    	any_demesne_province = {
	    		has_province_modifier = africa_drought_risk
	    		NOT = { has_province_flag = has_been_counted }
	    	}
		}
		random_demesne_province = {
			limit = {
				has_province_modifier = africa_drought_risk
	    		NOT = { has_province_flag = has_been_counted }
			}
			PREV = {
		    	change_variable = {
					which = drought_risk_count
					value = 1
				}
			}
			set_province_flag = has_been_counted
		}
	}
	# Actual drought...?
	while = {
		limit = {
	    	any_demesne_province = {
	    		has_province_modifier = africa_drought
	    		NOT = { has_province_flag = has_been_counted }
	    	}
		}
		random_demesne_province = {
			limit = {
				has_province_modifier = africa_drought
	    		NOT = { has_province_flag = has_been_counted }
			}
			PREV = {
		    	change_variable = {
					which = drought_count
					value = 1
				}
			}
			set_province_flag = has_been_counted
		}
	}

	any_demesne_province = { clr_province_flag = has_been_counted } #clean up

	clr_character_flag = mostly_drought
	clr_character_flag = mostly_drought_risk
	clr_character_flag = mostly_light_rain
	clr_character_flag = mostly_heavy_rain
	clr_character_flag = one_rain_variable_is_higher_than_one_drought_variable
	clr_character_flag = light_rain_variable_is_higher_than_drought_variable
	clr_character_flag = light_rain_variable_is_higher_than_drought_risk_variable
	clr_character_flag = heavy_rain_variable_is_higher_than_drought_variable
	clr_character_flag = heavy_rain_variable_is_higher_than_drought_risk_variable


	if = {
		limit = {
			check_variable = { # if actual drought is more common than the risk of it...
				which = "drought_count"
				which >= "drought_risk_count"
				which = ROOT		
			}
			check_variable = { # and more common than heavy rain...
				which = "drought_count"
				which >= "heavy_rain_count"
				which = ROOT
			}
			check_variable = { # and more than light rain...
				which = "drought_count"
				which >= "light_rain_count"
				which = ROOT
			}
		}
		set_character_flag = mostly_drought
	}
	if = {
		limit = {
			check_variable = { # if drought risk is more common than actual drought...
				which = "drought_risk_count"
				which >= "drought_count"
				which = ROOT
			}
			check_variable = { # and more common than heavy rain...
				which = "drought_risk_count"
				which >= "heavy_rain_count"
				which = ROOT
			}
			check_variable = { # and more than light rain...
				which = "drought_risk_count"
				which >= "light_rain_count"
				which = ROOT
			}
		}
		set_character_flag = mostly_drought_risk
	}
	if = {
		limit = {
			check_variable = { # if light rain is more common than drought risk...
				which = "light_rain_count"
				which >= "drought_risk_count"
				which = ROOT
			}
			check_variable = { # and more common than heavy rain...
				which = "light_rain_count"
				which >= "heavy_rain_count"
				which = ROOT
			}
			check_variable = { # and more than drought...
				which = "light_rain_count"
				which >= "drought_count"
				which = ROOT
			}
		}
		set_character_flag = mostly_light_rain
	}
	if = {
		limit = {
			check_variable = { # if heavy rain is more common than drought risk...
				which = "heavy_rain_count"
				which >= "drought_risk_count"
				which = ROOT
			}
			check_variable = { # and more common than heavy rain...
				which = "heavy_rain_count"
				which >= "light_rain_count"
				which = ROOT
			}
			check_variable = { # and more than drought...
				which = "heavy_rain_count"
				which >= "drought_count"
				which = ROOT
			}
		}
		set_character_flag = mostly_heavy_rain
	}

	if = {
		limit = {
			OR = {
    			check_variable = {
					which = "light_rain_count"
					which >= "drought_count"
					which = ROOT
				}
				check_variable = {
					which = "light_rain_count"
					which >= "drought_risk_count"
					which = ROOT
				}
				check_variable = {
					which = "heavy_rain_count"
					which >= "drought_count"
					which = ROOT
				}
				check_variable = {
					which = "heavy_rain_count"
					which >= "drought_risk_count"
					which = ROOT
				}
			}
		}
		set_character_flag = one_rain_variable_is_higher_than_one_drought_variable
		if = {
			limit = {
				check_variable = {
					which = "light_rain_count"
					which >= "drought_count"
					which = ROOT
				}
			}
			set_character_flag = light_rain_variable_is_higher_than_drought_variable
		}
		if = {
			limit = {
				check_variable = {
					which = "light_rain_count"
					which >= "drought_risk_count"
					which = ROOT
				}
			}
			set_character_flag = light_rain_variable_is_higher_than_drought_risk_variable
		}
		if = {
			limit = {
				check_variable = {
					which = "heavy_rain_count"
					which >= "drought_count"
					which = ROOT
				}
			}
			set_character_flag = heavy_rain_variable_is_higher_than_drought_variable
		}
		if = {
			limit = {
				check_variable = {
					which = "heavy_rain_count"
					which >= "drought_risk_count"
					which = ROOT
				}
			}
			set_character_flag = heavy_rain_variable_is_higher_than_drought_risk_variable
		}
	}
}

clr_flags_introduce_heir_effect = {
	clr_character_flag = ZE_evt_heir_1
	clr_character_flag = ZE_evt_heir_2
	clr_character_flag = ZE_evt_heir_2B
	clr_character_flag = ZE_evt_heir_3
	clr_character_flag = ZE_evt_heir_3B
	clr_character_flag = ZE_evt_heir_4
	clr_character_flag = ZE_evt_heir_5
	clr_character_flag = ZE_evt_heir_6
	clr_character_flag = ZE_evt_heir_7
	clr_character_flag = ZE_evt_heir_8
}

generate_mask_effect = {
	random_list = { 
		20 = { 
			add_artifact = crown_african_mask_1
			new_artifact = {
				random_list = { 
					20 = { set_name = crown_african_mask_1_random_a } #Randomize names to avoid too much repetition.
					20 = { set_name = crown_african_mask_1_random_b }
					20 = { set_name = crown_african_mask_1_random_c }
					20 = { set_name = crown_african_mask_1_random_d } 
				}
			}
		}
		20 = { 
			add_artifact = crown_african_mask_2
			new_artifact = {
				random_list = { 
					20 = { set_name = crown_african_mask_2_random_a } #Randomize names to avoid too much repetition.
					20 = { set_name = crown_african_mask_2_random_b }
					20 = { set_name = crown_african_mask_2_random_c }
					20 = { set_name = crown_african_mask_2_random_d } 
				}
			}
		}
		20 = { 
			add_artifact = crown_african_mask_3
			new_artifact = {
				random_list = { 
					20 = { set_name = crown_african_mask_3_random_a } #Randomize names to avoid too much repetition.
					20 = { set_name = crown_african_mask_3_random_b }
					20 = { set_name = crown_african_mask_3_random_c }
					20 = { set_name = crown_african_mask_3_random_d } 
				}
			}
		}
		20 = { 
			add_artifact = crown_african_mask_4
			new_artifact = {
				random_list = { 
					20 = { set_name = crown_african_mask_4_random_a } #Randomize names to avoid too much repetition.
					20 = { set_name = crown_african_mask_4_random_b }
					20 = { set_name = crown_african_mask_4_random_c }
					20 = { set_name = crown_african_mask_4_random_d } 
				}
			}
		}
		20 = { 
			add_artifact = crown_african_mask_5
			new_artifact = {
				random_list = { 
					20 = { set_name = crown_african_mask_5_random_a } #Randomize names to avoid too much repetition.
					20 = { trigger = { ROOT = { NOT = { dynasty = none } } } set_name = crown_african_mask_5_random_b }
					20 = { set_name = crown_african_mask_5_random_c }
					20 = { set_name = crown_african_mask_5_random_d } 
				}
			}
		}
		20 = { 
			add_artifact = crown_african_mask_6
			new_artifact = {
				random_list = { 
					20 = { set_name = crown_african_mask_6_random_a } #Randomize names to avoid too much repetition.
					20 = { set_name = crown_african_mask_6_random_b }
					20 = { trigger = { ROOT = { NOT = { dynasty = none } } } set_name = crown_african_mask_6_random_c }
					20 = { set_name = crown_african_mask_6_random_d } 
				}
			}
		}
		20 = { 
			add_artifact = crown_african_mask_7
			new_artifact = {
				random_list = { 
					20 = { set_name = crown_african_mask_7_random_a } #Randomize names to avoid too much repetition.
					20 = { set_name = crown_african_mask_7_random_b }
					20 = { set_name = crown_african_mask_7_random_c }
					20 = { set_name = crown_african_mask_7_random_d } 
				}
			}
		}
		20 = { 
			add_artifact = crown_african_mask_8
			new_artifact = {
				random_list = { 
					20 = { set_name = crown_african_mask_8_random_a } #Randomize names to avoid too much repetition.
					20 = { set_name = crown_african_mask_8_random_b }
					20 = { set_name = crown_african_mask_8_random_c }
					20 = { set_name = crown_african_mask_8_random_d } 
				}
			}
		}
	}
}

reformation_god_names_changes_effect = { #Reforming religion with certain Doctrines might result in gods being added/removed/changed.
	ROOT = { #The Reformer scope.	
		if = { #A ruler reforms Aztec Paganism.
			limit = {
				NOT = { has_alternate_start_parameter = { key = religion_names value = random } }
				has_dlc = "Holy Fury" 
				religion = aztec_reformed
				OR = { 
					has_religion_feature = religion_matriarchal
					has_religion_feature = religion_patriarchal
					has_religion_feature = religion_dogmatic
					has_religion_feature = religion_proselytizing
				}
			}
			remove_god_names = yes
			remove_evil_god_names = yes
			if = { #Religion is not sexist, add just Proselytizing set.
				limit = {
					NOR = {
						has_religion_feature = religion_matriarchal
						has_religion_feature = religion_patriarchal
					}
					has_religion_feature = religion_proselytizing
				}
				set_high_god_name = GOD_QUETZALCOATL
				add_god_name = GOD_QUETZALCOATL_2
				add_evil_god_name = GOD_TEZCATLIPOCA
			}
			if = { #Religion is not sexist, add just Dogmatic set.
				limit = {
					NOR = {
						has_religion_feature = religion_matriarchal
						has_religion_feature = religion_patriarchal
					}
					has_religion_feature = religion_dogmatic
				}
				set_high_god_name = GOD_HUITZILOPOCHTLI
				add_god_name = GOD_HUITZILOPOCHTLI_2
				add_evil_god_name = TLAZOLTEOTL
			}
			if = { #Religion is Patriarchal
				limit = {
					has_religion_feature = religion_patriarchal
				}
				set_high_god_name = GOD_HUITZILOPOCHTLI 
				add_god_name = GOD_HUITZILOPOCHTLI_2   
				add_god_name = GOD_XIPE_TOTEC 
				add_god_name = GOD_TEZCATLIPOCA
				add_god_name = GOD_QUETZALCOATL
				add_god_name = GOD_TLALOC
				add_evil_god_name = TLAZOLTEOTL 
				add_evil_god_name = GOD_MICTLANTECUHTLI 
				add_evil_god_name = XOLOTL
			}
			if = { #Religion is Matriarchal
				limit = {
					has_religion_feature = religion_matriarchal
				}
				set_high_god_name = GOD_CIHUACOATL
				add_god_name = GOD_CIHUACOATL_2
				add_god_name = GOD_MALINALXOCHITL 
				add_god_name = GOD_METZTLI
				add_god_name = GOD_TONACACIHUATL
				add_evil_god_name = TLAZOLTEOTL 
				add_evil_god_name = GOD_MICTLANTECUHTLI 
				add_evil_god_name = XOLOTL
			}
		}
		if = {
			limit = { #Holy Family actually becomes Holy.
				has_dlc = "Holy Fury" 
				religion = valyrian_rel_reformed
				OR = { 
					has_religion_feature = religion_holy_family 
					has_religion_feature = religion_feature_valyrian_rel
				}				
			}
			remove_god_names = yes
			add_god_name = GOD_BALERION
			add_god_name = GOD_MERAXES
			add_god_name = GOD_VHAGAR
			add_god_name = GOD_URRAX
			add_god_name = GOD_SYRAX
			if = { #Add the seven
				limit = {
					has_religion_feature = religion_feature_the_seven
				}
				add_god_name = GOD_FATHER
				add_god_name = GOD_MOTHER
				add_god_name = GOD_WARRIOR
				add_god_name = GOD_MAIDEN
				add_god_name = GOD_SMITH
				add_god_name = GOD_CRONE
				add_god_name = GOD_SEVEN
			}
			if = {
				limit = { #Reformer becomes the High God.
					OR = {
						has_religion_feature = religion_temporal_head 
						has_religion_feature = religion_god_king_head
					}
				}
				set_high_god_name = string_reformer_god
			}
			else_if = {
				limit = { #Reformer himself, but only if he is not becoming the High God due to synergy.
					OR = { 
						AND = { 
							is_female = no
							NOT = { has_religion_feature = religion_matriarchal }
						}
						AND = { 
							is_female = yes
							NOT = { has_religion_feature = religion_patriarchal }
						}
					}
				}
				add_god_name = string_reformer_god
			}
			if = {
				limit = { #Spouse.
					is_married = yes
					OR = { 
						AND = { 
							is_female = yes
							NOT = { has_religion_feature = religion_matriarchal }
						}
						AND = { 
							is_female = no
							NOT = { has_religion_feature = religion_patriarchal }
						}
					}
				}
				preferred_limit = {
					is_main_spouse = ROOT
				}
				random_spouse = { save_event_target_as = scoped_god_spouse }
				add_god_name = string_reformer_spouse_god
			}
			if = {
				limit = { #Spouse, again.
					is_married = yes
					OR = { 
						AND = { 
							is_female = yes
							has_religion_feature = religion_matriarchal
						}
						AND = { 
							is_female = no
							has_religion_feature = religion_patriarchal
						}
					}
				}
				preferred_limit = {
					is_main_spouse = ROOT
				}
				random_spouse = { save_event_target_as = scoped_god_spouse }
				add_evil_god_name = string_reformer_spouse_god
			}
			random_child = { 
				limit = { 
					OR = { 
						AND = { 
							is_female = no
							NOT = { ROOT = { has_religion_feature = religion_matriarchal } }
						}
						AND = { 
							is_female = yes
							NOT = { ROOT = { has_religion_feature = religion_matriarchal } }
						}
					}
				}
				preferred_limit = {
					is_primary_heir = ROOT
				}
				save_event_target_as = scoped_god_child
				ROOT = { add_god_name = string_reformer_child_god }
			}
			random_sibling = { 
				limit = { 
					OR = { 
						AND = { 
							is_female = no
							NOT = { ROOT = { has_religion_feature = religion_matriarchal } }
						}
						AND = { 
							is_female = yes
							NOT = { ROOT = { has_religion_feature = religion_matriarchal } }
						}
					}
				}
				preferred_limit = {
					is_primary_heir = ROOT
				}
				save_event_target_as = scoped_god_sibling
				ROOT = { add_god_name = string_reformer_sibling_god }
			}
			random_friend = { 
				limit = { 
					trait = dragon
				}
				save_event_target_as = scoped_god_sibling
				ROOT = { add_god_name = string_reformer_sibling_god }
			}
		}	
		if = {
			limit = {
				has_religion_feature = religion_god_king_head
			}
			if = {
				limit = {
					religion = drowned_god_reformed
				}
				if = {
					limit = { is_female = no }
					set_special_character_title = temple_king_drowned_god
				}
				else = {
					set_special_character_title = temple_king_female_drowned_god
				}
			}
			else_if = {
				limit = {
					religion = black_goat_reformed
				}
				set_special_character_title = title_black_goat
			}
			else_if = {
				limit = {
					tier = EMPEROR
					NOR = {
						primary_title = {
							OR = {
								capital_scope = { region = world_westeros }
								title = e_iron_isles
								title = e_riverlands
								title = e_iron_throne
							}
						}
						culture_group = andal
						culture_group = first_man
						culture_group = dornish
						culture_group = iron_isles_culture
						culture_group = sarnor_group
					}
				}
				if = {
					limit = { is_female = no }
					set_special_character_title = title_GOD_EMPEROR
				}
				else = {
					set_special_character_title = title_GOD_EMPRESS
				}
			}
			else_if = {
				limit = { is_female = no }
				set_special_character_title = title_GOD_KING
			}
			else = {
				set_special_character_title = title_GOD_QUEEN
			}
			set_high_god_name = string_god_king
			add_character_modifier = {
				name = god_king
				duration = -1
			}
			character_event = { id = religious.95 days = 1 } #radicalise support
			random_demesne_title = {
				limit = {
					religion = ROOT
					controls_religion = yes
				}
				any_previous_holder = {
					limit = {
						is_alive = yes
						NOT = { character = ROOT }
					}
					remove_special_character_title = yes
				}
			}
			reformation_god_names_root_post_effect = yes #fix
		}
		if = {
			limit = {
				religion = drowned_god_reformed
				has_religion_feature = religion_temporal_head
			}
			if = {
				limit = { is_female = no }
				set_special_character_title = temple_king_drowned_god
			}
			else = {
				set_special_character_title = temple_king_female_drowned_god
			}
			random_demesne_title = {
				limit = {
					religion = ROOT
					controls_religion = yes
				}
				any_previous_holder = {
					limit = {
						is_alive = yes
						NOT = { character = ROOT }
					}
					remove_special_character_title = yes
				}
			}
		}	
	}
}

murder_bloodline_check_effect = { 
	change_variable = { which = bloodline_murdered_people value = 1 }
	if = { #First check for pure Murder Bloodline.
		limit = {
			check_variable = { which = bloodline_murdered_people value = 30 } 
			has_ambition = obj_forge_bloodline
		}
		set_character_flag = flag_about_to_murder_bloodline
		character_event = { id = HF.24025 days = 25 random = 25 }
	}
	else_if = { #Then check for Murder War Hybrid.
		limit = {
			check_variable = { which = bloodline_murdered_people value = 20 } 
			check_variable = { which = bloodline_won_wars value = 10 } 
			has_ambition = obj_forge_bloodline
		}
		set_character_flag = flag_about_to_murder_bloodline
		narrative_event = { id = HF.24045 days = 25 random = 25 }
	}
	else_if = { #Then check for Murder Peace Hybrid.
		limit = {
			check_variable = { which = bloodline_murdered_people value = 20 } 
			check_variable = { which = bloodline_peaceful_years value = 15 } 
			has_ambition = obj_forge_bloodline
		}
		set_character_flag = flag_about_to_murder_bloodline
		narrative_event = { id = HF.24046 days = 25 random = 25 }
	}
	else_if = { #Then check for Murder Builder Hybrid.
		limit = {
			check_variable = { which = bloodline_murdered_people value = 20 } 
			check_variable = { which = bloodline_built_holdings value = 15 } 
			has_ambition = obj_forge_bloodline
		}
		set_character_flag = flag_about_to_murder_bloodline
		narrative_event = { id = HF.24048 days = 25 random = 25 }
	}
}

give_random_character_modifier_effect = {
	random_list = {
		100 = {
			trigger = {
				NOT = { has_character_modifier = aspiring_poet }
				learning = 8
			}
			modifier = {
				factor = 2
				learning = 12
			}
			add_character_modifier = {
				name = aspiring_poet
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = aspiring_duelist }
				has_severe_disability_trigger = no
				combat_rating = 40
				NOT = { trait = craven }
				OR = {
					is_female = no
					female_get_masculine_event_trigger = yes
				}
			}
			modifier = {
				factor = 2
				martial = 12
			}
			modifier = {
				factor = 2
				OR = {
					duelist_skill_is_medium_group_trigger = yes
					duelist_skill_is_high_group_trigger = yes
				}
			}
			add_character_modifier = {
				name = aspiring_duelist
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = aspiring_hunter }
				has_severe_disability_trigger = no
				OR = {
					is_female = no
					female_get_masculine_event_trigger = yes
				}
			}
			add_character_modifier = {
				name = aspiring_hunter
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = aspiring_falconer }
			}
			add_character_modifier = {
				name = aspiring_falconer
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = learning_advice }
			}
			add_character_modifier = {
				name = learning_advice
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = slept_in_church }
				NOT = { trait = temperate }
			}
			modifier = {
				factor = 2
				trait = drunkard
			}
			add_character_modifier = {
				name = slept_in_church
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = gambler }
				NOT = { trait = temperate }
			}
			add_character_modifier = {
				name = gambler
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = whoremaster }
				NOT = { trait = celibate }
				NOT = { trait = chaste }
				NOT = { trait = honorable }
				is_female = no
			}
			modifier = {
				factor = 2
				trait = lustful
			}
			add_character_modifier = {
				name = whoremaster
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = good_deeds }
				has_unpleasant_trait_trigger = no
			}
			modifier = {
				factor = 1.5
				is_benevolent_trigger = yes
			}
			modifier = {
				factor = 1.5
				has_pleasant_personality_trigger = yes
			}
			add_character_modifier = {
				name = good_deeds
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = proving_bravery }
				NOT = { trait = craven }
			}
			modifier = {
				factor = 2
				trait = brave
			}
			add_character_modifier = {
				name = proving_bravery
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = suspected_coward }
				NOT = { trait = brave }
			}
			add_character_modifier = {
				name = suspected_coward
				years = 5
			}
		}
		5 = {
			trigger = {
				NOT = { has_character_modifier = speaking_in_tounges }
			}
			modifier = {
				factor = 4
				trait = lunatic
			}
			add_character_modifier = {
				name = speaking_in_tounges
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = good_times }
			}
			add_character_modifier = {
				name = good_times
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = good_hunt }
				has_severe_disability_trigger = no
				OR = {
					is_female = no
					female_get_masculine_event_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = hunter
			}
			add_character_modifier = {
				name = good_hunt
				years = 5
			}
		}
		5 = {
			trigger = {
				NOT = { has_character_modifier = epic_hangover }
				NOT = { trait = temperate }
			}
			modifier ={
				factor = 4
				trait = drunkard
			}
			add_character_modifier = {
				name = epic_hangover
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = weird_scholar }
				learning = 8
			}
			modifier = {
				factor = 2
				learning = 12
			}
			add_character_modifier = {
				name = weird_scholar
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = comfort_of_lover }
				has_lover = yes
			}
			add_character_modifier = {
				name = comfort_of_lover
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = sleep_deprivation }
			}
			add_character_modifier = {
				name = sleep_deprivation
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = pet_cat }
			}
			add_character_modifier = {
				name = pet_cat
				years = 5
			}
			random_list = {
				25 = {
					trigger = {
						is_female = yes
					}
					add_character_modifier = {
	    				name = crazy_cat_lady
	    				years = 5
	    			}
				}
				25 = {
					trigger = {
						is_female = no
					}
					add_character_modifier = {
	    				name = crazy_cat_lord
	    				years = 5
	    			}
				}
				100 = {}
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = invigorated }
			}
			add_character_modifier = {
				name = invigorated
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = good_listener }
				diplomacy = 8
			}
			add_character_modifier = {
				name = good_listener
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = confident }
				NOT = { trait = shy }
			}
			add_character_modifier = {
				name = confident
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = bad_person }
				is_benevolent_trigger = no
				has_pleasant_personality_trigger = no
			}
			modifier = {
				factor = 2
				OR = {
					is_evil_trigger = yes
					has_unpleasant_personality_trigger = yes
				}
			}
			add_character_modifier = {
				name = bad_person
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = pet_parrot }
			}
			add_character_modifier = {
				name = pet_parrot
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = pet_owl }
			}
			add_character_modifier = {
				name = pet_owl
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = taking_it_easy }
				NOT = { trait = diligent }
			}
			modifier = {
				factor = 2
				trait = slothful
			}
			add_character_modifier = {
				name = taking_it_easy
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = fell_into_the_river }
			}
			add_character_modifier = {
				name = fell_into_the_river
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = green_fingers }
			}
			add_character_modifier = {
				name = green_fingers
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = pet_house_dog }
			}
			add_character_modifier = {
				name = pet_house_dog
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = pet_hedgehog }
			}
			add_character_modifier = {
				name = pet_hedgehog
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = pet_otter }
			}
			add_character_modifier = {
				name = pet_otter
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = bad_nights_sleep }
			}
			add_character_modifier = {
				name = bad_nights_sleep
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = good_nights_sleep }
			}
			add_character_modifier = {
				name = good_nights_sleep
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = well_spoken }
				diplomacy = 6
			}
			modifier = {
				factor = 2
				diplomacy = 12
			}
			add_character_modifier = {
				name = well_spoken
				years = 5
			}
		}
		100 = {
			trigger = {
				NOT = { has_character_modifier = jumbling_words }
				NOT = { diplomacy = 10 }
			}
			modifier = {
				factor = 2
				diplomacy < 5
			}
			add_character_modifier = {
				name = jumbling_words
				years = 5
			}
		}
		100 = {
			trigger = {
				has_injury_trigger = no
			}
			apply_random_minor_injury_effect = yes
		}
		0.001 = {
			#fallback
		}
	}
}

assign_random_nickname_effect = {
	random_list = {
		10 = {
			trigger = {
				trait = brave
			}
			random_list = {
				10 = {
					give_nickname = nick_the_brave
				}
				10 = {
					give_nickname = nick_the_fearless
				}
			}
		}
		10 = {
			give_nickname = nick_the_unlucky
		}
		10 = {
			give_nickname = nick_the_lucky
		}
		5 = {
			trigger = { NOT = { learning = 10 } }
			modifier = {
				factor = 4
				learning < 5
			}
			give_nickname = nick_the_clueless
		}
		10 = {
			trigger = { NOT = { trait = patient } }
			modifier = {
				factor = 4
				OR = {
					is_evil_trigger = yes
					has_unpleasant_personality_trigger = yes
				}
			}
			give_nickname = nick_the_ill_tempered
		}
		10 = {
			trigger = { has_unpleasant_trait_trigger = no }
			modifier = {
				factor = 4
				OR = {
					has_pleasant_personality_trigger = yes
					is_pious_trigger = yes
				}
			}
			give_nickname = nick_the_affable
		}
		10 = {
			trigger = {
				age < 30
			}
			give_nickname = nick_the_youthful
		}
		5 = {
			trigger = { has_ugly_trait_trigger = no }
			modifier = {
				factor = 4
				is_attractive_trigger = yes
			}
			give_nickname = nick_the_beguiling
		}
		10 = {
			trigger = {
				trait = lustful
			}
			give_nickname = nick_the_lewd
		}
		5 = {
			trigger = { 
				NOT = { trait = chaste }
				NOT = { trait = celibate }
				NOT = { trait = eunuch }
			}
			modifier = {
				factor = 4
				trait = lustful
			}
			modifier = {
				factor = 2
				has_lover = yes
			}
			give_nickname = nick_the_unchaste
		}
		5 = {
			trigger = {
				OR = {
					trait = gluttonous
					trait = hedonist
				}	
			}
			give_nickname = nick_the_decadent
		}
		10 = {
			trigger = {
				has_unpleasant_personality_trigger = yes
			}
			random_list = {
				10 = {
					give_nickname = nick_the_shrewd
				}
				10 = {
					give_nickname = nick_the_wily
				}
			}
		}
		10 = {
			trigger = {
				has_pleasant_personality_trigger = yes
			}
			give_nickname = nick_the_jolly
		}
		10 = {
			trigger ={
				has_pleasant_personality_trigger = yes
			}
			random_list = {
				10 = {
					give_nickname = nick_the_gracious
				}
				10 = {
					give_nickname = nick_the_kind
				}
				10 = {
					give_nickname = nick_the_good
				}
			}
		}
		10 = {
			trigger = {
				trait = stubborn
			}
			random_list = {
				10 = {
					give_nickname = nick_the_tenacious
				}
				10 = {
					give_nickname = nick_the_mule
				}
			}
		}
		5 = {
			modifier = {
				factor = 4
				has_mental_disorder_trigger = yes
			}
			give_nickname = nick_the_strange
		}
		10 = {
			trigger = {
				is_weak_trigger = yes
			}
			give_nickname = nick_the_clumsy
		}
		10 = {
			trigger = {
				is_impious_trigger = yes
			}
			give_nickname = nick_the_evil
		}
		10 = {
			trigger = {
				is_strong_trigger = yes
			}
			give_nickname = nick_the_strong
		}
		10 = {
			modifier = {
				factor = 2
				has_pleasant_personality_trigger = yes
			}
			give_nickname = nick_the_merry
		}
		10 = {
			trigger = {
				NOT = { trait = wroth }				
			}
			modifier = {
				factor = 2
				has_pleasant_personality_trigger = yes
			}
			give_nickname = nick_the_gentle
		}
		10 = {
			trigger = {
				trait = proud
			}
			give_nickname = nick_the_proud
		}
		10 = {
			trigger = {
				trait = shy
			}
			give_nickname = nick_the_silent
		}
		10 = {
			trigger = {
				trait = chaste
			}
			give_nickname = nick_the_chaste
		}
		10 = {
			trigger = {
				is_attractive_trigger = yes
				is_female = no
			}
			random_list = {
				10 = {
					give_nickname = nick_the_handsome
				}
				10 = {
					give_nickname = nick_the_vain
				}
			}
		}
		10 = {
			trigger = {
				is_attractive_trigger = yes
				is_female = yes
			}
			random_list = {
				10 = {
					give_nickname = nick_the_fair
				}
				10 = {
					give_nickname = nick_the_vain
				}
				10 = {
					give_nickname = nick_the_flower
				}
			}
		}
		10 = {
			trigger = {
				is_unattractive_trigger = yes
			}
			random_list = {
				10 = {
					give_nickname = nick_the_hideous
				}
				10 = {
					give_nickname = nick_the_frog
				}
				10 = {
					give_nickname = nick_the_repulsive
				}
			}
		}
		10 = {
			trigger = {
				trait = lunatic
			}
			give_nickname = nick_the_mad
		}
		10 = {
			trigger = {
				trait = drunkard
			}
			give_nickname = nick_the_drunkard
		}
		10 = {
			trigger = {
				learning = 10
			}
			modifier = {
				factor = 2
				learning = 14
			}
			give_nickname = nick_the_wise
		}
		10 = {
			trigger = {
				is_pious_trigger = yes
			}
			random_list = {
				10 = {
					give_nickname = nick_the_pious 
				}
				10 = {
					give_nickname = nick_the_blessed 
				}
			}
		}
		10 = {
			give_nickname = nick_the_careless 
		}
		10 = {
			trigger = {
				age < 25
			}
			give_nickname = nick_the_young 
		}
		10 = {
			trigger = {
				age = 50
			}
			give_nickname = nick_the_old 
		}
		10 = {
			trigger = {
				learning = 10
			}
			random_list = {
				10 = {
					give_nickname = nick_the_scholar
				}
				10 = {
					give_nickname = nick_the_understanding
				} 
				10 = {
					give_nickname = nick_the_healer 
				}
			}
		}
		10 = {
			trigger = {
				combat_rating = 10
			}
			give_nickname = nick_the_oakskin
		}
		10 = {
			give_nickname = nick_the_jittery
		}
		10 = {
			trigger = {
				trait = slothful
			}
			give_nickname = nick_the_sleepy
		}
		10 = {
			trigger = {
				base_health < 3
			}
			random_list = {
				10 = {
					give_nickname = nick_butter_teeth
				}
				10 = {
					give_nickname = nick_the_toothless
				}
			}
		}
		10 = {
			trigger = {
				trait = craven
			}
			random_list = {
				10 = {
					give_nickname = nick_the_cowardly
				}
				10 = {
					give_nickname = nick_the_squirmy
				}
			}
		}
		10 = {
			trigger = {
				trait = paranoid
			}
			give_nickname = nick_the_frantic 
		}
		10 = {
			give_nickname = nick_the_dry_throat 
		}
		10 = {
			trigger = {
				NOR = {
					trait = genius
					trait = quick
				}
			}
			modifier = {
				factor = 4
				OR = {
					trait = imbecile
					trait = slow
				}
			}
			random_list = {
				10 = {
					give_nickname = nick_the_thin_minded
				}
				10 = {
					give_nickname = nick_the_forgetful
				}
			}
		}
		10 = {
			give_nickname = nick_the_messy 
		}
		10 = {
			give_nickname = nick_the_feeble
		}
		10 = {
			trigger = {
				NOT = { trait = gregarious }
			}
			modifier = {
				factor = 2
				trait = shy
			}
			give_nickname = nick_the_recluse
		}
		10 = {
			trigger = {
				trait = wroth
			}
			give_nickname = nick_the_short_tempered
		}
		10 = {
			give_nickname = nick_the_red_cheeks
		}
		10 = {
			give_nickname = nick_the_blushing
		}
		10 = {
			trigger = {
				NOT = {
					trait = content
				}
			}
			give_nickname = nick_the_whiner
		}
		10 = {
			trigger = {
				trait = deceitful
			}
			give_nickname = nick_the_liar
		}
		10 = {
			give_nickname = nick_the_twitchy
		}
	}
}

##########
###AGOT###
##########

knight_character_effect = {
	if = {
		limit = { trait = squire }
		remove_trait = squire
	}	
	add_trait = knight
	hidden_tooltip = { 
		if = {
			limit = { 
				is_ruler = no 
				NOT = { has_minor_title = title_prince }
				NOT = { has_minor_title = title_prince_AGOT }
				NOT = { has_minor_title = title_queen_mother }
				NOT = { has_minor_title = title_ruler_consort }
			}
			if = {
				limit = { is_female = no } 
				set_special_character_title = title_ser
			}
			if = {
				limit = { is_female = yes }
				set_special_character_title = title_lady	
			}
		}	
	}
}

increase_warlock_magic = {
	if = {
		limit = { check_variable = { which = "warlock_magic" value = 1 } }
		change_variable = { which = "warlock_magic" value = 1 }
	}
	if = {
		limit = { NOT = { check_variable = { which = "warlock_magic" value = 1 } } }
		set_variable = { which = "warlock_magic" value = 1 }
	}
}
# Warlock magic increases from sacrifices, do the effect in the scope of the person being executed ROOT is the executor
# eg: FROMFROM is being executed - FROMFROM = { increase_warlock_magic_sacrifice_effect = yes }

increase_warlock_magic_sacrifice_effect = {
	# log = "I am [This.GetTitledFirstName] being executed by [Root.GetTitledFirstName]"
	if = {
		limit = {
			tier = EMPEROR
		}
		ROOT = { change_variable = { which = "warlock_magic" value = 4 } }
	}
	if = {
		limit = {
			OR = {
				tier = KING
				father_even_if_dead = { tier = EMPEROR }
				mother_even_if_dead = { tier = EMPEROR }
				mother_even_if_dead = { father_even_if_dead = { tier = EMPEROR } }
				father_even_if_dead = { father_even_if_dead = { tier = EMPEROR } }
				any_claim = { tier = EMPEROR }
			}
		}
		ROOT = { change_variable = { which = "warlock_magic" value = 3 } }
	}
	else_if = {
		limit = {
			OR = {
				tier = DUKE
				father_even_if_dead = { tier = KING }
				mother_even_if_dead = { tier = KING }
				mother_even_if_dead = { father_even_if_dead = { tier = KING } }
				father_even_if_dead = { father_even_if_dead = { tier = KING } }
				any_claim = { tier = KING }
			}
		}
		ROOT = { change_variable = { which = "warlock_magic" value = 2 } }
	}
	else_if = {
		limit = {
			OR = {
				tier = COUNT
				father_even_if_dead = { tier = DUKE }
				mother_even_if_dead = { tier = DUKE }
				mother_even_if_dead = { father_even_if_dead = { tier = DUKE } }
				father_even_if_dead = { father_even_if_dead = { tier = DUKE } }
				any_claim = { tier = DUKE }
				is_priest = yes
				has_priest_trait_trigger = yes
				can_use_dragon_abilities_trigger = yes
				trait = kingsguard
			}
		}
		ROOT = { change_variable = { which = "warlock_magic" value = 1 } }
	}
	else_if = {
		limit = {
			OR = {
				tier = BARON
				father_even_if_dead = { tier = COUNT }
				mother_even_if_dead = { tier = COUNT }
				mother_even_if_dead = { father_even_if_dead = { tier = COUNT } }
				father_even_if_dead = { father_even_if_dead = { tier = COUNT } }
				any_claim = { tier = COUNT }
			}
		}
		ROOT = { change_variable = { which = "warlock_magic" value = 0.5 } }
	}
	else = {
		ROOT = { change_variable = { which = "warlock_magic" value = 0.25 } }
	}
}

child_fertility_debuff = {
	if = {
		limit = { 
			NOT = { age = 3 } 
		}
		add_character_modifier = { #To stop impregnation
			name = child
			duration = 4745
			hidden = yes
		}
	}
	if = {
		limit = { 
			age = 3
			NOT = { age = 8 } 
		}
		add_character_modifier = { #To stop impregnation
			name = child
			duration = 3650
			hidden = yes
		}
	}
	if = {
		limit = {
			age = 8
			NOT = { age = 11 }					
		}
		add_character_modifier = { #To stop impregnation
			name = child
			duration = 2190
			hidden = yes
		}
	}
	if = {
		limit = {
			age = 11
			NOT = { age = 14 }					
		}
		add_character_modifier = { #To stop impregnation
			name = child
			duration = 1095
			hidden = yes
		}
	}
}

appoint_KG_lord_commander_effect = {
	if = {
		limit = {
			NOT = { has_landed_title = d_kingsguard }
		}
		save_event_target_as = debt_inheritor
		d_kingsguard = {
			holder_scope = {
				inherit_debt_effect = yes
				if = {
					limit = {
						OR = {
							trait = kingsguard
							AND = {
								tier = DUKE
								NOT = { num_of_duke_titles = 2 }
								NOT = { num_of_count_titles = 1 }
							}
						}	
					}
					abdicate_to = PREVPREV
				}	
				if = {
					limit = {
						NOR = {
							trait = kingsguard
							AND = {
								tier = DUKE
								NOT = { num_of_duke_titles = 2 }
								NOT = { num_of_count_titles = 1 }
							}
						}	
					}
					d_kingsguard = { gain_title = PREVPREVPREV }
				}
			}
		}
		if = {
			limit = { has_global_flag = change_kingsguard_history }
			clr_global_flag = change_kingsguard_history
			d_kingsguard_dummy = { gain_title = PREV }
			d_kingsguard = { copy_title_history = d_kingsguard_dummy }
			character_event = { id = kingsguard.21 days = 2 }						
		}	
	}
	character_event = { id = kingsguard.16 days = 1 }
	set_government_type = KG_government
	set_character_flag = ai_flag_never_transfer
	#e_iron_throne = { holder_scope = { character_event = { id = kingsguard.23 } } }
	#d_kingsguard = { holder_scope = { character_event = { id = kingsguard.20 } } }
	character_event = { id = kingsguard.20 }
}

murder_success_calulator_effect = {
	random_list = {
		66 = {	
			#Intrigue effects
			modifier = {
				factor = 1.33
				NOT = { intrigue = 2 }
			}
			modifier = {
				factor = 1.33
				NOT = { intrigue = 5 }
			}
			modifier = {
				factor = 0.75
				intrigue = 8
			}
			modifier = {
				factor = 0.75
				intrigue = 11
			}
			modifier = {
				factor = 0.75
				intrigue = 14
			}
			modifier = {
				factor = 0.75
				intrigue = 17
			}
			
			modifier = {
				factor = 0.75
				FROM = { NOT = { intrigue = 2 } }
			}
			modifier = {
				factor = 0.75
				FROM = { NOT = { intrigue = 5 } }
			}
			modifier = {
				factor = 1.33
				FROM = { intrigue = 8 }
			}
			modifier = {
				factor = 1.33
				FROM = { intrigue = 11 }
			}
			modifier = {
				factor = 1.33
				FROM = { intrigue = 14 }
			}
			modifier = {
				factor = 1.33
				FROM = { intrigue = 17 }
			}
			modifier = {
				factor = 1.5
				FROM = { has_character_flag = murder_extra_investment }
			}
			
			#Plot power effects
			modifier = {
				factor = 0.75
				FROM = {
					plot_target_char = { character = ROOT }
					NOT = { plot_power = 0.4 }
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					plot_target_char = { character = ROOT }
					NOT = { plot_power = 0.7 }
				}
			}
			modifier = {
				factor = 1.33
				FROM = {
					plot_target_char = { character = ROOT }
					plot_power = 1.3
				}
			}
			modifier = {
				factor = 1.33
				FROM = {
					plot_target_char = { character = ROOT }
					plot_power = 1.8
				}
			}
			modifier = {
				factor = 1.33
				FROM = {
					plot_target_char = { character = ROOT }
					plot_power = 2.5
				}
			}
			modifier = {
				factor = 1.33
				FROM = {
					plot_target_char = { character = ROOT }
					plot_power = 3.5
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					plot_target_char = { character = ROOT }
					plot_power = 5
				}
			}
			modifier = {
				factor = 0.75
				FROMFROM = {
					NOT = { character = ROOT_FROM }
					plot_target_char = { character = ROOT }
					NOT = { plot_power = 0.4 }
				}
			}
			modifier = {
				factor = 0.75
				FROMFROM = {
					NOT = { character = ROOT_FROM }
					plot_target_char = { character = ROOT }
					NOT = { plot_power = 0.7 }
				}
			}
			modifier = {
				factor = 1.33
				FROMFROM = {
					NOT = { character = ROOT_FROM }
					plot_target_char = { character = ROOT }
					plot_power = 1.3
				}
			}
			modifier = {
				factor = 1.33
				FROMFROM = {
					NOT = { character = ROOT_FROM }
					plot_target_char = { character = ROOT }
					plot_power = 1.8
				}
			}
			modifier = {
				factor = 1.33
				FROMFROM = {
					NOT = { character = ROOT_FROM }
					plot_target_char = { character = ROOT }
					plot_power = 2.5
				}
			}
			modifier = {
				factor = 1.33
				FROMFROM = {
					NOT = { character = ROOT_FROM }
					plot_target_char = { character = ROOT }
					plot_power = 3.5
				}
			}
			modifier = {
				factor = 1.5
				FROMFROM = {
					NOT = { character = ROOT_FROM }
					plot_target_char = { character = ROOT }
					plot_power = 5
				}
			}
			
			#Bodyguard effects
			modifier = {
				factor = 0.9
				is_ruler = yes
				any_courtier = {				
					OR = {
						has_minor_title = title_bodyguard
						has_minor_title = title_bloodrider
					}
					trait = trained_warrior
					liege = { character = ROOT }
					NOT = { character = FROM }
					NOT = { character = FROMFROM }
				}
			}
			modifier = {
				factor = 0.75
				is_ruler = yes
				any_courtier = {				
					OR = {
						has_minor_title = title_bodyguard
						has_minor_title = title_bloodrider
					}
					trait = skilled_warrior
					liege = { character = ROOT }
					NOT = { character = FROM }
					NOT = { character = FROMFROM }
				}
			}
			modifier = {
				factor = 0.6
				is_ruler = yes
				any_courtier = {				
					OR = {
						has_minor_title = title_bodyguard
						has_minor_title = title_bloodrider
					}
					trait = master_warrior
					liege = { character = ROOT }
					NOT = { character = FROM }
					NOT = { character = FROMFROM }
				}
			}
			modifier = {
				factor = 0.9
				OR = {
					has_landed_title = e_iron_throne
					AND = {
						is_ruler = no
						liege = {
							has_landed_title = e_iron_throne
							is_close_relative = ROOT
						}
					}	
				}	
				kingsguard = {				
					is_alive = yes
					trait = trained_warrior
					prisoner = no
					is_incapable = no
					NOT = { character = FROM }
					NOT = { character = FROMFROM }
					NOR = {
						war_with = ROOT
						any_liege = { war_with = ROOT }
					}
				}
			}
			modifier = {
				factor = 0.75
				OR = {
					has_landed_title = e_iron_throne
					AND = {
						is_ruler = no
						liege = {
							has_landed_title = e_iron_throne
							is_close_relative = ROOT
						}
					}	
				}	
				kingsguard = {				
					is_alive = yes
					trait = skilled_warrior
					prisoner = no
					is_incapable = no
					NOT = { character = FROM }
					NOT = { character = FROMFROM }
					NOR = {
						war_with = ROOT
						any_liege = { war_with = ROOT }
					}
				}
			}
			modifier = {
				factor = 0.6
				OR = {
					has_landed_title = e_iron_throne
					AND = {
						is_ruler = no
						liege = {
							has_landed_title = e_iron_throne
							is_close_relative = ROOT
						}
					}	
				}	
				kingsguard = {				
					is_alive = yes
					trait = master_warrior
					prisoner = no
					is_incapable = no
					NOT = { character = FROM }
					NOT = { character = FROMFROM }
					NOR = {
						war_with = ROOT
						any_liege = { war_with = ROOT }
					}
				}
			}
			
			#Traits
			modifier = {
				factor = 1.5
				trait = trusting
			}
			modifier = {
				factor = 0.5
				trait = paranoid
			}
			#Special murders
			modifier = {
				factor = 0.66
				has_character_flag = food_murder
				trait = temperate
			}
			modifier = {
				factor = 1.5
				has_character_flag = food_murder
				trait = gluttonous
			}
			modifier = {
				factor = 0.7
				has_character_flag = fighting_murder
				combat_rating = 100
			}
			modifier = {
				factor = 0.7
				has_character_flag = fighting_murder
				combat_rating = 80
			}
			modifier = {
				factor = 0.7
				has_character_flag = fighting_murder
				combat_rating = 60
			}
			modifier = {
				factor = 0.7
				has_character_flag = fighting_murder
				combat_rating = 40
			}
			modifier = {
				factor = 1.42
				has_character_flag = fighting_murder
				NOT = { combat_rating = 20 }
			}
			modifier = {
				factor = 1.42
				has_character_flag = fighting_murder
				NOT = { combat_rating = 0 }
			}
			
			modifier = {
				factor = 1.42
				has_character_flag = duel_murder
				FROM = { combat_rating = 100 }
			}
			modifier = {
				factor = 1.42
				has_character_flag = duel_murder
				FROM = { combat_rating = 80 }
			}
			modifier = {
				factor = 1.42
				has_character_flag = duel_murder
				FROM = { combat_rating = 60 }
			}
			modifier = {
				factor = 1.42
				has_character_flag = duel_murder
				FROM = { combat_rating = 40 }
			}
			modifier = {
				factor = 0.7
				has_character_flag = duel_murder
				FROM = { NOT = { combat_rating = 20 } }
			}
			modifier = {
				factor = 0.7
				has_character_flag = duel_murder
				FROM = { NOT = { combat_rating = 0 } }
			}
			
			modifier = {
				factor = 1.5
				has_character_modifier = curse_of_harrenhal
			}
			modifier = {
				factor = 0.66
				FROM = {
					plot_target_char = { character = ROOT }
					has_character_modifier = curse_of_harrenhal
				}
			}
			modifier = {
				factor = 0.66
				FROMFROM = {
					NOT = { character = ROOT_FROM }
					plot_target_char = { character = ROOT }
					has_character_modifier = curse_of_harrenhal
				}
			}
			set_character_flag = murder_success
		}
		33 = {
			set_character_flag = murder_fail
		}
	}
}
increase_holding_base_value_effect = {
	if = {
		limit = { has_holding_modifier = upgrade_bv }
		remove_holding_modifier = upgrade_bv
	}
	if = {
		limit = { holding_type = castle }				
		location = { clr_province_flag = inherited_upgrade }
		if = {
			limit = { has_building = ca_asoiaf_north_basevalue_5 }
			add_building = ca_asoiaf_north_basevalue_6
			
		}
		else_if = {
			limit = { has_building = ca_asoiaf_river_basevalue_5 }
			add_building = ca_asoiaf_river_basevalue_6
			
		}
		else_if = {
			limit = { has_building = ca_asoiaf_dorne_basevalue_5 }
			add_building = ca_asoiaf_dorne_basevalue_6
			
		}
		else_if = {
			limit = { has_building = ca_asoiaf_ironislands_basevalue_5 }
			add_building = ca_asoiaf_ironislands_basevalue_6
			
		}
		else_if = {
			limit = { has_building = ca_asoiaf_crown_basevalue_5 }
			add_building = ca_asoiaf_crown_basevalue_6
			
		}
		else_if = {
			limit = { has_building = ca_asoiaf_storm_basevalue_5 }
			add_building = ca_asoiaf_storm_basevalue_6
			
		}
		else_if = {
			limit = { has_building = ca_asoiaf_vale_basevalue_5 }
			add_building = ca_asoiaf_vale_basevalue_6
			
		}
		else_if = {
			limit = { has_building = ca_asoiaf_westerland_basevalue_5 }
			add_building = ca_asoiaf_westerland_basevalue_6
			
		}
		else_if = {
			limit = { has_building = ca_asoiaf_reach_basevalue_5 }
			add_building = ca_asoiaf_reach_basevalue_6
			
		}
		else_if = {
			limit = { has_building = ca_asoiaf_essos_basevalue_5 }
			add_building = ca_asoiaf_essos_basevalue_6
			
		}
		else_if = {
			limit = { has_building = ca_asoiaf_summerisland_basevalue_5 }
			add_building = ca_asoiaf_summerisland_basevalue_6
			
		}
		else_if = {
			limit = { has_building = ca_asoiaf_qarth_basevalue_5 }
			add_building = ca_asoiaf_qarth_basevalue_6
			
		}
		else_if = {
			limit = { has_building = ca_asoiaf_ghiscari_basevalue_5 }
			add_building = ca_asoiaf_ghiscari_basevalue_6
			
		}
		else_if = {
			limit = { has_building = ca_asoiaf_lhazareen_basevalue_5 }
			add_building = ca_asoiaf_lhazareen_basevalue_6
			
		}
		else_if = {
			limit = { has_building = ca_asoiaf_eastern_basevalue_5 }
			add_building = ca_asoiaf_eastern_basevalue_6
			
		}
		else_if = {
			limit = { has_building = ca_asoiaf_ibben_basevalue_5 }
			add_building = ca_asoiaf_ibben_basevalue_6
			
		}
		else_if = {
			limit = { has_building = ca_asoiaf_yiti_basevalue_5 }
			add_building = ca_asoiaf_yiti_basevalue_6
			
		}
		else_if = {
			limit = { has_building = ca_asoiaf_sarnor_basevalue_5 }
			add_building = ca_asoiaf_sarnor_basevalue_6
			
		}
		else_if = {
			limit = { has_building = ca_asoiaf_asshai_basevalue_5 }
			add_building = ca_asoiaf_asshai_basevalue_6
			
		}
		else_if = {
			limit = { has_building = ca_asoiaf_valyria_basevalue_5 }
			add_building = ca_asoiaf_valyria_basevalue_6
			
		}
		#####
		else_if = {
			limit = { has_building = ca_asoiaf_north_basevalue_4 }
			add_building = ca_asoiaf_north_basevalue_5
		}
		else_if = {
			limit = { has_building = ca_asoiaf_river_basevalue_4 }
			add_building = ca_asoiaf_river_basevalue_5
		}
		else_if = {
			limit = { has_building = ca_asoiaf_dorne_basevalue_4 }
			add_building = ca_asoiaf_dorne_basevalue_5
		}
		else_if = {
			limit = { has_building = ca_asoiaf_ironislands_basevalue_4 }
			add_building = ca_asoiaf_ironislands_basevalue_5
		}
		else_if = {
			limit = { has_building = ca_asoiaf_crown_basevalue_4 }
			add_building = ca_asoiaf_crown_basevalue_5
		}
		else_if = {
			limit = { has_building = ca_asoiaf_storm_basevalue_4 }
			add_building = ca_asoiaf_storm_basevalue_5
		}
		else_if = {
			limit = { has_building = ca_asoiaf_vale_basevalue_4 }
			add_building = ca_asoiaf_vale_basevalue_5
		}
		else_if = {
			limit = { has_building = ca_asoiaf_westerland_basevalue_4 }
			add_building = ca_asoiaf_westerland_basevalue_5
		}
		else_if = {
			limit = { has_building = ca_asoiaf_reach_basevalue_4 }
			add_building = ca_asoiaf_reach_basevalue_5
		}
		else_if = {
			limit = { has_building = ca_asoiaf_essos_basevalue_4 }
			add_building = ca_asoiaf_essos_basevalue_5
		}
		else_if = {
			limit = { has_building = ca_asoiaf_summerisland_basevalue_4 }
			add_building = ca_asoiaf_summerisland_basevalue_5
		}
		else_if = {
			limit = { has_building = ca_asoiaf_qarth_basevalue_4 }
			add_building = ca_asoiaf_qarth_basevalue_5
		}
		else_if = {
			limit = { has_building = ca_asoiaf_ghiscari_basevalue_4 }
			add_building = ca_asoiaf_ghiscari_basevalue_5
		}
		else_if = {
			limit = { has_building = ca_asoiaf_lhazareen_basevalue_4 }
			add_building = ca_asoiaf_lhazareen_basevalue_5
		}
		else_if = {
			limit = { has_building = ca_asoiaf_eastern_basevalue_4 }
			add_building = ca_asoiaf_eastern_basevalue_5
		}
		else_if = {
			limit = { has_building = ca_asoiaf_ibben_basevalue_4 }
			add_building = ca_asoiaf_ibben_basevalue_5
		}
		else_if = {
			limit = { has_building = ca_asoiaf_yiti_basevalue_4 }
			add_building = ca_asoiaf_yiti_basevalue_5
		}
		else_if = {
			limit = { has_building = ca_asoiaf_sarnor_basevalue_4 }
			add_building = ca_asoiaf_sarnor_basevalue_5
		}
		else_if = {
			limit = { has_building = ca_asoiaf_asshai_basevalue_4 }
			add_building = ca_asoiaf_asshai_basevalue_5
		}
		else_if = {
			limit = { has_building = ca_asoiaf_valyria_basevalue_4 }
			add_building = ca_asoiaf_valyria_basevalue_5
		}
		####
		else_if = {
			limit = { has_building = ca_asoiaf_north_basevalue_3 }
			add_building = ca_asoiaf_north_basevalue_4
		}
		else_if = {
			limit = { has_building = ca_asoiaf_river_basevalue_3 }
			add_building = ca_asoiaf_river_basevalue_4
		}
		else_if = {
			limit = { has_building = ca_asoiaf_dorne_basevalue_3 }
			add_building = ca_asoiaf_dorne_basevalue_4
		}
		else_if = {
			limit = { has_building = ca_asoiaf_ironislands_basevalue_3 }
			add_building = ca_asoiaf_ironislands_basevalue_4
		}
		else_if = {
			limit = { has_building = ca_asoiaf_crown_basevalue_3 }
			add_building = ca_asoiaf_crown_basevalue_4
		}
		else_if = {
			limit = { has_building = ca_asoiaf_storm_basevalue_3 }
			add_building = ca_asoiaf_storm_basevalue_4
		}
		else_if = {
			limit = { has_building = ca_asoiaf_vale_basevalue_3 }
			add_building = ca_asoiaf_vale_basevalue_4
		}
		else_if = {
			limit = { has_building = ca_asoiaf_westerland_basevalue_3 }
			add_building = ca_asoiaf_westerland_basevalue_4
		}
		else_if = {
			limit = { has_building = ca_asoiaf_reach_basevalue_3 }
			add_building = ca_asoiaf_reach_basevalue_4
		}
		else_if = {
			limit = { has_building = ca_asoiaf_essos_basevalue_3 }
			add_building = ca_asoiaf_essos_basevalue_4
		}
		else_if = {
			limit = { has_building = ca_asoiaf_summerisland_basevalue_3 }
			add_building = ca_asoiaf_summerisland_basevalue_4
		}
		else_if = {
			limit = { has_building = ca_asoiaf_qarth_basevalue_3 }
			add_building = ca_asoiaf_qarth_basevalue_4
		}
		else_if = {
			limit = { has_building = ca_asoiaf_ghiscari_basevalue_3 }
			add_building = ca_asoiaf_ghiscari_basevalue_4
		}
		else_if = {
			limit = { has_building = ca_asoiaf_lhazareen_basevalue_3 }
			add_building = ca_asoiaf_lhazareen_basevalue_4
		}
		else_if = {
			limit = { has_building = ca_asoiaf_eastern_basevalue_3 }
			add_building = ca_asoiaf_eastern_basevalue_4
		}
		else_if = {
			limit = { has_building = ca_asoiaf_ibben_basevalue_3 }
			add_building = ca_asoiaf_ibben_basevalue_4
		}
		else_if = {
			limit = { has_building = ca_asoiaf_yiti_basevalue_3 }
			add_building = ca_asoiaf_yiti_basevalue_4
		}
		else_if = {
			limit = { has_building = ca_asoiaf_sarnor_basevalue_3 }
			add_building = ca_asoiaf_sarnor_basevalue_4
		}
		else_if = {
			limit = { has_building = ca_asoiaf_asshai_basevalue_3 }
			add_building = ca_asoiaf_asshai_basevalue_4
		}
		else_if = {
			limit = { has_building = ca_asoiaf_valyria_basevalue_3 }
			add_building = ca_asoiaf_valyria_basevalue_4
		}
		####
		else_if = {
			limit = { has_building = ca_asoiaf_north_basevalue_2 }
			add_building = ca_asoiaf_north_basevalue_3
		}
		else_if = {
			limit = { has_building = ca_asoiaf_river_basevalue_2 }
			add_building = ca_asoiaf_river_basevalue_3
		}
		else_if = {
			limit = { has_building = ca_asoiaf_dorne_basevalue_2 }
			add_building = ca_asoiaf_dorne_basevalue_3
		}
		else_if = {
			limit = { has_building = ca_asoiaf_ironislands_basevalue_2 }
			add_building = ca_asoiaf_ironislands_basevalue_3
		}
		else_if = {
			limit = { has_building = ca_asoiaf_crown_basevalue_2 }
			add_building = ca_asoiaf_crown_basevalue_3
		}
		else_if = {
			limit = { has_building = ca_asoiaf_storm_basevalue_2 }
			add_building = ca_asoiaf_storm_basevalue_3
		}
		else_if = {
			limit = { has_building = ca_asoiaf_vale_basevalue_2 }
			add_building = ca_asoiaf_vale_basevalue_3
		}
		else_if = {
			limit = { has_building = ca_asoiaf_westerland_basevalue_2 }
			add_building = ca_asoiaf_westerland_basevalue_3
		}
		else_if = {
			limit = { has_building = ca_asoiaf_reach_basevalue_2 }
			add_building = ca_asoiaf_reach_basevalue_3
		}
		else_if = {
			limit = { has_building = ca_asoiaf_essos_basevalue_2 }
			add_building = ca_asoiaf_essos_basevalue_3
		}
		else_if = {
			limit = { has_building = ca_asoiaf_summerisland_basevalue_2 }
			add_building = ca_asoiaf_summerisland_basevalue_3
		}
		else_if = {
			limit = { has_building = ca_asoiaf_qarth_basevalue_2 }
			add_building = ca_asoiaf_qarth_basevalue_3
		}
		else_if = {
			limit = { has_building = ca_asoiaf_ghiscari_basevalue_2 }
			add_building = ca_asoiaf_ghiscari_basevalue_3
		}
		else_if = {
			limit = { has_building = ca_asoiaf_lhazareen_basevalue_2 }
			add_building = ca_asoiaf_lhazareen_basevalue_3
		}
		else_if = {
			limit = { has_building = ca_asoiaf_eastern_basevalue_2 }
			add_building = ca_asoiaf_eastern_basevalue_3
		}
		else_if = {
			limit = { has_building = ca_asoiaf_ibben_basevalue_2 }
			add_building = ca_asoiaf_ibben_basevalue_3
		}
		else_if = {
			limit = { has_building = ca_asoiaf_yiti_basevalue_2 }
			add_building = ca_asoiaf_yiti_basevalue_3
		}
		else_if = {
			limit = { has_building = ca_asoiaf_sarnor_basevalue_2 }
			add_building = ca_asoiaf_sarnor_basevalue_3
		}
		else_if = {
			limit = { has_building = ca_asoiaf_asshai_basevalue_2 }
			add_building = ca_asoiaf_asshai_basevalue_3
		}
		else_if = {
			limit = { has_building = ca_asoiaf_valyria_basevalue_2 }
			add_building = ca_asoiaf_valyria_basevalue_3
		}
		####
		else_if = {
			limit = { has_building = ca_asoiaf_north_basevalue_1 }
			add_building = ca_asoiaf_north_basevalue_2
		}
		else_if = {
			limit = { has_building = ca_asoiaf_river_basevalue_1 }
			add_building = ca_asoiaf_river_basevalue_2
		}
		else_if = {
			limit = { has_building = ca_asoiaf_dorne_basevalue_1 }
			add_building = ca_asoiaf_dorne_basevalue_2
		}
		else_if = {
			limit = { has_building = ca_asoiaf_ironislands_basevalue_1 }
			add_building = ca_asoiaf_ironislands_basevalue_2
		}
		else_if = {
			limit = { has_building = ca_asoiaf_crown_basevalue_1 }
			add_building = ca_asoiaf_crown_basevalue_2
		}
		else_if = {
			limit = { has_building = ca_asoiaf_storm_basevalue_1 }
			add_building = ca_asoiaf_storm_basevalue_2
		}
		else_if = {
			limit = { has_building = ca_asoiaf_vale_basevalue_1 }
			add_building = ca_asoiaf_vale_basevalue_2
		}
		else_if = {
			limit = { has_building = ca_asoiaf_westerland_basevalue_1 }
			add_building = ca_asoiaf_westerland_basevalue_2
		}
		else_if = {
			limit = { has_building = ca_asoiaf_reach_basevalue_1 }
			add_building = ca_asoiaf_reach_basevalue_2
		}
		else_if = {
			limit = { has_building = ca_asoiaf_essos_basevalue_1 }
			add_building = ca_asoiaf_essos_basevalue_2
		}
		else_if = {
			limit = { has_building = ca_asoiaf_summerisland_basevalue_1 }
			add_building = ca_asoiaf_summerisland_basevalue_2
		}
		else_if = {
			limit = { has_building = ca_asoiaf_qarth_basevalue_1 }
			add_building = ca_asoiaf_qarth_basevalue_2
		}
		else_if = {
			limit = { has_building = ca_asoiaf_ghiscari_basevalue_1 }
			add_building = ca_asoiaf_ghiscari_basevalue_2
		}
		else_if = {
			limit = { has_building = ca_asoiaf_lhazareen_basevalue_1 }
			add_building = ca_asoiaf_lhazareen_basevalue_2
		}
		else_if = {
			limit = { has_building = ca_asoiaf_eastern_basevalue_1 }
			add_building = ca_asoiaf_eastern_basevalue_2
		}
		else_if = {
			limit = { has_building = ca_asoiaf_ibben_basevalue_1 }
			add_building = ca_asoiaf_ibben_basevalue_2
		}
		else_if = {
			limit = { has_building = ca_asoiaf_yiti_basevalue_1 }
			add_building = ca_asoiaf_yiti_basevalue_2
		}
		else_if = {
			limit = { has_building = ca_asoiaf_sarnor_basevalue_1 }
			add_building = ca_asoiaf_sarnor_basevalue_2
		}
		else_if = {
			limit = { has_building = ca_asoiaf_asshai_basevalue_1 }
			add_building = ca_asoiaf_asshai_basevalue_2
		}
		else_if = {
			limit = { has_building = ca_asoiaf_valyria_basevalue_1 }
			add_building = ca_asoiaf_valyria_basevalue_2
		}
		####
		else_if = {
			limit = {
				location = {
					OR = {
						region = world_north
						region = world_beyond_the_wall
					}
				}
			}
			add_building = ca_asoiaf_north_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					region = world_riverlands
				}
			}
			add_building = ca_asoiaf_river_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					OR = {
						region = world_dorne
						region = world_rhoynar
					}	
				}
			}
			add_building = ca_asoiaf_dorne_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					OR = {
						region = world_iron_isles
						region = world_the_sisters
					}	
				}
			}
			add_building = ca_asoiaf_ironislands_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					region = world_crownlands
				}
			}
			add_building = ca_asoiaf_crown_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					region = world_stormlands
				}
			}
			add_building = ca_asoiaf_storm_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					region = world_vale
				}
			}
			add_building = ca_asoiaf_vale_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					region = world_westerlands
				}
			}
			add_building = ca_asoiaf_westerland_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					region = world_reach
				}
			}
			add_building = ca_asoiaf_reach_basevalue_1	
		}
		else_if = {
			limit = {
				location = {
					OR = {
						region = world_free_cities
						region = world_dothraki
					}
					NOT = { region = world_rhoynar }
				}
			}
			add_building = ca_asoiaf_essos_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					region = world_summer_sea
				}
			}
			add_building = ca_asoiaf_summerisland_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					OR = {
						region = world_qarth
						region = world_moraq
					}
				}
			}
			add_building = ca_asoiaf_qarth_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					region = world_ghiscar
				}
			}
			add_building = ca_asoiaf_ghiscari_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					region = world_lhazar
				}
			}
			add_building = ca_asoiaf_lhazareen_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					OR = {
						region = world_bone_mountains
						region = world_nghai
						region = world_jogos_nhai
					}
				}
			}
			add_building = ca_asoiaf_eastern_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					OR = {
						region = world_ibben
						region = world_ifeqevron
					}
				}
			}
			add_building = ca_asoiaf_ibben_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					region = world_yi_ti
				}
			}
			add_building = ca_asoiaf_yiti_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					region = world_sarnor
				}
			}
			add_building = ca_asoiaf_sarnor_basevalue_1
		}	
		else_if = {
			limit = {
				location = {
					region = world_asshai
				}
			}
			add_building = ca_asoiaf_asshai_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					region = world_valyrian_peninsula
				}
			}
			add_building = ca_asoiaf_valyria_basevalue_1
		}
	}
	else_if = {
		limit = { holding_type = city }					
		location = { clr_province_flag = inherited_upgrade }
		if = {
			limit = { has_building = ct_asoiaf_north_basevalue_5 }
			add_building = ct_asoiaf_north_basevalue_6
		}
		else_if = {
			limit = { has_building = ct_asoiaf_river_basevalue_5 }
			add_building = ct_asoiaf_river_basevalue_6
		}
		else_if = {
			limit = { has_building = ct_asoiaf_dorne_basevalue_5 }
			add_building = ct_asoiaf_dorne_basevalue_6
		}
		else_if = {
			limit = { has_building = ct_asoiaf_ironislands_basevalue_5 }
			add_building = ct_asoiaf_ironislands_basevalue_6
		}
		else_if = {
			limit = { has_building = ct_asoiaf_crown_basevalue_5 }
			add_building = ct_asoiaf_crown_basevalue_6
		}
		else_if = {
			limit = { has_building = ct_asoiaf_storm_basevalue_5 }
			add_building = ct_asoiaf_storm_basevalue_6
		}
		else_if = {
			limit = { has_building = ct_asoiaf_vale_basevalue_5 }
			add_building = ct_asoiaf_vale_basevalue_6
		}
		else_if = {
			limit = { has_building = ct_asoiaf_westerland_basevalue_5 }
			add_building = ct_asoiaf_westerland_basevalue_6
		}
		else_if = {
			limit = { has_building = ct_asoiaf_reach_basevalue_5 }
			add_building = ct_asoiaf_reach_basevalue_6
		}
		else_if = {
			limit = { has_building = ct_asoiaf_essos_basevalue_5 }
			add_building = ct_asoiaf_essos_basevalue_6
		}
		else_if = {
			limit = { has_building = ct_asoiaf_summerisland_basevalue_5 }
			add_building = ct_asoiaf_summerisland_basevalue_6
		}
		else_if = {
			limit = { has_building = ct_asoiaf_qarth_basevalue_5 }
			add_building = ct_asoiaf_qarth_basevalue_6
		}
		else_if = {
			limit = { has_building = ct_asoiaf_ghiscari_basevalue_5 }
			add_building = ct_asoiaf_ghiscari_basevalue_6
		}
		else_if = {
			limit = { has_building = ct_asoiaf_lhazareen_basevalue_5 }
			add_building = ct_asoiaf_lhazareen_basevalue_6
		}
		else_if = {
			limit = { has_building = ct_asoiaf_eastern_basevalue_5 }
			add_building = ct_asoiaf_eastern_basevalue_6
		}
		else_if = {
			limit = { has_building = ct_asoiaf_ibben_basevalue_5 }
			add_building = ct_asoiaf_ibben_basevalue_6
		}
		else_if = {
			limit = { has_building = ct_asoiaf_yiti_basevalue_5 }
			add_building = ct_asoiaf_yiti_basevalue_6
		}
		else_if = {
			limit = { has_building = ct_asoiaf_sarnor_basevalue_5 }
			add_building = ct_asoiaf_sarnor_basevalue_6
		}
		else_if = {
			limit = { has_building = ct_asoiaf_asshai_basevalue_5 }
			add_building = ct_asoiaf_asshai_basevalue_6
		}
		else_if = {
			limit = { has_building = ct_asoiaf_valyria_basevalue_5 }
			add_building = ct_asoiaf_valyria_basevalue_6
		}
		####
		
		else_if = {
			limit = { has_building = ct_asoiaf_north_basevalue_4 }
			add_building = ct_asoiaf_north_basevalue_5
		}
		else_if = {
			limit = { has_building = ct_asoiaf_river_basevalue_4 }
			add_building = ct_asoiaf_river_basevalue_5
		}
		else_if = {
			limit = { has_building = ct_asoiaf_dorne_basevalue_4 }
			add_building = ct_asoiaf_dorne_basevalue_5
		}
		else_if = {
			limit = { has_building = ct_asoiaf_ironislands_basevalue_4 }
			add_building = ct_asoiaf_ironislands_basevalue_5
		}
		else_if = {
			limit = { has_building = ct_asoiaf_crown_basevalue_4 }
			add_building = ct_asoiaf_crown_basevalue_5
		}
		else_if = {
			limit = { has_building = ct_asoiaf_storm_basevalue_4 }
			add_building = ct_asoiaf_storm_basevalue_5
		}
		else_if = {
			limit = { has_building = ct_asoiaf_vale_basevalue_4 }
			add_building = ct_asoiaf_vale_basevalue_5
		}
		else_if = {
			limit = { has_building = ct_asoiaf_westerland_basevalue_4 }
			add_building = ct_asoiaf_westerland_basevalue_5
		}
		else_if = {
			limit = { has_building = ct_asoiaf_reach_basevalue_4 }
			add_building = ct_asoiaf_reach_basevalue_5
		}
		else_if = {
			limit = { has_building = ct_asoiaf_essos_basevalue_4 }
			add_building = ct_asoiaf_essos_basevalue_5
		}
		else_if = {
			limit = { has_building = ct_asoiaf_summerisland_basevalue_4 }
			add_building = ct_asoiaf_summerisland_basevalue_5
		}
		else_if = {
			limit = { has_building = ct_asoiaf_qarth_basevalue_4 }
			add_building = ct_asoiaf_qarth_basevalue_5
		}
		else_if = {
			limit = { has_building = ct_asoiaf_ghiscari_basevalue_4 }
			add_building = ct_asoiaf_ghiscari_basevalue_5
		}
		else_if = {
			limit = { has_building = ct_asoiaf_lhazareen_basevalue_4 }
			add_building = ct_asoiaf_lhazareen_basevalue_5
		}
		else_if = {
			limit = { has_building = ct_asoiaf_eastern_basevalue_4 }
			add_building = ct_asoiaf_eastern_basevalue_5
		}
		else_if = {
			limit = { has_building = ct_asoiaf_ibben_basevalue_4 }
			add_building = ct_asoiaf_ibben_basevalue_5
		}
		else_if = {
			limit = { has_building = ct_asoiaf_yiti_basevalue_4 }
			add_building = ct_asoiaf_yiti_basevalue_5
		}
		else_if = {
			limit = { has_building = ct_asoiaf_sarnor_basevalue_4 }
			add_building = ct_asoiaf_sarnor_basevalue_5
		}
		else_if = {
			limit = { has_building = ct_asoiaf_asshai_basevalue_4 }
			add_building = ct_asoiaf_asshai_basevalue_5
		}
		else_if = {
			limit = { has_building = ct_asoiaf_valyria_basevalue_4 }
			add_building = ct_asoiaf_valyria_basevalue_5
		}
		####
		else_if = {
			limit = { has_building = ct_asoiaf_north_basevalue_3 }
			add_building = ct_asoiaf_north_basevalue_4
		}
		else_if = {
			limit = { has_building = ct_asoiaf_river_basevalue_3 }
			add_building = ct_asoiaf_river_basevalue_4
		}
		else_if = {
			limit = { has_building = ct_asoiaf_dorne_basevalue_3 }
			add_building = ct_asoiaf_dorne_basevalue_4
		}
		else_if = {
			limit = { has_building = ct_asoiaf_ironislands_basevalue_3 }
			add_building = ct_asoiaf_ironislands_basevalue_4
		}
		else_if = {
			limit = { has_building = ct_asoiaf_crown_basevalue_3 }
			add_building = ct_asoiaf_crown_basevalue_4
		}
		else_if = {
			limit = { has_building = ct_asoiaf_storm_basevalue_3 }
			add_building = ct_asoiaf_storm_basevalue_4
		}
		else_if = {
			limit = { has_building = ct_asoiaf_vale_basevalue_3 }
			add_building = ct_asoiaf_vale_basevalue_4
		}
		else_if = {
			limit = { has_building = ct_asoiaf_westerland_basevalue_3 }
			add_building = ct_asoiaf_westerland_basevalue_4
		}
		else_if = {
			limit = { has_building = ct_asoiaf_reach_basevalue_3 }
			add_building = ct_asoiaf_reach_basevalue_4
		}
		else_if = {
			limit = { has_building = ct_asoiaf_essos_basevalue_3 }
			add_building = ct_asoiaf_essos_basevalue_4
		}
		else_if = {
			limit = { has_building = ct_asoiaf_summerisland_basevalue_3 }
			add_building = ct_asoiaf_summerisland_basevalue_4
		}
		else_if = {
			limit = { has_building = ct_asoiaf_qarth_basevalue_3 }
			add_building = ct_asoiaf_qarth_basevalue_4
		}
		else_if = {
			limit = { has_building = ct_asoiaf_ghiscari_basevalue_3 }
			add_building = ct_asoiaf_ghiscari_basevalue_4
		}
		else_if = {
			limit = { has_building = ct_asoiaf_lhazareen_basevalue_3 }
			add_building = ct_asoiaf_lhazareen_basevalue_4
		}
		else_if = {
			limit = { has_building = ct_asoiaf_eastern_basevalue_3 }
			add_building = ct_asoiaf_eastern_basevalue_4
		}
		else_if = {
			limit = { has_building = ct_asoiaf_ibben_basevalue_3 }
			add_building = ct_asoiaf_ibben_basevalue_4
		}
		else_if = {
			limit = { has_building = ct_asoiaf_yiti_basevalue_3 }
			add_building = ct_asoiaf_yiti_basevalue_4
		}
		else_if = {
			limit = { has_building = ct_asoiaf_sarnor_basevalue_3 }
			add_building = ct_asoiaf_sarnor_basevalue_4
		}
		else_if = {
			limit = { has_building = ct_asoiaf_asshai_basevalue_3 }
			add_building = ct_asoiaf_asshai_basevalue_4
		}
		else_if = {
			limit = { has_building = ct_asoiaf_valyria_basevalue_3 }
			add_building = ct_asoiaf_valyria_basevalue_4
		}
		####
		else_if = {
			limit = { has_building = ct_asoiaf_north_basevalue_2 }
			add_building = ct_asoiaf_north_basevalue_3
		}
		else_if = {
			limit = { has_building = ct_asoiaf_river_basevalue_2 }
			add_building = ct_asoiaf_river_basevalue_3
		}
		else_if = {
			limit = { has_building = ct_asoiaf_dorne_basevalue_2 }
			add_building = ct_asoiaf_dorne_basevalue_3
		}
		else_if = {
			limit = { has_building = ct_asoiaf_ironislands_basevalue_2 }
			add_building = ct_asoiaf_ironislands_basevalue_3
		}
		else_if = {
			limit = { has_building = ct_asoiaf_crown_basevalue_2 }
			add_building = ct_asoiaf_crown_basevalue_3
		}
		else_if = {
			limit = { has_building = ct_asoiaf_storm_basevalue_2 }
			add_building = ct_asoiaf_storm_basevalue_3
		}
		else_if = {
			limit = { has_building = ct_asoiaf_vale_basevalue_2 }
			add_building = ct_asoiaf_vale_basevalue_3
		}
		else_if = {
			limit = { has_building = ct_asoiaf_westerland_basevalue_2 }
			add_building = ct_asoiaf_westerland_basevalue_3
		}
		else_if = {
			limit = { has_building = ct_asoiaf_reach_basevalue_2 }
			add_building = ct_asoiaf_reach_basevalue_3
		}
		else_if = {
			limit = { has_building = ct_asoiaf_essos_basevalue_2 }
			add_building = ct_asoiaf_essos_basevalue_3
		}
		else_if = {
			limit = { has_building = ct_asoiaf_summerisland_basevalue_2 }
			add_building = ct_asoiaf_summerisland_basevalue_3
		}
		else_if = {
			limit = { has_building = ct_asoiaf_qarth_basevalue_2 }
			add_building = ct_asoiaf_qarth_basevalue_3
		}
		else_if = {
			limit = { has_building = ct_asoiaf_ghiscari_basevalue_2 }
			add_building = ct_asoiaf_ghiscari_basevalue_3
		}
		else_if = {
			limit = { has_building = ct_asoiaf_lhazareen_basevalue_2 }
			add_building = ct_asoiaf_lhazareen_basevalue_3
		}
		else_if = {
			limit = { has_building = ct_asoiaf_eastern_basevalue_2 }
			add_building = ct_asoiaf_eastern_basevalue_3
		}
		else_if = {
			limit = { has_building = ct_asoiaf_ibben_basevalue_2 }
			add_building = ct_asoiaf_ibben_basevalue_3
		}
		else_if = {
			limit = { has_building = ct_asoiaf_yiti_basevalue_2 }
			add_building = ct_asoiaf_yiti_basevalue_3
		}
		else_if = {
			limit = { has_building = ct_asoiaf_sarnor_basevalue_2 }
			add_building = ct_asoiaf_sarnor_basevalue_3
		}
		else_if = {
			limit = { has_building = ct_asoiaf_asshai_basevalue_2 }
			add_building = ct_asoiaf_asshai_basevalue_3
		}
		else_if = {
			limit = { has_building = ct_asoiaf_valyria_basevalue_2 }
			add_building = ct_asoiaf_valyria_basevalue_3
		}
		####
		else_if = {
			limit = { has_building = ct_asoiaf_north_basevalue_1 }
			add_building = ct_asoiaf_north_basevalue_2
		}
		else_if = {
			limit = { has_building = ct_asoiaf_river_basevalue_1 }
			add_building = ct_asoiaf_river_basevalue_2
		}
		else_if = {
			limit = { has_building = ct_asoiaf_dorne_basevalue_1 }
			add_building = ct_asoiaf_dorne_basevalue_2
		}
		else_if = {
			limit = { has_building = ct_asoiaf_ironislands_basevalue_1 }
			add_building = ct_asoiaf_ironislands_basevalue_2
		}
		else_if = {
			limit = { has_building = ct_asoiaf_crown_basevalue_1 }
			add_building = ct_asoiaf_crown_basevalue_2
		}
		else_if = {
			limit = { has_building = ct_asoiaf_storm_basevalue_1 }
			add_building = ct_asoiaf_storm_basevalue_2
		}
		else_if = {
			limit = { has_building = ct_asoiaf_vale_basevalue_1 }
			add_building = ct_asoiaf_vale_basevalue_2
		}
		else_if = {
			limit = { has_building = ct_asoiaf_westerland_basevalue_1 }
			add_building = ct_asoiaf_westerland_basevalue_2
		}
		else_if = {
			limit = { has_building = ct_asoiaf_reach_basevalue_1 }
			add_building = ct_asoiaf_reach_basevalue_2
		}
		else_if = {
			limit = { has_building = ct_asoiaf_essos_basevalue_1 }
			add_building = ct_asoiaf_essos_basevalue_2
		}
		else_if = {
			limit = { has_building = ct_asoiaf_summerisland_basevalue_1 }
			add_building = ct_asoiaf_summerisland_basevalue_2
		}
		else_if = {
			limit = { has_building = ct_asoiaf_qarth_basevalue_1 }
			add_building = ct_asoiaf_qarth_basevalue_2
		}
		else_if = {
			limit = { has_building = ct_asoiaf_ghiscari_basevalue_1 }
			add_building = ct_asoiaf_ghiscari_basevalue_2
		}
		else_if = {
			limit = { has_building = ct_asoiaf_lhazareen_basevalue_1 }
			add_building = ct_asoiaf_lhazareen_basevalue_2
		}
		else_if = {
			limit = { has_building = ct_asoiaf_eastern_basevalue_1 }
			add_building = ct_asoiaf_eastern_basevalue_2
		}
		else_if = {
			limit = { has_building = ct_asoiaf_ibben_basevalue_1 }
			add_building = ct_asoiaf_ibben_basevalue_2
		}
		else_if = {
			limit = { has_building = ct_asoiaf_yiti_basevalue_1 }
			add_building = ct_asoiaf_yiti_basevalue_2
		}
		else_if = {
			limit = { has_building = ct_asoiaf_sarnor_basevalue_1 }
			add_building = ct_asoiaf_sarnor_basevalue_2
		}
		else_if = {
			limit = { has_building = ct_asoiaf_asshai_basevalue_1 }
			add_building = ct_asoiaf_asshai_basevalue_2
		}
		else_if = {
			limit = { has_building = ct_asoiaf_valyria_basevalue_1 }
			add_building = ct_asoiaf_valyria_basevalue_2
		}
		####
		else_if = {
			limit = {
				location = {
					OR = {
						region = world_north
						region = world_beyond_the_wall
					}
				}
			}
			add_building = ct_asoiaf_north_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					region = world_riverlands
				}
			}
			add_building = ct_asoiaf_river_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					OR = {
						region = world_dorne
						region = world_rhoynar
					}	
				}
			}
			add_building = ct_asoiaf_dorne_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					OR = {
						region = world_iron_isles
						region = world_the_sisters
					}	
				}
			}
			add_building = ct_asoiaf_ironislands_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					region = world_crownlands
				}
			}
			add_building = ct_asoiaf_crown_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					region = world_stormlands
				}
			}
			add_building = ct_asoiaf_storm_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					region = world_vale
				}
			}
			add_building = ct_asoiaf_vale_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					region = world_westerlands
				}
			}
			add_building = ct_asoiaf_westerland_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					region = world_reach
				}
			}
			add_building = ct_asoiaf_reach_basevalue_1		
		}
		else_if = {
			limit = {
				location = {
					OR = {
						region = world_free_cities
						region = world_dothraki
					}
					NOT = { region = world_rhoynar }
				}
			}
			add_building = ct_asoiaf_essos_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					region = world_summer_sea
				}
			}
			add_building = ct_asoiaf_summerisland_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					OR = {
						region = world_qarth
						region = world_moraq
					}
				}
			}
			add_building = ct_asoiaf_qarth_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					region = world_ghiscar
				}
			}
			add_building = ct_asoiaf_ghiscari_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					region = world_lhazar
				}
			}
			add_building = ct_asoiaf_lhazareen_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					OR = {
						region = world_bone_mountains
						region = world_nghai
						region = world_jogos_nhai
					}
				}
			}
			add_building = ct_asoiaf_eastern_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					OR = {
						region = world_ibben
						region = world_ifeqevron
					}
				}
			}
			add_building = ct_asoiaf_ibben_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					region = world_yi_ti
				}
			}
			add_building = ct_asoiaf_yiti_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					region = world_sarnor
				}
			}
			add_building = ct_asoiaf_sarnor_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					region = world_asshai
				}
			}
			add_building = ct_asoiaf_asshai_basevalue_1
		}
		else_if = {
			limit = {
				location = {
					region = world_valyrian_peninsula
				}
			}
			add_building = ct_asoiaf_valyria_basevalue_1
		}
	}
	hidden_tooltip = { refill_holding_levy = yes }
}
set_unsullied_name_effect = {
	random_list = {
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = "" }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
		1 = { set_name = " " }
	}
}
plot_murder_undiscovered_effect = {
	hidden_tooltip = {
		#Check if Rhllor saves character
		if = {
			limit = { 
				religion = rhllor 
				OR = {
					trait = resurrected_by_rhllor
					AND = {
						OR = { 	
							trait = favored_by_rhllor
							trait = chosen_by_rhllor				
						}
						OR = {
							check_variable = { which = "red_god_magic" value = 10 }
							magic_returned_trigger = yes
						}
					}
				}	
			}
			random = {
				chance = 10
				modifier = {
					factor = 2
					trait = resurrected_by_rhllor
				}
				modifier = {
					factor = 2
					trait = chosen_by_rhllor
				}
				modifier = {
					factor = 2
					magic_returned_trigger = yes
				}
				modifier = {
					factor = 1.33
					check_variable = { which = "red_god_magic" value = 1 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = "red_god_magic" value = 5 }
				}
				character_event = { id = red_priest.38 tooltip = CUSTOMTOOLTIPrhllor_saved_me }
				FROMFROM = { character_event = { id = red_priest.40 days = 2 } }
				FROMFROMFROM = { 
					if = {
						limit = { NOT = { character = ROOT_FROMFROM } }
						character_event = { id = red_priest.40 days = 2 }
					}		
				}
				break = yes
			}
		}
		#Check if maester saves character
		if = {
			limit = {
				has_character_flag = necromancy_target
				magic_returned_trigger = yes
				persistent_event_target:necromancer = {
					has_character_modifier = necromancer_maester
					is_alive = yes
					prisoner = no
					is_incapable = no
					OR = {
						at_location = PREV
						NOT = { is_inaccessible_trigger = yes }
					}
				}
			}
			character_event = { id = maester.105 tooltip = CUSTOMTOOLTIPmaester_saved_me }
			FROMFROM = { character_event = { id = maester.106 days = 2 } }
			FROMFROMFROM = { 
				if = {
					limit = { NOT = { character = ROOT_FROMFROM } }
					character_event = { id = maester.106 days = 2 }
				}		
			}
			break = yes
		}
	}
}
plot_murder_discovered_effect = {
	hidden_tooltip = {
		save_event_target_as = target_victim
		FROMFROM = { character_event = { id = 10 } } # Consequences of discovery
		FROMFROMFROM = { 
			if = {
				limit = { NOT = { character = ROOT_FROMFROM} }
				character_event = { id = 10 } # Consequences of discovery
			}		
		}
		clear_event_target = target_victim
		#Check if Rhllor saves character
		if = {
			limit = { 
				religion = rhllor 
				OR = {
					trait = resurrected_by_rhllor
					AND = {
						OR = { 	
							trait = favored_by_rhllor
							trait = chosen_by_rhllor				
						}
						OR = {
							check_variable = { which = "red_god_magic" value = 10 }
							magic_returned_trigger = yes
						}
					}
				}	
			}
			random = {
				chance = 10
				modifier = {
					factor = 2
					trait = resurrected_by_rhllor
				}
				modifier = {
					factor = 2
					trait = chosen_by_rhllor
				}
				modifier = {
					factor = 2
					magic_returned_trigger = yes
				}
				modifier = {
					factor = 1.33
					check_variable = { which = "red_god_magic" value = 1 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = "red_god_magic" value = 5 }
				}
				character_event = { id = red_priest.38 tooltip = CUSTOMTOOLTIPrhllor_saved_me }
				FROMFROM = { character_event = { id = red_priest.40 days = 2 } }
				FROMFROMFROM = { 
					if = {
						limit = { NOT = { character = ROOT_FROMFROM } }
						character_event = { id = red_priest.40 days = 2 }
					}		
				}
				break = yes
			}
		}
		#Check if maester saves character
		if = {
			limit = {
				has_character_flag = necromancy_target
				magic_returned_trigger = yes
				persistent_event_target:necromancer = {
					has_character_modifier = necromancer_maester
					is_alive = yes
					prisoner = no
					is_incapable = no
					OR = {
						at_location = PREV
						NOT = { is_inaccessible_trigger = yes }
					}
				}
			}
			character_event = { id = maester.105 tooltip = CUSTOMTOOLTIPmaester_saved_me }
			FROMFROM = { character_event = { id = maester.106 days = 2 } }
			FROMFROMFROM = { 
				if = {
					limit = { NOT = { character = ROOT_FROMFROM } }
					character_event = { id = maester.106 days = 2 }
				}		
			}
			break = yes
		}
	}
}
cm_plot_murder_undiscovered_effect = { #for charlemagne murders
	hidden_tooltip = {		
		#Check if Rhllor saves character
		if = {
			limit = { 
				religion = rhllor 
				OR = {
					trait = resurrected_by_rhllor
					AND = {
						OR = { 	
							trait = favored_by_rhllor
							trait = chosen_by_rhllor				
						}
						OR = {
							check_variable = { which = "red_god_magic" value = 10 }
							magic_returned_trigger = yes
						}
					}
				}	
			}
			random = {
				chance = 10
				modifier = {
					factor = 2
					trait = resurrected_by_rhllor
				}
				modifier = {
					factor = 2
					trait = chosen_by_rhllor
				}
				modifier = {
					factor = 2
					magic_returned_trigger = yes
				}
				modifier = {
					factor = 1.33
					check_variable = { which = "red_god_magic" value = 1 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = "red_god_magic" value = 5 }
				}
				character_event = { id = red_priest.38 tooltip = CUSTOMTOOLTIPrhllor_saved_me }
				FROMFROM = { character_event = { id = red_priest.40 days = 2 } }
				break = yes
			}
		}
		#Check if maester saves character
		if = {
			limit = {
				has_character_flag = necromancy_target
				magic_returned_trigger = yes
				persistent_event_target:necromancer = {
					has_character_modifier = necromancer_maester
					is_alive = yes
					prisoner = no
					is_incapable = no
					OR = {
						at_location = PREV
						NOT = { is_inaccessible_trigger = yes }
					}
				}
			}
			character_event = { id = maester.105 tooltip = CUSTOMTOOLTIPmaester_saved_me }
			FROMFROM = { character_event = { id = maester.106 days = 2 } }
			break = yes
		}
	}
}
cm_plot_murder_discovered_effect = {
	hidden_tooltip = {
		save_event_target_as = target_victim
		FROMFROM = { character_event = { id = 10 } } # Consequences of discovery
		clear_event_target = target_victim
		#Check if Rhllor saves character
		if = {
			limit = { 
				religion = rhllor 
				OR = {
					trait = resurrected_by_rhllor
					AND = {
						OR = { 	
							trait = favored_by_rhllor
							trait = chosen_by_rhllor				
						}
						OR = {
							check_variable = { which = "red_god_magic" value = 10 }
							magic_returned_trigger = yes
						}
					}
				}	
			}
			random = {
				chance = 10
				modifier = {
					factor = 2
					trait = resurrected_by_rhllor
				}
				modifier = {
					factor = 2
					trait = chosen_by_rhllor
				}
				modifier = {
					factor = 2
					magic_returned_trigger = yes
				}
				modifier = {
					factor = 1.33
					check_variable = { which = "red_god_magic" value = 1 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = "red_god_magic" value = 5 }
				}
				character_event = { id = red_priest.38 tooltip = CUSTOMTOOLTIPrhllor_saved_me }
				FROMFROM = { character_event = { id = red_priest.40 days = 2 } }
				break = yes
			}
		}
		#Check if maester saves character
		if = {
			limit = {
				has_character_flag = necromancy_target
				magic_returned_trigger = yes
				persistent_event_target:necromancer = {
					has_character_modifier = necromancer_maester
					is_alive = yes
					prisoner = no
					is_incapable = no
					OR = {
						at_location = PREV
						NOT = { is_inaccessible_trigger = yes }
					}
				}
			}
			character_event = { id = maester.105 tooltip = CUSTOMTOOLTIPmaester_saved_me }
			FROMFROM = { character_event = { id = maester.106 days = 2 } }
			break = yes
		}
	}
}
FROM_murder_red_god_resurrect_effect = {
	hidden_tooltip = {
		#Check if Rhllor saves character
		if = {
			limit = { 
				religion = rhllor 
				OR = {
					trait = resurrected_by_rhllor
					AND = {
						OR = { 	
							trait = favored_by_rhllor
							trait = chosen_by_rhllor				
						}
						OR = {
							check_variable = { which = "red_god_magic" value = 10 }
							magic_returned_trigger = yes
						}
					}
				}	
			}
			random = {
				chance = 10
				modifier = {
					factor = 2
					trait = resurrected_by_rhllor
				}
				modifier = {
					factor = 2
					trait = chosen_by_rhllor
				}
				modifier = {
					factor = 2
					magic_returned_trigger = yes
				}
				modifier = {
					factor = 1.33
					check_variable = { which = "red_god_magic" value = 1 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = "red_god_magic" value = 5 }
				}
				character_event = { id = red_priest.38 tooltip = CUSTOMTOOLTIPrhllor_saved_me }
				FROM = { character_event = { id = red_priest.40 days = 2 } }
				break = yes
			}
		}
		#Check if maester saves character
		if = {
			limit = {
				has_character_flag = necromancy_target
				magic_returned_trigger = yes
				persistent_event_target:necromancer = {
					has_character_modifier = necromancer_maester
					is_alive = yes
					prisoner = no
					is_incapable = no
					OR = {
						at_location = PREV
						NOT = { is_inaccessible_trigger = yes }
					}
				}
			}
			character_event = { id = maester.105 tooltip = CUSTOMTOOLTIPmaester_saved_me }
			FROM = { character_event = { id = maester.106 days = 2 } }
			break = yes
		}
	}
}
ROOT_murder_red_god_resurrect_effect = {
	hidden_tooltip = {
		#Check if Rhllor saves character
		if = {
			limit = { 
				religion = rhllor 
				OR = {
					trait = resurrected_by_rhllor
					AND = {
						OR = { 	
							trait = favored_by_rhllor
							trait = chosen_by_rhllor				
						}
						OR = {
							check_variable = { which = "red_god_magic" value = 10 }
							magic_returned_trigger = yes
						}
					}
				}	
			}
			random = {
				chance = 10
				modifier = {
					factor = 2
					trait = resurrected_by_rhllor
				}
				modifier = {
					factor = 2
					trait = chosen_by_rhllor
				}
				modifier = {
					factor = 2
					magic_returned_trigger = yes
				}
				modifier = {
					factor = 1.33
					check_variable = { which = "red_god_magic" value = 1 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = "red_god_magic" value = 5 }
				}
				character_event = { id = red_priest.38 tooltip = CUSTOMTOOLTIPrhllor_saved_me }
				ROOT = { character_event = { id = red_priest.40 days = 2 } }
				break = yes
			}
		}
		#Check if maester saves character
		if = {
			limit = {
				has_character_flag = necromancy_target
				magic_returned_trigger = yes
				persistent_event_target:necromancer = {
					has_character_modifier = necromancer_maester
					is_alive = yes
					prisoner = no
					is_incapable = no
					OR = {
						at_location = PREV
						NOT = { is_inaccessible_trigger = yes }
					}
				}
			}
			character_event = { id = maester.105 tooltip = CUSTOMTOOLTIPmaester_saved_me }
			ROOT = { character_event = { id = maester.106 days = 2 } }
			break = yes
		}
	}
}
red_god_resurrect_effect = {
	#Check if Rhllor saves character
	hidden_tooltip = {
		if = {
			limit = { 
				religion = rhllor 
				OR = {
					trait = resurrected_by_rhllor
					AND = {
						OR = { 	
							trait = favored_by_rhllor
							trait = chosen_by_rhllor				
						}
						OR = {
							check_variable = { which = "red_god_magic" value = 10 }
							magic_returned_trigger = yes
						}
					}
				}	
			}
			random = {
				chance = 10
				modifier = {
					factor = 2
					trait = resurrected_by_rhllor
				}
				modifier = {
					factor = 2
					trait = chosen_by_rhllor
				}
				modifier = {
					factor = 2
					magic_returned_trigger = yes
				}
				modifier = {
					factor = 1.33
					check_variable = { which = "red_god_magic" value = 1 }
				}
				modifier = {
					factor = 1.5
					check_variable = { which = "red_god_magic" value = 5 }
				}
				character_event = { id = red_priest.38 tooltip = CUSTOMTOOLTIPrhllor_saved_me }
				break = yes
			}
		}
		#Check if maester saves character
		if = {
			limit = {
				has_character_flag = necromancy_target
				magic_returned_trigger = yes
				persistent_event_target:necromancer = {
					has_character_modifier = necromancer_maester
					is_alive = yes
					prisoner = no
					is_incapable = no
					OR = {
						at_location = PREV
						NOT = { is_inaccessible_trigger = yes }
					}
				}
			}
			character_event = { id = maester.105 tooltip = CUSTOMTOOLTIPmaester_saved_me }
			break = yes
		}
	}	
}
legitimise_newborn_FROM_effect = {
	custom_tooltip = {
		text = EVTTOOLTIP302
		hidden_tooltip = {
			if = {
				limit = { NOT = { dynasty = 0 } }
				dynasty = mother_bastard
			}
			mother_even_if_dead = {
				if = {
					limit = { NOT = { character = ROOT } }
					if = { #bastards who have bastards start new dynasty
						limit = { 
							trait = bastard
							NOT = { dynasty = 0 }
							PREV = { NOT = { father_even_if_dead = { always = yes } } }
						}
						if = {
							limit = { mother_even_if_dead = { dynasty = PREV } }
							dynasty = mother_bastard
						}
						if = {
							limit = { father_even_if_dead = { dynasty = PREV } }
							dynasty = father_bastard
						}
					}
					random_child = {
						limit = { character = PREVPREV }
						dynasty = PREV
					}
				}	
			}
			father_even_if_dead = {
				if = {
					limit = { NOT = { character = ROOT } }
					if = { #bastards who have bastards start new dynasty
						limit = { 
							trait = bastard
							NOT = { dynasty = 0 }
						}
						if = {
							limit = { mother_even_if_dead = { dynasty = PREV } }
							dynasty = mother_bastard
						}
						if = {
							limit = { father_even_if_dead = { dynasty = PREV } }
							dynasty = father_bastard
						}
					}
					random_child = {
						limit = { character = PREVPREV }
						dynasty = PREV
					}
				}	
			}
			ROOT = {
				if = { #bastards who have bastards start new dynasty
					limit = { 
						trait = bastard
						NOT = { dynasty = 0 }
					}
					if = {
						limit = { mother_even_if_dead = { dynasty = PREV } }
						dynasty = mother_bastard
					}
					if = {
						limit = { father_even_if_dead = { dynasty = PREV } }
						dynasty = father_bastard
					}
				}
			}
			dynasty = ROOT	
			remove_trait = bastard
			add_trait = legit_bastard
			if = {
				limit = {
					has_bastard_nickname_trigger = yes
				}
				remove_nickname = yes
			}
			if = {
				limit = { liege = { NOT = { any_child = { character = PREVPREV } } } }
				move_character = ROOT
			}
			ROOT = {
				any_owned_bloodline = {
					add_bloodline_member = PREVPREV			
				}
				any_spouse = {
					character_event = { id = 305 tooltip = EVTTOOLTIP305 } # The parent's spouse is enraged
				}
			}
		}
	}
}
acknowledge_newborn_FROM_effect = {
	custom_tooltip = {
		text = EVTTOOLTIP306
		hidden_tooltip = {
			if = {
				limit = { 
					NOT = { dynasty = 0 } 					
				}
				if = {
					limit = { 
						mother_even_if_dead = { 
							NOT = { dynasty = 0 } 
							NOT = { character = ROOT }
						}						
					}
					dynasty = mother_bastard
				}	
				if = {
					limit = { 
						father_even_if_dead = { 
							NOT = { dynasty = 0 } 
							NOT = { character = ROOT }
						}						
					}
					dynasty = father_bastard
				}
			}
			if = {
				limit = { 
					mother_even_if_dead = { dynasty = 0 NOT = { character = ROOT } }
				}
				dynasty = none
			}
			if = {
				limit = { 
					father_even_if_dead = { dynasty = 0 NOT = { character = ROOT } }
				}
				dynasty = none
			}
			mother_even_if_dead = {
				if = {
					limit = { NOT = { character = ROOT } NOT = { dynasty = 0 } }
					random_child = {
						limit = { character = PREVPREV }
						dynasty = PREV
					}
				}	
			}
			father_even_if_dead = {
				if = {
					limit = { NOT = { character = ROOT } NOT = { dynasty = 0 } }
					random_child = {
						limit = { character = PREVPREV }
						dynasty = PREV
					}
				}	
			}
			dynasty = ROOT				
			add_trait = bastard
			#remove from bloodlines
			ROOT = {
				any_owned_bloodline = {
					remove_bloodline_member = PREVPREV
				}
			}	
			if = {
				limit = { mother_even_if_dead = { always = yes } }
				bastard_nickname_mother_effect = yes	
			}	
			if = {
				limit = { NOT = { mother_even_if_dead = { always = yes } } }
				bastard_nickname_father_effect = yes	
			}	
			if = {
				limit = { mother = { is_consort = no } }
				ROOT = {
					any_spouse = {
						character_event = { id = 308 tooltip = EVTTOOLTIP308 } # The father's wife is angered
					}
				}
			}
		}
	}
}
denounce_newborn_FROM_effect = {
	custom_tooltip = {
		text = EVTTOOLTIP309
		hidden_tooltip = {
			if = {
				limit = { 
					NOT = { dynasty = 0 } 
					mother_even_if_dead = { NOT = { dynasty = 0 } }
				}
				dynasty = mother_bastard
			}
			if = {
				limit = { 
					mother_even_if_dead = { dynasty = 0 }
				}
				dynasty = none
			}
			mother_even_if_dead = {
				if = {
					limit = { NOT = { dynasty = 0 } }
					random_child = {
						limit = { character = PREVPREV }
						dynasty = PREV
					}
				}	
			}
			add_trait = bastard
			set_father = 0
			set_real_father = ROOT
			bastard_nickname_mother_effect = yes
			set_immune_to_pruning = yes
			#remove from bloodlines
			ROOT = {
				any_owned_bloodline = {
					remove_bloodline_member = PREVPREV
				}
			}	
			mother = {
				if = {
					limit = { is_ruler = yes is_alive = yes }
					reverse_banish = PREV
				}
				if = {
					limit = { is_ruler = no is_alive = yes }
					liege = { reverse_banish = PREVPREV }
				}
			}
			
			if = {
				limit = { mother = { is_consort = no } }		
				ROOT = {
					any_spouse = {
						character_event = { id = 311 } # The father's wife is displeased
					}
				}
			}
		}
	}
}
bastard_nickname_mother_effect = {
	mother_even_if_dead = {	
		if = { 	
			limit = {
				location = {
					OR = {
						region = world_north
						duchy = { title = d_the_wall }
					}
				}	
			}
			PREV = { give_nickname = nick_snow }
		}	
		else_if = { 	
			limit = { location = { region = world_riverlands } }
			PREV = { give_nickname = nick_rivers }
		}
		else_if = { 	
			limit = { location = { region = world_vale } }
			PREV = { give_nickname = nick_stone }
		}
		else_if = { 	
			limit = { location = { region = world_westerlands } }
			PREV = { give_nickname = nick_hill }
		}
		else_if = { 	
			limit = { location = { region = world_reach } }
			PREV = { give_nickname = nick_flowers }
		}
		else_if = { 	
			limit = { location = { region = world_stormlands } }
			PREV = { give_nickname = nick_storm }
		}
		else_if = { 	
			limit = { location = { region = world_crownlands } }
			PREV = { give_nickname = nick_waters }
		}
		else_if = { 	
			limit = { location = { region = world_dorne } }
			PREV = { give_nickname = nick_sand }
		}
		else_if = { 	
			limit = { location = { region = world_iron_isles } }
			PREV = { give_nickname = nick_pyke }
		}
		else_if = { 	
			limit = { 
				OR = {
					culture_group = first_men 
					culture = northman_andal
				}	
			}
			PREV = { give_nickname = nick_snow }
		}
		else_if = { 	
			limit = { culture = riverlander }
			PREV = { give_nickname = nick_rivers }
		}
		else_if = { 	
			limit = { 
				OR = {
					culture = valeman 
					culture = sisterman
				}	
			}
			PREV = { give_nickname = nick_stone }
		}
		else_if = { 	
			limit = { 
				OR = {
					culture = westerman 
					culture = old_andal
				}	
			}
			PREV = { give_nickname = nick_hill }
		}
		else_if = { 	
			limit = { culture = reachman }
			PREV = { give_nickname = nick_flowers }
		}
		else_if = { 	
			limit = { culture = stormlander }
			PREV = { give_nickname = nick_storm }
		}
		else_if = { 	
			limit = { 
				OR = {
					culture = crownlander 
					culture = western_valyrian
				}	
			}
			PREV = { give_nickname = nick_waters }
		}
		else_if = { 	
			limit = { 
				OR = {
					culture = dornish_andal 
					culture_group = dornish
				}	
				NOT = { culture = rhoynar }
			}
			PREV = { give_nickname = nick_sand }
		}
		else_if = { 	
			limit = { culture_group = iron_isles_culture }
			PREV = { give_nickname = nick_pyke }
		}
		else_if = { 	
			limit = { 
				culture = high_valyrian
				religion = the_seven
			}
			PREV = { give_nickname = nick_fyre }
		}
	}
}
bastard_nickname_father_effect = {
	father_even_if_dead = {
		if = { 	
			limit = {
				location = {
					OR = {
						region = world_north
						duchy = { title = d_the_wall }
					}
				}	
			}
			PREV = { give_nickname = nick_snow }
		}	
		else_if = { 	
			limit = { location = { region = world_riverlands } }
			PREV = { give_nickname = nick_rivers }
		}
		else_if = { 	
			limit = { location = { region = world_vale } }
			PREV = { give_nickname = nick_stone }
		}
		else_if = { 	
			limit = { location = { region = world_westerlands } }
			PREV = { give_nickname = nick_hill }
		}
		else_if = { 	
			limit = { location = { region = world_reach } }
			PREV = { give_nickname = nick_flowers }
		}
		else_if = { 	
			limit = { location = { region = world_stormlands } }
			PREV = { give_nickname = nick_storm }
		}
		else_if = { 	
			limit = { location = { region = world_crownlands } }
			PREV = { give_nickname = nick_waters }
		}
		else_if = { 	
			limit = { location = { region = world_dorne } }
			PREV = { give_nickname = nick_sand }
		}
		else_if = { 	
			limit = { location = { region = world_iron_isles } }
			PREV = { give_nickname = nick_pyke }
		}
		else_if = { 	
			limit = { 
				OR = {
					culture_group = first_men 
					culture = northman_andal
				}	
			}
			PREV = { give_nickname = nick_snow }
		}
		else_if = { 	
			limit = { culture = riverlander }
			PREV = { give_nickname = nick_rivers }
		}
		else_if = { 	
			limit = { 
				OR = {
					culture = valeman 
					culture = sisterman
				}	
			}
			PREV = { give_nickname = nick_stone }
		}
		else_if = { 	
			limit = { 
				OR = {
					culture = westerman 
					culture = old_andal
				}	
			}
			PREV = { give_nickname = nick_hill }
		}
		else_if = { 	
			limit = { culture = reachman }
			PREV = { give_nickname = nick_flowers }
		}
		else_if = { 	
			limit = { culture = stormlander }
			PREV = { give_nickname = nick_storm }
		}
		else_if = { 	
			limit = { 
				OR = {
					culture = crownlander 
					culture = western_valyrian
				}	
			}
			PREV = { give_nickname = nick_waters }
		}
		else_if = { 	
			limit = { 
				OR = {
					culture = dornish_andal 
					culture_group = dornish
				}	
				NOT = { culture = rhoynar }
			}
			PREV = { give_nickname = nick_sand }
		}
		else_if = { 	
			limit = { culture_group = iron_isles_culture }
			PREV = { give_nickname = nick_pyke }
		}
		else_if = { 	
			limit = { 
				culture = high_valyrian
				religion = the_seven
			}
			PREV = { give_nickname = nick_fyre }
		}	
	}
}
bastard_nickname_ROOT_effect = {
	ROOT = {
		if = { 	
			limit = {
				location = {
					OR = {
						region = world_north
						duchy = { title = d_the_wall }
					}
				}	
			}
			PREV = { give_nickname = nick_snow }
		}	
		else_if = { 	
			limit = { location = { region = world_riverlands } }
			PREV = { give_nickname = nick_rivers }
		}
		else_if = { 	
			limit = { location = { region = world_vale } }
			PREV = { give_nickname = nick_stone }
		}
		else_if = { 	
			limit = { location = { region = world_westerlands } }
			PREV = { give_nickname = nick_hill }
		}
		else_if = { 	
			limit = { location = { region = world_reach } }
			PREV = { give_nickname = nick_flowers }
		}
		else_if = { 	
			limit = { location = { region = world_stormlands } }
			PREV = { give_nickname = nick_storm }
		}
		else_if = { 	
			limit = { location = { region = world_crownlands } }
			PREV = { give_nickname = nick_waters }
		}
		else_if = { 	
			limit = { location = { region = world_dorne } }
			PREV = { give_nickname = nick_sand }
		}
		else_if = { 	
			limit = { location = { region = world_iron_isles } }
			PREV = { give_nickname = nick_pyke }
		}
		else_if = { 	
			limit = { 
				OR = {
					culture_group = first_men 
					culture = northman_andal
				}	
			}
			PREV = { give_nickname = nick_snow }
		}
		else_if = { 	
			limit = { culture = riverlander }
			PREV = { give_nickname = nick_rivers }
		}
		else_if = { 	
			limit = { 
				OR = {
					culture = valeman 
					culture = sisterman
				}	
			}
			PREV = { give_nickname = nick_stone }
		}
		else_if = { 	
			limit = { 
				OR = {
					culture = westerman 
					culture = old_andal
				}	
			}
			PREV = { give_nickname = nick_hill }
		}
		else_if = { 	
			limit = { culture = reachman }
			PREV = { give_nickname = nick_flowers }
		}
		else_if = { 	
			limit = { culture = stormlander }
			PREV = { give_nickname = nick_storm }
		}
		else_if = { 	
			limit = { 
				OR = {
					culture = crownlander 
					culture = western_valyrian
				}	
			}
			PREV = { give_nickname = nick_waters }
		}
		else_if = { 	
			limit = { 
				OR = {
					culture = dornish_andal 
					culture_group = dornish
				}	
				NOT = { culture = rhoynar }
			}
			PREV = { give_nickname = nick_sand }
		}
		else_if = { 	
			limit = { culture_group = iron_isles_culture }
			PREV = { give_nickname = nick_pyke }
		}
		else_if = { 	
			limit = { 
				culture = high_valyrian
				religion = the_seven
			}
			PREV = { give_nickname = nick_fyre }
		}	
	}
}
set_mega_war_empire_variable_ROOT_effect = {
	ROOT = {
		clr_character_flag = mega_war_empire_found
		primary_title = { #try dejure empire first
			empire = {
				if = {
					limit = { holder = PREVPREVPREV }
					ROOT = {
						any_demesne_title = {
							limit = { 
								NOT = { tier = BARON } 
								NOT = { tier = EMPEROR }
							}				
							set_variable = { which = "de_facto_empire" which = PREVPREV } 
						}
						set_character_flag = mega_war_empire_found
					}
				}
			}
		}
	}	
	if = {
		limit = { NOT = { ROOT = { has_character_flag = mega_war_empire_found } } }
		primary_title = {  #then primary
			ROOT = {
				any_demesne_title = {
					limit = { 
						NOT = { tier = BARON } 
						NOT = { tier = EMPEROR }
					}				
					set_variable = { which = "de_facto_empire" which = PREVPREV } 
				}
			}	
		}	
	}	
	ROOT = { clr_character_flag = mega_war_empire_found }
}
set_mega_war_kingdom_variable_ROOT_effect = {
	ROOT = {
		clr_character_flag = mega_war_kingdom_found
		primary_title = { #try dejure kingdom first
			kingdom = {
				if = {
					limit = { holder = PREVPREVPREV }
					ROOT = {
						any_demesne_title = {
							limit = { 
								OR = {
									tier = COUNT
									tier = DUKE
								}
							}				
							set_variable = { which = "de_facto_kingdom" which = PREVPREV }
						}
						set_character_flag = mega_war_kingdom_found
					}
				}
			}
			if = { #then empire
				limit = { NOT = { ROOT = { has_character_flag = mega_war_kingdom_found } } }
				empire = {
					if = {
						limit = { 
							holder = PREVPREVPREV 
							check_variable = { which = "de_facto_kingdom" value = 1 }
						}
						ROOT = {
							any_demesne_title = {
								limit = { 
									OR = {
										tier = COUNT
										tier = DUKE
									}
								}				
								set_variable = { which = "de_facto_kingdom" which = PREVPREV }
							}
							set_character_flag = mega_war_kingdom_found
						}
					}
				}
				
			}	
		}
	}	
	if = {
		limit = { NOT = { ROOT = { has_character_flag = mega_war_kingdom_found } } }
		primary_title = {  #then primary
			ROOT = {
				any_demesne_title = {
					limit = { 
						OR = {
							tier = COUNT
							tier = DUKE
						}
					}				
					set_variable = { which = "de_facto_kingdom" which = PREVPREV }
				}
			}	
		}	
	}	
	ROOT = { clr_character_flag = mega_war_kingdom_found }
}
extrajudicial_action_tyranny_effect = {
	if = {
		limit = { primary_title = { has_law = justice_voting_power_1 } }
		custom_tooltip = {
			text = TOOLTIPextrajudicial_action_tyranny
			hidden_tooltip = {
				change_variable = { which = "tyrant" value = 10 } 
				character_event = { id = maintenance.1 } #tyrant trait
			}
		}
	}
}

add_sympathy_trait_effect = {
	trigger_switch = {
		on_trigger = religion_group
		westerosi_religion = { add_trait = sympathy_westerosi }
		drowned_god_group = { add_trait = sympathy_drowned_god }
		essos_group = { add_trait = sympathy_essos_group }
		ghiscar_rel = { add_trait = sympathy_ghiscar_rel }
		valyrian_rel_group	= { add_trait = sympathy_valyrian_rel_group }
		wildling_religion = { add_trait = sympathy_wildling_religion }
		sarnor_rel = { add_trait = sympathy_sarnor_rel }
		qarth_rel = { add_trait = sympathy_qarth_rel }
		far_east_group = { add_trait = sympathy_far_east_group }
		ibben_rel	= { add_trait = sympathy_ibben_rel }
		dothraki_rel_group = { add_trait = sympathy_dothraki_rel_group }
		jogos_rel_group = { add_trait = sympathy_jogos_rel_group }
		lhazar_rel_group = { add_trait = sympathy_lhazar_rel_group }
		summer_rel_group	= { add_trait = sympathy_summer_rel_group }
		sothoryos_rel_group = { add_trait = sympathy_sothoryos_rel_group }
		pirate_group	= { add_trait = sympathy_pirate_group }
		pagan_group = { add_trait = sympathy_pagans }
	}
}

slave_raid_gain_slaves_effect = { #Use in location scope, ROOT is raider/attacker
	custom_tooltip = { # Give the attacker new slaves
		text = TOOLTIPslave_raid_new_slaves
		hidden_tooltip = {
			save_event_target_as = slave_raid_province
			ROOT = { character_event = { id = slavery.780 days = 1 } }
		}	
	}
}
add_priest_trait_effect = {
	if = {
		limit = { is_drowned_god_religion_trigger = yes }
		add_trait = drowned
	}
	else_if = {
		limit = { religion = the_seven }
		if = {
			limit = { is_female = no }
			add_trait = septon
			set_special_character_title = title_septon
		}
		if = {
			limit = { is_female = yes }
			add_trait = septa
			set_special_character_title = title_septa
		}
	}
	else_if = {
		limit = { religion = rhllor }
		add_trait = red_priest
		if = {
			limit = { 
				NOT = { father_even_if_dead = { always = yes } }
				NOT = { real_father_even_if_dead = { always = yes } }
				NOT = { has_character_flag = do_not_change_traits }
			}	
			add_trait = fire_obsessed
			if = {
				limit = { is_female = yes }
				random = {
					chance = 5
					set_character_flag = shadowbinder_magic_knowledge
				}
			}
		}	
	}
	else_if = {
		limit = { religion = qarth_warlocks }
		add_trait = warlock
		add_trait = mystic
	}
	else_if = {
		limit = { religion = bearded_priests }
		add_trait = bearded_priest
		if = {
			limit = { 
				NOT = { father_even_if_dead = { always = yes } }
				NOT = { real_father_even_if_dead = { always = yes } }
				NOT = { trait = poor_warrior }
				NOT = { trait = trained_warrior }
				NOT = { trait = skilled_warrior }
				NOT = { trait = master_warrior }
				NOT = { has_character_flag = do_not_change_traits }
			}
			random_list = {
				20 = { add_trait = poor_warrior }
				65 = { add_trait = trained_warrior }
				15 = { add_trait = skilled_warrior }
			}
		}
	}
	else_if = {
		limit = {
			OR = {
				religion = harpy 
				religion = harpy_reformed
			}
		}
		if = {
			limit = { 
				is_female = no 
				is_ruler = yes
			}
			liege = {
				create_random_priest = {
					random_traits = yes
					dynasty = none
					female = yes
					religion = PREV
				}
				new_character = {
					remove_trait = imbecile
					remove_trait = inbred
					remove_trait = slow
					add_trait = grace
					ROOT = { abdicate_to = PREV }
					primary_title = { gender_succ = enatic }
					recalc_succession = yes
				}
			}
			if = {
				limit = {
					NOR = {
						father_even_if_dead = { always = yes }
						mother_even_if_dead = { always = yes }
						real_father_even_if_dead = { always = yes }
					}
				}
				death = yes
			}	
		}
		if = {
			limit = { is_female = yes }
			add_trait = grace
		}	
	}
	else_if = {
		limit = { 
			OR = {
				religion = shadowbinders 
				religion = shadowbinders_reformed
			}
		}
		if = {
			limit = { 
				is_female = no 
				is_ruler = yes
			}
			liege = {
				create_random_priest = {
					random_traits = yes
					dynasty = none
					female = yes
					religion = PREV
				}
				new_character = {
					remove_trait = imbecile
					remove_trait = inbred
					remove_trait = slow
					add_trait = shadowbinder
					add_trait = mystic
					ROOT = { abdicate_to = PREV }
				}
			}
			if = {
				limit = {
					NOR = {
						father_even_if_dead = { always = yes }
						mother_even_if_dead = { always = yes }
						real_father_even_if_dead = { always = yes }
					}
				}
				death = yes
			}
		}
		if = {
			limit = { is_female = yes }
			add_trait = shadowbinder
			add_trait = mystic
		}	
	}
	else_if = {
		limit = { is_summer_rel_trigger = yes }
		add_trait = love_priest
		if = {
			limit = { 
				NOT = { father_even_if_dead = { always = yes } }
				NOT = { real_father_even_if_dead = { always = yes } }
				NOT = { has_character_flag = do_not_change_traits }
			}
			remove_trait = celibate
			remove_trait = chaste
			random = {
				chance = 30
				add_trait = lustful
			}
			random = {
				chance = 15
				add_trait = fair
				remove_trait = ugly
			}
			random = {
				chance = 10
				if = {
					limit = { is_female = no }
					add_trait = seducer
				}
				if = {
					limit = { is_female = yes }
					add_trait = seductress
				}				
			}
		}
	}
	else_if = {
		limit = { 
			OR = {
				religion = boash 
				religion = boash_reformed
			}
		}
		add_trait = blinded
		if = {
			limit = { is_female = no }
			add_trait = eunuch
		}	
	}
	else_if = {
		limit = { is_reformed_religion = yes }
		if = {
			limit = { is_female = no }
			add_trait = monk
		}
		else = { add_trait = nun }
	}
	else_if = { 
		limit = { NOT = { has_character_flag = do_not_change_traits } }
		add_trait = zealous
	}
}
heal_basic_effect = {
	if = {
		limit = { trait = wounded }
		remove_trait = wounded
	}
	if = {
		limit = { trait = depressed }
		remove_trait = depressed
	}
	if = {
		limit = { trait = stressed }
		remove_trait = stressed
	}
	if = {
		limit = { trait = lovers_pox }
		remove_trait = lovers_pox
	}
	if = {
		limit = { trait = ill }
		remove_trait = ill
	}
	if = {
		limit = { trait = pneumonic }
		remove_trait = pneumonic
	}
	if = {
		limit = { trait = syphilitic }
		remove_trait = syphilitic
	}
	if = {
		limit = { trait = leper }
		remove_trait = leper
	}
	if = {
	 	limit = { trait = has_bloody_flux }
	 	remove_trait = has_bloody_flux
		set_character_flag = immune_tuberculosis
	}
	if = {
	 	limit = { trait = has_typhoid_fever }
	 	remove_trait = has_typhoid_fever
		set_character_flag = immune_typhoid_fever
	}
	if = {
	 	limit = { trait = has_grey_plague }
	 	remove_trait = has_grey_plague
		set_character_flag = immune_typhus
	}
	if = {
	 	limit = { trait = has_bubonic_plague }
	 	remove_trait = has_bubonic_plague
		set_character_flag = immune_bubonic_plague
	}
	if = {
	 	limit = { trait = has_measles }
	 	remove_trait = has_measles
		set_character_flag = immune_measles
	}
	if = {
	 	limit = { trait = has_small_pox }
	 	remove_trait = has_small_pox
		set_character_flag = immune_small_pox
	}
	if = {
	 	limit = { trait = has_aztec_disease }
	 	remove_trait = has_aztec_disease
		set_character_flag = immune_aztec_disease
	}
	if = {
	 	limit = { trait = syphilitic }
	 	remove_trait = syphilitic
		set_character_flag = immune_syphilitic
	}				
	if = {
		limit = { trait = has_greyscale }
		remove_trait = has_greyscale
	}			
	if = {
		limit = { trait = has_pox }
		remove_trait = has_pox
	}
	if = {
		limit = { trait = sickly }
		remove_trait = sickly
	}						
	if = {
		limit = { trait = has_butterfly_fever }
		remove_trait = has_butterfly_fever
	}	
	if = {
		limit = { trait = old_ones_scourge }
		remove_trait = old_ones_scourge
		set_character_flag = immune_old_ones_scourge
	}	
	if = {
		limit = { trait = has_red_death }
		remove_trait = has_red_death
		set_character_flag = immune_red_death
	}
	#reapers	
	if = {
		limit = { trait = abdominal_pain }
		remove_trait = abdominal_pain
	}
	if = {
		limit = { trait = cough }
		remove_trait = cough
	}
	if = {
		limit = { trait = fever }
		remove_trait = fever
	}
	if = {
		limit = { trait = malaise }
		remove_trait = malaise
	}
	if = {
		limit = { trait = fatigue }
		remove_trait = fatigue
	}
	if = {
		limit = { trait = chest_pain }
		remove_trait = chest_pain
	}
	if = {
		limit = { trait = vomiting }
		remove_trait = vomiting
	}
	if = {
		limit = { trait = diarrhea }
		remove_trait = diarrhea
	}
	if = {
		limit = { trait = headache }
		remove_trait = headache
	}
	if = {
		limit = { trait = cramps }
		remove_trait = cramps
	}
	if = {
		limit = { trait = rash }
		remove_trait = rash
	}
	if = {
		limit = { trait = infection }
		remove_trait = infection
	}
	if = { limit = { trait = flu } remove_trait = flu }
	if = { limit = { trait = dysentery } remove_trait = dysentery }
	if = { limit = { trait = gout }	remove_trait = gout }
	if = { limit = { trait = food_poisoning } remove_trait = food_poisoning }
	if = { limit = { trait = rabies } remove_trait = rabies }
	if = { limit = { trait = cancer } remove_trait = cancer }  
	if = {
	 	limit = { trait = scurvy }
	 	remove_trait = scurvy
	}
	hidden_tooltip = {
		remove_character_modifier = symptom_treatment_1
		remove_character_modifier = symptom_treatment_2
		remove_character_modifier = symptom_treatment_3
		remove_character_modifier = symptom_treatment_4
		clr_character_flag = developing_illness		
		remove_disease_flags_effect = yes
		clear_disease_level_effect = yes
		remove_treatment_modifiers_effect = yes
	}
}
heal_advanced_effect = {
	if = {
		limit = { trait = clubfooted }
		remove_trait = clubfooted
	}	
	if = {
		limit = { trait = harelip }
		remove_trait = harelip
	}	
	if = {
		limit = { trait = hunchback }
		remove_trait = hunchback
	}	
	if = {
		limit = { trait = lisp }
		remove_trait = lisp
	}	
	if = {
		limit = { trait = stutter }
		remove_trait = stutter
	}	
	if = {
		limit = { trait = ugly  }
		remove_trait = ugly 
	}		
	if = {
		limit = { trait = slow }
		remove_trait = slow
	}	
	if = {
		limit = { trait = imbecile }
		remove_trait = imbecile
	}	
	if = {
		limit = { trait = weak }
		remove_trait = weak
	}	
	if = {
		limit = { trait = inbred }
		remove_trait = inbred
	}
	if = {
		limit = { trait = crippled }
		remove_trait = crippled
	}
	if = {
		limit = { trait = disfigured_AGOT }
		remove_trait = disfigured_AGOT
	}
	if = {
		limit = { trait = infirm }
		remove_trait = infirm
	}	
	if = {
		limit = { trait = maimed }
		remove_trait = maimed
	}
	if = {
		limit = { trait = incapable }
		remove_trait = incapable
	}	
	if = {
		limit = { trait = possessed }
		remove_trait = possessed
	}
	# if = {
		# limit = { trait = lunatic }
		# remove_trait = lunatic
	# }
	if = {
		limit = { trait = blinded_age }
		remove_trait = blinded_age
	}	
	if = {
		limit = { trait = disfigured }
		remove_trait = disfigured
	}
	if = {
		limit = { trait = mangled }
		remove_trait = mangled
	}
	if = {
		limit = { trait = severely_injured }
		remove_trait = severely_injured
	}		
	if = {
		limit = { trait = burned }
		remove_trait = burned
	}	
	clear_duel_poisoner_target_effect = yes
}

# R'hllor magic increases from sacrifices, do the effect in the scope of the person being executed ROOT is the executor
# eg: FROMFROM is being executed - FROMFROM = { increase_red_god_magic = yes }
increase_red_god_magic = {
	# log = "I am [This.GetTitledFirstName] being executed by [Root.GetTitledFirstName]"
	if = {
		limit = {
			tier = EMPEROR
		}
		ROOT = { change_variable = { which = "red_god_magic" value = 4 } }
	}
	if = {
		limit = {
			OR = {
				tier = KING
				father_even_if_dead = { tier = EMPEROR }
				mother_even_if_dead = { tier = EMPEROR }
				mother_even_if_dead = { father_even_if_dead = { tier = EMPEROR } }
				father_even_if_dead = { father_even_if_dead = { tier = EMPEROR } }
				any_claim = { tier = EMPEROR }
			}
		}
		ROOT = { change_variable = { which = "red_god_magic" value = 3 } }
	}
	else_if = {
		limit = {
			OR = {
				tier = DUKE
				father_even_if_dead = { tier = KING }
				mother_even_if_dead = { tier = KING }
				mother_even_if_dead = { father_even_if_dead = { tier = KING } }
				father_even_if_dead = { father_even_if_dead = { tier = KING } }
				any_claim = { tier = KING }
			}
		}
		ROOT = { change_variable = { which = "red_god_magic" value = 2 } }
	}
	else_if = {
		limit = {
			OR = {
				tier = COUNT
				father_even_if_dead = { tier = DUKE }
				mother_even_if_dead = { tier = DUKE }
				mother_even_if_dead = { father_even_if_dead = { tier = DUKE } }
				father_even_if_dead = { father_even_if_dead = { tier = DUKE } }
				any_claim = { tier = DUKE }
				is_priest = yes
				has_priest_trait_trigger = yes
				can_use_dragon_abilities_trigger = yes
				trait = kingsguard
			}
		}
		ROOT = { change_variable = { which = "red_god_magic" value = 1 } }
	}
	else_if = {
		limit = {
			OR = {
				tier = BARON
				father_even_if_dead = { tier = COUNT }
				mother_even_if_dead = { tier = COUNT }
				mother_even_if_dead = { father_even_if_dead = { tier = COUNT } }
				father_even_if_dead = { father_even_if_dead = { tier = COUNT } }
				any_claim = { tier = COUNT }
			}
		}
		ROOT = { change_variable = { which = "red_god_magic" value = 0.5 } }
	}
	else = {
		ROOT = { change_variable = { which = "red_god_magic" value = 0.25 } }
	}
}

shattered_realms_effect = {
	if = { #Kingdoms
		limit = {
			has_game_rule = { name = shattered_realms value = kingdoms }
		}
		d_kingsguard = { #disable kingsguard
			holder_scope = {
				remove_trait = kingsguard
				clr_character_flag = no_court_invites
				activate_title = { title = d_kingsguard status = no }
				d_kingsguard = { destroy_landed_title = THIS }
			}
		}
		any_character = {
			limit = { 
				is_alive = yes 
				trait = kingsguard
			}
			remove_trait = kingsguard
			clr_character_flag = no_court_invites
		}
		e_iron_throne = {
			holder_scope = {
				k_crownlands = { gain_title = PREV }
			}
		}
		any_title = { #destroy emperor titles
			limit = {
				has_holder = yes
				tier = EMPEROR
				is_landless_type_title = no
				is_nomadic = no
			}
			any_claimant = { remove_claim = PREV }
			destroy_landed_title = THIS
		}
		any_playable_ruler = { #destroy secondary kingdom titles
			limit = {					
				tier = KING
				num_of_king_titles = 2
				demesne_size = 1
				NOT = { trait = nightswatch }
			}
			any_demesne_title = {
				limit = {
					tier = KING
					is_landless_type_title = no
					is_primary_holder_title = no
				}
				any_claimant = { remove_claim = PREV }
				destroy_landed_title = THIS
			}
		}
		any_playable_ruler = { #grant non dejure counts/dukes independence
			limit = {					
				OR = {
					tier = COUNT
					tier = DUKE
				}
				independent = no
				NOT = {
					primary_title = {
						dejure_liege_title = {
							OR = {
								holder_scope = { is_liege_of = PREVPREVPREV }
								dejure_liege_title = { holder_scope = { is_liege_of = PREVPREVPREVPREV } }
							}	
						}
					}
				}
			}
			set_defacto_liege = THIS
		}
		any_playable_ruler = { #split nomadic clans
			limit = {					
				tier = KING
				is_nomadic = yes
			}
			set_defacto_liege = THIS
		}
		any_playable_ruler = {
			limit = { is_nomadic = yes }
			add_population_scaled = -0.25
			manpower = -750
		}
		#Add claims
		any_playable_ruler = {
			limit = { tier = KING }
			primary_title = { save_event_target_as = primary_title }
			any_sibling_even_if_dead = {
				if = {
					limit = { is_alive = yes }
					if = {
						limit = {
							is_female = no
							NOT = { trait = bastard }
						}
						add_pressed_claim = event_target:primary_title
					}
					else = { add_weak_pressed_claim = event_target:primary_title }
				}
				else = {
					any_child = {
						limit = { is_alive = yes }
						if = {
							limit = {
								is_female = no
								NOT = { trait = bastard }
							}
							add_claim = event_target:primary_title
						}
						else = { add_weak_claim = event_target:primary_title }
					}
				}
			}
		}
	}
	if = { #Duchies
		limit = {
			has_game_rule = { name = shattered_realms value = duchies }
		}
		d_kingsguard = { #disable kingsguard
			holder_scope = {
				remove_trait = kingsguard
				clr_character_flag = no_court_invites
				activate_title = { title = d_kingsguard status = no }
				d_kingsguard = { destroy_landed_title = THIS }
			}
		}
		any_character = {
			limit = { 
				is_alive = yes 
				trait = kingsguard
			}
			remove_trait = kingsguard
			clr_character_flag = no_court_invites
		}
		any_title = { #destroy king+ titles
			limit = {
				has_holder = yes
				higher_tier_than = DUKE
				is_landless_type_title = no
				is_nomadic = no
			}
			any_claimant = { remove_claim = PREV }
			destroy_landed_title = THIS
		}
		any_playable_ruler = { #destroy secondary duke titles
			limit = {					
				tier = DUKE
				num_of_duke_titles = 2
				demesne_size = 1
				NOT = { trait = nightswatch }
			}
			any_demesne_title = {
				limit = {
					tier = DUKE
					is_landless_type_title = no
					is_primary_holder_title = no
				}
				any_claimant = { remove_claim = PREV }
				destroy_landed_title = THIS
			}
		}
		any_playable_ruler = { #grant non dejure counts independence
			limit = {					
				tier = COUNT
				independent = no
				NOT = {
					primary_title = {
						dejure_liege_title = {
							holder_scope = { is_liege_of = PREVPREVPREV }
						}
					}
				}
			}
			set_defacto_liege = THIS
		}
		any_playable_ruler = { #split nomadic clans
			limit = {					
				tier = KING
				is_nomadic = yes
			}
			set_defacto_liege = THIS
		}
		any_playable_ruler = {
			limit = { is_nomadic = yes }
			add_population_scaled = -0.5
			manpower = -1250
		}
		any_title = {
			limit = { tier = KING }
			set_variable = { which = "lord_paramount_status" value = 0 }
		}
		#Add claims
		any_playable_ruler = {
			limit = { tier = DUKE }
			primary_title = { save_event_target_as = primary_title }
			any_sibling_even_if_dead = {
				if = {
					limit = { is_alive = yes }
					if = {
						limit = {
							is_female = no
							NOT = { trait = bastard }
						}
						add_pressed_claim = event_target:primary_title
					}
					else = { add_weak_pressed_claim = event_target:primary_title }
				}
				else = {
					any_child = {
						limit = { is_alive = yes }
						if = {
							limit = {
								is_female = no
								NOT = { trait = bastard }
							}
							add_claim = event_target:primary_title
						}
						else = { add_weak_claim = event_target:primary_title }
					}
				}
			}
		}
	}
	if = { #Counties
		limit = {
			has_game_rule = { name = shattered_realms value = counties }
		}
		d_kingsguard = { #disable kingsguard
			holder_scope = {
				remove_trait = kingsguard
				clr_character_flag = no_court_invites
				activate_title = { title = d_kingsguard status = no }
				d_kingsguard = { destroy_landed_title = THIS }
			}
		}
		any_character = {
			limit = { 
				is_alive = yes 
				trait = kingsguard
			}
			remove_trait = kingsguard
			clr_character_flag = no_court_invites
		}
		any_playable_ruler = { #patricians become feudal
			limit = {
				is_patrician = yes
			}
			family_palace = { destroy_settlement = THIS }
			set_government_type = feudal_government
		}
		any_title = { #destroy duke+ titles
			limit = {
				has_holder = yes
				higher_tier_than = COUNT
				is_landless_type_title = no
				is_nomadic = no
				holder_scope = {
					NOT = { trait = nightswatch }
				}
			}
			any_claimant = { remove_claim = PREV }
			destroy_landed_title = THIS
		}
		any_playable_ruler = { #lose secondary count titles
			limit = {					
				tier = COUNT
				num_of_count_titles = 2
				demesne_size = 2
				NOT = { trait = nightswatch }
			}
			any_demesne_title = {
				limit = {
					tier = COUNT
					is_landless_type_title = no
					is_primary_holder_title = no
				}
				holder_scope = {				
					random_courtier = {
						limit = {
							is_ruler = no
							NOT = { is_child_of = PREV }
							is_adult = yes
							prisoner = no
							is_female = no
							can_inherit_titles_trigger = yes
							NOT = { dynasty = 0 }
						}
						gain_title = PREVPREV
					}
				}
			}
			any_demesne_title = { #if no courtier found, create a random
				limit = {
					tier = COUNT
					is_landless_type_title = no
					is_primary_holder_title = no
				}
				location = {
					create_character = {
						random_traits = yes
						culture = THIS
						religion = THIS
						dynasty = actually_culture
						female = no
						historical = yes
					}
					new_character = {
						random_list = {
							30 = { add_trait = poor_warrior }
							50 = { add_trait = trained_warrior }
							20 = { add_trait = skilled_warrior }
						}
						if = {
							limit = { has_knighthood_religion_trigger = yes }
							knight_character_effect = yes
						}	
						gain_title = PREVPREV
					}
				}	
			}
		}
		any_playable_ruler = { #split nomadic clans
			limit = {					
				tier = KING
				is_nomadic = yes
			}
			set_defacto_liege = THIS
		}
		any_playable_ruler = {
			limit = { is_nomadic = yes }
			add_population_scaled = -0.75
			manpower = -2500
		}
		any_title = {
			limit = { tier = KING }
			set_variable = { which = "lord_paramount_status" value = 0 }
		}
		#Add claims
		any_playable_ruler = {
			limit = { tier = COUNT }
			primary_title = { save_event_target_as = primary_title }
			any_sibling_even_if_dead = {
				if = {
					limit = { is_alive = yes }
					if = {
						limit = {
							is_female = no
							NOT = { trait = bastard }
						}
						add_pressed_claim = event_target:primary_title
					}
					else = { add_weak_pressed_claim = event_target:primary_title }
				}
				else = {
					any_child = {
						limit = { is_alive = yes }
						if = {
							limit = {
								is_female = no
								NOT = { trait = bastard }
							}
							add_claim = event_target:primary_title
						}
						else = { add_weak_claim = event_target:primary_title }
					}
				}
			}
		}
	}
}
symmetrical_start_effect = {
	any_title = {
		limit = {
			tier = BARON
			has_holder = yes
		}
		#Record undestroyable buildings
		if = {
			limit = { holding_type = castle }
			if = {
				limit = { has_building = ca_wallportion }
				set_title_flag = ca_wallportion
			}
			if = {
				limit = { has_building = ca_dragonmont }
				set_title_flag = ca_dragonmont
			}
			if = {
				limit = { has_building = ca_volcanoes }
				set_title_flag = ca_volcanoes
			}
			if = {
				limit = { has_building = ca_harrenhal_ruins }
				set_title_flag = ca_harrenhal_ruins
			}		
			if = {
				limit = { has_building = ca_sub_barony_ruin }
				set_title_flag = ca_sub_barony_ruin
			}		
		}	
		if = {
			limit = { holding_type = city }
			if = {
				limit = { has_building = ct_sub_barony_ruin }
				set_title_flag = ct_sub_barony_ruin
			}
		}	
		if = {
			limit = { holding_type = temple }
			if = {
				limit = { has_building = tp_weirwood_tree }
				set_title_flag = tp_weirwood_tree
				if = {
					limit = { has_building = tp_small_godswood }
					set_title_flag = tp_small_godswood
					if = {
						limit = { has_building = tp_godswood }
						set_title_flag = tp_godswood
						if = {
							limit = { has_building = tp_large_godswood }
							set_title_flag = tp_large_godswood
							if = {
								limit = { has_building = tp_godswood_forest }
								set_title_flag = tp_godswood_forest
							}
						}
					}
				}
			}
		}
		
		while = {
			limit = { num_of_buildings = 1 }
			destroy_random_building = yes
		}
		
		#Rebuild undestroyable buildings
		if = {
			limit = { holding_type = castle }
			if = {
				limit = { has_title_flag = ca_wallportion }
				add_building = ca_wallportion
				clr_title_flag = ca_wallportion
			}
			if = {
				limit = { has_title_flag = ca_dragonmont }
				add_building = ca_dragonmont
				clr_title_flag = ca_dragonmont
			}
			if = {
				limit = { has_title_flag = ca_volcanoes }
				add_building = ca_volcanoes
				clr_title_flag = ca_volcanoes
			}		
			if = {
				limit = { has_title_flag = ca_harrenhal_ruins }
				add_building = ca_harrenhal_ruins
				clr_title_flag = ca_harrenhal_ruins
			}
			if = {
				limit = { has_title_flag = ca_sub_barony_ruin }
				add_building = ca_sub_barony_ruin
				clr_title_flag = ca_sub_barony_ruin
			}			
		}	
		if = {
			limit = { holding_type = city }		
			if = {
				limit = { has_title_flag = ct_sub_barony_ruin }
				add_building = ct_sub_barony_ruin
				clr_title_flag = ct_sub_barony_ruin
			}
		}	
		if = {
			limit = { holding_type = temple }
			if = {
				limit = { has_title_flag = tp_weirwood_tree }
				add_building = tp_weirwood_tree
				clr_title_flag = tp_weirwood_tree
				if = {
					limit = { has_title_flag = tp_small_godswood }
					add_building = tp_small_godswood
					clr_title_flag = tp_small_godswood
					if = {
						limit = { has_title_flag = tp_godswood }
						add_building = tp_godswood
						clr_title_flag = tp_godswood
						if = {
							limit = { has_title_flag = tp_large_godswood }
							add_building = tp_large_godswood
							clr_title_flag = tp_large_godswood
							if = {
								limit = { has_title_flag = tp_godswood_forest }
								add_building = tp_godswood_forest
								clr_title_flag = tp_godswood_forest
							}
						}
					}
				}
			}
		}
	}
}
startup_prosperity_effect = {
	any_province = {
		limit = {
			any_province_holding = { #empty provinces (including provinces with ONLY a temple) do not prosper
				OR = {
					holding_type = city
					holding_type = castle
					#holding_type = tribal
				}
			}
		}
		if = {
			limit = { owner = { NOT_mythical_creature_trigger = yes } }
			if = {
				limit = { any_province_holding = { base_value_1_trigger = yes } }
				set_variable = { which = prosperity_value value = 10 }
			}
			if = {
				limit = { any_province_holding = { base_value_2_trigger = yes } }
				set_variable = { which = prosperity_value value = 30 }
			}
			if = {
				limit = { any_province_holding = { base_value_3_trigger = yes } }
				set_variable = { which = prosperity_value value = 75 }
			}
			if = {
				limit = { any_province_holding = { base_value_4_trigger = yes } }
				set_variable = { which = prosperity_value value = 150 }
			}
			if = {
				limit = { any_province_holding = { base_value_5_trigger = yes } }
				set_variable = { which = prosperity_value value = 200 }
			}
			if = {
				limit = { any_province_holding = { base_value_6_trigger = yes } }
				set_variable = { which = prosperity_value value = 350 }
			}
		}	
		if = {
			limit = { owner = { NOT = { NOT_mythical_creature_trigger = yes } } }
			set_variable = { which = prosperity_value value = 0 }
			# add_province_modifier = {
				# name = depopulated_3
				# duration = -1
			# }
			# set_province_flag = recent_depopulation_3
		}
	}
	
	##Special##
	#Iron islands are poor
	any_province = {
		limit = { region = world_iron_isles }
		if = {
			limit = { NOT = { check_variable = { which = prosperity_value value = 151 } } }
			set_variable = { which = prosperity_value value = 0 }
		}
		if = {
			limit = { check_variable = { which = prosperity_value value = 151 } }
			change_variable = { which = prosperity_value value = -150 }
		}
	}
	#The Conquest
	if = {
		limit = {
			year = 7999
			NOT = { year = 8020 }	
		}
		107 = { #Harrenhal
			set_variable = { which = prosperity_value value = 0 }
		}
	}
	#Jaehaerys the Conciliator
	if = {
		limit = {
			year = 8062
			NOT = { year = 8105 } #Two years after he died, arbitrary number
		}
		any_province = {
			limit = {
				region = world_westeros 
				NOT = { region = world_beyond_the_wall }
				NOT = { region = world_dorne }
			}
			change_variable = { which = prosperity_value value = 75 } #Provinces of 2nd Tier or more will be "prospering"
		}
		226 = {
			change_variable = { which = prosperity_value value = 75 } #Additional 75 for King's Landing to make it "booming"
		}
	}
	#Dance of the Dragons
	if = {
		limit = {
			year = 8130
			NOT = { year = 8140 }	
		}
		any_province = {
			limit = { region = world_crownlands }
			set_variable = { which = prosperity_value value = 0 }
		}
		any_province = {
			limit = { region = world_riverlands }
			set_variable = { which = prosperity_value value = 0 }
		}
		any_province = {
			limit = { duchy = { title = d_tumbleton } }
			set_variable = { which = prosperity_value value = 0 }
		}
	}
	#Peake Uprising
	if = {
		limit = {
			year = 8234
			NOT = { year = 8260 }
		}
		279 = { #Starpike
			set_variable = { which = prosperity_value value = 0 }
		}
	}
	#Roberts Rebellion
	if = {
		limit = {
			year = 8284
			NOT = { year = 8290 }	
		}
		any_province = {
			limit = { region = world_crownlands }
			set_variable = { which = prosperity_value value = 0 }
		}
		any_province = {
			limit = { region = world_stormlands }
			set_variable = { which = prosperity_value value = 0 }
		}
		112 = { #Stoney Sept
			set_variable = { which = prosperity_value value = 0 }
		}
		149 = { #Gulltown
			set_variable = { which = prosperity_value value = 0 }
		}
	}
	#Greyjoy Rebellion
	if = {
		limit = {
			year = 8290
		}
		161 = { #Lordsport
			set_variable = { which = prosperity_value value = 0 }
		}
		162 = { #Pyke
			set_variable = { which = prosperity_value value = 0 }
		}
	}
	#ACOK
	if = {
		limit = {
			OR = {
				year = 8300
				AND = {
					year = 8299
					month = 5
				}
			}	
		}
		any_province = {
			limit = { duchy = { title = d_wolfswood } }
			set_variable = { which = prosperity_value value = 0 }
		}
		any_province = {
			limit = { duchy = { title = d_winterfell } }
			set_variable = { which = prosperity_value value = 0 }
		}
		any_province = {
			limit = { duchy = { title = d_rills } }
			set_variable = { which = prosperity_value value = 0 }
		}
		164 = { #The Crag
			set_variable = { which = prosperity_value value = 0 }
		}
		173 = { #Ashemark
			set_variable = { which = prosperity_value value = 0 }
		}
		174 = { #Golden Tooth
			set_variable = { which = prosperity_value value = 0 }
		}
		175 = { #Nunn's Deep
			set_variable = { which = prosperity_value value = 0 }
		}
		177 = { #Pendrick Hills
			set_variable = { which = prosperity_value value = 0 }
		}
		184 = { #Oxcross
			set_variable = { which = prosperity_value value = 0 }
		}
		187 = { #Castamere
			set_variable = { which = prosperity_value value = 0 }
		}
		any_province = {
			limit = { region = world_astapor }
			set_variable = { which = prosperity_value value = 0 }
		}
		any_province = {
			limit = { region = world_meereen }
			set_variable = { which = prosperity_value value = 0 }
		}
		any_province = {
			limit = { region = world_riverlands }
			set_variable = { which = prosperity_value value = 0 }
		}
		any_province = {
			limit = { region = world_crownlands }
			set_variable = { which = prosperity_value value = 0 }
		}
	}
	#AFFC
	if = {
		limit = {
			year = 8300	
		}
		any_province = {
			limit = { region = world_stormlands }
			set_variable = { which = prosperity_value value = 0 }
		}
		any_province = {
			limit = { duchy = { title = d_the_shield_isles } }
			set_variable = { which = prosperity_value value = 0 }
		}
	}
	##
	
	any_province = {
		limit = {
			check_variable = { which = prosperity_value value = 100 } #gain modifiers at 100/250/500 value
		}
		add_province_modifier = { name = prosperity_modifier_1 duration = -1 }
	}
	any_province = {
		limit = {
			check_variable = { which = prosperity_value value = 250 }
		}
		remove_province_modifier = prosperity_modifier_1
		add_province_modifier = { name = prosperity_modifier_2 duration = -1 }
	}
	any_province = {
		limit = {
			check_variable = { which = prosperity_value value = 500 }
		}
		remove_province_modifier = prosperity_modifier_2
		add_province_modifier = { name = prosperity_modifier_3 duration = -1 }
	}
}
gain_regency_effect = {
	hidden_tooltip = { 
		liege = { regent = { remove_title = title_regent } } 
		remove_title = title_triarch
	}
	if = {
		limit = { 
			is_ruler = yes
			is_councillor = no 
		}
		hidden_tooltip = {
			remove_title = title_high_admiral
			remove_title = title_councilmember_king
			remove_title = title_councilmember_emperor
			#remove_title = title_master_of_ships				
			liege = { job_castellan = { remove_title = job_castellan } }
		}
		give_job_title = job_castellan
	}		
	give_minor_title = title_regent	
	hidden_tooltip = { 
		if = {
			limit = { has_character_flag = triarch }
			give_minor_title = title_triarch 
		}	
		liege = {
			random_courtier_or_vassal = {
				limit = {
					has_minor_title = title_appointed_regent
					NOT = { character = PREVPREV }
				}
				remove_title = title_appointed_regent
			}
		}
	}
}
find_ship_name_effect = { #use in immediate
	hidden_tooltip = {
		random_artifact = {
			limit = {
				has_artifact_flag = flagship 
				is_artifact_equipped = yes
			}
			save_event_target_as = flagship_name
		}
	}
}
add_fear_execution_effect = {
	if = { #Landed Vassals
		limit = {
			FROM = { higher_tier_than = COUNT }
			is_ruler = yes
			OR = {
				is_liege_or_above = FROM
				liege_before_war = { character = FROM }
				any_liege = { liege_before_war = { character = FROM } }
				primary_title = { 
					FROM = {
						any_demesne_title = {
							is_variable_equal = { which = "de_facto_empire" which = PREVPREV }
							check_variable = { which = "de_facto_empire" value = 0.9 }
						}
					}
				}
			}	
		}
		FROM = { 
			change_variable = { which = fear_actions value = 10 } 
			hidden_tooltip = { character_event = { id = faction_event_new.90 } }
		}
	}
	if = { #Relatives of Vassals or FROM
		limit = {
			FROM = { higher_tier_than = COUNT }
			is_ruler = no
			OR = {
				is_close_relative = FROM
				AND = {						
					dynasty = FROM
					NOT = { dynasty = 0 }
				}	
				any_close_relative = {
					is_ruler = yes	
					OR = {
						is_liege_or_above = FROM
						liege_before_war = { character = FROM }
						any_liege = { liege_before_war = { character = FROM } }
						primary_title = { 
							FROM = {
								any_demesne_title = {
									is_variable_equal = { which = "de_facto_empire" which = PREVPREV }
									check_variable = { which = "de_facto_empire" value = 0.9 }
								}
							}
						}
					}
				}	
			}	
		}
		FROM = { 
			change_variable = { which = fear_actions value = 5 } 
			hidden_tooltip = { character_event = { id = faction_event_new.90 } }
		}
	}
}
add_fear_torture_effect = { #as above, just different values
	if = { #Landed Vassals
		limit = {
			FROM = { higher_tier_than = COUNT }
			is_ruler = yes
			OR = {
				is_liege_or_above = ROOT_FROM
				liege_before_war = { character = ROOT_FROM }
				any_liege = { liege_before_war = { character = ROOT_FROM } }
				primary_title = { 
					ROOT_FROM = {
						any_demesne_title = {
							is_variable_equal = { which = "de_facto_empire" which = PREVPREV }
							check_variable = { which = "de_facto_empire" value = 0.9 }
						}
					}
				}
			}	
		}
		ROOT_FROM = { 
			change_variable = { which = fear_actions value = 5 } 
			hidden_tooltip = { character_event = { id = faction_event_new.90 } }
		}
	}
	if = { #Relatives of Vassals or FROM
		limit = {
			FROM = { higher_tier_than = COUNT }
			is_ruler = no
			OR = {
				is_close_relative = ROOT_FROM
				AND = {						
					dynasty = ROOT_FROM
					NOT = { dynasty = 0 }
				}	
				any_close_relative = {
					is_ruler = yes	
					OR = {
						is_liege_or_above = ROOT_FROM
						liege_before_war = { character = ROOT_FROM }
						any_liege = { liege_before_war = { character = ROOT_FROM } }
						primary_title = { 
							ROOT_FROM = {
								any_demesne_title = {
									is_variable_equal = { which = "de_facto_empire" which = PREVPREV }
									check_variable = { which = "de_facto_empire" value = 0.9 }
								}
							}
						}
					}
				}	
			}	
		}
		ROOT_FROM = { 
			change_variable = { which = fear_actions value = 2 } 
			hidden_tooltip = { character_event = { id = faction_event_new.90 } }
		}
	}
	ROOT_FROM = { impaler_trait_chance_effect = yes }
}
add_fear_torture_execution_effect = { #as above, just different values
	hidden_tooltip = { #opinions
		FROM = {
			father = { 
				opinion = { who = ROOT modifier = opinion_tortured_kin } 
			}
			mother = { 
				opinion = { who = ROOT modifier = opinion_tortured_kin } 
			}
			any_dynasty_member = {
				limit = {
					is_close_relative = ROOT
					NOT = { is_parent_of = ROOT } 
				}
				opinion = { who = ROOT modifier = opinion_tortured_kin } 
			}
			any_spouse = {
				opinion = { who = ROOT modifier = opinion_tortured_kin } 
			}
			any_lover = { 
				limit = { 
					NOT = { is_parent_of = ROOT } 
					NAND = {
						dynasty = ROOT
						is_close_relative = ROOT
					}
					NOT = { is_married = ROOT }
				}
				opinion = { who = ROOT modifier = opinion_tortured_lover } 
			}
			any_friend = { 
				limit = { 
					NOT = { is_parent_of = ROOT } 
					NAND = {
						dynasty = ROOT
						is_close_relative = ROOT
					}
					NOT = { is_married = ROOT }
					NOT = { is_lover = ROOT }
				}
				opinion = { who = ROOT modifier = opinion_tortured_friend } 
			}
		}	
	}
	if = { 
		limit = {
			higher_tier_than = COUNT
			OR = {
				FROM = { #Landed Vassals
					is_ruler = yes
					OR = {
						is_liege_or_above = ROOT
						liege_before_war = { character = ROOT }
						any_liege = { liege_before_war = { character = ROOT } }
						primary_title = { 
							ROOT = {
								any_demesne_title = {
									is_variable_equal = { which = "de_facto_empire" which = PREVPREV }
									check_variable = { which = "de_facto_empire" value = 0.9 }
								}
							}
						}
					}	
				}
				FROM = { #Relatives of Vassals or FROM
					is_ruler = no
					OR = {
						is_close_relative = ROOT
						AND = {						
							dynasty = ROOT
							NOT = { dynasty = 0 }
						}	
						any_close_relative = {
							is_ruler = yes	
							OR = {
								is_liege_or_above = ROOT
								liege_before_war = { character = ROOT }
								any_liege = { liege_before_war = { character = ROOT } }
								primary_title = { 
									ROOT = {
										any_demesne_title = {
											is_variable_equal = { which = "de_facto_empire" which = PREVPREV }
											check_variable = { which = "de_facto_empire" value = 0.9 }
										}
									}
								}
							}
						}	
					}	
				}
			}	
		}
		change_variable = { which = fear_actions value = 5 } 
		hidden_tooltip = { character_event = { id = faction_event_new.90 } }
	}
	if = {
		limit = {
			NOT = { trait = impaler }
			NOT = { lifestyle_traits = 1 }
		}
		impaler_trait_chance_effect = yes
	}	
	if = {
		limit = { 
			NOT = { trait = cruel } 
			NOT = { trait = kind } 
		}
		random = {
			chance = 10
			add_trait = cruel
			hidden_tooltip = {
				character_event ={
					id = 38259 #Notify Cruel
				}
			}
		}
	}
}
enslave_effect = { #must set enslaver event target
	add_trait = slave	
	hidden_tooltip = {
		if = {
			limit = { NOT = { has_character_flag = newborn_slave } }
			any_close_relative = {
				limit = { 
					OR = {
						opinion = { who = PREV value = -25 } 
						is_parent_of = PREV
					}	
				}
				opinion = { who = event_target:enslaver modifier = opinion_enslaved_close_relative }
			}
			any_spouse = {
				opinion = { who = event_target:enslaver modifier = opinion_my_abducted_spouse years = 100 }
			}
		}
		else = {
			clr_character_flag = newborn_slave
		}
		prisoner = no
		any_spouse = { remove_spouse = PREV }	
		any_consort = { remove_consort = PREV }	
		clr_character_flag = escaped_slave
		if = {
			limit = { has_guardian = yes }
			remove_guardian = yes
		}
		remove_trait = former_slave
		remove_trait = kingsguard
		remove_trait = nightswatch
		set_character_flag = no_court_invites
		if = {
			limit = { trait = archmaester }
			remove_trait = archmaester
			add_trait = maester
			set_special_character_title = title_maester
			clr_character_flag = grandmaester
		}
		clr_character_flag = triarch
		clr_character_flag = title_freeholder
		remove_title = title_freeholder
		diplomatic_immunity = no
		#give_minor_title = title_slave
		clr_character_flag = captured_in_battle
		clr_character_flag = kidnapped_by_plot
		clr_character_flag = lost_trial_by_combat
		clr_character_flag = imprisoned_for_relatives_crimes
		set_immune_to_pruning = yes
		move_character = event_target:enslaver
		opinion = { who = event_target:enslaver modifier = opinion_my_owner }
		reverse_opinion = { who = event_target:enslaver modifier = opinion_my_slave }
		event_target:enslaver = { add_trait = slave_owner }
		character_event = { id = slavery.259 days = 1 } #slave management		
	}
}
get_education_level_effect = {
	if = {
		limit = { trait = incapable }
		set_character_flag = education_outcome_level_1
	}	
	if = {
		limit = { is_incapable = no }
		if = {
			limit = { has_character_flag = is_child_of_destiny }
			random_list = {
				#0 = {set_character_flag = education_outcome_level_1}
				#0 = {set_character_flag = education_outcome_level_2}
				10 = {set_character_flag = education_outcome_level_3}
				90 = {set_character_flag = education_outcome_level_4}
			}
		}
		else_if = {
			limit = { #too dumb 
				NOT = { learning = 3 }
			}
			random_list = {
				75 = {set_character_flag = education_outcome_level_1}
				25 = {set_character_flag = education_outcome_level_2}
				#0 = {set_character_flag = education_outcome_level_3}
				#0 = {set_character_flag = education_outcome_level_4}
			}
		}
		else_if = {
			limit = {
				NOT = { learning = 5 }
			}
			random_list = {
				55 = {set_character_flag = education_outcome_level_1}
				45 = {set_character_flag = education_outcome_level_2}
				#0 = {set_character_flag = education_outcome_level_3}
				#0 = {set_character_flag = education_outcome_level_4}
			}
		}
		else_if = {
			limit = {
				NOT = { learning = 7 }
			}
			random_list = {
				35 = {set_character_flag = education_outcome_level_1}
				50 = {set_character_flag = education_outcome_level_2}
				15 = {set_character_flag = education_outcome_level_3}
				#0 = {set_character_flag = education_outcome_level_4}
			}
		}
		else_if = {
			limit = {
				NOT = { learning = 9 }
			}
			random_list = {
				20 = {set_character_flag = education_outcome_level_1}
				50 = {set_character_flag = education_outcome_level_2}
				20 = {set_character_flag = education_outcome_level_3}
				10 = {set_character_flag = education_outcome_level_4}
			}
		}
		else_if = {
			limit = {
				NOT = { learning = 11 }
			}
			random_list = {
				10 = {set_character_flag = education_outcome_level_1}
				35 = {set_character_flag = education_outcome_level_2}
				35 = {set_character_flag = education_outcome_level_3}
				20 = {set_character_flag = education_outcome_level_4}
			}
		}
		else_if = {
			limit = {
				NOT = { learning = 13 }
			}
			random_list = {
				#0 = {set_character_flag = education_outcome_level_1}
				25 = {set_character_flag = education_outcome_level_2}
				45 = {set_character_flag = education_outcome_level_3}
				30 = {set_character_flag = education_outcome_level_4}
			}
		}
		else_if = {
			limit = {
				NOT = { learning = 15 }
			}
			random_list = {
				#0 = {set_character_flag = education_outcome_level_1}
				10 = {set_character_flag = education_outcome_level_2}
				50 = {set_character_flag = education_outcome_level_3}
				40 = {set_character_flag = education_outcome_level_4}
			}
		}
		else_if = {
			limit = {
				NOT = { learning = 17 }
			}
			random_list = {
				#0 = {set_character_flag = education_outcome_level_1}
				#0 = {set_character_flag = education_outcome_level_2}
				35 = {set_character_flag = education_outcome_level_3}
				65 = {set_character_flag = education_outcome_level_4}
			}
		}
		else = {
			random_list = {
				#0 = {set_character_flag = education_outcome_level_1}
				#0 = {set_character_flag = education_outcome_level_2}
				10 = {set_character_flag = education_outcome_level_3}
				90 = {set_character_flag = education_outcome_level_4}
			}
		}
	}	
}
decrease_education_level_effect = {
	if = {
		limit = {
			has_character_flag = education_outcome_level_2
		}
		clr_character_flag = education_outcome_level_2
		set_character_flag = education_outcome_level_1
	}
	if = {
		limit = {
			has_character_flag = education_outcome_level_3
		}
		clr_character_flag = education_outcome_level_3
		set_character_flag = education_outcome_level_2
	}
	if = {
		limit = {
			has_character_flag = education_outcome_level_4
		}
		clr_character_flag = education_outcome_level_4
		set_character_flag = education_outcome_level_3
	}
}
increase_education_level_effect = {
	if = {
		limit = {
			has_character_flag = education_outcome_level_3
		}
		clr_character_flag = education_outcome_level_3
		set_character_flag = education_outcome_level_4
	}
	if = {
		limit = {
			has_character_flag = education_outcome_level_2
		}
		clr_character_flag = education_outcome_level_2
		set_character_flag = education_outcome_level_3
	}
	if = {
		limit = {
			has_character_flag = education_outcome_level_1
		}
		clr_character_flag = education_outcome_level_1
		set_character_flag = education_outcome_level_2
	}
}
add_random_leadership_trait_effect = {
	random_list = {
		10 = { 
			modifier = {
				factor = 0
				OR = { 
					trait = cavalry_leader
					trait = heavy_infantry_leader
					trait = light_foot_leader
				}
			}
			add_trait = light_foot_leader 
		}
		10 = { 
			modifier = {
				factor = 0
				OR = { 
					trait = cavalry_leader
					trait = heavy_infantry_leader
					trait = light_foot_leader
				}
			}
			add_trait = heavy_infantry_leader 
		}
		10 = {
			modifier = {
				factor = 0
				OR = { 
					trait = cavalry_leader
					trait = heavy_infantry_leader
					trait = light_foot_leader
				}
			}
			add_trait = cavalry_leader 
		}
		10 = { 
			modifier = {
				factor = 0
				OR = { 
					trait = inspiring_leader
					trait = back_seat_leader
				}
			}
			add_trait = inspiring_leader 
		}
		10 = { 
			modifier = {
				factor = 0
				trait = trickster
			}
			add_trait = trickster 
		}
		10 = { 
			modifier = {
				factor = 0
				trait = organizer
			}
			add_trait = organizer 
		}
		10 = { 
			modifier = {
				factor = 0
				OR = { 
					trait = defensive_leader
					trait = aggressive_leader
				}
			}
			add_trait = defensive_leader 
		}
		10 = { 
			modifier = {
				factor = 0
				trait = experimenter 
			}
			add_trait = experimenter 
		}
		10 = { 
			modifier = {
				factor = 0
				trait = flanker
			}
			add_trait = flanker 
		}
		10 = { 
			modifier = {
				factor = 0
				OR = { 
					trait = defensive_leader
					trait = aggressive_leader
				}
			}
			add_trait = aggressive_leader 
		}
		10 = { 
			modifier = {
				factor = 0
				OR = { 
					trait = rough_terrain_leader
					trait = flat_terrain_leader
					trait = mountain_terrain_leader
					trait = desert_terrain_leader
					trait = jungle_terrain_leader
					NOR = {
						location = { terrain = plains }
						location = { terrain = farmlands }
						location = { terrain = steppe }
					}
				}
			}
			add_trait = flat_terrain_leader 
		}
		10 = { 
			modifier = {
				factor = 0
				OR = { 
					trait = rough_terrain_leader
					trait = flat_terrain_leader
					trait = mountain_terrain_leader
					trait = desert_terrain_leader
					trait = jungle_terrain_leader
					NOR = {
						location = { terrain = forest }
						location = { terrain = hills }
					}
				}
			}
			add_trait = rough_terrain_leader
		}
		10 = { 
			modifier = {
				factor = 0
				OR = { 
					trait = rough_terrain_leader
					trait = flat_terrain_leader
					trait = mountain_terrain_leader
					trait = desert_terrain_leader
					trait = jungle_terrain_leader
					NOT = { location = { terrain = mountain } }
				}
			}
			add_trait = mountain_terrain_leader
		}
		10 = { 
			modifier = {
				factor = 0
				OR = { 
					trait = rough_terrain_leader
					trait = flat_terrain_leader
					trait = mountain_terrain_leader
					trait = desert_terrain_leader
					trait = jungle_terrain_leader
					NOT = { location = { terrain = desert } }
				}
			}
			add_trait = desert_terrain_leader 
		}
		10 = { 
			modifier = {
				factor = 0
				OR = { 
					trait = rough_terrain_leader
					trait = flat_terrain_leader
					trait = mountain_terrain_leader
					trait = desert_terrain_leader
					trait = jungle_terrain_leader
					NOT = { location = { terrain = jungle } }
				}
			}
			add_trait = jungle_terrain_leader
		}
		10 = { 
			modifier = {
				factor = 0
				OR = { 
					NOT = { trait = zealous }
					trait = holy_warrior
					trait = cynical
				}
			}
			add_trait = holy_warrior
		}
		10 = { 
			modifier = {
				factor = 0
				trait = unyielding_leader
			}
			add_trait = unyielding_leader
		}
		10 = { 
			modifier = {
				factor = 0
				OR = { 
					trait = inspiring_leader
					trait = back_seat_leader
				}
			}
			add_trait = back_seat_leader 
		}
		10 = { 
			modifier = {
				factor = 0
				trait = siege_leader
			}
			add_trait = siege_leader
		}
		10 = { 
			modifier = {
				factor = 0
				OR = { 
					trait = narrow_flank_leader
					NOR = {
						location = { terrain = mountain }
						location = { terrain = hills }
						location = { terrain = forest }
					}
				}
			}
			add_trait = narrow_flank_leader
		}
		10 = { 
			modifier = {
				factor = 0
				OR = { 
					trait = war_elephant_leader
					location = {
						NOR = {
							culture_group = moraqi_group
							culture_group = yi_ti_group
							culture = volantene
							culture = eastern_valyrian
							culture_group = ghiscari_group
							culture_group = qarth_group
							culture_group = jade_islands_group
						}
					}
				}
			}
			add_trait = war_elephant_leader
		}
	}
}
add_education_leadership_traits_effect = {
	if = {
		limit = {
			OR = {
				trait = skilled_tactician
				trait = brilliant_strategist
			}
			NOT = { leadership_traits = 1 }
		}
		add_random_leadership_trait_effect = yes
	}
	if = {
		limit = {
			trait = brilliant_strategist
			NOT = { leadership_traits = 2 }
		}
		add_random_leadership_trait_effect = yes
	}
}
spawn_native_army_effect = {
	random_list = {
		17 = {
			spawn_unit = {
				province = ROOT
				home = ROOT
				owner = THIS
				leader = THIS
				scaled_by_biggest_garrison = 0.66
				troops = {
					archers = { 6 6 }
					light_cavalry = { 4 4 }
					light_infantry = { 10 10 }
				}
				attrition = 1.0
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				#trait = peasant_leader
				
			}
			new_character = {
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.66
					troops = {
						archers = { 6 6 }
						light_cavalry = { 4 4 }
						light_infantry = { 10 10 }
					}
					attrition = 1.0
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				#trait = peasant_leader
				
			}
			new_character = {
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.66
					troops = {
						archers = { 6 6 }
						light_cavalry = { 4 4 }
						light_infantry = { 10 10 }
					}
					attrition = 1.0
				}
			}
		}
		17 = {
			spawn_unit = {
				province = ROOT
				home = ROOT
				owner = THIS
				leader = THIS
				scaled_by_biggest_garrison = 0.5
				troops = {
					archers = { 6 6 }
					light_cavalry = { 4 4 }
					light_infantry = { 10 10 }
				}
				attrition = 1.0
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				#trait = peasant_leader
				
			}
			new_character = {
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.5
					troops = {
						archers = { 6 6 }
						light_cavalry = { 4 4 }
						light_infantry = { 10 10 }
					}
					attrition = 1.0
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				#trait = peasant_leader
				
			}
			new_character = {
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.5
					troops = {
						archers = { 6 6 }
						light_cavalry = { 4 4 }
						light_infantry = { 10 10 }
					}
					attrition = 1.0
				}
			}
		}
		16 = {
			spawn_unit = {
				province = ROOT
				home = ROOT
				owner = THIS
				leader = THIS
				scaled_by_biggest_garrison = 0.66
				troops = {
					archers = { 6 6 }
					light_cavalry = { 3 3 }
					light_infantry = { 11 11 }
				}
				attrition = 1.0
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				#trait = peasant_leader
				
			}
			new_character = {
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.66
					troops = {
						archers = { 6 6 }
						light_cavalry = { 3 3 }
						light_infantry = { 11 11 }
					}
					attrition = 1.0
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				#trait = peasant_leader
				
			}
			new_character = {
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.66
					troops = {
						archers = { 6 6 }
						light_cavalry = { 3 3 }
						light_infantry = { 11 11 }
					}
					attrition = 1.0
				}
			}
		}
		17 = {
			spawn_unit = {
				province = ROOT
				home = ROOT
				owner = THIS
				leader = THIS
				scaled_by_biggest_garrison = 0.5
				troops = {
					archers = { 6 6 }
					light_cavalry = { 3 3 }
					light_infantry = { 11 11 }
				}
				attrition = 1.0
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				#trait = peasant_leader
				
			}
			new_character = {
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.5
					troops = {
						archers = { 6 6 }
						light_cavalry = { 3 3 }
						light_infantry = { 11 11 }
					}
					attrition = 1.0
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				#trait = peasant_leader
				
			}
			new_character = {
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.5
					troops = {
						archers = { 6 6 }
						light_cavalry = { 3 3 }
						light_infantry = { 11 11 }
					}
					attrition = 1.0
				}
			}
		}
		16 = {
			spawn_unit = {
				province = ROOT
				home = ROOT
				owner = THIS
				leader = THIS
				scaled_by_biggest_garrison = 0.66
				troops = {
					archers = { 6 6 }
					light_infantry = { 14 14 }
				}
				attrition = 1.0
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				#trait = peasant_leader
				
			}
			new_character = {
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.66
					troops = {
						archers = { 6 6 }
						light_infantry = { 14 14 }
					}
					attrition = 1.0
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				#trait = peasant_leader
				
			}
			new_character = {
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.66
					troops = {
						archers = { 6 6 }
						light_infantry = { 14 14 }
					}
					attrition = 1.0
				}
			}
		}
		17 = {
			spawn_unit = {
				province = ROOT
				home = ROOT
				owner = THIS
				leader = THIS
				scaled_by_biggest_garrison = 0.5
				troops = {
					archers = { 6 6 }
					light_infantry = { 14 14 }
				}
				attrition = 1.0
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				#trait = peasant_leader
				
			}
			new_character = {
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.5
					troops = {
						archers = { 6 6 }
						light_infantry = { 14 14 }
					}
					attrition = 1.0
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = THIS
				culture = THIS
				female = no
				#trait = peasant_leader
				
			}
			new_character = {
				spawn_unit = {
					province = ROOT
					home = ROOT
					owner = PREV
					scaled_by_biggest_garrison = 0.5
					troops = {
						archers = { 6 6 }
						light_infantry = { 14 14 }
					}
					attrition = 1.0
				}
			}
		}
	}
}
spawn_slave_army_effect = {
	spawn_unit = {
		province = ROOT
		home = ROOT
		owner = THIS
		#leader = THIS
		scaled_by_biggest_garrison = 0.15
		troops = { light_infantry = { 1 1 } }
		attrition = 1.0
	}
	create_random_soldier = {
		random_traits = yes
		dynasty = none
		religion = ROOT
		culture = random
		female = no
		trait = liberator
		trait = former_slave
	}
	new_character = {
		check_for_defunct_culture_effect = yes
		random_list = {
			10 = { add_trait = skilled_warrior }
			30 = { add_trait = trained_warrior }
			60 = { add_trait = poor_warrior }
		}
		set_character_flag = escaped_slave
		spawn_unit = {
			province = ROOT
			home = ROOT
			owner = PREV
			#leader = THIS
			scaled_by_biggest_garrison = 0.06
			troops = { light_infantry = { 1 1 } }
			attrition = 1.0
		}
	}
	create_random_soldier = {
		random_traits = yes
		dynasty = none
		religion = ROOT
		culture = random
		female = no
		trait = liberator
		trait = former_slave
	}
	new_character = {
		check_for_defunct_culture_effect = yes
		random_list = {
			10 = { add_trait = skilled_warrior }
			30 = { add_trait = trained_warrior }
			60 = { add_trait = poor_warrior }
		}
		set_character_flag = escaped_slave
		spawn_unit = {
			province = ROOT
			home = ROOT
			owner = PREV
			#leader = THIS
			scaled_by_biggest_garrison = 0.06
			troops = { light_infantry = { 1 1 } }
			attrition = 1.0
		}
	}
	if = {
		limit = { can_use_dragon_abilities_trigger = yes }
		create_random_soldier = {
			random_traits = yes
			dynasty = none
			religion = ROOT
			culture = random
			female = no
			trait = liberator
			trait = former_slave
		}
		new_character = {
			check_for_defunct_culture_effect = yes
			random_list = {
				10 = { add_trait = skilled_warrior }
				30 = { add_trait = trained_warrior }
				60 = { add_trait = poor_warrior }
			}
			set_character_flag = escaped_slave
			spawn_unit = {
				province = ROOT
				home = ROOT
				owner = PREV
				#leader = THIS
				scaled_by_biggest_garrison = 0.15
				troops = { light_infantry = { 1 1 } }
				attrition = 1.0
			}
		}
	}
}
spawn_slave_reinforcements_effect = {
	create_random_soldier = {
		random_traits = yes
		dynasty = none
		religion = FROM
		culture = random
		female = no
		trait = liberator
		trait = former_slave
	}
	new_character = {
		check_for_defunct_culture_effect = yes
		spawn_unit = {
			province = FROM
			home = FROM
			owner = ROOT
			#leader = THIS
			scaled_by_biggest_garrison = 0.1
			troops = { light_infantry = { 1 1 } }
			attrition = 1.0
		}
		random_list = {
			25 = { add_trait = poor_warrior }
			55 = { add_trait = trained_warrior }
			10 = { add_trait = skilled_warrior }
		}
		set_character_flag = escaped_slave
	}
	create_character = {
		random_traits = yes
		dynasty = none
		religion = FROM
		culture = random
		female = no
		trait = liberator
		trait = former_slave
	}
	new_character = {
		check_for_defunct_culture_effect = yes
		spawn_unit = {
			province = FROM
			home = FROM
			owner = ROOT
			#leader = THIS
			scaled_by_biggest_garrison = 0.1
			troops = { light_infantry = { 1 1 } }
			attrition = 1.0
		}
		set_character_flag = escaped_slave
		random_list = {
			25 = { add_trait = poor_warrior }
			55 = { add_trait = trained_warrior }
			10 = { add_trait = skilled_warrior }
		}
	}
	create_character = {
		random_traits = yes
		dynasty = none
		religion = FROM
		culture = random
		female = no
		trait = liberator
		trait = former_slave
	}
	new_character = {
		check_for_defunct_culture_effect = yes
		spawn_unit = {
			province = FROM
			home = FROM
			owner = ROOT
			#leader = THIS
			scaled_by_biggest_garrison = 0.1
			troops = { light_infantry = { 1 1 } }
			attrition = 1.0
		}
		set_character_flag = escaped_slave
		random_list = {
			25 = { add_trait = poor_warrior }
			55 = { add_trait = trained_warrior }
			10 = { add_trait = skilled_warrior }
		}
	}
}
spawn_pirate_army_effect = {
	random_list = {
		10 = {
			spawn_unit = {
				province = ROOT
				home = ROOT
				owner = THIS
				leader = THIS
				scaled_by_biggest_garrison = 0.5
				troops = {
					archers = { 6 6 }
					heavy_infantry = { 4 4 }
					light_infantry = { 10 10 }
				}
				attrition = 1.0
			}
		}
		10 = {
			spawn_unit = {
				province = ROOT
				home = ROOT
				owner = THIS
				leader = THIS
				scaled_by_biggest_garrison = 0.5
				troops = {
					archers = { 6 6 }
					heavy_infantry = { 3 3 }
					light_infantry = { 11 11 }
				}
				attrition = 1.0
			}
		}
		10 = {
			spawn_unit = {
				province = ROOT
				home = ROOT
				owner = THIS
				leader = THIS
				scaled_by_biggest_garrison = 0.5
				troops = {
					archers = { 6 6 }
					light_infantry = { 14 14 }
				}
				attrition = 1.0
			}
		}
	}
}
spawn_wildling_army_effect = {
	random_list = {
		16 = {
			spawn_unit = {
				province = event_target:rebel_spawn_location
				home = prev
				scaled_by_biggest_garrison = 0.85
				troops = {
					archers = { 6 6 }
					light_cavalry = { 4 4 }
					light_infantry = { 10 10 }
				}
				attrition = 1.0
				match_min = 50
			}
		}	
		16 = {
			spawn_unit = {
				province = event_target:rebel_spawn_location
				home = prev
				scaled_by_biggest_garrison = 0.85
				troops = {
					archers = { 6 6 }
					light_cavalry = { 3 3 }
					light_infantry = { 11 11 }
				}
				attrition = 1.0
				match_min = 50
			}
		}
		16 = {
			spawn_unit = {
				province = event_target:rebel_spawn_location
				home = prev
				scaled_by_biggest_garrison = 0.65
				troops = {
					archers = { 6 6 }
					light_infantry = { 14 14 }
				}
				attrition = 1.0
				match_min = 50
			}
		}
		16 = {
			spawn_unit = {
				province = event_target:rebel_spawn_location
				home = prev
				scaled_by_biggest_garrison = 0.45
				troops = {
					archers = { 6 6 }
					light_cavalry = { 4 4 }
					light_infantry = { 10 10 }
				}
				attrition = 1.0
				match_min = 50
			}
		}	
		16 = {
			spawn_unit = {
				province = event_target:rebel_spawn_location
				home = prev
				scaled_by_biggest_garrison = 0.45
				troops = {
					archers = { 6 6 }
					light_cavalry = { 3 3 }
					light_infantry = { 11 11 }
				}
				attrition = 1.0
				match_min = 50
			}
		}
		16 = {
			spawn_unit = {
				province = event_target:rebel_spawn_location
				home = prev
				scaled_by_biggest_garrison = 0.45
				troops = {
					archers = { 6 6 }
					light_infantry = { 14 14 }
				}
				attrition = 1.0
				match_min = 50
			}
		}
	}
}
spawn_rebels_effect = {
	random_list = {
		50 = {
			create_random_soldier = {
				random_traits = yes
				dynasty = random
				religion = ROOT
				culture = ROOT
				female = no
				employer = e_rebels
			}
			new_character = {
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				spawn_unit = {
					province = prev
					home = prev
					scaled_by_biggest_garrison = 2
					troops = {
						archers = { 10 10 }
						light_infantry = { 20 20 }							
					}
				}
			}
		}
		35 = {
			create_random_soldier = {
				random_traits = yes
				dynasty = random
				religion = ROOT
				culture = ROOT
				female = no
				employer = e_rebels
			}
			new_character = {
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				spawn_unit = {
					province = prev
					home = prev
					scaled_by_biggest_garrison = 2
					troops = {
						archers = { 10 10 }
						light_cavalry = { 5 5 }
						light_infantry = { 20 20 }
					}
				}
			}
		}
		15 = {
			create_random_soldier = {
				random_traits = yes
				dynasty = random
				religion = ROOT
				culture = ROOT
				female = no
				employer = e_rebels
			}
			new_character = {
				random_list = {
					10 = { add_trait = skilled_warrior }
					30 = { add_trait = trained_warrior }
					60 = { add_trait = poor_warrior }
				}
				spawn_unit = {
					province = prev
					home = prev
					scaled_by_biggest_garrison = 2
					troops = {
						archers = { 15 15 }
						light_cavalry = { 5 5 }
						light_infantry = { 25 25 }
					}
				}
			}
		}
	}
}
calculate_dragon_team_strength_effect = {
	set_variable = { which = "dragon_strength" value = 0 }
	random_friend = {
		limit = {
			trait = dragon
			is_alive = yes
		}
		save_event_target_as = my_dragon	
		PREV = {
			export_to_variable = {
			   which = dragon_strength
			   value = martial
			   who = event_target:my_dragon	
			}
		}
		if = {
			limit = { trait = wroth_dragon }
			PREV = {
				change_variable = {
				   which = dragon_strength
				   value = 5
				}
			}
		}
		if = {
			limit = { trait = lunatic_dragon }
			PREV = {
				change_variable = {
				   which = dragon_strength
				   value = 5
				}
			}
		}
		if = {
			limit = { trait =  nimble_dragon }
			PREV = {
				change_variable = {
				   which = dragon_strength
				   value = 8
				}
			}
		}
		if = {
			limit = { trait = obedient_dragon }
			PREV = {
				change_variable = {
				   which = dragon_strength
				   value = 3
				}
			}
		}
		if = {
			limit = { trait = ravenous_dragon }
			PREV = {
				change_variable = {
				   which = dragon_strength
				   value = -3
				}
			}
		}
		if = {
			limit = { trait = playful_dragon }
			PREV = {
				change_variable = {
				   which = dragon_strength
				   value = -5
				}
			}
		}
	}
	
	clear_event_target = my_dragon
	set_variable = { which = "combat_rating" value = 0 }
	export_to_variable = {
	   which = combat_rating
	   value = combat_rating
	   who = THIS
	}
	divide_variable = { which = combat_rating value = 5 }
	#Add dragon martial and combat rating
	change_variable = { which = dragon_strength which = combat_rating }	
	
}
calculate_dragon_preference_effect = {
	##Does character want a large dragon?
	if = {
		limit = {
			OR = {
				trait = chosen_by_rhllor
				culture = high_valyrian
				dynasty = 496
				has_character_flag = demon_child_non_pagan
				AND = {
					OR = {
						trait = ambitious
						trait = willful
					}	
					OR = {
						culture_group = valyrian
						religion_group = valyrian_rel_group
						trait = favored_by_rhllor
					}
				}	
			}
			calc_true_if = {
				amount = 2
				is_primary_heir = yes
				trait = ambitious
				trait = proud
				trait = envious
				trait = willful
				trait = haughty
			}
			NOR = {
				trait = craven 
				trait = content
				trait = humble
			}
			dragon = { #large dragon must actually exist
				is_alive = yes
				martial = 70
				OR = {
					at_location = PREV
					location = { 
						owner = {
							OR = {
								dynasty = PREVPREVPREV
								is_liege_or_above = PREVPREVPREV
							}
						}
					}	
				}	
				OR = {
					NOT = { any_friend = { always = yes } }
					any_friend = { #in line to take dragon
						age_diff = { who = ROOT years = 15 }
						current_heir = { 
							OR = {
								character = PREVPREVPREV 
								any_friend = { trait = dragon }
							}	
						} 
					}
				}	
				NOT = { has_character_flag = dany_dragon }
				OR = {
					AND = {
						NOT = { trait = shy_dragon }
						NOT = { has_character_flag = shadow_lands_dragon }
					}
					has_character_modifier = locked_in_dragonpit
				}				
			}
		}
		set_character_flag = desires_large_dragon
	}
	##Does character wait for inherited dragon?
	if = {
		limit = {
			has_character_flag = desires_large_dragon
			is_primary_heir = yes
			any_heir_title = {
				holder_scope = {
					any_friend = {
						trait = dragon
						martial = 90
					}
					age_diff = { who = ROOT years = 15 }
					current_heir = { character = PREVPREVPREV }					
				}
			}
		}
		set_character_flag = desires_heir_dragon
	}
	##Is the character content with a small dragon?
	if = {
		limit = {
			NOT = { has_character_flag = desires_large_dragon }
			OR = {
				trait = craven 
				trait = content
				trait = humble
				NOR = {
					trait = chosen_by_rhllor
					culture = high_valyrian
					dynasty = 496
					has_character_flag = demon_child_non_pagan
				}
			}			
			NOT = { trait = ambitious }
			NOT = { trait = proud }
		}
		set_character_flag = content_with_small_dragon
	}
}
calculate_trial_strength_effect = {
	clr_character_flag = poor_defence
	clr_character_flag = average_defence
	clr_character_flag = strong_defence
	random_list = {
		33 = { #poor defence
			set_character_flag = poor_defence
			
			modifier = { #crime is well known
				factor = 3
				prisoner = yes
				OR = {
					any_opinion_modifier_target = {
						ROOT = { just_execution_reason_PREV_trigger = yes }
					}
					host = {
						any_courtier = {
							ROOT = { just_execution_reason_PREV_trigger = yes }
						}
					}
					any_courtier = {
						ROOT = { just_execution_reason_PREV_trigger = yes }
					}
				}	
			}
			
			#trustworthiness
			modifier = {
				factor = 2
				check_variable = { which = "dishonorable" value = 9.9 }
			}
			modifier = {
				factor = 1.5
				OR = {  
					trait = kinslayer
					trait = bastard 
					trait = deserter 
					#trait = turncloak 
				}
			}
			
			modifier = {
				factor = 3
				trait = imbecile
			}
			modifier = {
				factor = 2
				is_dumb_trigger = yes
			}
			modifier = {
				factor = 2
				trait = rude
			}
			modifier = {
				factor = 2
				trait = shy
			}
			modifier = {
				factor = 2
				trait = stutter
			}
			modifier = {
				factor = 1.5
				trait = wroth
			}
			modifier = {
				factor = 1.5
				trait = craven
			}
			modifier = {
				factor = 1.25
				has_ugly_trait_trigger = yes
			}
			modifier = {
				factor = 1.25
				trait = dwarf
			}
			modifier = {
				factor = 1.5
				NOT = { diplomacy = 8 }
			}
			modifier = {
				factor = 1.5
				NOT = { diplomacy = 6 }
			}
			modifier = {
				factor = 2
				NOT = { diplomacy = 4 }
			}
			modifier = {
				factor = 2
				NOT = { diplomacy = 2 }
			}
			modifier = { #save those who dont belong in poor catagory, pushing to center
				factor = 0.5
				diplomacy = 12
			}
			modifier = {
				factor = 0.5
				diplomacy = 16
			}
			modifier = {
				factor = 0.5
				diplomacy = 20
			}
			modifier = { #reward for people familiar with the court
				factor = 0.75
				OR = {
					trait = amateurish_plotter
					trait = flamboyant_schemer
					trait = intricate_webweaver
					trait = elusive_shadow
					trait = naive_appeaser
					trait = underhanded_rogue
					trait = charismatic_negotiator
					trait = grey_eminence
				} 
			}
		}
		33 = {
			set_character_flag = average_defence
			modifier = {
				factor = 2
				trait = genius
			}
			modifier = {
				factor = 1.5
				is_smart_trigger = yes
			}
			modifier = {
				factor = 1.5
				trait = authoritative
			}
			modifier = {
				factor = 1.5
				trait = gregarious
			}
			modifier = {
				factor = 1.5
				trait = poet
			}
			modifier = {
				factor = 1.25
				trait = patient
			}
			modifier = {
				factor = 1.25
				trait = brave
			}
			modifier = {
				factor = 1.5
				diplomacy = 10
			}
			modifier = {
				factor = 2
				diplomacy = 12
			}
			modifier = {
				factor = 2
				diplomacy = 14
			}
			modifier = {
				factor = 1.5
				diplomacy = 16
			}
			modifier = {
				factor = 1.5
				diplomacy = 18
			}
			modifier = {
				factor = 1.5
				diplomacy = 20
			}
			modifier = {
				factor = 1.5
				diplomacy = 22
			}
			modifier = {
				factor = 1.5
				diplomacy = 24
			}
			modifier = {
				factor = 1.5
				diplomacy = 26
			}
			
			modifier = { #Push to good case
				factor = 0.5
				diplomacy = 18
			}
			modifier = {
				factor = 0.5
				diplomacy = 22
			}
			modifier = { # penalized for no court education
				factor = 0.75
				NOR = {
					trait = amateurish_plotter
					trait = flamboyant_schemer
					trait = intricate_webweaver
					trait = elusive_shadow
					trait = naive_appeaser
					trait = underhanded_rogue
					trait = charismatic_negotiator
					trait = grey_eminence
				}
			}
		}
		33 = {
			set_character_flag = strong_defence
			modifier = {
				factor = 2
				trait = genius
			}
			modifier = {
				factor = 1.5
				is_smart_trigger = yes
			}
			modifier = {
				factor = 1.5
				trait = authoritative
			}
			modifier = {
				factor = 1.5
				trait = gregarious
			}
			modifier = {
				factor = 1.5
				trait = poet
			}
			modifier = {
				factor = 1.25
				trait = patient
			}
			modifier = {
				factor = 1.25
				trait = brave
			}
			modifier = {
				factor = 1.25
				has_fair_trait_trigger = yes
			}
			
			modifier = {
				factor = 1.5
				diplomacy = 10
			}
			modifier = {
				factor = 2
				diplomacy = 12
			}
			modifier = {
				factor = 2
				diplomacy = 14
			}
			modifier = {
				factor = 1.5
				diplomacy = 16
			}
			modifier = {
				factor = 1.5
				diplomacy = 18
			}
			modifier = {
				factor = 1.5
				diplomacy = 20
			}
			modifier = {
				factor = 1.5
				diplomacy = 22
			}
			modifier = {
				factor = 1.5
				diplomacy = 24
			}
			modifier = {
				factor = 1.5
				diplomacy = 26
			}
			modifier = { ##if you have 28 base dip. You deserve a 100% strong case/defence
				factor = 50
				diplomacy = 28
			}
			modifier = { #keeping bads away, pushing to center
				factor = 0.5
				NOT = { diplomacy = 8 }
			}
			modifier = {
				factor = 0.5
				NOT = { diplomacy = 4 }
			}
			modifier = { # penalized for no court education
				factor = 0.75 
				NOR = {
					trait = amateurish_plotter
					trait = flamboyant_schemer
					trait = intricate_webweaver
					trait = elusive_shadow
					trait = naive_appeaser
					trait = underhanded_rogue
					trait = charismatic_negotiator
					trait = grey_eminence
				} 
			}
		}
	}
}
war_lost_lose_authority_effect = {
	any_demesne_title = { # All titles
		limit = {
			higher_tier_than = DUKE
		}				
		if = { #sanori lose vassals as tributaries
			limit = { 
				title = k_sarnor
				has_law = centralization_0 
				holder_scope = { 
					tier = KING 
					is_nomadic = no
				}
			}
			holder_scope = { character_event = { id = essos.183 tooltip = TOOLTIPessos.183 } }
		}
		if = {
			limit = { has_law = centralization_1 }
			add_law_w_cooldown = centralization_0
		}
		if = {
			limit = { has_law = centralization_2 }
			add_law_w_cooldown = centralization_1
		}
		if = {
			limit = { has_law = centralization_3 }
			add_law_w_cooldown = centralization_2
		}
		if = {
			limit = { has_law = centralization_4 }
			add_law_w_cooldown = centralization_3
		}
	}
	if = {
		limit = { #High Septon raises Faith Authority
			ROOT = {
				religion = the_seven
				has_landed_title = k_the_most_devout
			}
		}
		any_demesne_title = { # All titles
			limit = {
				higher_tier_than = DUKE
				OR = {
					tier = EMPEROR
					NOT = { check_variable = { which = "de_facto_empire" value = 1 } }
				}
				NOT = { has_law = investiture_law_3 }
			}
			if = {
				limit = { has_law = investiture_law_2 }
				add_law_w_cooldown = investiture_law_3
			}
			if = {
				limit = { 
					OR = {
						has_law = investiture_law_1 
						has_law = investiture_law_0
					}	
				}
				add_law_w_cooldown = investiture_law_2
			}
		}
	}
}
excommunication_chance_effect = {
	if = { #excommunication chance
		limit = {
			NOT = { trait = excommunicated }
			religion = the_seven
			rightful_religious_head_scope = { 
				is_alive = yes
				NOT = { opinion = { who = ROOT value = 25 } } 
			}
		}
		random = {
			chance = 20
			
			modifier = {
				factor = 1.5
				rightful_religious_head_scope = { trait = zealous }
			}
			modifier = {
				factor = 0.66
				rightful_religious_head_scope = { trait = cynical }
			}
			modifier = {
				factor = 1.33
				rightful_religious_head_scope = { trait = just }
			}
			modifier = {
				factor = 0.75
				rightful_religious_head_scope = { trait = arbitrary }
			}
			modifier = {
				factor = 1.33
				rightful_religious_head_scope = { trait = wroth }
			}
			modifier = {
				factor = 0.75
				rightful_religious_head_scope = { trait = patient }
			}
			
			modifier = {
				factor = 0.25
				NOT = {
					crownlaw_title = {
						OR = {
							has_law = investiture_law_2
							has_law = investiture_law_3
						}
					}
				}
			}				
			modifier = {
				factor = 2
				trait = kinslayer
			}	
			modifier = {
				factor = 1.5
				OR = {
					has_character_modifier = abomination_of_incest
					has_character_modifier = grandchild_of_incest	
				}	
			}						
			modifier = {
				factor = 1.25
				rightful_religious_head_scope = { NOT = { opinion = { who = ROOT value = 0 } } }
			}
			modifier = {
				factor = 1.25
				rightful_religious_head_scope = { NOT = { opinion = { who = ROOT value = -24 } } }
			}
			modifier = {
				factor = 1.25
				rightful_religious_head_scope = { NOT = { opinion = { who = ROOT value = -49 } } }
			}
			modifier = {
				factor = 1.25
				rightful_religious_head_scope = { NOT = { opinion = { who = ROOT value = -74 } } }
			}
			modifier = {
				factor = 1.25
				rightful_religious_head_scope = { NOT = { opinion = { who = ROOT value = -99 } } }
			}	
			modifier = {
				factor = 0.75
				piety = 400
			}			
			modifier = {
				factor = 0.75
				piety = 200
			}
			modifier = {
				factor = 0.75
				piety = 100
			}		
			modifier = {
				factor = 2.0
				NOT = { piety = 0 }
			}
			modifier = {
				factor = 2.0
				NOT = { piety = -100 }
			}
			modifier = {
				factor = 2.0
				NOT = { piety = -200 }
			}
			modifier = {
				factor = 1.25
				trait = dishonorable1
			}
			modifier = {
				factor = 1.25
				trait = dishonorable3
			}
			modifier = {
				factor = 1.75
				trait = dishonorable5
			}
			modifier = {
				factor = 2
				trait = dishonorable7
			}
			modifier = {
				factor = 2
				trait = dishonorable9
			}
			character_event = { id = religious.30 days = 10 }
		}
	}
}
excommunicate_effect = {
	add_trait = excommunicated
	hidden_tooltip = {
		save_event_target_as = excommunicated_character
		k_the_most_devout = {
			holder_scope = {
				reverse_opinion = { who = PREVPREV modifier = opinion_excommunicated_me months = 120 }
			}
		}
		any_player = {
			limit = {
				NOT = { character = PREV }
				OR = {
					dynasty = PREV
					is_close_relative = PREV
					is_lover = PREV
					is_friend = PREV
					is_rival = PREV
					is_liege_or_above = PREV
					is_liege_of = PREV
					same_liege = PREV
					AND = {
						religion = the_seven
						PREV = { higher_tier_than = DUKE }
					}
				}
			}
			character_event = { id = religious.31 }
		}
	}
	if = {
		limit = { ai = no }
		rightful_religious_head_scope = {
			event_target:excommunicated_character = {
				chronicle = {
					entry = CHRONICLE_EXCOMMUNICATED
					portrait = [Prev.GetID]
				}
			}
		}			
	}
}
mega_war_rebel_leader_resolution_effect = {
	if = {
		limit = { 
			ROOT_FROM = { 
				tier = EMPEROR
				trait = civil_war	
			}
			ROOT = { 
				trait = rebel_leader 
				NAND = {
					OR = {
						tier = EMPEROR
						has_character_flag = independant
					}	
					NOR = {
						any_claim = { holder_scope = { character = ROOT_FROM } }
						has_opinion_modifier = { who = ROOT_FROM modifier = opinion_de_facto_liege }
						has_opinion_modifier = { who = ROOT_FROM modifier = opinion_vengeance }
						is_liege_or_above = ROOT_FROM	
						primary_title = { has_title_flag = indep_war }
					}
				}
			}			
		}
		ROOT_FROM = { 
			any_courtier = { 
				set_character_flag = former_royal_courtier 
				diplomatic_immunity = yes
				character_event = { id = trial.500 days = 4 } #diplomatic immunity failsafe
			} 
		}
		any_defender = {
			diplomatic_immunity = yes
			character_event = { id = mega_wars.86 days = 1 } #rebel leader resolution
			character_event = { id = trial.500 days = 4 } #diplomatic immunity failsafe
		}		
		ROOT = { character_event = { id = mega_wars.8698 days = 1 } } #find traitorous landless characters
	}
}
mega_war_emperor_rebels_resolution_effect = {
	if = {
		limit = { 
			ROOT_FROM = { tier = EMPEROR }
		}
		any_attacker = {
			diplomatic_immunity = yes
			character_event = { id = mega_wars.74 days = 1 } #king can revoke titles of LPs and non direct vassals
			character_event = { id = trial.500 days = 4 } #diplomatic immunity failsafe
		}
		ROOT_FROM = { character_event = { id = mega_wars.7498 days = 1 } } #find traitorous landless characters
	}
}
FROM_joins_ROOTS_factions_effect = {
	FROM = {
		leave_faction = faction_succ_seniority
		leave_faction = faction_succ_primogeniture
		leave_faction = faction_succ_feudal_elective
		leave_faction = faction_independence
		leave_faction = faction_claimant
		leave_faction = faction_depose_liege
		leave_faction = faction_republic
		leave_faction = faction_increase_council_power
		leave_faction = faction_liege_loyalist
		leave_faction = faction_crown_loyalist
	}
	if = {
		limit = { ROOT = { leads_faction = faction_succ_seniority } }
		FROM = {
			join_faction = {
				faction = faction_succ_seniority 
				faction_leader = ROOT
			}
		}
	}	
	if = {
		limit = { ROOT = { leads_faction = faction_succ_primogeniture } }
		FROM = {
			join_faction = {
				faction = faction_succ_primogeniture 
				faction_leader = ROOT
			}
		}
	}
	if = {
		limit = { ROOT = { leads_faction = faction_succ_feudal_elective } }
		FROM = {
			join_faction = {
				faction = faction_succ_feudal_elective
				faction_leader = ROOT
			}
		}
	}
	if = {
		limit = { ROOT = { leads_faction = faction_lower_crown_authority } }
		FROM = {
			join_faction = {
				faction = faction_lower_crown_authority
				faction_leader = ROOT
			}
		}
	}
	if = {
		limit = { ROOT = { leads_faction = faction_independence } }
		FROM = {
			join_faction = {
				faction = faction_independence
				faction_leader = ROOT
			}
		}
	}
	if = {
		limit = { ROOT = { leads_faction = faction_claimant } }
		FROM = {
			join_faction = {
				faction = faction_claimant
				faction_leader = ROOT
			}
		}
	}
	if = {
		limit = { ROOT = { leads_faction = faction_depose_liege } }
		FROM = {
			join_faction = {
				faction = faction_depose_liege
				faction_leader = ROOT
			}
		}
	}
	if = {
		limit = { ROOT = { leads_faction = faction_republic } }
		FROM = {
			join_faction = {
				faction = faction_republic
				faction_leader = ROOT
			}
		}
	}
	if = {
		limit = { ROOT = { leads_faction = faction_increase_council_power } }
		FROM = {
			join_faction = {
				faction = faction_increase_council_power
				faction_leader = ROOT
			}
		}
	}
	if = {
		limit = { ROOT = { leads_faction = faction_liege_loyalist } }
		FROM = {
			join_faction = {
				faction = faction_liege_loyalist
				faction_leader = ROOT
			}
		}
	}
	if = {
		limit = { ROOT = { leads_faction = faction_crown_loyalist } }
		FROM = {
			join_faction = {
				faction = faction_crown_loyalist
				faction_leader = ROOT
			}
		}
	}
}
mega_war_merchant_republic_check_effect = {
	#Merchant republic check!
	if = { #Change to republic/oligarchy if neccessary
		limit = { 
			is_merchant_republic = yes 
			ROOT = { is_merchant_republic = yes }
		}
		custom_tooltip = {
			text = TOOLTIPmegawarNOBLEOLIGARCHY
			hidden_tooltip = {
				ROOT = {
					any_vassal = {
						limit = { is_patrician = yes }
						family_palace = { destroy_settlement = THIS }
						if = {
							limit = { NOT = { capital_holding = { holding_type = castle } } }
							random_demesne_title = {
								limit = { 
									tier = BARON
									holding_type = castle
									location = { is_capital = yes }
								}
								province_capital = yes
							}
							if = {
								limit = { NOT = { capital_holding = { holding_type = castle } } }
								random_vassal = {
									limit = { 
										tier = BARON
										capital_holding = {
											holding_type = castle
											location = { is_capital = yes }
										}	
									}
									capital_holding = { 
										gain_title = PREVPREV
										province_capital = yes
									}	
								}
							}
						}	
						set_government_type = feudal_government
						primary_title = { succession = seniority }
					}
					family_palace = { destroy_settlement = THIS }	
					random_list = {
						50 = {
							trigger = { 
								ai = yes 
								NOT = { any_vassal = { ai = no } }
							}
							set_government_type = republic_government
							primary_title = { succession = open_elective }
						}
						50 = {
							modifier = {
								factor = 0.01
								NOT = { higher_tier_than = DUKE }
							}
							primary_title = { 
								add_law = republic_law_oligarchy
								if = {
									limit = { has_dlc = "Zeus" }
									add_law = law_voting_power_1
									add_law = diplomacy_voting_power_1
									add_law = titles_voting_power_1
									add_law = justice_voting_power_1
								}
								succession = {
									base_type = feudal_elective
									voting_rules = noble_oligarchy_elective
								}
							}
							set_government_type = noble_oligarchy				
						}
					}	
				}
			}
		}	
	}
	###
}
stillbirth_chance_effect = {
	if = {
		limit = {
			NOT = { has_character_flag = flag_stillbirth }
			NOT = { health = 10 }
		}
		random = {
			chance = 2
			modifier = {
				factor = 1.98
				NOT = { health = 9 }
			}
			modifier = {
				factor = 1.49
				NOT = { health = 8 }
			}
			modifier = {
				factor = 1.32
				NOT = { health = 7 }
			}
			modifier = {
				factor = 1.24
				NOT = { health = 6 }
			}
			modifier = {
				factor = 1.19
				NOT = { health = 5 }
			}
			modifier = {
				factor = 1.16
				NOT = { health = 4 }
			}
			modifier = {
				factor = 1.13
				NOT = { health = 3 }
			}
			modifier = {
				factor = 1.11
				NOT = { health = 2 }
			}
			modifier = {
				factor = 1.10
				NOT = { health = 1 }
			}
			set_character_flag = flag_stillbirth
		}
	}
}	
seek_treatment_from_physician_effect = {
	if = { #Full events only for player or high tier (optimisation)
		limit = {
			OR = {
				ai = no
				higher_tier_than = DUKE				
				liege = {					
					OR = {
						ai = no
						higher_tier_than = DUKE
					}
					OR = {
						is_married = PREV
						is_close_relative = PREV
						is_lover = PREV
					}
				}
				AND = {
					NOT = { has_character_flag = seclusion_treatment_approved }
					has_character_modifier = in_seclusion
					has_epidemic_disease_trigger = yes
					host = { NOT = { character = PREV } }
				}
			}
		}
		if = {
			limit = {
				is_playable = yes
				is_councillor = no
				prisoner = no
			}
			job_physician = {
				character_event = { id = RIP.11031 days = 1 }
			}
		}
		else = {		
			host = {
				job_physician = {
					character_event = { id = RIP.11031 days = 1 }
				}
			}
		}	
	}
	else = { #estimate treatment
		if = {
			limit = {
				FROM = {
					OR = {
						trait = cough
						trait = fever
						trait = diarrhea
						trait = vomiting
						trait = chest_pain
						trait = cramps
						trait = rash
						trait = headache
						trait = abdominal_pain
						trait = fatigue
						trait = malaise
					}
				}
			}
			random_list = { #Good
				50 = {
					modifier = {
						factor = 1.5
						is_strong_trigger = yes
					}
					modifier = {
						factor = 0.66
						is_weak_trigger = yes
					}
					modifier = {
						factor = 1.5
						host = {
							job_physician = {
								learning = 24
							}	
						}
					}
					modifier = {
						factor = 1.5
						host = {
							job_physician = {
								learning = 19
							}	
						}
					}
					modifier = {
						factor = 1.5
						host = {
							job_physician = {
								learning = 15
							}	
						}
					}
					modifier = {
						factor = 0.66
						host = {
							job_physician = {
								NOT = { learning = 12 }
							}	
						}
					}
					modifier = {
						factor = 0.66
						host = {
							job_physician = {
								NOT = { learning = 9 }
							}	
						}
					}
					random_list = {
						100 = {
							if = {
								limit = {
									NOR = {
										trait = cancer
										trait = gout
										trait = syphilitic
									}
								}
								add_character_modifier = {
									name = symptom_treatment_4
									duration = 730
								}
							}
							else = {
								add_character_modifier = {
									name = symptom_treatment_4
									duration = 1825
								}
							}
						}
						100 = {
							if = {
								limit = {
									NOR = {
										trait = cancer
										trait = gout
										trait = syphilitic
									}
								}
								add_character_modifier = {
									name = symptom_treatment_3
									duration = 730
								}
							}
							else = {
								add_character_modifier = {
									name = symptom_treatment_3
									duration = 1825
								}
							}
						}
						100 = {
							if = {
								limit = {
									NOR = {
										trait = cancer
										trait = gout
										trait = syphilitic
									}
								}
								add_character_modifier = {
									name = symptom_treatment_2
									duration = 730
								}
							}
							else = {
								add_character_modifier = {
									name = symptom_treatment_2
									duration = 1825
								}
							}
						}
						100 = {
							if = {
								limit = {
									NOR = {
										trait = cancer
										trait = gout
										trait = syphilitic
									}
								}
								add_character_modifier = {
									name = symptom_treatment_1
									duration = 730
								}
							}
							else = {
								add_character_modifier = {
									name = symptom_treatment_1
									duration = 1825
								}
							}
						}
					}	
				}
				50 = { #Bad
				}
			}
		}
		else_if = {
			limit = {
				character_disease_trigger = yes
			}
			remove_character_modifier = symptom_treatment_1
			remove_character_modifier = symptom_treatment_2
			remove_character_modifier = symptom_treatment_3
			remove_character_modifier = symptom_treatment_4
			random_list = {
				60 = { #Good
					modifier = {
						factor = 2.66
						OR = {
							is_adult = no
							trait = craven
							trait = paranoid
						}
					}
					modifier = {
						factor = 1.5
						is_strong_trigger = yes
					}
					modifier = {
						factor = 0.66
						is_weak_trigger = yes
					}
					modifier = {
						factor = 1.5
						host = {
							job_physician = {
								learning = 24
							}	
						}
					}
					modifier = {
						factor = 1.5
						host = {
							job_physician = {
								learning = 19
							}	
						}
					}
					modifier = {
						factor = 1.5
						host = {
							job_physician = {
								learning = 15
							}	
						}
					}
					modifier = {
						factor = 0.66
						host = {
							job_physician = {
								NOT = { learning = 12 }
							}	
						}
					}
					modifier = {
						factor = 0.66
						host = {
							job_physician = {
								NOT = { learning = 9 }
							}	
						}
					}
					if = {
						limit = {
							NOR = {
								is_adult = no
								trait = craven
								trait = paranoid
							}
						}
						if = {
							limit = {
								NOR = {
									trait = cancer
									trait = gout
									trait = syphilitic
								}
							}
							add_character_modifier = {
								name = successful_treatment_2
								duration = 730
							}
						}
						else = {
							add_character_modifier = {
								name = successful_treatment_2
								duration = 1825
							}
						}
					}
					else = {
						if = {
							limit = {
								NOR = {
									trait = cancer
									trait = gout
									trait = syphilitic
								}
							}
							add_character_modifier = {
								name = successful_treatment_1
								duration = 730
							}
						}
						else = {
							add_character_modifier = {
								name = successful_treatment_1
								duration = 1825
							}
						}
					}
				}
				40 = {
					if = {
						limit = {
							NOR = {
								is_adult = no
								trait = craven
								trait = paranoid
							}
						}
						add_character_modifier = {
							name = failed_treatment_1
							duration = 365
						}
					}	
				}
			}
		}
	}
}
abdicate_effect = {
	hidden_tooltip = { #Universal on death/abdication event
		if = {
			limit = { any_artifact = { has_artifact_flag = valyrian_steel } }
			set_character_flag = do_not_inherit_sword
		}
		set_character_flag = abdication
		character_event = { id = 45341 } 
		clr_character_flag = abdication
		clr_character_flag = do_not_inherit_sword
		if = {
			limit = { is_patrician = no }
			current_heir = { save_event_target_as = wealth_heir }
		}
		else = {
			family_palace = { current_heir = { save_event_target_as = wealth_heir } }
		}
		transfer_scaled_wealth = { to = event_target:wealth_heir value = all }
		#Also pass on artifacts
		any_artifact = {					
			limit = {	
				OR = {
					NOR = { 
						has_artifact_flag = combat_weapon 
						has_artifact_flag = armor
					}
					quality = 3
				}
				NOT = { has_artifact_flag = prosthetic }
				NOT = { has_artifact_flag = valyrian_steel }
				NOT = { has_artifact_flag = valyrian_armour }
			}
			transfer_artifact = {				
				from = PREV			
				to = event_target:wealth_heir
			}
		}
		
		add_character_modifier = { name = deposed_AGOT duration = 3650 }
		clr_character_flag = depose_liege_target
	}
	abdicate = yes
}
inherit_debt_effect = { #give any debts to event target debt_inheritor. Uses generic flags so they can be stored in titles and provinces
	if = { #If unlanded, bank takes cash and writes off rest
		limit = { 
			is_ruler = no
			check_variable = { which = loan_amount value = 1 }
			event_target:debt_inheritor = { is_ruler = no }
		}
		if = {
			limit = { has_flag = loan_taken }
			calculate_loan_repayable_effect = yes
			save_event_target_as = landless_debtor
			if = { #Can Pay
				limit = { wealth = loan_total_repayable }
				wealth = loan_total_repayable_negative
				persistent_event_target:loan_bank = {
					event_target:landless_debtor = {
						set_variable = { which = cash_reserve which = loan_total_repayable }
						set_variable = { which = outstanding_loans which = loan_amount }		
						multiply_variable = { which = outstanding_loans value = -1 }
						set_variable = { which = loan_profits which = loan_interest_payable }	
					}
					change_variable = { which = cash_reserve which = PREV }
					change_variable = { which = outstanding_loans which = PREV }
					change_variable = { which = loan_profits which = PREV }
				}
			}
			else = { #Cannot pay
				persistent_event_target:loan_bank = { #Add losses
					event_target:landless_debtor = {
						set_variable = { which = outstanding_loans which = loan_amount }		
						multiply_variable = { which = outstanding_loans value = -1 }		
						set_variable = { which = loan_losses which = loan_amount }
					}
					change_variable = { which = outstanding_loans which = PREV }
					change_variable = { which = loan_losses which = PREV }
				}
				if = {
					limit = { wealth = 1 }				
					persistent_event_target:loan_bank = {
						event_target:landless_debtor = { 
							export_to_variable = { which = loan_recovered value = wealth who = THIS }
							set_variable = { which = cash_reserve which = loan_recovered } 
							
							set_variable = { which = loan_losses which = loan_recovered } 
							multiply_variable = { which = loan_losses value = -1 } 
							set_variable = { which = loan_recovered value = 0 }
						}
						change_variable = { which = cash_reserve which = PREV }
						change_variable = { which = loan_losses which = PREV }
					}			
					clear_wealth = yes
				}		
			}
		}	
		clear_loan_flags_and_variables_effect = yes
	}
	if = { #Check debt inheritor is not already in debt to a different bank
		limit = { 
			check_variable = { which = loan_amount value = 1 }
			event_target:debt_inheritor = { 
				check_variable = { which = loan_amount value = 1 } 
				age = 0 #must be a character
			}
			OR = {
				AND = {
					has_flag = loan_bank_minor 
					event_target:debt_inheritor = { NOT = { has_flag = loan_bank_minor } }
				}
				persistent_event_target:loan_bank = {
					event_target:debt_inheritor = { 
						persistent_event_target:loan_bank = {
							NOT = { is_society = PREVPREV }
						}
					}
				}
			}	
		}
		#If they are, trigger a special 2nd loan event	
		if = {
			limit = { has_flag = loan_bank_minor }
			event_target:debt_inheritor = { set_flag = B_loan_bank_minor }
			clr_flag = loan_bank_minor
		}
		else = {
			persistent_event_target:loan_bank = {
				set_flag = b_loan_@event_target:debt_inheritor
			}
		}
		if = { 
			limit = { 
				OR = {
					has_flag = loan_default 
					has_flag = offended_moneylenders 
				}	
			} 
			event_target:debt_inheritor = { set_flag = B_loan_default }
		}
		set_variable = { which = B_loan_amount which = loan_amount }
		set_variable = { which = B_loan_interest which = loan_interest }
		event_target:debt_inheritor = { 
			set_variable = { which = B_loan_amount which = PREV } 
			set_variable = { which = B_loan_interest which = PREV } 
			character_event = { id = 38072 }
		}
		clr_flag = loan_insurer
		set_variable = { which = B_loan_amount value = 0 }
		set_variable = { which = B_loan_interest value = 0 }
		clear_loan_flags_and_variables_effect = yes
	}
	if = {
		limit = { has_flag = loan_bank_minor }
		event_target:debt_inheritor = { 
			if = {
				limit = { NOT = { persistent_event_target:loan_bank = { always = yes } } }
				set_flag = loan_bank_minor
			}	
		}
		clr_flag = loan_bank_minor
	}
	
	if = { #Bank Loan
		limit = { has_flag = loan_taken } 
		event_target:debt_inheritor = { 
			change_variable = { which = loan_amount which = PREV }
			if = {
				limit = { NOT = { check_variable = { which = loan_interest value = 0.01 } } }
				set_variable = { which = loan_interest which = PREV }
			}
			if = {
				limit = { NOT = { has_character_modifier = loan_timer  } }
				add_character_modifier = { name = "loan_timer" duration = 30 } #give time for event 38001 to trigger
			}
			set_flag = loan_taken
			character_event = { id = 38001 days = 7 }
			if = { #this is calculated for the player so they can repay instantly
				limit = { 
					ai = no
				}
				calculate_loan_repayable_effect = yes				
			}
		}
		persistent_event_target:loan_bank = {
			event_target:debt_inheritor = { 
				if = {
					limit = { NOT = { persistent_event_target:loan_bank = { always = yes } } }
					clr_character_flag = loan_bank_minor
					save_persistent_event_target = { name = loan_bank scope = PREV }
				}
			}
		}
		clr_flag = loan_taken
	}
	else_if = { #Loan dishonoured (Only if loan is not somehow active)
		limit = { has_flag = offended_moneylenders } 
		event_target:debt_inheritor = {
			change_variable = { which = loan_amount which = PREV }
			if = {
				limit = { NOT = { check_variable = { which = loan_interest value = 0.01 } } }
				set_variable = { which = loan_interest which = PREV }
			}
			set_flag = offended_moneylenders
			character_event = { id = 38071 days = 2 }
		}
		persistent_event_target:loan_bank = {
			event_target:debt_inheritor = { 
				if = {
					limit = { NOT = { persistent_event_target:loan_bank = { always = yes } } }
					save_persistent_event_target = { name = loan_bank scope = PREV }
				}
			}
		}
		clr_flag = offended_moneylenders
	}
	if = {
		limit = { #loan default
			has_flag = loan_default
		} 
		event_target:debt_inheritor = { 
			set_flag = loan_default
		}
		clr_flag = loan_default
	}	
	
	#Loan Insurance
	any_opinion_modifier_target = {
		limit = {
			has_flag = loan_insurer 
			reverse_has_opinion_modifier = { who = PREV modifier = opinion_debt_insurer }
			persistent_event_target:loan_insurance_target = { character = PREVPREV }
		}
		reverse_opinion = { who = event_target:debt_inheritor modifier = opinion_debt_insurer }
		clear_persistent_event_target = loan_insurance_target
		save_persistent_event_target = { name = loan_insurance_target scope = PREV }
	}	
	if = {
		limit = {
			has_flag = loan_insurer 
			event_target:debt_inheritor = { NOT = { has_flag = loan_insurer } }
		} 
		persistent_event_target:loan_insurance_target = {
			opinion = { who = event_target:debt_inheritor modifier = opinion_debt_insurer }
			remove_opinion = { who = PREV modifier = opinion_debt_insurer }
			event_target:debt_inheritor = { save_persistent_event_target = { name = loan_insurance_target scope = PREV } }
		}
		event_target:debt_inheritor = {
			set_flag = loan_insurer
		}
		clr_flag = loan_insurer
		clear_persistent_event_target = loan_insurance_target
	}
	clear_persistent_event_target = loan_bank
	set_variable = { which = loan_amount value = 0 }
	
	if = {
		limit = { #Given personal loan
			has_flag = given_personal_loan
			persistent_event_target:loan_title = {
				holder_scope = {
					NOT = { character = event_target:debt_inheritor }
					NOT = { has_flag = given_personal_loan }	
				}
			}
		} 
		if = {
			limit = {
				has_flag = liege_loan_75
			}
			event_target:debt_inheritor = { set_flag = liege_loan_75 }
		}
		if = {
			limit = {
				has_flag = liege_loan_150
			}
			event_target:debt_inheritor = { set_flag = liege_loan_150 }
		}
		if = {
			limit = {
				has_flag = liege_loan_300
			}
			event_target:debt_inheritor = { set_flag = liege_loan_300 }
		}
		if = {
			limit = {
				has_flag = liege_loan_500
			}
			event_target:debt_inheritor = { set_flag = liege_loan_500 }
		}
		persistent_event_target:loan_title = {
			holder_scope = {
				event_target:debt_inheritor = {
					opinion = {
						who = PREV
						modifier = opinion_liege_loan
						years = 100
					}
					set_flag = given_personal_loan
					clear_persistent_event_target = loan_title
					save_persistent_event_target = { name = loan_title scope = PREVPREV }
				}
				reverse_remove_opinion = {
					who = PREV
					modifier = opinion_liege_loan
				}
			}	
		}	
		clr_flag = given_personal_loan
		clear_persistent_event_target = loan_title
		clr_flag = liege_loan_75	
		clr_flag = liege_loan_150
		clr_flag = liege_loan_300
		clr_flag = liege_loan_500
	}
	#Taken Loan from vassal
	if = {
		limit = { is_ruler = yes }
		any_vassal = {
			limit = {
				has_opinion_modifier = {
					who = PREV
					modifier = opinion_liege_loan
				}
				NOT = { character = event_target:debt_inheritor }
			}
			opinion = {
				who = event_target:debt_inheritor
				modifier = opinion_liege_loan
				years = 100
			}
			remove_opinion = {
				who = PREV
				modifier = opinion_liege_loan
			}
		}	
	}	
	#Killed by bank envoy, envoy takes heir as new target
	if = {
		limit = { has_character_flag = killed_by_bank_envoy }
		event_target:debt_inheritor = {
			set_character_flag = predeccesor_killed_by_bank_envoy
			if = {
				limit = { ROOT_FROM = { has_quest = quest_bank_recover_debt } }
				ROOT_FROM = { clr_quest = quest_bank_recover_debt }
				set_quest_target = { id = quest_bank_recover_debt holder = ROOT_FROM }
			}	
			else = {
				ROOT_FROM = { save_event_target_as = minor_banker_envoy_target }
			}
		}
		clr_character_flag = killed_by_bank_envoy
	}
}
make_province_ruin_effect = {
	save_event_target_as = province_to_ruinise	
	if = {
		limit = { traditional_nomad_territory_trigger = no }
		set_province_flag = ruined_province
	}	
	if = {
		limit = { has_province_modifier = partial_colony }
		remove_province_modifier = partial_colony
	}	
	if = {
		limit = { has_province_modifier = colony }
		remove_province_modifier = colony
	}
	clr_province_flag = colony_province
	clr_province_flag = dredged
	clr_province_flag = roads
	clr_province_flag = scrolls_found
	clr_province_flag = vault_found
	clr_province_flag = restored_amphitheatre
	if = {
		limit = { has_province_modifier = depopulated_3 }
		remove_province_modifier = depopulated_3
	}
	clr_province_flag = recent_depopulation_3
	if = {
		limit = { num_of_settlements = 7 }
		set_province_flag = ca_colony_6
	}
	else_if = {
		limit = {
			OR = {
				num_of_settlements = 6
				AND = {
					num_of_settlements = 4
					any_province_holding = { is_richer_holding = yes }
				}
			}
		}
		set_province_flag = ca_colony_5
	}
	else_if = {
		limit = {
			OR = {
				num_of_settlements = 5
				AND = {
					num_of_settlements = 3
					any_province_holding = { is_rich_holding = yes }
				}
			}
		}
		set_province_flag = ca_colony_4
	}
	else_if = {
		limit = {
			OR = {
				num_of_settlements = 4
				AND = {
					num_of_settlements = 2
					any_province_holding = { is_richer_holding = yes }
				}
			}
		}
		set_province_flag = ca_colony_3
	}
	else_if = {
		limit = {
			OR = {
				num_of_settlements = 3
				AND = {
					num_of_settlements = 2
					any_province_holding = { is_rich_holding = yes }
				}
			}
		}
		set_province_flag = ca_colony_2
	}
	else = { set_province_flag = ca_colony_1 }
	if = {
		limit = { has_province_flag = ruined_province }
		add_province_modifier = {
			name = ruined_province
			duration = -1
		}
	}
	hidden_tooltip = {
		county = {
			set_variable = { which = "de_facto_kingdom" value = 0 }
			set_variable = { which = "de_facto_empire" value = 0 }
		}
	}	
	if = { #Ruined province is converted to a ruin
		limit = { has_province_flag = ruined_province }
		create_character = {
			name = ""
			religion="ruin_rel"
			culture="ruin"	
			dynasty=none
			attributes = {
				martial = 0
				diplomacy = 0
				intrigue = 0
				stewardship = 0
				learning = 0
			}
			trait = ruin
		}
		new_character = {
			event_target:province_to_ruinise	 = { county = { gain_title = PREVPREV } }
			set_defacto_liege = THIS
			set_character_flag = new_ruin
			character_event = { id = unoccupied.101 }
		}
	}
	if = { #Nomad lands revert back to nomads
		limit = { 
			traditional_nomad_territory_trigger = yes
			NOT = { has_province_flag = ruined_province }					
		}	
		#Find new nomadic owner
		FROM = { #native revolter
			if = { 
				limit = { has_character_flag = native_nomad_usurper }
				event_target:province_to_ruinise = { 
					county = { usurp_title = ROOT_FROM } 
					set_province_flag = nomad_owner_found
				}
				set_defacto_liege = THIS # Become independent	
				primary_title = {
					set_title_nomad = { title = THIS status = yes }
				}
				set_government_type = nomadic_government
				population = 1500
				manpower = 750
				clr_character_flag = native_nomad_usurper
				save_event_target_as = new_nomad_owner
			}										
		}	
		if = {
			limit = { 
				NOT = { has_province_flag = nomad_owner_found }
				FROM = { is_nomadic = yes }
			}
			county = { gain_title = ROOT_FROM } 
			set_province_flag = nomad_owner_found
			ROOT_FROM = { save_event_target_as = new_nomad_owner }
		}
		if = { #Neigbouring nomad
			limit = { NOT = { has_province_flag = nomad_owner_found } }
			random_neighbor_province = {
				limit = { owner = { is_nomadic = yes } }
				owner = { 
					event_target:province_to_ruinise = { 
						county = { gain_title = PREVPREV } 
						set_province_flag = nomad_owner_found
					} 
					save_event_target_as = new_nomad_owner
				}
			}
		}				
		if = { #Create new nomad
			limit = { NOT = { has_province_flag = nomad_owner_found } }
			owner = {
				create_random_soldier = {
					random_traits = yes
					culture = event_target:province_to_ruinise
					religion = event_target:province_to_ruinise
					dynasty = random
					is_female = no
				}
				new_character = {
					random_list = {
						40 = { add_trait = trained_warrior }
						50 = { add_trait = skilled_warrior }
						10 = { add_trait = master_warrior }
					}
					prestige = 200 # Initial prestige boost
					event_target:province_to_ruinise = { county = { gain_title = PREVPREV } }
					set_defacto_liege = THIS # Become independent
					primary_title = {
						set_title_nomad = { title = THIS status = yes }
					}
					set_government_type = nomadic_government
					population = 1500
					manpower = 750
					save_event_target_as = new_nomad_owner
				}
			}	
		}
		clr_province_flag = nomad_owner_found
		FROM = { clr_character_flag = native_nomad_usurper }
		any_province_holding = { #destroy all temples
			limit = { 
				holding_type = temple
				has_holder = yes
			}
			destroy_settlement = THIS
		}
		if = { #make sure there is space for new nomad holding
			limit = { NOT = { num_of_empty_holdings = 1 } }
			random_province_holding = {
				limit = {
					is_capital = no
					has_holder = yes
					NOT = { base_value_2_trigger = yes }
				}
				destroy_settlement = THIS
			}
			if = {
				limit = { NOT = { num_of_empty_holdings = 1 } }
				random_province_holding = {
					limit = {
						is_capital = no
						has_holder = yes
						NOT = { base_value_3_trigger = yes }
					}
					destroy_settlement = THIS
				}
			}
			if = {
				limit = { NOT = { num_of_empty_holdings = 1 } }
				random_province_holding = {
					limit = {
						is_capital = no
						has_holder = yes
						NOT = { base_value_5_trigger = yes }
					}
					destroy_settlement = THIS
				}
			}
			if = {
				limit = { NOT = { num_of_empty_holdings = 1 } }
				random_province_holding = {
					limit = { 
						is_capital = no 
						has_holder = yes
					}
					destroy_settlement = THIS
				}
			}
		}
		if = {
			limit = { NOT = { has_province_flag = nomad_province_already_has_owner } }	
			#Create new nomad holding if new nomad				
			if = { 
				limit = { 
					is_capital = yes
					NOT = { any_province_holding = { holding_type = nomad has_holder = yes } } 
				}
				build_holding = {
				   type = nomad
				   holder = event_target:new_nomad_owner
				}				
			}
			random_province_holding = {
				limit = { 
					holding_type = nomad
					has_holder = yes
				}
				make_capital_holding = yes
			}	
		}
		else = {
			capital_holding = { revoke_capital_holding = yes }
			clr_province_flag = nomad_province_already_has_owner
		}
		#Destroy all small settlements and make sure there is at least one empty holding
		any_province_holding = {
			limit = { 
				is_capital = no
				has_holder = yes
				NOT = { base_value_2_trigger = yes }					
			}
			destroy_settlement = THIS
		}
		if = {
			limit = { NOT = { num_of_empty_holdings = 1 } }
			random_province_holding = {
				limit = {
					is_capital = no
					has_holder = yes
					NOT = { base_value_3_trigger = yes }
				}
				destroy_settlement = THIS
			}
			if = {
				limit = { NOT = { num_of_empty_holdings = 1 } }
				random_province_holding = {
					limit = {
						is_capital = no
						has_holder = yes
						NOT = { base_value_5_trigger = yes }
					}
					destroy_settlement = THIS
				}
			}
			if = {
				limit = { NOT = { num_of_empty_holdings = 1 } }
				random_province_holding = {
					limit = { 
						is_capital = no 
						has_holder = yes
					}
					destroy_settlement = THIS
				}
			}
		}
		#Any remaining holdings are converted into ruins
		county = {
			any_de_jure_vassal_title = {
				limit = { 
					NOT = { holding_type = nomad } 
					has_holder = yes
				}
				location = { set_province_flag = ca_colony_3 }
				if = {
					limit = { holding_type = city }
					add_building = ct_sub_barony_ruin
				}
				if = {
					limit = { holding_type = castle }
					add_building = ca_sub_barony_ruin
				}
				create_character = {
					name = ""
					religion="ruin_rel"
					culture="ruin"	
					dynasty=none
					attributes = {
						martial = 0
						diplomacy = 0
						intrigue = 0
						stewardship = 0
						learning = 0
					}
					trait = ruin
				}
				new_character = {
					gain_title = PREV
					add_trait = ruin
					set_defacto_liege = THIS
					recalc_succession = yes
				}
			}
		}
	}
	hidden_tooltip = {
		remove_province_modifier = alchemist_guild
		remove_province_modifier = wildfire_1
		remove_province_modifier = wildfire_2
		remove_province_modifier = wildfire_3
		remove_province_modifier = wildfire_4
		remove_province_modifier = wildfire_5
		county = { #remove buildings
			any_de_jure_vassal_title = {
				limit = { has_holder = yes }
				remove_building = ca_colony_1
				remove_building = ct_colony_1
				remove_building = ca_colony_2
				remove_building = ct_colony_2
				remove_building = ca_colony_3
				remove_building = ct_colony_3
				remove_building = ca_colony_4
				remove_building = ct_colony_4
				remove_building = ca_colony_5
				remove_building = ct_colony_5
				remove_building = ca_colony_6
				remove_building = ct_colony_6
				
				remove_building = ca_asoiaf_slavepit_1
				remove_building = ct_asoiaf_slavepit_1
				remove_building = tp_asoiaf_slavepit_1	
				remove_building = no_asoiaf_slavepit_1

				remove_building = ca_asoiaf_unsullied_1
				remove_building = ct_asoiaf_unsullied_1
				remove_building = fp_asoiaf_unsullied_1
				remove_building = ca_asoiaf_unsullied_cent_1
				remove_building = ct_asoiaf_unsullied_cent_1
				remove_building = fp_asoiaf_unsullied_cent_1
			}	
		}
		owner = {  #end all ongoing wars for this province
			if = {
				limit = { culture_group = unoccupied_group }
				any_war = {
					if = {
						limit = { 
							NOT = { using_cb = colonisation }
							OR = {
								attacker = { character = PREVPREV }
								defender = { character = PREVPREV }
							}	
						}
						end_war = invalid
					}	
				}	
			}
		}
	}	
}
province_andal_culture_effect = {
	if = {
		limit = { region = world_north }
		culture = northman_andal
	}
	else_if = {
		limit = { region = world_riverlands }
		culture = riverlander
	}
	else_if = {
		limit = { region = world_westerlands }
		culture = westerman
	}
	else_if = {
		limit = { region = world_vale }
		if = {
			limit = { duchy = { title = d_the_sisters } }
			culture = sisterman
		}	
		else = {
			culture = valeman
		}	
	}
	else_if = {
		limit = { region = world_stormlands }
		culture = stormlander
	}
	else_if = {
		limit = { region = world_reach }
		culture = reachman
	}
	else_if = {
		limit = { region = world_dorne }
		culture = dornish_andal
	}
	else_if = {
		limit = { region = world_iron_isles }
		culture = ironborn
	}
	else_if = {
		limit = { region = world_crownlands }
		if = {
			limit = { region = world_crackclaw_point }
			culture = crackclawmen
		}
		else_if = {
			limit = {
				kingdom = { title = k_reach }
			}
			culture = reachman
		}
		else_if = {
			limit = {
				kingdom = { title = k_westerlands }
			}
			culture = westerman
		}
		else_if = {
			limit = {
				kingdom = { title = k_riverlands }
			}
			culture = riverlander
		}
		else_if = {
			limit = {
				kingdom = { title = k_stormlands }
			}
			culture = stormlander
		}
		else_if = {
			limit = {
				duchy = {
					OR = {
						title = d_duskendale
						title = d_blackwater_rush
						title = d_rosby
						title = d_stokeworth
						title = d_hayford
					}
				}
			}
			culture = riverlander
		}
		else_if = {
			limit = {
				duchy = {
					OR = {
						title = d_kingswood
						title = d_kings_landing
						title = d_masseys_hook
					}
				}
			}
			culture = stormlander
		}		
	}
	culture_scope = { 
		if = {
			limit = { check_variable = { which = defunct value = 1 } }
			set_variable = { which = defunct value = 0 } 
		}
	}
}
clr_mega_war_variables_and_flags_effect = {
	remove_trait = rebel_leader
	clr_character_flag = inherit_war
	clr_character_flag = supporting_king 
	clr_character_flag = neutral
	clr_character_flag = against_king 
	clr_character_flag = against_liege
	clr_character_flag = rebel_leader
	clr_character_flag = mega_war_decision_cooldown
	clr_character_flag = post_civil_war_wars
	
	clr_character_flag = join_independance_asked
	clr_character_flag = no_kingship
	any_opinion_modifier_target = {
		reverse_remove_opinion = { who = PREV modifier = opinion_with_rebel_leader }		
		reverse_remove_opinion = { who = PREV modifier = opinion_with_king }	
		reverse_remove_opinion = { who = PREV modifier = opinion_de_facto_liege }				
	}
	any_demesne_title = {
		limit = {
			OR = {
				tier = COUNT
				tier = DUKE
			}
		}
		set_variable = { which = "de_facto_kingdom" value = 0 }
	}
	any_demesne_title = {
		limit = {
			NOT = { tier = EMPEROR }
			NOT = { tier=  BARON }
		}
		set_variable = { which = "de_facto_empire" value = 0 }
	}
	any_realm_lord = {
		limit = { higher_tier_than = BARON }
		remove_trait = rebel_leader
		clr_character_flag = inherit_war
		clr_character_flag = supporting_king 
		clr_character_flag = neutral
		clr_character_flag = against_king 
		clr_character_flag = against_liege
		clr_character_flag = rebel_leader
		clr_character_flag = mega_war_decision_cooldown
		clr_character_flag = post_civil_war_wars
		any_demesne_title = {
			limit = {
				OR = {
					tier = COUNT
					tier = DUKE
				}
			}
			set_variable = { which = "de_facto_kingdom" value = 0 }
		}
		any_demesne_title = {
			limit = {
				NOT = { tier = EMPEROR }
				NOT = { tier=  BARON }
			}
			set_variable = { which = "de_facto_empire" value = 0 }
		}
	}
}
moon_tea_effects = {
	random_list = { 
		25 = { 
			modifier = {
				factor = 0.25
				trait = ruthless
			}
			modifier = {
				factor = 0.25
				trait = cruel
			}
			modifier = {
				factor = 3
				trait = kind
			}
			modifier = {
				factor = 3
				trait = honorable
			}
			character_event = { id = HFP.20064 days = 35 } #Mother becomes depressed/insane.
		} 
		25 = { 
			modifier = {
				factor = 0.5
				intrigue = 14
			}
			modifier = {
				factor = 0.5
				intrigue = 10
			}
			modifier = {
				factor = 1.5
				NOT = { intrigue = 6 }
			}
			modifier = {
				factor = 1.5
				NOT = { intrigue = 2 }
			}
			character_event = { id = HFP.20065 days = 35 } #Mother accidentally reveals the deed.
		} 
		25 = { character_event = { id = HFP.20066 days = 35 } } #Mother permanently loses fertility.
		250 = {  } #Nothing happens.
	}
}
sacrifice_piety_effect = {
	if = {
		limit = {
			ROOT = {
				has_sacrifice_religion_trigger = yes
			}	
		}
		if = { #A foreign religious head is also quite good.
			limit = {
				NOT = { religion = ROOT }
				controls_religion = yes
			}
			ROOT = { change_variable = { which = burned_hearts_points value = 2 } }
		}
		if = { #A foreign emperor is also well accepted.
			limit = {
				NOT = { religion = ROOT } 
				higher_tier_than = KING
			}
			ROOT = { change_variable = { which = burned_hearts_points value = 2 } }
		}
		ROOT = { bloodthirsty_tiered_traits_effect = yes }
	}
	if = {
		limit = {
			tier = EMPEROR
		}
		ROOT = { piety = 150 }
	}
	else_if = {
		limit = {
			OR = {
				tier = KING
				father_even_if_dead = { tier = EMPEROR }
				mother_even_if_dead = { tier = EMPEROR  }
				mother_even_if_dead = { father_even_if_dead = { tier = EMPEROR  } }
				father_even_if_dead = { father_even_if_dead = { tier = EMPEROR  } }
				any_claim = { tier = EMPEROR  }
			}
		}
		ROOT = { piety = 100 }
	}
	else_if = {
		limit = {
			OR = {
				tier = DUKE
				father_even_if_dead = { tier = KING }
				mother_even_if_dead = { tier = KING }
				mother_even_if_dead = { father_even_if_dead = { tier = KING } }
				father_even_if_dead = { father_even_if_dead = { tier = KING } }
				any_claim = { tier = KING }
				has_priest_trait_trigger = yes
				can_use_dragon_abilities_trigger = yes
				trait = kingsguard
			}
		}
		ROOT = { piety = 50 }
	}
	else_if = {
		limit = {
			OR = {
				tier = COUNT
				father_even_if_dead = { tier = DUKE }
				mother_even_if_dead = { tier = DUKE }
				mother_even_if_dead = { father_even_if_dead = { tier = DUKE } }
				father_even_if_dead = { father_even_if_dead = { tier = DUKE } }
				any_claim = { tier = DUKE }
			}
		}
		ROOT = { piety = 30 }
	}
	else_if = {
		limit = {
			OR = {
				tier = BARON
				father_even_if_dead = { tier = COUNT }
				mother_even_if_dead = { tier = COUNT }
				mother_even_if_dead = { father_even_if_dead = { tier = COUNT } }
				father_even_if_dead = { father_even_if_dead = { tier = COUNT } }
				any_claim = { tier = COUNT }
			}
		}
		ROOT = { piety = 20 }
	}
	else = {
		ROOT = { piety = 10 }
	}
}
calculate_loan_repayable_effect = {
	#Round to down to integer for the player
	if = {
		limit = { ai = no }
		round_loan_to_integer_effect = yes
	}	
	
	set_variable = { which = loan_interest_payable which = loan_amount }
	multiply_variable = { which = loan_interest_payable which = loan_interest }
	
	set_variable = { which = loan_total_repayable which = loan_amount }
	change_variable = { which = loan_total_repayable which = loan_interest_payable }
	
	set_variable = { which = loan_total_repayable_negative which = loan_total_repayable }
	multiply_variable = { which = loan_total_repayable_negative value = -1 }
	
	set_variable = { which = loan_interest_payable_negative which = loan_interest_payable }
	multiply_variable = { which = loan_interest_payable_negative value = -1 }
}
clear_loan_flags_and_variables_effect = {
	clr_character_flag = loan_taken	
	clr_character_flag = loan_bank_minor	
	clr_character_flag = imprisoned_bank_envoy	
	set_variable = { which = loan_amount value = 0 }
	set_variable = { which = loan_interest value = 0 }
	set_variable = { which = loan_interest_payable value = 0 }
	set_variable = { which = loan_interest_payable_negative value = 0 }
	set_variable = { which = loan_total_repayable value = 0 }
	set_variable = { which = loan_total_repayable_negative value = 0 }	
	remove_character_modifier = loan_timer
	clr_character_flag = loan_default
	clear_persistent_event_target = loan_bank	
	clear_persistent_event_target = minor_bank_location	
	set_variable = { which = cash_reserve value = 0 }
	set_variable = { which = outstanding_loans value = 0 }
	set_variable = { which = loan_profits value = 0 }
	set_variable = { which = loan_losses value = 0 }
}
round_loan_to_integer_effect = {
	#Formula: Current Loan Amount = x, New Loan Amount = y
	# y = x - ((1000x mod 1000)/1000)
	set_variable = { which = loan_amount_rounded which = loan_amount }
	multiply_variable = { which = loan_amount_rounded value = 1000 }
	modulo_variable = { which = loan_amount_rounded value = 1000 }
	divide_variable = { which = loan_amount_rounded value = 1000 }
	subtract_variable = { which = loan_amount which = loan_amount_rounded }
	
	set_variable = { which = loan_amount_rounded value = 0 }
}
check_new_sword_heirloom_effect = {
	if = {
		limit = { 
			artifact_type = ice 
		}
		if = {
			limit = { PREV = { NOT = { dynasty = 59 } } }
			random_character = {
				limit = { 
					dynasty = 59
					dynasty_head = { character = PREV }
				} 
				save_event_target_as = heirloom_holder
			}	
		}	
		if = {
			limit = { PREV = { NOT = { dynasty = 1559 } } } #stark-targ
			random_character = {
				limit = { 
					dynasty = 1559
					dynasty_head = { character = PREV }
				} 
				save_event_target_as = heirloom_holder_2
			}	
		}
	}
	else_if = {
		limit = { 
			OR = {
				artifact_type = longclaw_snow
				artifact_type = longclaw
			}
			PREV = { NOT = { dynasty = 102 } }
		}
		random_character = {
			limit = { 
				dynasty = 102 #mormont
				dynasty_head = { character = PREV }
			} 
			save_event_target_as = heirloom_holder
		}	
	}
	else_if = {
		limit = { 
			artifact_type = blackfyre 
		}
		if = {
			limit = { PREV = { NOT = { dynasty = 496 } } }
			random_character = {
				limit = { 
					dynasty = 496
					dynasty_head = { character = PREV }
				} 
				save_event_target_as = heirloom_holder
			}	
		}	
		if = {
			limit = { PREV = { NOT = { dynasty = 57 } } }
			random_character = {
				limit = { 
					dynasty = 57
					dynasty_head = { character = PREV }
				} 
				save_event_target_as = heirloom_holder_2
			}	
		}	
		if = {
			limit = { PREV = { NOT = { dynasty = 1559 } } } #stark-targ
			random_character = {
				limit = { 
					dynasty = 1559
					dynasty_head = { character = PREV }
				} 
				save_event_target_as = heirloom_holder_3
			}	
		}
	}
	else_if = {
		limit = { 
			artifact_type = darksister 
		}
		if = {
			limit = { PREV = { NOT = { dynasty = 496 } } }
			random_character = {
				limit = { 
					dynasty = 496
					dynasty_head = { character = PREV }
				} 
				save_event_target_as = heirloom_holder
			}	
		}	
		if = {
			limit = { PREV = { NOT = { dynasty = 1559 } } } #stark-targ
			random_character = {
				limit = { 
					dynasty = 1559
					dynasty_head = { character = PREV }
				} 
				save_event_target_as = heirloom_holder_2
			}	
		}
	}
	else_if = {
		limit = { 
			artifact_type = brightroar 
			PREV = { NOT = { dynasty = 190 } }
		}
		random_character = {
			limit = { 
				dynasty = 190
				dynasty_head = { character = PREV }
			} 
			save_event_target_as = heirloom_holder
		}	
	}
	else_if = {
		limit = { 
			OR = {
				artifact_type = widowswail
				artifact_type = oathkeeper
			}
		}
		if = {
			limit = { PREV = { NOT = { dynasty = 190 } } }
			random_character = {
				limit = { 
					dynasty = 190
					dynasty_head = { character = PREV }
				} 
				save_event_target_as = heirloom_holder
			}	
		}	
		if = {
			limit = { PREV = { NOT = { dynasty = 59 } } }
			random_character = {
				limit = { 
					dynasty = 59
					dynasty_head = { character = PREV }
				} 
				save_event_target_as = heirloom_holder_2
			}	
		}	
		if = {
			limit = { PREV = { NOT = { dynasty = 1559 } } } #stark-targ
			random_character = {
				limit = { 
					dynasty = 1559
					dynasty_head = { character = PREV }
				} 
				save_event_target_as = heirloom_holder_3
			}	
		}
	}
	else_if = {
		limit = { 
			artifact_type = heartsbane 
			PREV = { NOT = { dynasty = 296 } }
		}
		random_character = {
			limit = { 
				dynasty = 296
				dynasty_head = { character = PREV }
			} 
			save_event_target_as = heirloom_holder
		}	
	}
	else_if = {
		limit = {
			artifact_type = nightfall 
			PREV = { NOT = { dynasty = 122 } }
		}
		random_character = {
			limit = { 
				dynasty = 122
				dynasty_head = { character = PREV }
			} 
			save_event_target_as = heirloom_holder
		}	
	}
	else_if = {
		limit = { 
			artifact_type = ladyforlorn 
			PREV = { NOT = { dynasty = 176 } }
		}
		random_character = {
			limit = { 
				dynasty = 176
				dynasty_head = { character = PREV }
			} 
			save_event_target_as = heirloom_holder
		}	
	}
	else_if = {
		limit = { artifact_type = redrain }
		if = {
			limit = { PREV = { NOT = { dynasty = 121 } } }
			random_character = {
				limit = { 
					dynasty = 121
					dynasty_head = { character = PREV }
				} 
				save_event_target_as = heirloom_holder
			}	
		}	
		if = {
			limit = { PREV = { NOT = { dynasty = 197 } } }
			random_character = {
				limit = { 
					dynasty = 197
					dynasty_head = { character = PREV }
				} 
				save_event_target_as = heirloom_holder_2
			}	
		}		
	}
	else_if = {
		limit = { 
			artifact_type = crabspincer 
			PREV = { NOT = { dynasty = 50 } }
		}
		random_character = {
			limit = { 
				dynasty = 50
				dynasty_head = { character = PREV }
			} 
			save_event_target_as = heirloom_holder
		}	
	}
	else_if = {
		limit = { 
			artifact_type = vigilance
			PREV = { NOT = { dynasty = 285 } }
		}
		random_character = {
			limit = { 
				dynasty = 285
				dynasty_head = { character = PREV }
			} 
			save_event_target_as = heirloom_holder
		}	
	}
	else_if = {
		limit = { 
			artifact_type = orphan_maker
			PREV = { NOT = { dynasty = 247 } }
		}
		random_character = {
			limit = { 
				dynasty = 247
				dynasty_head = { character = PREV }
			} 
			save_event_target_as = heirloom_holder
		}	
	}
	else_if = {
		limit = { 
			artifact_type = truth
			PREV = { NOT = { dynasty = 55999 } }
		}
		random_character = {
			limit = { 
				dynasty = 55999
				dynasty_head = { character = PREV }
			} 
			save_event_target_as = heirloom_holder
		}	
	}
	else_if = {
		limit = { 
			artifact_type = lamentation
			PREV = { NOT = { dynasty = 187 } }
		}
		random_character = {
			limit = { 
				dynasty = 187
				dynasty_head = { character = PREV }
			} 
			save_event_target_as = heirloom_holder
		}	
	}
	else_if = {
		limit = { 
			artifact_type = poison 
			PREV = { NOT = { dynasty = 982375 } }
		}
		random_character = {
			limit = { 
				dynasty = 982375
				dynasty_head = { character = PREV }
			} 
			save_event_target_as = heirloom_holder
		}	
	}
	else_if = {
		limit = { 
			artifact_type = seafoam 
			PREV = { NOT = { dynasty = 52 } }
		}
		random_character = {
			limit = { 
				dynasty = 52
				dynasty_head = { character = PREV }
			} 
			save_event_target_as = heirloom_holder
		}	
	}
	else_if = {
		limit = { 
			artifact_type = dawn
			PREV = { NOT = { dynasty = 16 } }
		}
		random_character = {
			limit = { 
				dynasty = 16
				dynasty_head = { character = PREV }
			} 
			save_event_target_as = heirloom_holder
		}	
	}
	if = {
		limit = { event_target:heirloom_holder = { always = yes } }
		set_artifact_flag = heirloom_@event_target:heirloom_holder
		transfer_artifact = { from = PREV to = event_target:heirloom_holder }
		transfer_artifact = { from = event_target:heirloom_holder to = PREV }
	}	
	if = {
		limit = { event_target:heirloom_holder_2 = { always = yes } }
		set_artifact_flag = heirloom_@event_target:heirloom_holder_2
		transfer_artifact = { from = PREV to = event_target:heirloom_holder_2 }
		transfer_artifact = { from = event_target:heirloom_holder_2 to = PREV }
	}
	if = {
		limit = { event_target:heirloom_holder_3 = { always = yes } }
		set_artifact_flag = heirloom_@event_target:heirloom_holder_2
		transfer_artifact = { from = PREV to = event_target:heirloom_holder_3 }
		transfer_artifact = { from = event_target:heirloom_holder_3 to = PREV }
	}
}
get_random_sword_name_effect = {
	if = {
		limit = { 
			owner = { ai = no } 
			NOT = { has_artifact_flag = suggesting_name }
		}
		prompt_name = {
			player = ROOT
			type = NAME_SWORD_MESSAGE
		}
	}
	else = {
		hidden_tooltip = {
			clear_event_target = owners_dragon
			owner = {
				random_friend = { #so it can be named after the owner's dragon
					limit = { trait = dragon }
					save_event_target_as = owners_dragon
				}
			}
		}	
		if = { #Ai dothraki valyrian steel reforge into arakh
			limit = { 
				artifact_type = valyrian_steel
				owner = { culture = dothraki ai = yes } 
			}
			set_description = valyrian_steel_arakh_desc
			set_picture = GFX_vs_arakh
			clr_artifact_flag = sword
			set_artifact_flag = arakh
		}
		set_name = [This.GetSwordName]
	}
	set_artifact_flag = named_sword #so name will be used in custom localisation
}
poet_trait_chance_effect = {
	hidden_tooltip = {
		random = {
			chance = 20
			add_character_modifier = { name = has_written_poem duration = 30 }
			character_event = { id = 200006 days = 5 }
		}
	}
}
hunter_trait_chance_effect = {
	hidden_tooltip = {
		random = {
			chance = 20
			character_event = { id = 200000 days = 5 }
		}
	}
}
falconer_trait_chance_effect = {
	hidden_tooltip = {
		random = {
			chance = 20
			character_event = { id = 200001 days = 5 }
		}
	}
}
scholar_trait_chance_effect = {
	hidden_tooltip = {
		random = {
			chance = 20
			character_event = { id = 200002 days = 5 }
		}
	}
}
mystic_trait_chance_effect = {
	hidden_tooltip = {
		random = {
			chance = 20
			character_event = { id = 200003 days = 5 }
		}
	}
}
impaler_trait_chance_effect = {
	hidden_tooltip = {
		random = {
			chance = 10
			character_event = { id = 200004 days = 5 }
		}
	}
}
gardener_trait_chance_effect = {
	hidden_tooltip = {
		random = {
			chance = 20
			character_event = { id = 200005 days = 5 }
		}
	}
}
hedonist_trait_chance_effect = {
	hidden_tooltip = {
		random = {
			chance = 10
			character_event = { id = 200008 days = 5 }
		}
	}
}
duelist_trait_chance_effect = {
	hidden_tooltip = {
		random = {
			chance = 20
			character_event = { id = 200009 days = 5 }
		}
	}
}
cultural_congenital_trait_chance_effect = {
	## Brindle Men big-boned half men
	if = {
		limit = {
			graphical_culture = brindlegfx
			NOR = { 
				trait = ugly
				trait = strong
				trait = tall
				trait = slow
				trait = imbecile
			}
		}
		random_list = {
			40 = {
				add_trait = strong
				remove_trait = weak
			}
			20 = {
				add_trait = tall
				remove_trait = dwarf
			}
			20 = {
				add_trait = ugly
				remove_trait = fair
			}
			15 = {
				add_trait = slow
				remove_trait = imbecile
				remove_trait = quick
				remove_trait = genius
			}
			5 = {
				add_trait = imbecile
				remove_trait = slow
				remove_trait = quick
				remove_trait = genius
			}
		}
	}	
	##Lengi all high chance of being tall
	else_if = {
		limit = {
			culture = lengi
			NOT = { trait = tall }
			NOT = { trait = dwarf }
			OR = {
				graphical_culture = turkishgfx
				graphical_culture = naathigfx
			}
		}
		random_list = {
			75 = { add_trait = tall }
			25 = { set_character_flag = no_tallness }
		}
	}	
	#Sarnori chance of being tall
	else_if = {
		limit = {
			graphical_culture = sarnorigfx
			NOT = { trait = tall }
			NOT = { trait = dwarf }
		}
		random = {
			chance = 20
			add_trait = tall
		}
	}	
	##Naathi chance of being quick/fair
	else_if = {
		limit = {
			culture = naathi
			OR = {
				graphical_culture = africangfx
				graphical_culture = naathigfx
			}
		}
		if = {
			limit = {
				NOT = { trait = genius }
				NOT = { trait = quick }
				NOT = { trait = slow }
				NOT = { trait = imbecile }
				NOT = { trait = inbred }
			}
			random_list = {
				1 = { add_trait = genius }
				9 = { add_trait = quick }
				89 = {  }
			}
		}
		if = { 	
			limit = {	
				NOT = { trait = ugly }
				NOT = { has_fair_trait_trigger = yes }
			}
			random = {
				chance = 20
				add_trait = fair
			}
		}
	}
	#High Valyrian
	else_if = {
		limit = {
			graphical_culture = valyriangfx
		}
		if = { 	
			limit = {	
				NOT = { trait = ugly }
				NOT = { has_fair_trait_trigger = yes }
			}
			random = {
				chance = 10
				modifier = {
					factor = 2
					culture = high_valyrian
				}
				add_trait = fair
			}
		}
		remove_trait = inbred
	}	
	#Lysene
	else_if = {
		limit = {
			graphical_culture = lysenegfx
		}
		if = { 	
			limit = {	
				NOT = { trait = ugly }
				NOT = { has_fair_trait_trigger = yes }
			}
			random = {
				chance = 20
				add_trait = fair
			}
		}
	}
	## Ibbenese
	else_if = {
		limit = {
			OR = {
				graphical_culture = celticgfx
				graphical_culture = ibbenesegfx
			}	
		}
		if = { 	
			limit = {	
				NOT = { trait = ugly }
				NOT = { has_fair_trait_trigger = yes }
			}
			random = {
				chance = 15
				add_trait = ugly
			}
		}
		if = { 	
			limit = {	
				NOT = { trait = strong }
				NOT = { trait = weak }
			}
			random = {
				chance = 20
				add_trait = strong
			}
		}
		if = { 	
			limit = {	
				NOT = { trait = tall }
				NOT = { trait = dwarf }
			}
			random = {
				chance = 10
				add_trait = dwarf
			}
		}
	}
	#  Citizens of Mantarys become deformed
	else_if = {
		limit = {
			culture = mantaryan
			OR = {
				location = { duchy = { title = d_mantarys } } 
				capital_scope = { duchy = { title = d_mantarys } } 
				AND = {
					is_ruler = no
					liege = { capital_scope = { duchy = { title = d_mantarys } } }
				}
			}
		}
		random_list = {
			5 = {
				add_trait = lunatic	
			}
			5 = {
				add_trait = lunatic
				add_trait = hunchback
			}
			5 = {
				add_trait = lunatic
				add_trait = ugly
				add_trait = hunchback
				add_trait = deceitful
			}
			5 = {
				add_trait = paranoid
	
			}
			5 = {
				add_trait = lunatic
				add_trait = possessed
				add_trait = hunchback	
			}
			5 = {
				if = {
					limit = {
						NOT = {
							has_dlc = "Reapers"
						}
					}
					add_trait = ill
				}
				if = {
					limit = {
						has_dlc = "Reapers"
					}
					add_symptom_effect = yes
				}
	
			}
			5 = {
				add_trait = ugly
				add_trait = clubfooted
				add_trait = hunchback
			}
			5 = {
				add_trait = ugly
				add_trait = clubfooted
				add_trait = hunchback
				add_trait = dwarf	
			}
			5 = {
				add_trait = deceitful
				add_trait = paranoid
				add_trait = dwarf	
			}
			5 = {
				add_trait = cruel
				add_trait = ugly
				if = {
					limit = {
						NOT = {
							has_dlc = "Reapers"
						}
					}
					add_trait = ill
				}
				if = {
					limit = {
						has_dlc = "Reapers"
					}
					add_symptom_effect = yes
				}
			}
			5 = {
				add_trait = hunchback
	
			}
			5 = {
				add_trait = ugly
	
			}
			5 = {
				add_trait = dwarf
	
			}
			5 = {
				add_trait = clubfooted
				add_trait = cruel
				add_trait = hunchback	
			}
			5 = {
				add_trait = cruel
				add_trait = hunchback	
			}
			5 = {
				add_maimed_trait_effect = yes
				add_trait = cruel
				add_trait = hunchback	
			}
			5 = {
				add_trait = clubfooted
	
			}
			5 = {
				add_trait = clubfooted
				add_trait = harelip	
			}
			5 = {
				add_trait = harelip	
	
			}
			5 = {
				add_trait = infirm
	
			}
		}
	}
}
check_for_defunct_culture_effect = { #used when an event generates a character of random culture
	if = {
		limit = { culture_scope = { is_variable_equal = { which = defunct value = 1 } } }
		if = {
			limit = { culture = old_ironborn }
			culture = ironborn
		}
		else_if = {
			limit = { culture = ironborn }
			culture = old_ironborn
		}
		else_if = {
			limit = { culture = old_first_man }
			culture = northman
		}
		else_if = {
			limit = { culture_group = first_men	}
			culture = old_first_man
		}
		else_if = {
			limit = { 
				culture = dornish_andal 
				stone_dornish = { NOT = { is_variable_equal = { which = defunct value = 1 } } }
			}
			culture = stone_dornish
			set_graphical_culture = stone_dornish
		}	
		else_if = {
			limit = { 
				OR = {
					culture = northman_andal
					culture = half_southron
				}	
				northman = { NOT = { is_variable_equal = { which = defunct value = 1 } } }
			}
			culture = northman
			set_graphical_culture = northman
		}	
		else_if = {
			limit = { 
				culture = crownlander
				riverlander = { NOT = { is_variable_equal = { which = defunct value = 1 } } }
			}
			culture = riverlander
		}	
		else_if = {
			limit = { culture_group = andal }
			random_list = {
				50 = {
					trigger = {
						old_first_man = { NOT = { is_variable_equal = { which = defunct value = 1 } } }
					}
					culture = old_first_man
					set_graphical_culture = old_first_man
				}
				50 = {
					culture = old_andal
				}
			}
			
		}		
		else_if = {
			limit = { culture_group = dornish }
			if = {
				limit = { dornish_andal = { NOT = { is_variable_equal = { which = defunct value = 1 } } } }
				culture = dornish_andal
				set_graphical_culture = dornish_andal
			}
			else = {
				culture = old_first_man
				set_graphical_culture = old_first_man
			}
		}
		else = {
			location = { save_event_target_as = new_culture }
			culture = event_target:new_culture
			set_graphical_culture = event_target:new_culture
		}
	}
}
add_random_maester_link_effect = {
	random_list = {
		10 = {
			trigger = {			
				OR = {
					NOT = { any_artifact = {	artifact_type = black_iron_link count = 2 } }
					AND = {
						has_character_flag = specialisation_ravenry
						NOT = { any_artifact = {	artifact_type = black_iron_link count = 3 } }
					}	
				}
			}
			modifier = {
				factor = 2
				trait = shy
			}
			modifier = {
				factor = 3
				has_character_flag = specialisation_ravenry
			}
			add_artifact = black_iron_link
			new_artifact = { save_event_target_as = new_maester_link } #so it can be referred to later
		}
		10 = {
			trigger = {			
				OR = {
					NOT = { any_artifact = {	artifact_type = copper_link count = 2 } }
					AND = {
						has_character_flag = specialisation_history
						NOT = { any_artifact = {	artifact_type = copper_link count = 3 } }
					}	
				}
			}
			modifier = {
				factor = 3
				has_character_flag = specialisation_history
			}
			add_artifact = copper_link
			new_artifact = { save_event_target_as = new_maester_link }
		}
		10 = {
			trigger = {			
				OR = {
					NOT = { any_artifact = {	artifact_type = bronze_link count = 2 } }
					AND = {
						has_character_flag = specialisation_astronomy
						NOT = { any_artifact = {	artifact_type = bronze_link count = 3 } }
					}	
				}
			}
			modifier = {
				factor = 3
				OR = {
					has_character_modifier = astronomical_insights_2
					has_character_modifier = astronomical_insights_3
					has_character_modifier = astronomical_insights_4
					has_character_modifier = studying_the_stars
				}
			}
			modifier = {
				factor = 3
				has_character_flag = specialisation_astronomy
			}
			add_artifact = bronze_link
			new_artifact = { save_event_target_as = new_maester_link }
		}
		10 = {
			trigger = {			
				OR = {
					NOT = { any_artifact = {	artifact_type = brass_link count = 2 } }
					AND = {
						has_character_flag = specialisation_seasons
						NOT = { any_artifact = {	artifact_type = brass_link count = 3 } }
					}	
				}
			}
			modifier = {
				factor = 2
				culture_group = first_men
			}
			modifier = {
				factor = 3
				has_character_flag = specialisation_seasons
			}
			add_artifact = brass_link
			new_artifact = { save_event_target_as = new_maester_link }
		}
		10 = {
			trigger = {			
				OR = {
					NOT = { any_artifact = {	artifact_type = electrum_link count = 2 } }
					AND = {
						has_character_flag = specialisation_geography
						NOT = { any_artifact = {	artifact_type = electrum_link count = 3 } }
					}	
				}
			}
			modifier = {
				factor = 3
				has_character_flag = specialisation_geography
			}
			add_artifact = electrum_link
			new_artifact = { save_event_target_as = new_maester_link }
		}
		10 = {
			trigger = {			
				OR = {
					NOT = { any_artifact = {	artifact_type = yellow_gold_link count = 2 } }
					AND = {
						has_character_flag = specialisation_math
						NOT = { any_artifact = {	artifact_type = yellow_gold_link count = 3 } }
					}	
				}
			}
			modifier = {
				factor = 3
				has_education_stewardship_trigger = yes
			}
			modifier = {
				factor = 3
				has_character_flag = specialisation_math
			}
			add_artifact = yellow_gold_link
			new_artifact = { save_event_target_as = new_maester_link }
		}
		10 = {
			trigger = {			
				OR = {
					NOT = { any_artifact = {	artifact_type = iron_link count = 2 } }
					AND = {
						has_character_flag = specialisation_warcraft
						NOT = { any_artifact = {	artifact_type = iron_link count = 3 } }
					}				
				}
			}
			modifier = {
				factor = 3
				has_education_martial_trigger = yes
			}
			modifier = {
				factor = 3
				has_character_flag = specialisation_warcraft
			}
			add_artifact = iron_link
			new_artifact = { save_event_target_as = new_maester_link }
		}
		10 = {
			trigger = {			
				OR = {
					NOT = { any_artifact = {	artifact_type = lead_link count = 2 } }
					AND = {
						has_character_flag = specialisation_castles
						NOT = { any_artifact = {	artifact_type = lead_link count = 3 } }
					}	
				}
			}
			modifier = {
				factor = 3
				has_character_flag = specialisation_castles
			}
			add_artifact = lead_link
			new_artifact = { save_event_target_as = new_maester_link }
		}
		10 = {
			trigger = {			
				OR = {
					NOT = { any_artifact = {	artifact_type = pewter_link count = 2 } }
					AND = {
						has_character_flag = specialisation_culture
						NOT = { any_artifact = {	artifact_type = pewter_link count = 3 } }
					}	
				}
			}
			modifier = {
				factor = 3
				trait = erudite
			}
			modifier = {
				factor = 0.25
				trait = proud
			}
			modifier = {
				factor = 3
				has_character_flag = specialisation_culture
			}
			add_artifact = pewter_link
			new_artifact = { save_event_target_as = new_maester_link }
		}
		10 = {
			trigger = {			
				OR = {
					NOT = { any_artifact = {	artifact_type = platinum_link count = 2 } }
					AND = {
						has_character_flag = specialisation_languages
						NOT = { any_artifact = {	artifact_type = platinum_link count = 3 } }
					}	
				}
			}
			modifier = {
				factor = 2
				has_education_diplomacy_trigger = yes
			}
			modifier = {
				factor = 3
				OR = {
					has_character_modifier = multilingual
					has_character_modifier = student_of_language
				}
			}
			modifier = {
				factor = 0.25
				trait = proud
			}
			modifier = {
				factor = 3
				has_character_flag = specialisation_languages
			}
			if = {
				limit = { has_character_modifier = student_of_language }
				remove_character_modifier = student_of_language
				add_character_modifier = { name = multilingual duration = -1 }
			}
			else_if = {
				limit = { 
					NOT = { trait = linguist }
					NOT = { has_character_modifier = multilingual }
				}
				add_character_modifier = { name = student_of_language duration = -1 }
			}
			add_artifact = platinum_link
			new_artifact = { save_event_target_as = new_maester_link }
		}
		10 = {
			trigger = {			
				OR = {
					NOT = { any_artifact = {	artifact_type = red_gold_link count = 2 } }
					AND = {
						has_character_flag = specialisation_law
						NOT = { any_artifact = {	artifact_type = red_gold_link count = 3 } }
					}	
				}
			}
			modifier = {
				factor = 2
				has_education_diplomacy_trigger = yes
			}
			modifier = {
				factor = 3
				has_character_flag = specialisation_law
			}
			add_artifact = red_gold_link
			new_artifact = { save_event_target_as = new_maester_link }
		}
		10 = {
			trigger = {			
				OR = {
					NOT = { any_artifact = {	artifact_type = silver_link count = 2 } }
					AND = {
						has_character_flag = specialisation_medicine
						NOT = { any_artifact = {	artifact_type = silver_link count = 3 } }
					}	
				}
			}
			modifier = {
				factor = 4
				NOT = { any_artifact = {	artifact_type = silver_link } }
			}
			modifier = {
				factor = 3
				has_character_flag = specialisation_medicine
			}
			add_artifact = silver_link
			new_artifact = { save_event_target_as = new_maester_link }
		}
		10 = {
			trigger = {			
				OR = {
					NOT = { any_artifact = {	artifact_type = steel_link count = 2 } }
					AND = {
						has_character_flag = specialisation_metallurgy
						NOT = { any_artifact = {	artifact_type = steel_link count = 3 } }
					}	
				}
			}
			modifier = {
				factor = 3
				has_character_flag = specialisation_metallurgy
			}
			add_artifact = steel_link
			new_artifact = { save_event_target_as = new_maester_link }
		}
		10 = {
			trigger = {			
				OR = {
					NOT = { any_artifact = {	artifact_type = tin_link count = 2 } }
					AND = {
						has_character_flag = specialisation_herblore
						NOT = { any_artifact = {	artifact_type = tin_link count = 3 } }
					}	
				}
			}
			modifier = {
				factor = 3
				has_character_flag = specialisation_herblore
			}
			add_artifact = tin_link
			new_artifact = { save_event_target_as = new_maester_link }
		}
		1 = {
			trigger = {			
				OR = {
					NOT = { any_artifact = {	artifact_type = valyrian_steel_link count = 2 } }
					AND = {
						has_character_flag = specialisation_mysteries
						NOT = { any_artifact = {	artifact_type = valyrian_steel_link count = 3 } }
					}	
				}
			}
			modifier = {
				factor = 0.25
			}		
			modifier = {
				factor = 10
				any_artifact = {	artifact_type = valyrian_steel_link }
			}			
			modifier = {
				factor = 3
				has_character_flag = specialisation_mysteries
			}
			modifier = {
				factor = 4
				OR = {
					trait = mystic
					trait = lunatic
					trait = paranoid
				}
			}
			modifier = {
				factor = 0
				OR = {
					trait = proud
					trait = trusting
					trait = content
				}
			}
			add_artifact = valyrian_steel_link
			new_artifact = { save_event_target_as = new_maester_link }
		}
	}
	character_event = { id = maester.5 } #check for promotion
	character_event = { id = maester.41 } #check for promotion
	character_event = { id = maester.42 days = 3 } #increase learning edu level
}
add_random_maester_specialisation_effect = {
	set_character_flag = choosing_hermetic_art
	random_list = {
		10 = {
			modifier = {
				factor = 2
				trait = shy
			}
			modifier = {
				factor = 0.05
				trait = archmaester 
				hermetics = {
					any_society_member = {
						#count = 2
						society_rank == 4
						has_character_flag = specialisation_ravenry
						NOT = { has_character_flag = grandmaester }
					}
				}
			}
			add_trait = raven
			set_character_flag = specialisation_ravenry
			add_artifact = black_iron_link
			add_artifact = black_iron_link
			if = {
				limit = { 
					OR = {
						trait = archmaester 
						trait = mastermind_theologian
					}	
				}
				add_artifact = black_iron_link
			}	
		}
		10 = {
			modifier = {
				factor = 0.05
				trait = archmaester 
				hermetics = {
					any_society_member = {
						#count = 2
						society_rank == 4
						has_character_flag = specialisation_history
						NOT = { has_character_flag = grandmaester }
					}
				}
			}
			add_trait = scholar
			set_character_flag = specialisation_history
			add_artifact = copper_link
			add_artifact = copper_link
			if = {
				limit = { 
					OR = {
						trait = archmaester 
						trait = mastermind_theologian
					}	
				}
				add_artifact = copper_link
			}	
		}
		10 = {
			modifier = {
				factor = 0.05
				trait = archmaester 
				hermetics = {
					any_society_member = {
						#count = 2
						society_rank == 4
						has_character_flag = specialisation_astronomy
						NOT = { has_character_flag = grandmaester }
					}
				}
			}
			add_trait = astronomer
			set_character_flag = specialisation_astronomy
			add_artifact = bronze_link
			add_artifact = bronze_link
			if = {
				limit = { 
					OR = {
						trait = archmaester 
						trait = mastermind_theologian
					}	
				}
				add_artifact = bronze_link
			}	
		}
		10 = {
			modifier = {
				factor = 0.05
				trait = archmaester 
				hermetics = {
					any_society_member = {
						#count = 2
						society_rank == 4
						has_character_flag = specialisation_seasons
						NOT = { has_character_flag = grandmaester }
					}
				}
			}
			modifier = {
				factor = 2
				culture_group = first_men
			}
			add_trait = time_keeper
			set_character_flag = specialisation_seasons
			add_artifact = brass_link
			add_artifact = brass_link
			if = {
				limit = { 
					OR = {
						trait = archmaester 
						trait = mastermind_theologian
					}	
				}
				add_artifact = brass_link
			}	
		}
		10 = {
			modifier = {
				factor = 0.05
				trait = archmaester 
				hermetics = {
					any_society_member = {
						#count = 2
						society_rank == 4
						has_character_flag = specialisation_geography
						NOT = { has_character_flag = grandmaester }
					}
				}
			}
			add_trait = cartographer
			set_character_flag = specialisation_geography
			add_artifact = electrum_link
			add_artifact = electrum_link
			if = {
				limit = { 
					OR = {
						trait = archmaester 
						trait = mastermind_theologian
					}	
				}
				add_artifact = electrum_link
			}	
		}
		10 = {
			modifier = {
				factor = 0.05
				trait = archmaester 
				hermetics = {
					any_society_member = {
						#count = 2
						society_rank == 4
						has_character_flag = specialisation_math
						NOT = { has_character_flag = grandmaester }
					}
				}
			}
			add_trait = administrator
			set_character_flag = specialisation_math
			add_artifact = yellow_gold_link
			add_artifact = yellow_gold_link
			if = {
				limit = { 
					OR = {
						trait = archmaester 
						trait = mastermind_theologian
					}	
				}
				add_artifact = yellow_gold_link
			}	
		}
		10 = {
			modifier = {
				factor = 0.05
				trait = archmaester 
				hermetics = {
					any_society_member = {
						#count = 2
						society_rank == 4
						has_character_flag = specialisation_warcraft
						NOT = { has_character_flag = grandmaester }
					}
				}
			}
			add_trait = strategist
			set_character_flag = specialisation_warcraft
			add_artifact = iron_link
			add_artifact = iron_link
			if = {
				limit = { 
					OR = {
						trait = archmaester 
						trait = mastermind_theologian
					}	
				}
				add_artifact = iron_link
			}	
		}
		10 = {
			modifier = {
				factor = 0.05
				trait = archmaester 
				hermetics = {
					any_society_member = {
						#count = 2
						society_rank == 4
						has_character_flag = specialisation_castles
						NOT = { has_character_flag = grandmaester }
					}
				}
			}
			add_trait = architect
			set_character_flag = specialisation_castles
			add_artifact = lead_link
			add_artifact = lead_link
			if = {
				limit = { 
					OR = {
						trait = archmaester 
						trait = mastermind_theologian
					}	
				}
				add_artifact = lead_link
			}	
		}
		10 = {
			modifier = {
				factor = 0.05
				trait = archmaester 
				hermetics = {
					any_society_member = {
						#count = 2
						society_rank == 4
						has_character_flag = specialisation_culture
						NOT = { has_character_flag = grandmaester }
					}
				}
			}
			modifier = {
				factor = 3
				trait = erudite
			}
			modifier = {
				factor = 0.25
				trait = proud
			}
			add_trait = traveller
			set_character_flag = specialisation_culture
			add_artifact = pewter_link
			add_artifact = pewter_link
			if = {
				limit = { 
					OR = {
						trait = archmaester 
						trait = mastermind_theologian
					}	
				}
				add_artifact = pewter_link
			}	
		}
		10 = {
			modifier = {
				factor = 0.05
				trait = archmaester 
				hermetics = {
					any_society_member = {
						#count = 2
						society_rank == 4
						has_character_flag = specialisation_languages
						NOT = { has_character_flag = grandmaester }
					}
				}
			}
			modifier = {
				factor = 0.25
				trait = proud
			}
			hidden_tooltip = {
				remove_character_modifier = student_of_language
				remove_character_modifier = multilingual
			}
			add_trait = linguist
			set_character_flag = specialisation_languages
			add_artifact = platinum_link
			add_artifact = platinum_link
			if = {
				limit = { 
					OR = {
						trait = archmaester 
						trait = mastermind_theologian
					}	
				}
				add_artifact = platinum_link
			}	
		}
		10 = {
			modifier = {
				factor = 0.05
				trait = archmaester 
				hermetics = {
					any_society_member = {
						#count = 2
						society_rank == 4
						has_character_flag = specialisation_law
						NOT = { has_character_flag = grandmaester }
					}
				}
			}
			add_trait = justiciar
			set_character_flag = specialisation_law
			add_artifact = red_gold_link
			add_artifact = red_gold_link
			if = {
				limit = { 
					OR = {
						trait = archmaester 
						trait = mastermind_theologian
					}	
				}
				add_artifact = red_gold_link
			}	
		}
		10 = {
			modifier = {
				factor = 0.05
				trait = archmaester 
				hermetics = {
					any_society_member = {
						#count = 2
						society_rank == 4
						has_character_flag = specialisation_medicine
						NOT = { has_character_flag = grandmaester }
					}
				}
			}
			add_trait = physician
			set_character_flag = specialisation_medicine
			add_artifact = silver_link
			add_artifact = silver_link
			if = {
				limit = { 
					OR = {
						trait = archmaester 
						trait = mastermind_theologian
					}	
				}
				add_artifact = silver_link
			}	
		}
		10 = {
			modifier = {
				factor = 0.05
				trait = archmaester 
				hermetics = {
					any_society_member = {
						#count = 2
						society_rank == 4
						has_character_flag = specialisation_metallurgy
						NOT = { has_character_flag = grandmaester }
					}
				}
			}
			add_trait = metallurgist
			set_character_flag = specialisation_metallurgy
			add_artifact = steel_link
			add_artifact = steel_link
			if = {
				limit = { 
					OR = {
						trait = archmaester 
						trait = mastermind_theologian
					}	
				}
				add_artifact = steel_link
			}	
		}
		10 = {
			modifier = {
				factor = 0.05
				trait = archmaester 
				hermetics = {
					any_society_member = {
						#count = 2
						society_rank == 4
						has_character_flag = specialisation_herblore
						NOT = { has_character_flag = grandmaester }
					}
				}
			}
			add_trait = herbologist
			set_character_flag = specialisation_herblore
			add_artifact = tin_link
			add_artifact = tin_link
			if = {
				limit = { 
					OR = {
						trait = archmaester 
						trait = mastermind_theologian
					}	
				}
				add_artifact = tin_link
			}	
		}
		1 = {
			trigger = {
				NOR = {
					trait = proud
					trait = trusting
					trait = content
				}
			}
			modifier = {
				factor = 0.25
			}	
			modifier = {
				factor = 0.05
				trait = archmaester 
				hermetics = {
					any_society_member = {
						#count = 2
						society_rank == 4
						has_character_flag = specialisation_mysteries
						NOT = { has_character_flag = grandmaester }
					}
				}
			}
			modifier = {
				factor = 8
				OR = {
					trait = mystic
					trait = lunatic
					trait = paranoid
				}
			}
			add_trait = mystic
			set_character_flag = specialisation_mysteries
			add_artifact = valyrian_steel_link
			add_artifact = valyrian_steel_link
			if = {
				limit = { 
					OR = {
						trait = archmaester 
						trait = mastermind_theologian
					}	
				}
				add_artifact = valyrian_steel_link
			}	
			if = {
				limit = { trait = archmaester }
				c_the_citadel = {
					holder_scope = {
						random_artifact = {
							limit = { 
								artifact_type = glass_candle
								has_artifact_flag = citadel_owned
							}
							PREVPREVPREV = { set_character_flag = given_citadel_glass_candle }
							transfer_artifact = { from = PREV to = PREVPREVPREV }
						}
					}
				}
			}	
		}
	}
}	
commence_duel_engine_effect = { #usually only used in event duel.0  , can be used directly if combatant  event targets are pre set (in various vanilla events)
	event_target:combatant_1 = {
		set_variable = { which = duel_rounds value = 0 }
		set_dueling_weapon_effect = yes
		disallow_new_battle_events_effect = yes
	}
	event_target:combatant_2 = {
		set_variable = { which = duel_rounds value = 0 }
		set_dueling_weapon_effect = yes
		disallow_new_battle_events_effect = yes
		character_event = { id = duel.2 } # Can skip duel.1 event
	}
	log = "Duel Engine Log: [combatant_1.GetTitledName] and [combatant_2.GetTitledName] start a duel."
}
find_bank_envoy_effect = {
	clear_event_target = bank_envoy
	clear_event_target = envoys_bank
	if = {
		limit = { event_target:B_loan_bank = { always = yes } }
		event_target:B_loan_bank = { save_event_target_as = envoys_bank }
	}
	else = {
		persistent_event_target:loan_bank = { save_event_target_as = envoys_bank }
	}
	if = { #If predeccssor was killed by bank envoy, retain that envoy
		limit = { has_character_flag = predeccesor_killed_by_bank_envoy }	
		any_quester_targeting_this = {	
			limit = {
				has_quest = quest_bank_recover_debt 
				society = { ROOT = { event_target:envoys_bank = { is_society = PREVPREV } } }
			}
			save_event_target_as = bank_envoy
			clr_character_flag = predeccesor_killed_by_bank_envoy
			break = yes
		}
		event_target:minor_banker_envoy_target = {
			save_event_target_as = bank_envoy
			clr_character_flag = predeccesor_killed_by_bank_envoy
			break = yes
		}			
	}
	if = { #If player, find envoy for flavour
		limit = { 
			ai = no 
			NOT = { event_target:bank_envoy = { always = yes } }
		}		
		event_target:envoys_bank = {
			random_society_member = {
				limit = { 	
					NOT = { character = ROOT }
					prisoner = no
					is_incapable = no
					is_adult = yes
					NOT = { is_inaccessible_trigger = yes }
					#High ranks dont go around negotiating loans
					NOT = { higher_tier_than = DUKE }
					OR = {
						ROOT = { higher_tier_than = DUKE }
						NOT = { tier = DUKE }
					}
				}
				preferred_limit = {
					ROOT = { higher_tier_than = DUKE }
					OR = {
						society_rank > 2
						higher_tier_than = BARON
					}
				}
				preferred_limit = {
					ROOT = { higher_tier_than = COUNT }
					OR = {
						society_rank >= 2
						is_ruler = yes
					}
				}
				save_event_target_as = bank_envoy
			}
		}
		if = { #Minor bank
			limit = {
				NOT = { event_target:bank_envoy = { always = yes } }
				OR = {
					has_character_flag = loan_bank_minor
					has_flag = B_loan_bank_minor 
				}	
			}
			persistent_event_target:minor_bank_location = { #recorded minor bank location for consistentcy
				owner = {
					random_courtier = {
						limit = {
							can_be_minor_bank_envoy_trigger = yes
						}
						save_event_target_as = bank_envoy							
					}
				}			
			} 
			if = { #If player, find envoy for flavour
				limit = { 
					NOT = { event_target:bank_envoy = { always = yes } }
				}	
				#Find random nearby character to act as a banker
				random_playable_ruler = {
					limit = {
						is_within_diplo_range = ROOT
						NOT_mythical_creature_trigger = yes
						NOT = { trait = pirate }
						NOT = { trait = wildling }
						is_nomadic = no
						NOT = { character = ROOT }
						any_courtier = {
							can_be_minor_bank_envoy_trigger = yes
						}
					}
					preferred_limit = {
						OR = {
							is_patrician = yes
							capital_scope = { any_province_holding = { is_richer_holding = yes } }
							has_landed_title = c_oldtown
						}	
					}
					preferred_limit = {
						yearly_income = 100
					}
					capital_scope = { ROOT = { save_persistent_event_target = { name = minor_bank_location scope = PREV } } }
					random_courtier = {
						limit = {
							can_be_minor_bank_envoy_trigger = yes
						}	
						save_event_target_as = bank_envoy
					}
				}
			}	
		}
	}
	clear_event_target = envoys_bank
}
cruel_execution_trait_effect = {
	hidden_tooltip = {
		if = {
			limit = {
				has_nickname = no
				is_adult = yes
				is_incapable = no
			}
			random_list = {
				1 = {
					give_nickname = nick_the_cruel
				}
				5 = {
					give_nickname = nick_the_dragon
				}
				5 = {
					give_nickname = nick_the_monster
				}
				5 = {
					give_nickname = nick_the_tyrant
				}
				5 = {
					give_nickname = nick_the_merciless
				}
				5 = {
					give_nickname = nick_the_monstrous
				}
				5 = {
					give_nickname = nick_the_red
				}
				5 = {
					give_nickname = nick_the_brute
				}
				5 = {
					give_nickname = nick_the_grim
				}
				5 = {
					give_nickname = nick_the_woe
				}
				5 = {
					give_nickname = nick_the_savage
				}
				5 = {
					give_nickname = nick_the_twisted
				}
				5 = {
					give_nickname = nick_the_soulless
				}
				5 = {
					give_nickname = nick_the_ruthless
				}
				5 = {
					give_nickname = nick_the_butcher
				}
				5 = {
					give_nickname = nick_the_evil
				}
				5 = {
					give_nickname = nick_the_vengeful
				}
				5 = {
					give_nickname = nick_the_tormentor
				}
				5 = {
					give_nickname = nick_the_mutilator
				}
				5 = {
					give_nickname = nick_the_depraved
				}
				5 = {
					give_nickname = nick_the_dreaded
				}
				5 = {
					give_nickname = nick_the_bleeder
				}
				500 = {}
			}
		}
	}
	if = { 
		limit = { 
			NOT = { trait = cruel } 
			NOT = { trait = kind } 
			NOT = { personality_traits = 6 }
		}
		random = {
			chance = 25
			add_trait = cruel
			hidden_tooltip = { character_event = { id = 38259 } }
		}
	}
	if = {
		limit = { trait = kind }
		random = { 
			chance = 50
			remove_trait = kind
			hidden_tooltip = {
				character_event = { id = 38307 }
			}
		}
		hidden_tooltip = {
			if = { 
				limit = { 
					OR = {
						NOR = {
							trait = cruel
							trait = impaler
							trait = lunatic
						}
						is_close_relative = ROOT
					}
				}
				random_list = {
					20 = {
						add_trait = stressed
						hidden_tooltip = { character_event = { id = 38282 } }
					}
					8 = {
						add_trait = depressed
						hidden_tooltip = { character_event = { id = 38288 } }
					}
					2 = {
						add_trait = lunatic
					}
					70 = {
						#nothing
					}
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { trait = impaler }
			NOT = { lifestyle_traits = 1 }
		}
		random = {
			chance = 5
			add_trait = impaler
		}
	}
}
clear_duel_poisoner_target_effect = {
	if = {
		limit = { has_character_flag = poisoned_in_duel }
		clr_character_flag = poisoned_in_duel
		clear_persistent_event_target = poisoner
	}	
}
siege_record_buildings_effect = {
	#Record Base Value, in case these are destroyed
	if = {
		limit = { 
			OR = {
				holding_type = castle
				holding_type = city
			}
		}
		clr_title_flag = base_value_1
		clr_title_flag = base_value_2
		clr_title_flag = base_value_3
		clr_title_flag = base_value_4
		clr_title_flag = base_value_5
		clr_title_flag = base_value_6
		if = {
			limit = { base_value_6_trigger = yes }
			set_title_flag = base_value_6
		}
		if = {
			limit = { base_value_5_trigger = yes }
			set_title_flag = base_value_5
		}
		if = {
			limit = { base_value_4_trigger = yes }
			set_title_flag = base_value_4
		}
		if = {
			limit = { base_value_3_trigger = yes }
			set_title_flag = base_value_3
		}
		if = {
			limit = { base_value_2_trigger = yes }
			set_title_flag = base_value_2
		}
		if = {
			limit = { base_value_1_trigger = yes }
			set_title_flag = base_value_1
		}
	}
	#Record undestroyable buildings
	if = {
		limit = { holding_type = castle }
		if = {
			limit = { has_building = ca_wallportion }
			set_title_flag = ca_wallportion
		}
		if = {
			limit = { has_building = ca_dragonmont }
			set_title_flag = ca_dragonmont
		}
		if = {
			limit = { has_building = ca_volcanoes }
			set_title_flag = ca_volcanoes
		}
		if = {
			limit = { has_building = ca_harrenhal_ruins }
			set_title_flag = ca_harrenhal_ruins
		}
		if = {
			limit = { has_building = ca_dragon_pit }
			set_title_flag = ca_dragon_pit
		}
		
		if = {
			limit = { has_building = ca_sub_barony_ruin }
			set_title_flag = ca_sub_barony_ruin
		}
		if = {
			limit = { has_building = ca_colony_1 }
			set_title_flag = ca_colony_1
		}
		if = {
			limit = { has_building = ca_colony_2 }
			set_title_flag = ca_colony_2
		}
		if = {
			limit = { has_building = ca_colony_3 }
			set_title_flag = ca_colony_3
		}
		if = {
			limit = { has_building = ca_colony_4 }
			set_title_flag = ca_colony_4
		}
		if = {
			limit = { has_building = ca_colony_5 }
			set_title_flag = ca_colony_5
		}
		if = {
			limit = { has_building = ca_colony_6 }
			set_title_flag = ca_colony_6
		}
		
		# if = {
			# limit = { has_building = ca_kingsroad }
			# set_title_flag = ca_kingsroad
		# }
		# if = {
			# limit = { has_building = ca_river_road }
			# set_title_flag = ca_river_road
		# }
		# if = {
			# limit = { has_building = ca_goldroad }
			# set_title_flag = ca_goldroad
		# }
		# if = {
			# limit = { has_building = ca_roseroad }
			# set_title_flag = ca_roseroad
		# }
		# if = {
			# limit = { has_building = ca_oceanroad }
			# set_title_flag = ca_oceanroad
		# }
		# if = {
			# limit = { has_building = ca_high_road }
			# set_title_flag = ca_high_road
		# }
	}	
	if = {
		limit = { holding_type = city }				
		if = {
			limit = { has_building = ct_sub_barony_ruin }
			set_title_flag = ct_sub_barony_ruin
		}
		if = {
			limit = { has_building = ct_colony_1 }
			set_title_flag = ct_colony_1
		}
		if = {
			limit = { has_building = ct_colony_2 }
			set_title_flag = ct_colony_2
		}
		if = {
			limit = { has_building = ct_colony_3 }
			set_title_flag = ct_colony_3
		}
		if = {
			limit = { has_building = ct_colony_4 }
			set_title_flag = ct_colony_4
		}
		if = {
			limit = { has_building = ct_colony_5 }
			set_title_flag = ct_colony_5
		}
		if = {
			limit = { has_building = ct_colony_6 }
			set_title_flag = ct_colony_6
		}
	}	
	if = {
		limit = { holding_type = temple }
		if = {
			limit = { has_building = tp_weirwood_tree }
			set_title_flag = tp_weirwood_tree
			if = {
				limit = { has_building = tp_small_godswood }
				set_title_flag = tp_small_godswood
				if = {
					limit = { has_building = tp_godswood }
					set_title_flag = tp_godswood
					if = {
						limit = { has_building = tp_large_godswood }
						set_title_flag = tp_large_godswood
						if = {
							limit = { has_building = tp_godswood_forest }
							set_title_flag = tp_godswood_forest
						}
					}
				}
			}
		}
	}	
	if = {
		limit = { holding_type = family_palace }
		if = {
			limit = { has_building = fp_dragon_pit }
			set_title_flag = fp_dragon_pit
		}
	}	
}
repair_base_value_buildings_effect = {
	hidden_tooltip = { #make sure base value is retained
		clear_event_target = repair_base_value
		if = {
			limit = { 
				OR = {
					holding_type = castle
					holding_type = city
				}
				has_title_flag = base_value_1
			}											
			save_event_target_as = repair_base_value
			location = { province_event = { id = siege_agot.10 } }
			#increase_holding_base_value_effect = yes #this has a 'break' so subsequent event is needed							
		}	
	}
}
repair_special_buildings_effect = {
	#Rebuild undestroyable buildings
	if = {
		limit = { holding_type = castle }
		if = {
			limit = { has_title_flag = ca_wallportion }
			add_building = ca_wallportion
			clr_title_flag = ca_wallportion
		}
		if = {
			limit = { has_title_flag = ca_dragonmont }
			add_building = ca_dragonmont
			clr_title_flag = ca_dragonmont
		}
		if = {
			limit = { has_title_flag = ca_volcanoes }
			add_building = ca_volcanoes
			clr_title_flag = ca_volcanoes
		}
		if = {
			limit = { has_title_flag = ca_harrenhal_ruins }
			add_building = ca_harrenhal_ruins
			clr_title_flag = ca_harrenhal_ruins
		}
		if = {
			limit = { has_title_flag = ca_dragon_pit }
			add_building = ca_dragon_pit
			clr_title_flag = ca_dragon_pit
		}
		
		if = {
			limit = { has_title_flag = ca_sub_barony_ruin }
			add_building = ca_sub_barony_ruin
			clr_title_flag = ca_sub_barony_ruin
		}
		if = {
			limit = { has_title_flag = ca_colony_1 }
			add_building = ca_colony_1
			clr_title_flag = ca_colony_1
		}
		if = {
			limit = { has_title_flag = ca_colony_2 }
			add_building = ca_colony_2
			clr_title_flag = ca_colony_2
		}
		if = {
			limit = { has_title_flag = ca_colony_3 }
			add_building = ca_colony_3
			clr_title_flag = ca_colony_3
		}
		if = {
			limit = { has_title_flag = ca_colony_4 }
			add_building = ca_colony_4
			clr_title_flag = ca_colony_4
		}
		if = {
			limit = { has_title_flag = ca_colony_5 }
			add_building = ca_colony_5
			clr_title_flag = ca_colony_5
		}
		if = {
			limit = { has_title_flag = ca_colony_6 }
			add_building = ca_colony_6
			clr_title_flag = ca_colony_6
		}
		
		# if = {
			# limit = { has_title_flag = ca_kingsroad }
			# add_building = ca_kingsroad
			# clr_title_flag = ca_kingsroad
		# }
		# if = {
			# limit = { has_title_flag = ca_river_road }
			# add_building = ca_river_road
			# clr_title_flag = ca_river_road
		# }
		# if = {
			# limit = { has_title_flag = ca_goldroad }
			# add_building = ca_goldroad
			# clr_title_flag = ca_goldroad
		# }
		# if = {
			# limit = { has_title_flag = ca_roseroad }
			# add_building = ca_roseroad
			# clr_title_flag = ca_roseroad
		# }
		# if = {
			# limit = { has_title_flag = ca_oceanroad }
			# add_building = ca_oceanroad
			# clr_title_flag = ca_oceanroad
		# }
		# if = {
			# limit = { has_title_flag = ca_high_road }
			# add_building = ca_high_road
			# clr_title_flag = ca_high_road
		# }
	}	
	if = {
		limit = { holding_type = city }
		
		if = {
			limit = { has_title_flag = ct_sub_barony_ruin }
			add_building = ct_sub_barony_ruin
			clr_title_flag = ct_sub_barony_ruin
		}
		if = {
			limit = { has_title_flag = ct_colony_1 }
			add_building = ct_colony_1
			clr_title_flag = ct_colony_1
		}
		if = {
			limit = { has_title_flag = ct_colony_2 }
			add_building = ct_colony_2
			clr_title_flag = ct_colony_2
		}
		if = {
			limit = { has_title_flag = ct_colony_3 }
			add_building = ct_colony_3
			clr_title_flag = ct_colony_3
		}
		if = {
			limit = { has_title_flag = ct_colony_4 }
			add_building = ct_colony_4
			clr_title_flag = ct_colony_4
		}
		if = {
			limit = { has_title_flag = ct_colony_5 }
			add_building = ct_colony_5
			clr_title_flag = ct_colony_5
		}
		if = {
			limit = { has_title_flag = ct_colony_6 }
			add_building = ct_colony_6
			clr_title_flag = ct_colony_6
		}
	}	
	if = {
		limit = { holding_type = temple }
		if = {
			limit = { has_title_flag = tp_weirwood_tree }
			add_building = tp_weirwood_tree
			clr_title_flag = tp_weirwood_tree
			if = {
				limit = { has_title_flag = tp_small_godswood }
				add_building = tp_small_godswood
				clr_title_flag = tp_small_godswood
				if = {
					limit = { has_title_flag = tp_godswood }
					add_building = tp_godswood
					clr_title_flag = tp_godswood
					if = {
						limit = { has_title_flag = tp_large_godswood }
						add_building = tp_large_godswood
						clr_title_flag = tp_large_godswood
						if = {
							limit = { has_title_flag = tp_godswood_forest }
							add_building = tp_godswood_forest
							clr_title_flag = tp_godswood_forest
						}
					}
				}
			}
		}
	}	
	if = {
		limit = { holding_type = family_palace }
		if = {
			limit = { has_title_flag = fp_dragon_pit }
			add_building = fp_dragon_pit
			clr_title_flag = fp_dragon_pit
		}
	}
}
start_interregnum_effect = { #must set interregnum_heir event target first. ROOT outgoing ruler of realm starting interregnum
	#Store debts in title
	primary_title = {
		set_title_flag = interregnum_debt_title
		save_event_target_as = debt_inheritor 
	}	
	inherit_debt_effect = yes
	
	any_demesne_title = { #spouse and bastard relations gets a weak claim
		limit = {
			higher_tier_than = DUKE
			event_target:interregnum_heir = {
				trigger_if = {
					limit = { NOT = { has_character_flag = forcing_interregnum } }
					NOT = { dynasty = ROOT }
					NOT = { is_close_relative = ROOT }
				}	
			}
			NAND = {
				tier = KING
				ROOT = { tier = EMPEROR }
			}
		}	
		ROOT = { 
			any_spouse = { 
				limit = {
					is_alive = yes
					NOT = { has_claim = PREVPREV }
				}
				add_weak_claim = PREVPREV 
			} 
			any_close_relative = { 
				limit = {
					is_alive = yes
					NOT = { has_claim = PREVPREV }
					OR = {
						trait = bastard
						trait = disinherited
						trait = eunuch
					}
				}
				add_weak_claim = PREVPREV 
			} 
		}
	}
	if = {
		limit = { event_target:interregnum_heir = { NOT = { has_character_flag = forcing_interregnum } } }
		any_demesne_title = { #if heir is not in realm, change to seniority so heir becomes a random vassal
			limit = { 
				higher_tier_than = DUKE 
				event_target:interregnum_heir = { NOT = { is_liege_or_above = ROOT } }					
			}
			if = { #give the heir a claim
				limit = {
					NAND = {
						tier = KING
						ROOT = { tier = EMPEROR }
					}
				}
				event_target:interregnum_heir = { add_pressed_claim = PREV }
			}	
			succession = seniority
		}
		recalc_succession = yes
		#try and get powerful vassal as the heir
		random_vassal = {
			limit = {
				is_adult = yes
				prisoner = no
				is_incapable = no
				NOT = { is_inaccessible_trigger = yes }
				NOT = { tier = BARON }
				is_feudal = yes
				can_press_claims_trigger = yes
			}
			preferred_limit = {
				has_minor_title = title_regent
			}
			preferred_limit = {
				has_job_title = job_castellan
			}
			preferred_limit = {
				OR = {
					is_voter = yes
					is_councillor = yes
				}
				OR = {
					tier = KING
					is_married = ROOT
					relative_power = { who = ROOT power = 0.25 }
				}
			}
			preferred_limit = {
				OR = {
					is_voter = yes
					is_councillor = yes
				}
				OR = {
					tier = DUKE
					culture_group = ROOT
				}	
			}
			preferred_limit = {
				OR = {
					tier = KING
					is_married = ROOT
					relative_power = { who = ROOT power = 0.2 }
				}
			}
			preferred_limit = {
				OR = {
					is_voter = yes
					is_councillor = yes
					tier = DUKE
				}
			}
			preferred_limit = {
				culture_group = ROOT
			}
			save_event_target_as = interregnum_heir
		}			
		while = { #remove heirs until chosen heir is set
			limit = { 
				current_heir = { 
					NOT = { character = event_target:interregnum_heir }
					is_ruler = yes
					vassal_of = ROOT
					NOT = { has_character_flag = interregnum_checked }
				} 
			}
			count = 500
			current_heir = {
				set_defacto_liege = THIS
				set_character_flag = interregnum_checked
				recalc_succession = yes
				ROOT = { recalc_succession = yes }				
				set_defacto_liege = ROOT
			}
		}	
		any_vassal = { clr_character_flag = interregnum_checked }	
		current_heir = { save_event_target_as = interregnum_heir }
	}
	if = { #If heir is a vassal then proceed
		limit = { 
			event_target:interregnum_heir = { 
				OR = {
					is_liege_or_above = ROOT 
					has_character_flag = forcing_interregnum
				}	
			} 
		}
		#Mark councillors
		regent = { set_character_flag = interregnum_regent }
		job_castellan = { set_character_flag = interregnum_castellan }
		any_courtier = {
			limit = {
				is_councillor = yes
				is_voter = yes
				NOT = { has_job_title = job_castellan }
				NOT = { has_job_title = job_physician }
			}
			set_character_flag = interregnum_councillor
		}
		#Mark prisoners
		any_courtier = {
			limit = {
				prisoner = yes
				host = { character = ROOT }
			}
			set_character_flag = interregnum_prisoner
		}
		#Mark artefacts
		any_artifact = {
			set_artifact_flag = interregnum_artifact
		}
		if = { #Abdicate to character forcing interregnum
			limit = { 
				event_target:interregnum_heir = { 
					has_character_flag = forcing_interregnum
				}
			}
			current_heir = {
				ROOT = {
					any_demesne_title = {	
						limit = { tier = PREV }
						add_pressed_claim = PREVPREV
					}
				}
			}
			any_close_relative = {
				limit = { 
					is_alive = yes 
					OR = {
						is_descendant_of = ROOT
						sibling = ROOT
						is_nibling_of = ROOT
						is_aunt_uncle_of = ROOT
						is_cousin_of = ROOT
					}
				}
				if = {
					limit = {
						can_inherit_titles_trigger = yes
						OR = {
							is_descendant_of = ROOT
							sibling = ROOT
							is_nibling_of = ROOT
						}
						OR = {
							ROOT = { primary_title = { has_law = true_cognatic_succession } }
							AND = {
								is_female = no
								OR = {
									is_child_of = ROOT
									sibling = ROOT
									father_even_if_dead = { 
										OR = {
											is_child_of = ROOT 
											sibling = ROOT
										}
										OR = {
											is_alive = no 
											can_press_claims_trigger = no
										}	
									}
								}
								ROOT = { 
									primary_title = { 
										OR = {
											has_law = cognatic_succession 
											has_law = agnatic_succession 
										}	
									} 
								}							
							}
							AND = {
								is_female = yes
								OR = {
									is_child_of = ROOT
									sibling = ROOT
									mother_even_if_dead = { 
										OR = {
											is_child_of = ROOT 
											sibling = ROOT
										}
										OR = {
											is_alive = no 
											can_press_claims_trigger = no
										}	
									}
								}
								ROOT = { 
									primary_title = { 
										OR = {
											has_law = enatic_succession 
											has_law = enatic_cognatic_succession 
										}	
									} 
								}							
							}
						}
					}
					ROOT = {
						any_demesne_title = {	
							limit = { tier = PREV }
							add_pressed_claim = PREVPREV
						}
					}
				}	
				else_if = {
					limit = { can_press_claims_trigger = yes }
					ROOT = {
						any_demesne_title = {	
							limit = { tier = PREV }
							add_weak_pressed_claim = PREVPREV
						}
					}
				}
			}
			any_demesne_title = {			
				if = {
					limit = {
						higher_tier_than = DUKE
						claimed_by = event_target:interregnum_heir
					}
					event_target:interregnum_heir = { set_character_flag = interregnum_title_claimant }
				}
				usurp_title = event_target:interregnum_heir
				set_variable = { which = "lord_paramount_status" value = 2 }
			}
			add_character_modifier = { name = deposed_AGOT duration = 3650 }
			event_target:interregnum_heir = {
				clr_character_flag = called_interregnum_council
				clr_character_flag = forcing_interregnum
				set_government_type = feudal_government_LP
				character_event = { id = interregnum.1 days = 1 }
			}
		}
		else = {
			any_realm_character = { #trigger for potential split inheritances
				limit = {
					ROOT = {
						any_demesne_title = {
							higher_tier_than = DUKE
							current_heir = { character = PREVPREVPREV }
							NAND = {
								tier = KING
								ROOT = { tier = EMPEROR }
							}
						}
					}
					NOT = { dynasty = ROOT }
					NOT = { is_close_relative = ROOT }
				}	
				ROOT = {
					any_demesne_title = {
						limit = {
							current_heir = { character = PREVPREVPREV }
						}	
						set_variable = { which = "lord_paramount_status" value = 2 }

						if = {
							limit = {
								higher_tier_than = DUKE
								claimed_by = PREVPREV
							}
							PREVPREV = { set_character_flag = interregnum_title_claimant }
						}
					}
				}
				clr_character_flag = called_interregnum_council
				character_event = { id = interregnum.1 days = 1 }
			}	
		}	
	}
}
remove_all_job_titles = {
	remove_title = job_chancellor	
	remove_title = job_treasurer
	remove_title = job_marshal	
	remove_title = job_spymaster
	remove_title = job_castellan
	remove_title = job_spiritual
	remove_title = title_high_admiral
	remove_title = title_high_admiral_B
	remove_title = title_councilmember_king 
	remove_title = title_councilmember_emperor 
}
remove_all_commanders = {
	any_vassal = {
		limit = {
			has_minor_title = title_commander
		}
		remove_title = title_commander
	}
	any_courtier = {
		limit = {
			has_minor_title = title_commander
		}
		remove_title = title_commander
	}
}
add_fashionable_groomed_effect = {
	if = {
		limit = {
			OR = {
				has_dlc = "Holy Fury" 
				has_dlc = "Way of Life"
			}
		}
		add_trait = groomed
	}	
	else = {
		add_trait = fashionable
	}
}